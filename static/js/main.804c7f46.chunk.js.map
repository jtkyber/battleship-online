{"version":3,"sources":["components/ships/Ships.js","model.js","components/boards/Board.js","audioclips/ambient-waves.mp3","audioclips/lobby-theme.mp3","audioclips/ship-placement-theme.mp3","audioclips/game-theme.mp3","audioclips/button-click.mp3","audioclips/hover-sound.mp3","audioclips/hit-sound.mp3","audioclips/miss-sound.mp3","audioclips/ship-sunk.mp3","audioclips/notification.mp3","audioclips/pick-up-ship.mp3","audioclips/drop-ship.mp3","audioclips/rotate-ship.mp3","audioclips/missile-lock.mp3","audioclips/missile-launch.mp3","audioclips/incoming-missile.mp3","audio.js","components/boards/hit.gif","components/boards/UserBoard.js","components/boards/OpponentBoard.js","components/navigation/FriendRequests.js","components/navigation/notification.png","components/navigation/leaderboard.png","components/navigation/log-out.png","components/navigation/home-icon.png","components/navigation/chat-icon.png","components/navigation/Navigation.js","components/navigation/sound-icon.png","components/navigation/music-icon.png","components/navigation/friends-icon.png","components/navigation/back-arrow.png","components/boards/ChatBox.js","components/footer/Footer.js","components/boards/Game.js","components/homeBoard/HomeBoard.js","components/findMatch/FindMatch.js","components/friends/SingleFriend.js","components/friends/Friends.js","components/friends/FriendsHome.js","components/logReg/Login.js","components/logReg/Register.js","components/leaderboard/Leaderboard.js","socket/socketImport.js","App.js","reportWebVitals.js","index.js"],"names":["mouseX","mouseY","model","stored","persist","soundOn","musicOn","isMobile","test","navigator","userAgent","isIOS","storage","route","user","currentSocket","friendSocket","opponentName","unsortedFriends","findMatchInterval","checkOppStatusInterval","updatLastOnlineInterval","getOnlineFriendsInterval","search","friendRequests","userName","password","topFive","allFriends","friendFilter","friendSearch","friendsOnline","gameRoute","playerIsReady","yourTurn","chatText","inviteSent","inviteReceived","playerTurnText","showFriendsMobile","showChatMobile","audioStarted","shipIsSelected","showGameInstructions","deviceInPortrait","opponentIsReady","firstGameInstructionLoad","setRoute","action","state","input","setUser","setCurrentSocket","setFriendSocket","setOpponentName","setUnsortedFriends","setFindMatchInterval","setCheckOppStatusInterval","setUpdatLastOnlineInterval","setGetOnlineFriendsInterval","setSearch","setFriendRequests","setUserName","setPassword","setTopFive","setAllFriends","setFriendFilter","setFriendSearch","setFriendsOnline","setGameRoute","setPlayerIsReady","setYourTurn","setChatText","setInviteSent","setInviteReceived","setPlayerTurnText","setSoundOn","setMusicOn","setIsMobile","setShowFriendsMobile","setShowChatMobile","setAudioStarted","setShipIsSelected","setShowGameInstructions","setDeviceInPortrait","setOpponentIsReady","setFirstGameInstructionLoad","AssembleBoard","onSquareClicked","useStoreState","allSquares","i","j","push","row","String","fromCharCode","col","colStart","rowStart","handleSquareClick","e","parentBoard","target","parentElement","classList","contains","map","square","onClick","style","gridArea","className","id","audio","ambientWaves","Howl","src","loop","volume","lobbyTheme","shipPlacementTheme","gameTheme","buttonClick","hoverSound","mute","hitSound","missSound","shipSunkSound","notificationSound","pickUpShip","dropShip","rotateShip","missileLock","missileLaunch","incomingMissile","moving","rotating","orientation","selectedShip","selectedShipName","setManualGridLocation","Ships","onShipSelect","play","userBoard","document","querySelector","cursor","zIndex","border","parseInt","offsetWidth","offsetHeight","collisionDetection","item1","item2","d1Offset","$","offset","d1Height","outerHeight","d1Width","outerWidth","d1Top","top","d1Left","left","d2Offset","d2Height","d2Width","d2Top","d2Left","window","onclick","areaIsClear","ontouchend","x","y","shipLeft","getBoundingClientRect","shipRight","right","shipTop","shipBottom","bottom","wasShipTouched","changedTouches","clientX","clientY","positionShipOnGrid","ships","querySelectorAll","ship","oncontextmenu","onkeydown","code","preventDefault","undefined","matchTouchToSquares","squares","selectedSquare","forEach","squareLeft","squareRight","squareTop","squareBottom","type","touches","transform","userGrid","childShip","targetId","substring","indexOf","length","remove","gridColumn","gridRow","add","onmouseover","ontouchmove","UserBoard","socket","useStoreActions","actions","shipHit","useEffect","on","shot","oppShot","getElementById","incomingMissileDuration","duration","setTimeout","applyHitOrMiss","off","hit","hitSquares","matchOppShotToBoard","hitMarkerBackgroundFlash","createElement","hitElem","hitGif","shrapN","shrapNE","shrapE","shrapSE","shrapS","shrapSW","shrapW","shrapNW","append","count","countHitsOnShip","sunkShipIcon","emit","shotSquare","socketid","Board","OpponentBoard","data","clickedSquare","result","preResultDiv","appendChild","FriendRequests","updateRequests","a","navBar","fetch","username","res","ok","Error","json","requests","setProperty","split","console","log","removeRequest","friend","newRequestList","newRequestListArray","index","splice","join","method","headers","body","JSON","stringify","requestlist","res2","onRemoveRequest","addFriend","value","friendList","friendArray","friendlistOfFriends","friendSocketId","user1","friendlistOfFriendsArray","friends","includes","f","friendlist","res3","allF","response","friendname","res4","addFriendStart","Dropdown","Toggle","variant","alt","Menu","request","Navigation","onRouteChange","handleExitClick","onTouchStart","leaderboardIcon","logOutIcon","homeIcon","hash","chatIcon","ChatBox","chatBox","root","addEventListener","handleEnterBtn","message","handleReceivedMessage","removeEventListener","msgNode","textNode","nameNode","text","createTextNode","name","scrollTop","scrollHeight","key","onChange","placeholder","Footer","Game","pickUpShipInstructions","rotateShipInstructions","dropShipInstructions","clearInterval","addWin","alert","setInterval","checkIfOpponentIsOnlineAndInGame","shipContainers","score","shipContainer","childNodes","readyBtn","instructionsBtn","allShipsPlaced","innerText","opacity","HomeBoard","FindMatch","removeGuest","senderName","senderSocket","searchForMatch","stopSearching","updateSearching","match","receiverSocket","addGuest","SingleFriend","friendInGame","status","handleInvite","btn","disabled","nodeValue","sendInvite","innerHTML","acceptInvite","Friends","userFromLastFriendRequest","fetchFriends","getOnlineFriends","sortFriends","offlineSorted","offlineFriends","justAdded","onlineSorted","addFriendToOffline","olF","sort","b","toLowerCase","concat","onlineFriends","sendFriendRequest","friendAlert","friendName","friendsRequests","friendsRequestsArray","friendrequests","last","lastonline","Date","now","ingame","FriendsHome","Login","login","onSubmitLogin","Register","register","then","Leaderboard","getTopPlayers","player","wins","io","App","getAttribute","isDevicePortrait","screen","width","height","guestCleanup","handleMouseOver","updateInGameStatus","updateLastOnline","playing","stop","handleMouseDown","tagName","instructionsDiv","playHoverSound","inGame","isInGame","returnValue","loginBtn","registerBtn","logUsername","registerUsername","logPassword","registerPassword","friendRequestBtn","click","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","store","createStore","ReactDOM","render"],"mappings":"waAaIA,EACAC,E,gCC8MWC,EA5MD,CAIVC,OAAQC,YACJ,CACIC,SAAS,EACTC,SAAS,EACTC,WArBJ,iEAAiEC,KAAKC,UAAUC,WAsB5EC,QAfJ,oBAAoBH,KAAKC,UAAUC,YAiBnC,CACIE,QAAS,iBAKjBC,MAAO,QACPC,KAAM,KACNC,cAAe,KACfC,aAAc,KACdC,aAAc,GACdC,gBAAiB,GACjBC,kBAAmB,EACnBC,uBAAwB,EACxBC,wBAAyB,EACzBC,yBAA0B,EAC1BC,QAAQ,EACRC,eAAgB,GAChBC,SAAU,GACVC,SAAU,GACVC,QAAS,GACTC,WAAY,GACZC,aAAc,GACdC,aAAc,GACdC,cAAe,GACfC,UAAW,aACXC,eAAe,EACfC,UAAU,EACVC,SAAU,GACVC,YAAY,EACZC,gBAAgB,EAChBC,eAAgB,GAChBC,mBAAmB,EACnBC,gBAAgB,EAChBC,cAAc,EACdC,gBAAgB,EAChBC,sBAAsB,EACtBC,kBAAkB,EAClBC,iBAAiB,EACjBC,0BAA0B,EAK1BC,SAAUC,aAAO,SAACC,EAAOC,GACrBD,EAAMpC,MAAQqC,KAGlBC,QAASH,aAAO,SAACC,EAAOC,GACpBD,EAAMnC,KAAOoC,KAGjBE,iBAAkBJ,aAAO,SAACC,EAAOC,GAC7BD,EAAMlC,cAAgBmC,KAG1BG,gBAAiBL,aAAO,SAACC,EAAOC,GAC5BD,EAAMjC,aAAekC,KAGzBI,gBAAiBN,aAAO,SAACC,EAAOC,GAC5BD,EAAMhC,aAAeiC,KAGzBK,mBAAoBP,aAAO,SAACC,EAAOC,GAC/BD,EAAM/B,gBAAkBgC,KAG5BM,qBAAsBR,aAAO,SAACC,EAAOC,GACjCD,EAAM9B,kBAAoB+B,KAG9BO,0BAA2BT,aAAO,SAACC,EAAOC,GACtCD,EAAM7B,uBAAyB8B,KAGnCQ,2BAA4BV,aAAO,SAACC,EAAOC,GACvCD,EAAM5B,wBAA0B6B,KAGpCS,4BAA6BX,aAAO,SAACC,EAAOC,GACxCD,EAAM3B,yBAA2B4B,KAGrCU,UAAWZ,aAAO,SAACC,EAAOC,GACtBD,EAAM1B,OAAS2B,KAGnBW,kBAAmBb,aAAO,SAACC,EAAOC,GAC9BD,EAAMzB,eAAiB0B,KAG3BY,YAAad,aAAO,SAACC,EAAOC,GACxBD,EAAMxB,SAAWyB,KAGrBa,YAAaf,aAAO,SAACC,EAAOC,GACxBD,EAAMvB,SAAWwB,KAGrBc,WAAYhB,aAAO,SAACC,EAAOC,GACvBD,EAAMtB,QAAUuB,KAGpBe,cAAejB,aAAO,SAACC,EAAOC,GAC1BD,EAAMrB,WAAasB,KAGvBgB,gBAAiBlB,aAAO,SAACC,EAAOC,GAC5BD,EAAMpB,aAAeqB,KAGzBiB,gBAAiBnB,aAAO,SAACC,EAAOC,GAC5BD,EAAMnB,aAAeoB,KAGzBkB,iBAAkBpB,aAAO,SAACC,EAAOC,GAC7BD,EAAMlB,cAAgBmB,KAG1BmB,aAAcrB,aAAO,SAACC,EAAOC,GACzBD,EAAMjB,UAAYkB,KAGtBoB,iBAAkBtB,aAAO,SAACC,EAAOC,GAC7BD,EAAMhB,cAAgBiB,KAG1BqB,YAAavB,aAAO,SAACC,EAAOC,GACxBD,EAAMf,SAAWgB,KAGrBsB,YAAaxB,aAAO,SAACC,EAAOC,GACxBD,EAAMd,SAAWe,KAGrBuB,cAAezB,aAAO,SAACC,EAAOC,GAC1BD,EAAMb,WAAac,KAGvBwB,kBAAmB1B,aAAO,SAACC,EAAOC,GAC9BD,EAAMZ,eAAiBa,KAG3ByB,kBAAmB3B,aAAO,SAACC,EAAOC,GAC9BD,EAAMX,eAAiBY,KAG3B0B,WAAY5B,aAAO,SAACC,GAChBA,EAAM9C,OAAOE,SAAW4C,EAAM9C,OAAOE,WAGzCwE,WAAY7B,aAAO,SAACC,GAChBA,EAAM9C,OAAOG,SAAW2C,EAAM9C,OAAOG,WAGzCwE,YAAa9B,aAAO,SAACC,EAAOC,GACxBD,EAAM9C,OAAOI,SAAW2C,KAG5B6B,qBAAsB/B,aAAO,SAACC,EAAOC,GACjCD,EAAMV,kBAAoBW,KAG9B8B,kBAAmBhC,aAAO,SAACC,EAAOC,GAC9BD,EAAMT,eAAiBU,KAG3B+B,gBAAiBjC,aAAO,SAACC,GACrBA,EAAMR,cAAe,KAGzByC,kBAAmBlC,aAAO,SAACC,EAAOC,GAC9BD,EAAMP,eAAiBQ,KAG3BiC,wBAAyBnC,aAAO,SAACC,EAAOC,GACpCD,EAAMN,qBAAuBO,KAGjCkC,oBAAqBpC,aAAO,SAACC,EAAOC,GAChCD,EAAML,iBAAmBM,KAG7BmC,mBAAoBrC,aAAO,SAACC,EAAOC,GAC/BD,EAAMJ,gBAAkBK,KAG5BoC,4BAA6BtC,aAAO,SAACC,EAAOC,GACxCD,EAAMH,yBAA2BI,M,yDC9K1BqC,EArCO,SAAC,GAQnB,IAR4C,IAAvBC,EAAsB,EAAtBA,gBAEbxD,EAAcyD,aAAc,SAAAxC,GAAK,MAAK,CAC1CjB,UAAWiB,EAAMjB,UACjBnB,MAAOoC,EAAMpC,UAFTmB,UAKF0D,EAAa,GACVC,EAAI,EAAGA,EAAI,GAAIA,IACpB,IAAK,IAAIC,EAAI,EAAGA,EAAI,GAAIA,IACpBF,EAAWG,KAAK,CAACC,IAAKC,OAAOC,aAAa,GAAKJ,GAAIK,IAAKN,EAAGO,SAAUP,EAAGQ,SAAUP,EAAI,IAI9F,IAAMQ,EAAoB,SAACC,GACvB,IAAMC,EAAcD,EAAEE,OAAOC,cAAcA,cAAcA,cACvC,mBAAdxE,GAAkCsE,EAAYG,UAAUC,SAAS,kBACjElB,EAAgBa,IAIxB,OACIX,EAAWiB,KAAI,SAAAC,GACX,OACI,qBACIC,QAAST,EACTU,MAAO,CAACC,SAAUH,EAAOd,IAAMc,EAAOX,KACtCe,UAAW,gBAAkBJ,EAAOd,IAAM,IAAMc,EAAOd,IAAMc,EAAOX,IAEpEgB,GAAIL,EAAOV,SAAW,IAAMU,EAAOT,UAD9BS,EAAOd,IAAMc,EAAOX,S,QCjC9B,MAA0B,0CCA1B,MAA0B,wCCA1B,MAA0B,iDCA1B,MAA0B,uCCA1B,MAA0B,yCCA1B,MAA0B,wCCA1B,MAA0B,sCCA1B,MAA0B,uCCA1B,MAA0B,sCCA1B,MAA0B,yCCA1B,MAA0B,yCCA1B,MAA0B,sCCA1B,MAA0B,wCCA1B,MAA0B,yCCA1B,MAA0B,2CCA1B,MAA0B,6CC2C5BiB,EAAQ,CACjBC,aAAc,IAAIC,OAAK,CACnBC,IAAKF,EACLG,MAAM,EACNC,OAAQ,KAIZC,WAAY,IAAIJ,OAAK,CACjBC,IAAKG,EACLF,MAAM,EACNC,OAAQ,KAIZE,mBAAoB,IAAIL,OAAK,CACzBC,IAAKI,EACLH,MAAM,EACNC,OAAQ,KAGZG,UAAW,IAAIN,OAAK,CAChBC,IAAKK,EACLJ,MAAM,EACNC,OAAQ,KAIZI,YAAa,IAAIP,OAAK,CAClBC,IAAKM,EACLJ,OAAQ,KAGZK,WAAY,IAAIR,OAAK,CACjBC,IAAKO,EACLL,OAAQ,GACRM,KA3Ce,WACnB,QAAI,iEAAiErH,KAAKC,UAAUC,cA6CpFoH,SAAU,IAAIV,OAAK,CACfC,IAAKS,EACLP,OAAQ,KAGZQ,UAAW,IAAIX,OAAK,CAChBC,IAAKU,EACLR,OAAQ,KAGZS,cAAe,IAAIZ,OAAK,CACpBC,IAAKW,EACLT,OAAQ,KAGZU,kBAAmB,IAAIb,OAAK,CACxBC,IAAKY,EACLV,OAAQ,KAGZW,WAAY,IAAId,OAAK,CACjBC,IAAKa,EACLX,OAAQ,KAGZY,SAAU,IAAIf,OAAK,CACfC,IAAKc,EACLZ,OAAQ,KAGZa,WAAY,IAAIhB,OAAK,CACjBC,IAAKe,EACLb,OAAQ,KAGZc,YAAa,IAAIjB,OAAK,CAClBC,IAAKgB,EACLd,OAAQ,KAGZe,cAAe,IAAIlB,OAAK,CACpBC,IAAKiB,EACLf,OAAQ,IAGZgB,gBAAiB,IAAInB,OAAK,CACtBC,IAAKkB,EACLhB,OAAQ,K,iBnB3HZiB,G,QAAS,GACTC,GAAW,EACXC,EAAc,MACdC,EAAe,GACfC,EAAmB,GACnBlG,GAAiB,EACjBmG,GAAwB,EA4QbC,EAxQD,WACV,MAAsDrD,aAAc,SAAAxC,GAAK,MAAK,CAC1EjB,UAAWiB,EAAMjB,UACjBzB,SAAU0C,EAAM9C,OAAOI,SACvBoC,qBAAsBM,EAAMN,yBAHxBX,EAAR,EAAQA,UAAWzB,EAAnB,EAAmBA,SAAUoC,EAA7B,EAA6BA,qBAQvBoG,EAAe,SAAC1C,GAClB,IAAK3D,GAAiC,eAAdV,EAA6B,CACjDkF,EAAMgB,WAAWc,OACjB,IAAMC,EAAYC,SAASC,cAAc,cACzCzG,GAAiB,EACjBiG,EAAetC,EAAEE,OAAOC,cACxByC,EAAUnC,MAAMsC,OAAS,UACzBT,EAAa7B,MAAMuC,OAAS,KAC5BV,EAAa7B,MAAMwC,OAAS,iCAExBC,SAASlD,EAAEE,OAAOC,cAAcgD,aAAeD,SAASlD,EAAEE,OAAOC,cAAciD,cAC/Ef,EAAc,MACPa,SAASlD,EAAEE,OAAOC,cAAciD,cAAgBF,SAASlD,EAAEE,OAAOC,cAAcgD,eACvFd,EAAc,QAGdC,EAAalC,UAAUC,SAAS,WAChCkC,EAAmB,UACZD,EAAalC,UAAUC,SAAS,cACvCkC,EAAmB,aACZD,EAAalC,UAAUC,SAAS,WACvCkC,EAAmB,UACZD,EAAalC,UAAUC,SAAS,aACvCkC,EAAmB,YACZD,EAAalC,UAAUC,SAAS,eACvCkC,EAAmB,eAOzBc,EAAqB,SAACC,EAAOC,GAC/B,IAAIC,EAAWC,IAAEH,GAAOI,SACpBC,EAAWF,IAAEH,GAAOM,aAAY,GAChCC,EAAUJ,IAAEH,GAAOQ,YAAW,GAC9BC,EAAQP,EAASQ,IAAML,EACvBM,EAAST,EAASU,KAAOL,EACzBM,EAAWV,IAAEF,GAAOG,SACpBU,EAAWX,IAAEF,GAAOK,aAAY,GAChCS,EAAUZ,IAAEF,GAAOO,YAAW,GAC9BQ,EAAQH,EAASH,IAAMI,EACvBG,EAASJ,EAASD,KAAOG,EAI7B,QAFoBN,GAASI,EAASH,IAAM,GAAKR,EAASQ,KAAOM,EAAQ,GAAKL,GAAUE,EAASD,KAAO,GAAKV,EAASU,MAAQK,EAAS,IAO3IC,OAAOC,QAAU,SAACzE,GAAO,IAAD,MACf3D,GAAmBnC,KAApB,UAAgC8F,EAAEE,cAAlC,iBAAgC,EAAUC,qBAA1C,iBAAgC,EAAyBC,iBAAzD,aAAgC,EAAoCC,SAAS,UAErEnG,GAAYmC,GAAkB2D,EAAEE,OAAOE,UAAUC,SAAS,kBAAgC,IAAb+B,GAAsBsC,MAC3G7D,EAAMiB,SAASa,OACfL,EAAa7B,MAAMuC,OAAS,IAC5BH,SAASC,cAAc,cAAcrC,MAAMsC,OAAS,UACpDT,EAAa7B,MAAMwC,OAAS,KAC5B5G,GAAiB,GANjBqG,EAAa1C,IAsBrBwE,OAAOG,WAAa,SAAC3E,GACZ1D,IACGD,IAAmB8F,GAAUuC,MAdlB,SAACE,EAAGC,GACvB,IAAMC,EAAWxC,EAAayC,wBAAwBb,KAChDc,EAAY1C,EAAayC,wBAAwBE,MACjDC,EAAU5C,EAAayC,wBAAwBf,IAC/CmB,EAAa7C,EAAayC,wBAAwBK,OAExD,OAAKR,EAAIE,GAAcF,EAAII,GAAeH,EAAIK,GAAaL,EAAIM,EAQRE,CAAerF,EAAEsF,eAAe,GAAGC,QAASvF,EAAEsF,eAAe,GAAGE,UAC/G3E,EAAMiB,SAASa,OACfL,EAAa7B,MAAMuC,OAAS,IAC5BH,SAASC,cAAc,cAAcrC,MAAMsC,OAAS,UACpDT,EAAa7B,MAAMwC,OAAS,KAC5B5G,GAAiB,GACVA,IAAmB8F,GACN,QAAhBE,GACAA,EAAc,OACdoD,EAAmBzF,IACI,SAAhBqC,IACPA,EAAc,MACdoD,EAAmBzF,IAEvBa,EAAMkB,WAAWY,OACjBH,GAAwB,EACxBJ,GAAW,GACJ/F,GAAkB8F,EACrBjI,GAAYmC,IAA+B,IAAb+F,GAAsBsC,MACpD7D,EAAMiB,SAASa,OACfL,EAAa7B,MAAMuC,OAAS,IAC5BH,SAASC,cAAc,cAAcrC,MAAMsC,OAAS,UACpDT,EAAa7B,MAAMwC,OAAS,KAC5B5G,GAAiB,IAEbA,GAAkB2D,EAAEE,OAAOC,cAAcC,UAAUC,SAAS,SACpEqC,EAAa1C,GAEjBmC,GAAS,IAMjB,IAAMuC,EAAc,WAChB,IADsB,EAChBgB,EAAQ7C,SAAS8C,iBAAiB,SADlB,cAEJD,GAFI,IAErB,2BAAwB,CAAC,IAAhBE,EAAe,QACrB,IAAKA,EAAKxF,UAAUC,SAASkC,IAAqBc,EAAmBf,EAAcsD,GAC/E,OAAO,GAJO,8BAOtB,OAAO,GAKXpB,OAAOqB,cAAgB,SAAC7F,GAcpB,OAbM9F,GAAYmC,IACdwE,EAAMkB,WAAWY,OACG,QAAhBN,EAEAA,EAAc,OACS,SAAhBA,IAEPA,EAAc,OAElBoD,EAAmBzF,GACnBwC,GAAwB,EACxBJ,GAAW,IAER,GAKXoC,OAAOsB,UAAY,SAAC9F,GACD,UAAXA,EAAE+F,MACF/F,EAAEgG,iBAIS,UAAXhG,EAAE+F,WAA2CE,IAAvB3D,EAAa7B,OAAuBpE,IAC1DwE,EAAMkB,WAAWY,OACG,QAAhBN,EAEAA,EAAc,OACS,SAAhBA,IAEPA,EAAc,OAElBoD,EAAmBzF,GACnBwC,GAAwB,EACxBJ,GAAW,IAInB,IAAM8D,EAAsB,SAACtB,EAAGC,GAC5B,IAAMsB,EAAUtD,SAAS8C,iBAAiB,4BACtCS,EAAiB,KAYrB,OAXAD,EAAQE,SAAQ,SAAA9F,GACZ,IAAM+F,EAAa/F,EAAOwE,wBAAwBb,KAC5CqC,EAAchG,EAAOwE,wBAAwBE,MAC7CuB,EAAYjG,EAAOwE,wBAAwBf,IAC3CyC,EAAelG,EAAOwE,wBAAwBK,OAE/CR,EAAI0B,GAAgB1B,EAAI2B,GAAiB1B,EAAI2B,GAAe3B,EAAI4B,IACjEL,EAAiB7F,MAIlB6F,GAGLX,EAAqB,SAACzF,GAAO,IAAD,MAC1BO,EAEAA,EADW,cAAXP,EAAE0G,KACOR,EAAoBlG,EAAE2G,QAAQ,GAAGpB,QAASvF,EAAE2G,QAAQ,GAAGnB,SAC9C,aAAXxF,EAAE0G,KACAR,EAAoBlG,EAAEsF,eAAe,GAAGC,QAASvF,EAAEsF,eAAe,GAAGE,SAC5D,UAAXxF,EAAE+F,MAA+B,gBAAX/F,EAAE0G,KACtBR,EAAoBvM,EAAQC,GAE5BoG,EAAEE,OAGfkC,GAAW,EACXE,EAAa7B,MAAMmG,UAAY,KAC/B,IAAMC,EAAWhE,SAASC,cAAc,cAClCgE,EAAYjE,SAASC,cAAT,WAA2BP,EAA3B,SACZwE,EAAQ,UAAGxG,SAAH,aAAG,EAAQK,GACnBf,EAAQ,OAAGkH,QAAH,IAAGA,OAAH,EAAGA,EAAUC,UAAU,EAAGD,EAASE,QAAQ,MACnDnH,EAAQ,OAAGiH,QAAH,IAAGA,OAAH,EAAGA,EAAUC,UAAWD,EAASE,QAAQ,KAAO,EAA7C,OAAiDF,QAAjD,IAAiDA,OAAjD,EAAiDA,EAAUG,SAEvEL,EAASxG,SAASL,EAAEE,SAAW2G,EAASxG,SAASE,MAAlD,UACAA,SADA,iBACA,EAAQH,iBADR,aACA,EAAmBC,SAAS,mBACV,IAAnBhE,IACqB,QAAhBgG,GACAyE,EAAU1G,UAAU+G,OAApB,iBAAqC5E,IACjC1C,EAAY,GAAKqD,SAASZ,EAAa1B,IAAM,EAC7C0B,EAAa7B,MAAM2G,WAAnB,UAAmCvH,EAAnC,cAAiDqD,SAASrD,GAAYqD,SAASZ,EAAa1B,KACrFf,GAAa,GAAKqD,SAASZ,EAAa1B,IAAM,IAAgC,IAA1B4B,EAC3DF,EAAa7B,MAAM2G,WAAnB,eAAwC,GAAKlE,SAASZ,EAAa1B,KAChE4B,GAAwB,EAC/BF,EAAa7B,MAAM4G,QAAnB,UAAgCvH,EAAhC,cAA8CoD,SAASpD,GAAY,IAC5C,SAAhBuC,IACPyE,EAAU1G,UAAUkH,IAApB,iBAAkC/E,IAC9BzC,EAAYoD,SAASZ,EAAa1B,IAAM,EACxC0B,EAAa7B,MAAM4G,QAAnB,UAAgCnE,SAASpD,GAAY,EAArD,cAA4DoD,SAASpD,GAAYoD,SAASZ,EAAa1B,IAAM,GACtGd,GAAaoD,SAASZ,EAAa1B,IAAM,IAAgC,IAA1B4B,EACtDF,EAAa7B,MAAM4G,QAAnB,UAAgCnE,SAASZ,EAAa1B,IAAM,EAA5D,QACG4B,GAAwB,EAC/BF,EAAa7B,MAAM2G,WAAnB,UAAmCvH,EAAnC,cAAiDqD,SAASrD,GAAY,MAsBlF,OAfA2E,OAAO+C,YAAc,SAACvH,GAClBrG,EAASqG,EAAEuF,QACX3L,EAASoG,EAAEwF,QACPnJ,IAAmBnC,GACnBuL,EAAmBzF,IAI3BwE,OAAOgD,YAAc,SAACxH,GAClBmC,GAAS,EACL9F,GAAkBnC,GAClBuL,EAAmBzF,IAKvB,qCACI,qBAAKY,GAAG,IAAID,UAAU,eAAtB,SAAqC,qBAAKA,UAAU,kBAEpD,qBAAKC,GAAG,IAAID,UAAU,kBAAtB,SAAwC,qBAAKA,UAAU,qBAEvD,qBAAKC,GAAG,IAAID,UAAU,eAAtB,SAAqC,qBAAKA,UAAU,kBAEpD,qBAAKC,GAAG,IAAID,UAAU,iBAAtB,SAAuC,qBAAKA,UAAU,oBAEtD,qBAAKC,GAAG,IAAID,UAAU,iBAAtB,SAAuC,qBAAKA,UAAU,wBoBnRnD,MAA0B,gCCwL1B8G,EA/KG,SAAC,GAAgB,IAAdC,EAAa,EAAbA,OACT/M,EAAiByE,aAAc,SAAAxC,GAAK,MAAK,CAC7CjC,aAAciC,EAAMjC,iBADhBA,aAIAuD,EAAgByJ,aAAgB,SAAAC,GAAO,MAAK,CAChD1J,YAAa0J,EAAQ1J,gBADjBA,YAIJ2J,EAAU,GACdC,qBAAU,WAYN,OAXAJ,EAAOK,GAAG,gBAAgB,SAAAC,GACtB,IAAMC,EAAUpF,SAASqF,eAAeF,GAElCG,EAA6D,IAAnCtH,EAAMqB,gBAAgBkG,WAAoB,IAC1EvH,EAAMqB,gBAAgBS,OACtB0F,YAAW,WACPC,EAAeL,GACf/J,GAAY,KACbiK,MAGA,WACHT,EAAOa,IAAI,mBAEjB,IAEF,IAAMC,EAAM,SAAClF,EAAOC,GAChB,IAAIC,EAAWC,IAAEH,GAAOI,SACpBC,EAAWF,IAAEH,GAAOM,aAAY,GAChCC,EAAUJ,IAAEH,GAAOQ,YAAW,GAC9BC,EAAQP,EAASQ,IAAML,EACvBM,EAAST,EAASU,KAAOL,EACzBM,EAAWV,IAAEF,GAAOG,SACpBU,EAAWX,IAAEF,GAAOK,aAAY,GAChCS,EAAUZ,IAAEF,GAAOO,YAAW,GAC9BQ,EAAQH,EAASH,IAAMI,EACvBG,EAASJ,EAASD,KAAOG,EAI7B,QAFoBN,GAASI,EAASH,IAAM,GAAKR,EAASQ,KAAOM,EAAQ,GAAKL,GAAUE,EAASD,KAAO,GAAKV,EAASU,MAAQK,EAAS,IAKrIkE,EAAa,GAWbH,EAAiB,SAACL,GACpB,GAAIS,EAAoBT,GAAU,CAC9B,IAAMU,EAA2B9F,SAAS+F,cAAc,OACxDD,EAAyBvI,UAAUkH,IAAI,4BAEvC,IAAMuB,EAAUhG,SAAS+F,cAAc,OACvCC,EAAQ7H,IAAM8H,EACdD,EAAQzI,UAAUkH,IAAI,gBAEtB,IAAMyB,EAASlG,SAAS+F,cAAc,OACtCG,EAAO3I,UAAUkH,IAAI,UAErB,IAAM0B,EAAUnG,SAAS+F,cAAc,OACvCI,EAAQ5I,UAAUkH,IAAI,WAEtB,IAAM2B,EAASpG,SAAS+F,cAAc,OACtCK,EAAO7I,UAAUkH,IAAI,UAErB,IAAM4B,EAAUrG,SAAS+F,cAAc,OACvCM,EAAQ9I,UAAUkH,IAAI,WAEtB,IAAM6B,EAAStG,SAAS+F,cAAc,OACtCO,EAAO/I,UAAUkH,IAAI,UAErB,IAAM8B,EAAUvG,SAAS+F,cAAc,OACvCQ,EAAQhJ,UAAUkH,IAAI,WAEtB,IAAM+B,EAASxG,SAAS+F,cAAc,OACtCS,EAAOjJ,UAAUkH,IAAI,UAErB,IAAMgC,EAAUzG,SAAS+F,cAAc,OAmBvC,GAlBAU,EAAQlJ,UAAUkH,IAAI,WAEtBW,EAAQsB,OAAOV,EAASF,EAA0BI,EAAQC,EAASC,EAAQC,EAASC,EAAQC,EAASC,EAAQC,GAE7GjB,YAAW,WACPM,EAAyBxB,SACzB4B,EAAO5B,SACP6B,EAAQ7B,SACR8B,EAAO9B,SACP+B,EAAQ/B,SACRgC,EAAOhC,SACPiC,EAAQjC,SACRkC,EAAOlC,SACPmC,EAAQnC,WACT,MAEHsB,EAAWjJ,KAAKqI,GAChBI,EAAQ7H,UAAUkH,IAAlB,WAA0BO,EAA1B,eA1DgB,SAACjC,GACrB,IAD8B,EAC1B4D,EAAQ,EADkB,cAEdf,GAFc,IAE9B,2BAA4B,UACZ7C,IACR4D,GAAS,GAJa,8BAO9B,OAAOA,EAoDCC,CAAgB5B,KAAa3E,SAASL,SAASC,cAAT,WAA2B+E,IAAWjH,IAAK,CACjF,IAAM8I,EAAe7G,SAASC,cAAT,WAA2B+E,EAA3B,SACf1B,EAAUtD,SAAS8C,iBAAiB,iBAC1C9E,EAAMc,cAAcgB,OAH6D,oBAI9DwD,GAJ8D,IAIjF,2BAA4B,CAAC,IAApB5F,EAAmB,QACpBA,EAAOH,UAAUC,SAAjB,WAA8BwH,EAA9B,gBAEAtH,EAAOuC,cAAc,iBAAiBqE,UAPmC,8BAUjFuC,EAAatJ,UAAUkH,IAAI,qBAE3BzG,EAAMY,SAASkB,OAEnB+E,EAAOiC,KAAK,gCAAiC,CAACC,WAAY3B,EAAQrH,GAAIoH,KAAM,MAAO6B,SAAUlP,EAAckN,QAASA,SAEpHI,EAAQ7H,UAAUkH,IAAI,cACtBzG,EAAMa,UAAUiB,OAChB+E,EAAOiC,KAAK,gCAAiC,CAACC,WAAY3B,EAAQrH,GAAIoH,KAAM,OAAQ6B,SAAUlP,EAAckN,QAASA,KAIvHa,EAAsB,SAACV,GACzB,IADkC,EAC5BtC,EAAQ7C,SAAS8C,iBAAiB,SADN,cAEjBD,GAFiB,IAElC,2BAAwB,CAAC,IAAhBE,EAAe,QACpB,GAAI4C,EAAIR,EAAMpC,GAEV,OADAiC,EAAUjC,EAAKxF,UAAU,IAClB,GALmB,8BAQlC,OAAO,GAGX,OACI,sBAAKO,UAAU,kBAAf,UACI,sBAAKA,UAAU,OAAf,UACI,mCACA,mCACA,mCACA,mCACA,mCACA,mCACA,mCACA,mCACA,mCACA,sCAGJ,sBAAKA,UAAU,OAAf,UACI,mCACA,mCACA,mCACA,mCACA,mCACA,mCACA,mCACA,mCACA,mCACA,uCAGJ,qBAAKA,UAAU,OAAf,SACI,sBAAKA,UAAU,aAAf,UACI,cAACmJ,EAAD,IACA,cAAC,EAAD,aCrELC,EAtGO,SAAC,GAAgB,IAAdrC,EAAa,EAAbA,OACrB,EAAmCtI,aAAc,SAAAxC,GAAK,MAAK,CACvDjC,aAAciC,EAAMjC,aACpBkB,SAAUe,EAAMf,aAFZlB,EAAR,EAAQA,aAAckB,EAAtB,EAAsBA,SAKdqC,EAAgByJ,aAAgB,SAAAC,GAAO,MAAK,CAChD1J,YAAa0J,EAAQ1J,gBADjBA,YAKFuK,EAAa,GAWnBX,qBAAU,WAyBN,OAxBAJ,EAAOK,GAAG,iCAAiC,SAAAiC,GACvC,IAAMC,EAAgBpH,SAASC,cAAT,8BAA8CkH,EAAKJ,WAAnD,OAEtB,GADA/G,SAASC,cAAc,iBAAiBqE,SACpB,QAAhB6C,EAAKE,aAAgDjE,IAA5BgE,EAAc7J,UAIvC,GAHA6J,EAAc7J,UAAUkH,IAAI,aAC5BmB,EAAWjJ,KAAKwK,EAAKnC,SACrBoC,EAAc7J,UAAUkH,IAAxB,WAAgC0C,EAAKnC,UAjBzB,SAACjC,GACrB,IAD8B,EAC1B4D,EAAQ,EADkB,cAEdf,GAFc,IAE9B,2BAA4B,UACZ7C,IACR4D,GAAS,GAJa,8BAO9B,OAAOA,EAWKC,CAAgBO,EAAKnC,WAAa3E,SAASL,SAASC,cAAT,WAA2BkH,EAAKnC,UAAWjH,IAAK,CAC3F,IAAMuF,EAAUtD,SAAS8C,iBAAiB,iBAC1C9E,EAAMc,cAAcgB,OAFuE,oBAGxEwD,GAHwE,IAG3F,2BAA4B,CAAC,IAApB5F,EAAmB,QACpBA,EAAOH,UAAUC,SAAjB,WAA8B2J,EAAKnC,WACnCtH,EAAOH,UAAUkH,IAAI,aAL8D,oCAS3FzG,EAAMY,SAASkB,WAEI,SAAhBqH,EAAKE,aAAiDjE,IAA5BgE,EAAc7J,YAC/C6J,EAAc7J,UAAUkH,IAAI,cAC5BzG,EAAMa,UAAUiB,WAIjB,WACH+E,EAAOa,IAAI,oCAEjB,IAeF,OACI,sBAAK5H,UAAU,sBAAf,UACI,sBAAKA,UAAU,OAAf,UACI,mCACA,mCACA,mCACA,mCACA,mCACA,mCACA,mCACA,mCACA,mCACA,sCAGJ,sBAAKA,UAAU,OAAf,UACI,mCACA,mCACA,mCACA,mCACA,mCACA,mCACA,mCACA,mCACA,mCACA,uCAGJ,qBAAKA,UAAU,OAAf,SACI,qBAAKA,UAAU,aAAf,SACI,cAACmJ,EAAD,CAAO3K,gBA3CC,SAACa,GACrB,GAAInE,IAAamE,EAAEE,OAAOE,UAAUC,SAAS,eAAiBL,EAAEE,OAAOE,UAAUC,SAAS,cAAe,CAErGnC,GAAY,GACZ,IAAMiM,EAAetH,SAAS+F,cAAc,OAC5CuB,EAAa/J,UAAUkH,IAAI,gBAC3BtH,EAAEE,OAAOkK,YAAYD,GAErBtJ,EAAMoB,cAAcU,OACpB+E,EAAOiC,KAAK,wBAAyB,CAACzJ,OAAQF,EAAEE,OAAOU,GAAIiJ,SAAUlP,gB,kBCiLlE0P,EA9OQ,SAAC,GAAgB,IAAd3C,EAAa,EAAbA,OAEtB,EAAiCtI,aAAc,SAAAxC,GAAK,MAAK,CACrDnC,KAAMmC,EAAMnC,KACZU,eAAgByB,EAAMzB,mBAFlBV,EAAR,EAAQA,KAAMU,EAAd,EAAcA,eAKd,EAAkDwM,aAAgB,SAAAC,GAAO,MAAK,CAC1E1K,mBAAoB0K,EAAQ1K,mBAC5BM,kBAAmBoK,EAAQpK,sBAFvBN,EAAR,EAAQA,mBAAoBM,EAA5B,EAA4BA,kBAK5BsK,qBAAU,WAON,OANAwC,IAEA5C,EAAOK,GAAG,0BAA0B,WAChCuC,OAGG,WACH5C,EAAOa,IAAI,6BAEjB,IAEF,IAAM+B,EAAc,uCAAG,gCAAAC,EAAA,6DACbC,EAAS3H,SAASC,cAAc,OADnB,kBAGG2H,MAAM,qEAAD,OAAsEhQ,EAAKiQ,WAHnF,WAGTC,EAHS,QAINC,GAJM,sBAKL,IAAIC,MAAM,iCALL,uBAOQF,EAAIG,OAPZ,OAQE,QADXC,EAPS,SAQuB,KAAbA,GACrBP,EAAO/J,MAAMuK,YAAY,uBAAwB,qBACjDxN,EAAkBuN,EAASE,MAAM,MACjCpK,EAAMe,kBAAkBe,SAExB6H,EAAO/J,MAAMuK,YAAY,uBAAwB,eACjDxN,EAAkB,OAdP,kDAiBf0N,QAAQC,IAAR,MAjBe,0DAAH,qDAqBdC,EAAa,uCAAG,WAAOC,GAAP,yBAAAd,EAAA,6DACde,EAAiB,GADH,kBAGIb,MAAM,qEAAD,OAAsEhQ,EAAKiQ,WAHpF,WAGRC,EAHQ,QAILC,GAJK,sBAKJ,IAAIC,MAAM,iCALN,uBAOSF,EAAIG,OAPb,cAQG,QADXC,EAPQ,SAQwB,KAAbA,KACfQ,EAAsBR,EAASE,MAAM,MACnB/D,QAAU,EAC9BoE,EAAiB,MAEXE,EAAQD,EAAoBtE,QAAQoE,KAC7B,IACTE,EAAoBE,OAAOD,EAAO,GAClCF,EAAiBC,EAAoBG,KAAK,OAhBxC,UAqBKjB,MAAM,8DAA+D,CACpFkB,OAAQ,MACJC,QAAS,CAAC,eAAgB,oBAC1BC,KAAMC,KAAKC,UAAU,CACjBC,YAAaV,EACbZ,SAAUjQ,EAAKiQ,aA1Bb,YAqBRuB,EArBQ,QA6BJrB,GA7BI,uBA8BJ,IAAIC,MAAM,oCA9BN,yBAgCYoB,EAAKnB,OAhCjB,gBAkCVR,IAlCU,kDAqCdY,QAAQC,IAAR,MArCc,0DAAH,sDAyCbe,EAAkB,SAAClM,GACrBoL,EAAcpL,EAAEE,OAAOU,KAGpBuL,EAAS,uCAAG,WAAOd,GAAP,iDAAAd,EAAA,6DACfW,QAAQC,IAAI,gBACZtI,SAASC,cAAc,mBAAmBsJ,MAAQ,GAC9CC,EAAa,GACbC,EAAc,GACdC,EAAsB,GACtBC,EAAiB,GANN,kBAWO/B,MAAM,8DAAD,OAA+DY,IAX3E,WAWLV,EAXK,QAYFC,GAZE,uBAaD,IAAIC,MAAM,uBAbT,yBAeSF,EAAIG,OAfb,YAeL2B,EAfK,QAgBD/B,WAAajQ,EAAKiQ,SAhBjB,uBAiBD,IAAIG,MAAM,6BAjBT,YAkBA4B,EAAM/B,SAlBN,oBAmBHgC,EAA2B,GAC/BF,EAAiBC,EAAM5C,WApBhB,OAqBH4C,QArBG,IAqBHA,GArBG,UAqBHA,EAAOE,eArBJ,aAqBH,EAAgBzF,QArBb,sBAsBHwF,EAA2BD,EAAME,QAAQ1B,MAAM,MAClB2B,SAASnS,EAAKiQ,UAvBxC,uBAwBO,IAAIG,MAAM,wCAxBjB,eA2BP6B,EAAyBlN,KAAK/E,EAAKiQ,UAE/B6B,EADAG,EAAyBxF,OAAS,EACZwF,EAAyBhB,KAAK,KAE9BgB,EAAyB,GA/B5C,UAqCYjC,MAAM,8DAAD,OAA+DhQ,EAAKiQ,WArCrF,YAqCDuB,EArCC,QAsCGrB,GAtCH,uBAsCc,IAAIC,MAAM,kCAtCxB,yBAuCeoB,EAAKnB,OAvCpB,eAwCP,QADM6B,EAvCC,cAwCP,IAAIA,OAAJ,EAAIA,EAASzF,SACTyF,EAAQtG,SAAQ,SAAAwG,GAEZ,GADAP,EAAY9M,KAAKqN,EAAEnC,UACfmC,EAAEnC,WAAaW,EACf,MAAM,IAAIR,MAAM,+BAI5ByB,EAAY9M,KAAK6L,GACjBgB,EAAaC,EAAYZ,KAAK,KAjDvB,UAuDYjB,MAAM,mDAAoD,CACzEkB,OAAQ,MACRC,QAAS,CAAC,eAAgB,oBAC1BC,KAAMC,KAAKC,UAAU,CACjBrB,SAAUjQ,EAAKiQ,SACfoC,WAAYT,MA5Db,YAuDDU,EAvDC,QA+DGnC,GA/DH,uBA+Dc,IAAIC,MAAM,yBA/DxB,yBAgEiBkC,EAAKjC,OAhEtB,oCAkEGkC,EAAO,GAlEV,cAmEWV,GAnEX,kEAmEMO,EAnEN,4BAqE4BpC,MAAM,8DAAD,OAA+DoC,IArEhG,YAqEWI,EArEX,QAsEmBrC,GAtEnB,uBAsE8B,IAAIC,MAAM,uBAtExC,yBAuEyBoC,EAASnC,OAvElC,QAuEW2B,EAvEX,OA6EKO,EAAKxN,KAAKiN,GA7Ef,mDA+EKvB,QAAQC,IAAR,MA/EL,iJAkFHjO,EAAmB8P,GAlFhB,yBAoFYvC,MAAM,yDAA0D,CAC/EkB,OAAQ,MACRC,QAAS,CAAC,eAAgB,oBAC1BC,KAAMC,KAAKC,UAAU,CACjBe,WAAYP,EACZW,WAAY7B,MAzFb,YAoFD8B,EApFC,QA4FGvC,GA5FH,uBA4Fc,IAAIC,MAAM,+CA5FxB,yBA6FiBsC,EAAKrC,OA7FtB,gBA8F6B,OAAnB0B,GACb9E,EAAOiC,KAAK,qBAAsB6C,GA/F/B,0DAmGXtB,QAAQC,IAAR,MAnGW,gFAAH,sDAuGViC,EAAc,uCAAG,WAAOpN,GAAP,eAAAuK,EAAA,+EAEGE,MAAM,8DAAD,OAA+DzK,EAAEE,OAAOU,KAFhF,WAET+J,EAFS,QAGNC,GAHM,sBAIL,IAAIC,MAAM,uBAJL,uBAMKF,EAAIG,OANT,cAOLJ,WACNU,EAAcpL,EAAEE,OAAOU,IAEvBuL,EAAUnM,EAAEE,OAAOU,KAVR,kDAcfsK,QAAQC,IAAR,MAde,0DAAH,sDAkBpB,OACI,mCACI,eAACkC,EAAA,EAAD,CAAU1M,UAAU,WAApB,UACE,cAAC0M,EAAA,EAASC,OAAV,CAAiBC,QAAQ,UAAU5M,UAAU,gBAAgBC,GAAG,iBAAhE,SAAiF,qBAAKI,IC5NrF,itBD4N4GwM,IAAI,eAAe7M,UAAU,eAC1I,cAAC0M,EAAA,EAASI,KAAV,CAAe7M,GAAG,YAAlB,SAEqB,OAAnBzF,EAEEA,EAAemF,KAAI,SAAAoN,GACjB,OACI,sBAAmB/M,UAAU,eAA7B,UACI,sBAAKA,UAAU,OAAf,iCAA0C,oBAAIA,UAAU,gBAAd,SAA+B+M,OACzE,sBAAK/M,UAAU,eAAf,UACI,wBAAQH,QAAS4M,EAAgBxM,GAAI8M,EAAS/M,UAAU,eAAxD,oBACA,wBAAQH,QAAS0L,EAAiBtL,GAAI8M,EAAS/M,UAAU,eAAzD,yBAJE+M,MASb,aE5ON,uZCAA,2XCAA,+oBCAA,ukBCoJAC,EAvII,SAAC,GAA+B,IAA7BjG,EAA4B,EAA5BA,OAAQkG,EAAoB,EAApBA,cAE1B,EAAqGxO,aAAc,SAAAxC,GAAK,MAAK,CACzHjC,aAAciC,EAAMjC,aACpBF,KAAMmC,EAAMnC,KACZD,MAAOoC,EAAMpC,MACbR,QAAS4C,EAAM9C,OAAOE,QACtBC,QAAS2C,EAAM9C,OAAOG,QACtBC,SAAU0C,EAAM9C,OAAOI,SACvBiC,eAAgBS,EAAMT,eACtBD,kBAAmBU,EAAMV,sBARrBvB,EAAR,EAAQA,aAAcF,EAAtB,EAAsBA,KAAMD,EAA5B,EAA4BA,MAAOR,EAAnC,EAAmCA,QAASC,EAA5C,EAA4CA,QAASC,EAArD,EAAqDA,SAAUiC,EAA/D,EAA+DA,eAAgBD,EAA/E,EAA+EA,kBAW/E,EAAuFyL,aAAgB,SAAAC,GAAO,MAAK,CAC/GrK,UAAWqK,EAAQrK,UACnBgB,WAAYqJ,EAAQrJ,WACpBC,WAAYoJ,EAAQpJ,WACpBE,qBAAsBkJ,EAAQlJ,qBAC9BC,kBAAmBiJ,EAAQjJ,sBALvBpB,EAAR,EAAQA,UAAWgB,EAAnB,EAAmBA,WAAYC,EAA/B,EAA+BA,WAAYE,EAA3C,EAA2CA,qBAAsBC,EAAjE,EAAiEA,kBAQ3DkP,EAAkB,SAAC7N,GACrBzC,GAAU,GACVqQ,EAAc5N,GACd0H,EAAOiC,KAAK,iBAAkBhP,IA2BlC,OACI,sBAAKgG,UAAU,MAAf,UACI,sBAAKA,UAAU,UAAf,UACI,qBAAK6M,IAAI,aAAaxM,ICnEvB,ipBDmEuCR,QA3B5B,WACbtG,GACDqE,KAyBkEuP,aArBpD,WACd5T,GACAqE,KAmB+FoC,UAAS,2CAAsC3G,EAAU,UAAY,cAChK,qBAAKwT,IAAI,aAAaxM,IEpEvB,ysBFoEuCR,QAhB5B,WACbtG,GACDsE,KAckEsP,aAVpD,WACd5T,GACAsE,KAQ+FmC,UAAS,2CAAsC1G,EAAU,UAAY,iBAEpK,qBAAK0G,UAAU,WAAf,SAEc,UAAVnG,GAA+B,aAAVA,EAErB,mCACI,qBAAKmG,UAAU,2BAA2BK,IAAK+M,EAAiBP,IAAI,cAAcpB,MAAM,kBAAkB5L,QAASoN,MAG7G,aAAVpT,EAEKN,EAWD,qCACI,qBAAKyG,UAAU,uBAAuBK,IG5F/C,qpCH4FiEwM,IAAI,UAAUhN,QAAS,kBAAM9B,GAAsBxC,MAC3G,cAAC,EAAD,CAAgBwL,OAAQA,IACxB,qBAAK/G,UAAU,2BAA2BK,IAAK+M,EAAiBP,IAAI,cAAcpB,MAAM,kBAAkB5L,QAASoN,IACnH,qBAAKjN,UAAU,sBAAsBK,IAAKgN,EAAYR,IAAI,UAAUpB,MAAM,SAAS5L,QAASoN,OAbhG,qCAII,cAAC,EAAD,CAAgBlG,OAAQA,IACxB,qBAAK/G,UAAU,2BAA2BK,IAAK+M,EAAiBP,IAAI,cAAcpB,MAAM,kBAAkB5L,QAASoN,IACnH,qBAAKjN,UAAU,sBAAsBK,IAAKgN,EAAYR,IAAI,UAAUpB,MAAM,SAAS5L,QAASoN,OAUpG,mCAEc,gBAAVpT,GAEQ,OAAJC,QAAI,IAAJA,OAAA,EAAAA,EAAMiQ,UAEN,qCAEI,qBAAK/J,UAAU,sBAAsBK,IAAKiN,EAAUT,IAAI,UAAUpB,MAAM,SAAS5L,QAASoN,IAC1F,qBAAKjN,UAAU,sBAAsBK,IAAKgN,EAAYR,IAAI,UAAUpB,MAAM,SAAS5L,QAASoN,OAGhG,mCACI,qBAAKjN,UAAU,sBAAsBK,II/GlD,quBJ+GkEwM,IAAI,UAAUpB,MAAM,YAAY5L,QAASoN,MAGpF,UAAdnT,EAAKyT,KAEL,qCAEQhU,EAEA,qBAAKyG,UAAU,oBAAf,SACI,qBAAKA,UAAU,oBAAoBK,IAAKmN,EAAUX,IAAI,OAAOhN,QAAS,kBAAM7B,GAAmBxC,QAEjG,KAEN,qBAAKwE,UAAU,sBAAsBK,IAAKgN,EAAYR,IAAI,UAAUpB,MAAM,SAAS5L,QAASqN,OAGhG,qCAEQ3T,EAEA,qBAAKyG,UAAU,oBAAf,SACI,qBAAKA,UAAU,oBAAoBK,IAAKmN,EAAUX,IAAI,OAAOhN,QAAS,kBAAM7B,GAAmBxC,QAEjG,KAEN,qBAAKwE,UAAU,sBAAsBK,IAAKiN,EAAUT,IAAI,UAAUpB,MAAM,SAAS5L,QAASqN,IAC1F,qBAAKlN,UAAU,sBAAsBK,IAAKgN,EAAYR,IAAI,UAAUpB,MAAM,SAAS5L,QAASqN,eKlDzGO,GApFC,SAAC,GAAgB,IAAd1G,EAAa,EAAbA,OACf,EAA2EtI,aAAc,SAAAxC,GAAK,MAAK,CAC/FjC,aAAciC,EAAMjC,aACpBC,aAAcgC,EAAMhC,aACpBkB,SAAUc,EAAMd,SAChBK,eAAgBS,EAAMT,eACtBjC,SAAU0C,EAAM9C,OAAOI,aALnBS,EAAR,EAAQA,aAAcC,EAAtB,EAAsBA,aAAckB,EAApC,EAAoCA,SAAUK,EAA9C,EAA8CA,eAAgBjC,EAA9D,EAA8DA,SAQtDiE,EAAgBwJ,aAAgB,SAAAC,GAAO,MAAK,CAChDzJ,YAAayJ,EAAQzJ,gBADjBA,YAIFkQ,EAAUxL,SAASC,cAAc,YACjCwL,EAAOzL,SAASC,cAAc,SAEpCgF,qBAAU,WAQN,OAPI3L,GAAgBmS,EAAK7N,MAAMuK,YAAY,4BAA6B,QAExEnI,SAAS0L,iBAAiB,QAASC,GACnC9G,EAAOK,GAAG,eAAe,SAAA0G,GACrBC,EAAsBD,MAGnB,WACH/G,EAAOa,IAAI,eACX1F,SAAS8L,oBAAoB,QAASH,MAE5C,CAACH,EAASlS,EAAgBL,IAE5B,IAAM4S,EAAwB,SAACD,GAC3B,IAAMG,EAAU/L,SAAS+F,cAAc,OACvCgG,EAAQxO,UAAUkH,IAAI,WACtB,IAAMuH,EAAWhM,SAAS+F,cAAc,MACxCiG,EAASzO,UAAUkH,IAAI,gBACvB,IAAMwH,EAAWjM,SAAS+F,cAAc,MACxCkG,EAAS1O,UAAUkH,IAAI,WACvB,IAAMyH,EAAOlM,SAASmM,eAAeP,GAC/BQ,EAAOpM,SAASmM,eAAepU,GACrCkU,EAAS1E,YAAY6E,GACrBJ,EAASzE,YAAY2E,GACrBH,EAAQxE,YAAY0E,GACpBF,EAAQxE,YAAYyE,GACpBR,EAAQjE,YAAYwE,GACpBP,EAAQa,UAAYb,EAAQc,aAEvBhT,IACDmS,EAAK7N,MAAMuK,YAAY,4BAA6B,SACpDnK,EAAMe,kBAAkBe,SAI1B6L,EAAiB,SAACxO,GAChB,GAAc,UAAVA,EAAEoP,KAAgC,KAAbtT,EAAiB,CACtCkE,EAAEgG,iBACFnF,EAAMS,YAAYqB,OAClB,IAAMiM,EAAU/L,SAAS+F,cAAc,OACvCgG,EAAQxO,UAAUkH,IAAI,WACtB,IAAMuH,EAAWhM,SAAS+F,cAAc,MACxCiG,EAASzO,UAAUkH,IAAI,YACvB,IAAMwH,EAAWjM,SAAS+F,cAAc,MACxCkG,EAAS1O,UAAUkH,IAAI,YACvB,IAAMyH,EAAOlM,SAASmM,eAAelT,GAC/BmT,EAAOpM,SAASmM,eAAe,OACrCF,EAAS1E,YAAY6E,GACrBJ,EAASzE,YAAY2E,GACrBH,EAAQxE,YAAY0E,GACpBF,EAAQxE,YAAYyE,GACpBR,EAAQjE,YAAYwE,GACpBzQ,EAAY,IACZuJ,EAAOiC,KAAK,WAAY,CAACE,SAAUlP,EAAc8T,QAAS3S,IAC1D+G,SAASC,cAAc,cAAcsJ,MAAQ,GAC7CiC,EAAQa,UAAYb,EAAQc,eAIxC,OACI,sBAAKxO,UAAS,WAAMxE,GAAkBjC,EAAW,OAAS,KAA5C,YAAoDA,EAAW,sBAAwB,iBAArG,UACI,qBAAKyG,UAAU,YACf,uBAAO0O,SAAU,SAACrP,GAAD,OAAO7B,EAAY6B,EAAEE,OAAOkM,QAAQ1F,KAAK,OAAO/F,UAAU,YAAY2O,YAAY,qBC1EhGC,I,OANA,WACX,OACI,iCAAQ,qBAAK5O,UAAU,eC0OhB6O,GAvOF,SAAC,GAA+B,IAA7B9H,EAA4B,EAA5BA,OAAQkG,EAAoB,EAApBA,cACpB,EAAoMxO,aAAc,SAAAxC,GAAK,MAAK,CACxNjC,aAAciC,EAAMjC,aACpBC,aAAcgC,EAAMhC,aACpBH,KAAMmC,EAAMnC,KACZM,uBAAwB6B,EAAM7B,uBAC9BY,UAAWiB,EAAMjB,UACjBC,cAAegB,EAAMhB,cACrBC,SAAUe,EAAMf,SAChBI,eAAgBW,EAAMX,eACtB/B,SAAU0C,EAAM9C,OAAOI,SACvBoC,qBAAsBM,EAAMN,qBAC5BE,gBAAiBI,EAAMJ,gBACvBC,yBAA0BG,EAAMH,6BAZ5B9B,EAAR,EAAQA,aAAcC,EAAtB,EAAsBA,aAAcH,EAApC,EAAoCA,KAAMM,EAA1C,EAA0CA,uBAAwBY,EAAlE,EAAkEA,UAAWC,EAA7E,EAA6EA,cAAeC,EAA5F,EAA4FA,SAAUI,EAAtG,EAAsGA,eAAgB/B,EAAtH,EAAsHA,SAAUoC,EAAhI,EAAgIA,qBAAsBE,EAAtJ,EAAsJA,gBAAiBC,EAAvK,EAAuKA,yBAevK,EAA0LkL,aAAgB,SAAAC,GAAO,MAAK,CAClNxK,0BAA2BwK,EAAQxK,0BACnCV,SAAUkL,EAAQlL,SAClBsB,aAAc4J,EAAQ5J,aACtBC,iBAAkB2J,EAAQ3J,iBAC1BC,YAAa0J,EAAQ1J,YACrBI,kBAAmBsJ,EAAQtJ,kBAC3BU,mBAAoB4I,EAAQ5I,mBAC5BF,wBAAyB8I,EAAQ9I,wBACjCG,4BAA6B2I,EAAQ3I,gCATjC7B,EAAR,EAAQA,0BAA2BV,EAAnC,EAAmCA,SAAUsB,EAA7C,EAA6CA,aAAcC,EAA3D,EAA2DA,iBAAkBC,EAA7E,EAA6EA,YAAaI,EAA1F,EAA0FA,kBAAmBU,EAA7G,EAA6GA,mBAAoBF,EAAjI,EAAiIA,wBAAyBG,EAA1J,EAA0JA,4BAYpJwQ,EACLvV,EAEC,wCADA,0CAGIwV,EACLxV,EAEC,oCADA,2DAGIyV,EACLzV,EAEC,iEADA,yEAGF4N,qBAAU,WA4BN,OA3BAhJ,GAAwB,GACxBG,GAA4B,GAC5BhB,GAAiB,GACjBe,GAAmB,GACnBhB,EAAa,cAGb0J,EAAOK,GAAG,qBAAqB,WAG3B6H,cAAc7U,GACK,WAAX,OAAJN,QAAI,IAAJA,OAAA,EAAAA,EAAMyT,OACN2B,IAEJxH,YAAW,WACP7D,OAAOsL,MAAM,cACC,UAAdrV,EAAKyT,KAAmBxR,EAAS,SAAWA,EAAS,cACtD,QAGPgL,EAAOK,GAAG,qBAAqB,WAC3BvD,OAAOsL,MAAM,8BACC,UAAdrV,EAAKyT,KAAmBxR,EAAS,SAAWA,EAAS,eAGzDU,EAA0B2S,YAAYC,EAAkC,MAEjE,WACHJ,cAAc7U,GACd2M,EAAOa,IAAI,qBACXb,EAAOa,IAAI,qBACXtJ,GAA4B,MAElC,IAEF6I,qBAAU,WAQN,OAPAJ,EAAOK,GAAG,wBAAwB,WAC1BnM,GACAoC,EAAa,kBAEjBgB,GAAmB,MAGhB,WACH0I,EAAOa,IAAI,2BAEhB,CAAC3M,IAEJkM,qBAAU,WACN,IAAMmI,EAAiBpN,SAAS8C,iBAAiB,oBAC7CuK,EAAQ,EACRrU,GACAyC,EAAkB,aAClB2R,EAAe5J,SAAQ,SAAA8J,GACfA,EAAcC,WAAW,GAAGhQ,UAAUC,SAAS,kBAC/C6P,GAAS,MAGbA,GAAS,IACTxI,EAAOiC,KAAK,YAAahP,GACzB0N,YAAW,WACP7D,OAAOsL,MAAM,YACC,UAAdrV,EAAKyT,KAAmBxR,EAAS,SAAWA,EAAS,cACtD,OAGP4B,EAAkB,GAAD,OAAI1D,EAAJ,eAEvB,CAACiB,IAEH,IAAMmU,EAAgC,uCAAG,4BAAAzF,EAAA,+EAEVE,MAAM,oEAAD,OAAqE7P,IAFhE,WAE3BqS,EAF2B,QAGnBrC,GAHmB,sBAIvB,IAAIC,MAAM,SAJa,uBAMVoC,EAASnC,OANC,gBAQ7BtG,OAAOsL,MAAM,8BACC,UAAdrV,EAAKyT,KAAmBxR,EAAS,SAAWA,EAAS,aATxB,kDAYjCwO,QAAQC,IAAR,MAZiC,0DAAH,qDAgBhC0E,EAAM,uCAAG,4BAAAtF,EAAA,+EAEWE,MAAM,oDAAqD,CACzEkB,OAAQ,MACRC,QAAS,CAAC,eAAgB,oBAC1BC,KAAMC,KAAKC,UAAU,CACjBrB,SAAUjQ,EAAKiQ,aANhB,cAEDC,EAFC,gBASmBA,EAAIG,OATvB,uCAWG,IAAID,MAAM,4BAXb,yDAcPK,QAAQC,IAAR,MAdO,0DAAH,qDA2DZ,OACI,qCACI,cAAC,EAAD,CAAYzD,OAAQA,EAAQkG,cAAeA,IAC3C,cAAC,EAAD,CAAWlG,OAAQA,IAEnBpL,EAEA,sBAAKqE,UAAS,eAAd,UACI,gCACI,mDACA,6BAAK8O,OAGT,gCACI,0CACA,6BAAKC,OAGT,gCACI,iDACA,6BAAKC,UAIb,wBAAQhP,UAAS,0BAAqBlE,EAA2B,2BAA6B,MAAQ+D,QA/B3E,WAC/B1B,GAAwB,GACpBrC,GACAwC,GAA4B,IA4B5B,SAA2I,qCAE3I,oBAAI0B,UAAS,yBAAkC,mBAAdhF,EAAiC,OAAS,MAA3E,mBAAqG,mBAAdA,EAAiCM,EAAiB,MAE3H,mBAAdN,EAEA,qBAAKgF,UAAU,WAAf,SACI,wBAAQH,QAxEM,WACtB,IAD4B,EACtBkF,EAAQ7C,SAAS8C,iBAAiB,SAClC0K,EAAWxN,SAASC,cAAc,aAClCwN,EAAkBzN,SAASC,cAAc,oBAC3CyN,GAAiB,EAJO,cAMX7K,GANW,IAM5B,2BAAwB,CAAC,IAAhBE,EAAe,QACpB,GAAI1C,SAAS0C,EAAKnF,MAAMuC,QAAU,EAG9B,OAFA4C,EAAKnF,MAAMwC,OAAS,sCACpBsN,GAAiB,IATG,8BAc5B,GAAIA,EAAgB,CAChBtS,GAAiB,GACF,OAAfqS,QAAe,IAAfA,KAAiBlQ,UAAUkH,IAAI,QAC/B+I,EAASD,WAAW,GAAGI,UAAvB,UAAuCtW,EAA0B,qBAAf,cAHlC,oBAICwL,GAJD,IAIhB,2BAAwB,CAAC,IAAhBE,EAAe,QACpBA,EAAKnF,MAAMsC,OAAS,UACpB6C,EAAKnF,MAAMwC,OAAS,KACpB2C,EAAKnF,MAAMuC,OAAS,KAPR,8BASZxG,GACAwB,EAAa,kBACbE,GAAY,KAEZmS,EAAS5P,MAAMgQ,QAAU,MACzBzS,EAAa,YAEjB0J,EAAOiC,KAAK,oBAAqBhP,KA0COgG,UAAU,MAA9C,SAAqDzG,EAAW,eAAO,YAExE,KAEH,cAAC,EAAD,CAAewN,OAAQA,IACvB,cAAC,GAAD,CAASA,OAAQA,IACjB,cAAC,GAAD,QChMGgJ,I,OAtCG,WACd,OACI,qBAAK/P,UAAU,kBAAf,SA2BI,qBAAKA,UAAU,OAAf,SACI,qBAAKA,UAAU,aAAf,SACI,cAACmJ,EAAD,YCqHL6G,I,OApJG,SAAC,GAAgB,IAAdjJ,EAAa,EAAbA,OAEjB,EAA+CtI,aAAc,SAAAxC,GAAK,MAAK,CACnElC,cAAekC,EAAMlC,cACrBQ,OAAQ0B,EAAM1B,OACdT,KAAMmC,EAAMnC,KACZD,MAAOoC,EAAMpC,UAJTE,EAAR,EAAQA,cAAeQ,EAAvB,EAAuBA,OAAQT,EAA/B,EAA+BA,KAAMD,EAArC,EAAqCA,MAOrC,EAAiGmN,aAAgB,SAAAC,GAAO,MAAK,CACzHrK,UAAWqK,EAAQrK,UACnBJ,qBAAsByK,EAAQzK,qBAC9BF,gBAAiB2K,EAAQ3K,gBACzBD,gBAAiB4K,EAAQ5K,gBACzBN,SAAUkL,EAAQlL,SAClBI,QAAS8K,EAAQ9K,YANbS,EAAR,EAAQA,UAAWJ,EAAnB,EAAmBA,qBAAsBF,EAAzC,EAAyCA,gBAAiBD,EAA1D,EAA0DA,gBAAiBN,EAA3E,EAA2EA,SAAUI,EAArF,EAAqFA,QASrFgL,qBAAU,WAYN,MAXe,UAAVtN,GAA+B,aAAVA,GACH,WAAX,OAAJC,QAAI,IAAJA,OAAA,EAAAA,EAAMyT,OACN0C,IAGRlJ,EAAOK,GAAG,sBAAsB,SAAAiC,GAC5B/M,EAAgB+M,EAAK6G,YACrB7T,EAAgBgN,EAAK8G,cACrBpU,EAAS,WAGN,WACHgL,EAAOa,IAAI,yBAEhB,IAEHT,qBAAU,WACF5M,GACAiC,EAAqB4S,YAAYgB,EAAgB,QAEtD,CAAC7V,EAAQT,IASZ,IAAMuW,EAAa,uCAAG,sBAAAzG,EAAA,+EAESE,MAAM,yDAA0D,CACnFkB,OAAQ,MACRC,QAAS,CAAC,eAAgB,oBAC1BC,KAAMC,KAAKC,UAAU,CACjBrB,SAAUjQ,EAAKiQ,SACfxP,QAAQ,MAPF,iBAUA0P,GAVA,sBAUW,IAAIC,MAAM,qCAVrB,uDAYdK,QAAQC,IAAR,MAZc,yDAAH,qDAgBb8F,EAAe,uCAAG,4BAAA1G,EAAA,+EAEOE,MAAM,yDAA0D,CACnFkB,OAAQ,MACRC,QAAS,CAAC,eAAgB,oBAC1BC,KAAMC,KAAKC,UAAU,CACjBrB,SAAUjQ,EAAKiQ,SACfxP,QAASA,MAPD,WAEV+R,EAFU,QAUFrC,GAVE,sBAUS,IAAIC,MAAM,qCAVnB,uBAWYoC,EAASnC,OAXrB,eAaZvN,GAAWrC,GAbC,kDAgBhBgQ,QAAQC,IAAR,MAhBgB,0DAAH,qDAoBf4F,EAAc,uCAAG,8BAAAxG,EAAA,+EAEQE,MAAM,6DAAD,OAA8DhQ,EAAKiQ,SAAnE,qBAAwFjQ,EAAKoP,WAF1G,WAEToD,EAFS,QAGDrC,GAHC,sBAGU,IAAIC,MAAM,wBAHpB,uBAIKoC,EAASnC,OAJd,QAKf,QADMoG,EAJS,cAKf,IAAIA,OAAJ,EAAIA,EAAOxG,YACP1N,EAAgBkU,EAAMrH,UACtB5M,EAAgBiU,EAAMxG,UACtBsG,IACAtJ,EAAOiC,KAAK,kBAAoB,CAACwH,eAAgBD,EAAMrH,SAAUiH,aAAcpW,EAAemW,WAAYpW,EAAKiQ,WAC/GnN,GAAU,GACVb,EAAS,SAXE,kDAcfwO,QAAQC,IAAR,MAde,0DAAH,qDAkBdyF,EAAW,uCAAG,sBAAArG,EAAA,+EAEWE,MAAM,yDAA0D,CACnFkB,OAAQ,SACRC,QAAS,CAAC,eAAgB,oBAC1BC,KAAMC,KAAKC,UAAU,CACjBrB,SAAQ,OAAEjQ,QAAF,IAAEA,OAAF,EAAEA,EAAMiQ,aANZ,iBASEE,GATF,sBASa,IAAIC,MAAM,0BATvB,OAUZtN,GAAU,GACVT,EAAQ,MAXI,kDAaZoO,QAAQC,IAAR,MAbY,0DAAH,qDAiBXiG,EAAQ,uCAAG,8BAAA7G,EAAA,+EAEcE,MAAM,sDAAuD,CAChFkB,OAAQ,OACRC,QAAS,CAAC,eAAgB,oBAC1BC,KAAMC,KAAKC,UAAU,CACjBlC,SAAUnP,MANT,WAEHuS,EAFG,QASKrC,GATL,sBASgB,IAAIC,MAAM,wBAT1B,uBAUUoC,EAASnC,OAVnB,cAUHd,EAVG,iBAWHlN,EAAQkN,GAXL,QAYTzM,GAAU,GAZD,kDAcT2N,QAAQC,IAAR,MAdS,0DAAH,qDAkBd,OACI,qBAAKxK,UAAS,6BAAmC,UAAVnG,GAA+B,aAAVA,EAAwB,cAAgB,MAApG,SAEkB,UAAVA,GAA+B,aAAVA,EACnB,wBAAQgG,QAAUtF,EAAoB0V,EAAXQ,EAAwBzQ,UAAU,YAA7D,SAA2EzF,EAA2B,eAAlB,kBACpF,wBAAQsF,QAASyQ,EAAiBtQ,UAAU,YAA5C,SAA0DzF,EAAwB,eAAf,mBC1CtEmW,I,OApGM,SAAC,GAA4C,IAA1CC,EAAyC,EAAzCA,aAAc5J,EAA2B,EAA3BA,OAAQuH,EAAmB,EAAnBA,KAAMsC,EAAa,EAAbA,OAEhD,EAAqDnS,aAAc,SAAAxC,GAAK,MAAK,CACzEjC,aAAciC,EAAMjC,aACpBH,MAAOoC,EAAMpC,MACbE,cAAekC,EAAMlC,cACrBD,KAAMmC,EAAMnC,SAJRE,EAAR,EAAQA,aAAcH,EAAtB,EAAsBA,MAAOE,EAA7B,EAA6BA,cAAeD,EAA5C,EAA4CA,KAO5C,EAAuDkN,aAAgB,SAAAC,GAAO,MAAK,CAC/E3K,gBAAiB2K,EAAQ3K,gBACzBD,gBAAiB4K,EAAQ5K,gBACzBN,SAAUkL,EAAQlL,aAHdO,EAAR,EAAQA,gBAAiBD,EAAzB,EAAyBA,gBAAiBN,EAA1C,EAA0CA,SAM1CoL,qBAAU,WASN,OARAJ,EAAOK,GAAG,sBAAsB,SAAAiC,GAC5B/M,EAAgB+M,EAAK6G,YACrB7T,EAAgBgN,EAAK8G,cACrBpU,EAAS,WAGbgL,EAAOK,GAAG,kBAAkB,SAAAiC,GAAI,OAAIwH,EAAaxH,MAE1C,WACHtC,EAAOa,IAAI,sBACXb,EAAOa,IAAI,qBAEjB,IAEFT,qBAAU,WACN,IAAM2J,EAAM5O,SAASC,cAAT,cAA8BmM,IAC3B,YAAXsC,GAAyBD,IACzBG,EAAIhR,MAAMgQ,QAAU,MACpBgB,EAAIC,UAAW,EACfD,EAAIrB,WAAW,GAAGuB,UAAY,YAEpC,CAACJ,EAAQD,IAEX,IAAME,EAAe,SAACxH,GAClB,IAAMyH,EAAM5O,SAASC,cAAT,cAA8BkH,EAAKU,WACjC,aAAVlQ,GAAgC,OAARiX,KACH,IAAjBA,EAAIC,WACJD,EAAIhR,MAAMgQ,QAAU,MACpBgB,EAAIC,UAAW,GAEnBD,EAAIrB,WAAW,GAAGuB,UAAY,SAC9B3U,EAAgBgN,EAAKH,YAIvB+H,EAAU,uCAAG,WAAO5R,GAAP,mBAAAuK,EAAA,6DACTc,EAASrL,EAAEE,OAAOU,GADT,kBAGY6J,MAAM,8DAAD,OAA+DY,IAHhF,cAGL4B,EAHK,gBAISA,EAASnC,OAJlB,QAIL2B,EAJK,QAKD5C,WACNnC,EAAOiC,KAAK,cAAe,CAACjP,cAAeA,EAAegQ,SAAUjQ,EAAKiQ,SAAUb,SAAU4C,EAAM5C,WACnG7J,EAAEE,OAAOkQ,WAAW,GAAGuB,UAAY,cACnC3R,EAAEE,OAAOO,MAAMgQ,QAAU,MACzBzQ,EAAEE,OAAOO,MAAMsC,OAAS,UACxB/C,EAAEE,OAAOwR,UAAW,GAVb,kDAaXxG,QAAQC,IAAR,MAbW,0DAAH,sDA+BhB,OACI,sBAAKvK,GAAIqO,EAAM7C,MAAO6C,EAAMtO,UAAU,cAAtC,UACI,sBAAKA,UAAU,aAAf,UACI,6BAAKsO,IAEDqC,GAA2B,WAAXC,EACd,wBAAQG,UAAQ,EAAC/Q,UAAS,aAAQsO,EAAR,oBAA1B,qBAEa,WAAXsC,EACE,wBAAQ5Q,UAAS,aAAQsO,EAAR,oBAAgCzO,QAjBjD,SAACR,GACQ,WAAvBA,EAAEE,OAAO2R,UACTD,EAAW5R,GACmB,WAAvBA,EAAEE,OAAO2R,WATH,SAAC7R,GAClB0H,EAAOiC,KAAK,kBAAoB,CAACwH,eAAgBxW,EAAcmW,aAAcpW,EAAemW,WAAYpW,EAAKiQ,WAC7GzN,EAAgB+C,EAAEE,OAAOU,IACzBlE,EAAS,QAOLoV,CAAa9R,IAa0EY,GAAIqO,EAA7E,oBACA,wBAAQyC,UAAQ,EAAC/Q,UAAS,aAAQsO,EAAR,qBAA1B,wBAGd,qBAAKrO,GAAI2Q,EAAQ5Q,UAAW4Q,SCwKzBQ,I,OAtQC,SAAC,GAAgB,IAuBzBC,EAvBWtK,EAAa,EAAbA,OAEf,EAAgJtI,aAAc,SAAAxC,GAAK,MAAK,CACpK/B,gBAAiB+B,EAAM/B,gBACvBJ,KAAMmC,EAAMnC,KACZc,WAAYqB,EAAMrB,WAClBC,aAAcoB,EAAMpB,aACpBC,aAAcmB,EAAMnB,aACpBC,cAAekB,EAAMlB,cACrBT,yBAA0B2B,EAAM3B,yBAChCf,SAAU0C,EAAM9C,OAAOI,SACvBgC,kBAAmBU,EAAMV,sBATrBrB,EAAR,EAAQA,gBAAiBJ,EAAzB,EAAyBA,KAAMc,EAA/B,EAA+BA,WAAYC,EAA3C,EAA2CA,aAAcC,EAAzD,EAAyDA,aAAcC,EAAvE,EAAuEA,cAAeT,EAAtF,EAAsFA,yBAA0Bf,EAAhH,EAAgHA,SAAUgC,EAA1H,EAA0HA,kBAY1H,EAA+HyL,aAAgB,SAAAC,GAAO,MAAK,CACvJ1K,mBAAoB0K,EAAQ1K,mBAC5BU,cAAegK,EAAQhK,cACvBC,gBAAiB+J,EAAQ/J,gBACzBC,gBAAiB8J,EAAQ9J,gBACzBC,iBAAkB6J,EAAQ7J,iBAC1BT,4BAA6BsK,EAAQtK,gCANjCJ,EAAR,EAAQA,mBAAoBU,EAA5B,EAA4BA,cAAeC,EAA3C,EAA2CA,gBAAiBC,EAA5D,EAA4DA,gBAAiBC,EAA7E,EAA6EA,iBAAkBT,EAA/F,EAA+FA,4BAa/FwK,qBAAU,WAQN,OAPAmK,IACAvK,EAAOK,GAAG,wBAAwB,WAC9BmK,OAGJ5U,EAA4ByS,YAAYmC,EAAkB,MAEnD,WACHxK,EAAOa,IAAI,wBACXqH,cAAc3U,MAEnB,IAIH6M,qBAAU,WACNqK,MACF,CAACzW,EAAeb,IAKlB,IAAMsX,EAAc,WAChB,IAGIC,EAHEC,EAAiB,GACjBC,EAAY,GACdC,EAAe,GAGnB1X,EAAgBwL,SAAQ,SAAAwG,GAAM,IAAD,EACzB,GAAIA,EAAEnC,YAAF,UAAesH,SAAf,aAAe,EAA2BtH,UAC1C4H,EAAU9S,KAAKqN,OACZ,CACH,IAAI2F,GAAqB,EACzB9W,EAAc2K,SAAQ,SAAAoM,GAClB,GAAIA,EAAI/H,WAAamC,EAAEnC,SACnB,OAAO8H,GAAqB,KAIhCA,GACAH,EAAe7S,KAAKqN,OAKhC0F,EAAe7W,EAAcgX,MAAK,SAACnI,EAAGoI,GAClC,OAAOpI,EAAEG,SAASkI,cAAgBD,EAAEjI,SAASkI,cAAgB,GAAK,KAGtER,EAAgBC,EAAeK,MAAK,SAACnI,EAAGoI,GACpC,OAAOpI,EAAEG,SAASkI,cAAgBD,EAAEjI,SAASkI,cAAgB,GAAK,KAGlEN,EAAUpL,OACVtJ,EAAc0U,EAAUO,OAAON,GAAcM,OAAOT,IAEpDxU,EAAc2U,EAAaM,OAAOT,KAIpCF,EAAgB,uCAAG,8BAAA3H,EAAA,+EAEME,MAAM,oEAAD,OAAqEhQ,EAAKiQ,WAFrF,WAEXuC,EAFW,QAGHrC,GAHG,sBAGQ,IAAIC,MAAM,gCAHlB,uBAIWoC,EAASnC,OAJpB,OAIXgI,EAJW,OAKjB/U,EAAiB+U,GALA,kDAOjB5H,QAAQC,IAAR,MAPiB,0DAAH,qDAchB8G,EAAY,uCAAG,gCAAA1H,EAAA,+EAEUE,MAAM,8DAAD,OAA+DhQ,EAAKiQ,WAFnF,WAEPuC,EAFO,QAGCrC,GAHD,sBAGY,IAAIC,MAAM,kCAHtB,uBAISoC,EAASnC,OAJlB,OAIP6B,EAJO,QAKL,OAAJlS,QAAI,IAAJA,GAAA,UAAAA,EAAMkS,eAAN,eAAezF,UAAf,OAAyByF,QAAzB,IAAyBA,OAAzB,EAAyBA,EAASzF,SAClChK,EAAmByP,GACnBuF,MAEAtU,EAAc,IACdV,EAAmB,IACnBa,EAAiB,KAXR,kDAcbmN,QAAQC,IAAR,MAda,0DAAH,qDAoBZ4H,EAAiB,uCAAG,gDAAAxI,EAAA,6DACtB1H,SAASC,cAAc,mBAAmBsJ,MAAQ,GAC5C4G,EAAcnQ,SAASC,cAAc,qBACvCmQ,EAAa,GACbzG,EAAiB,GACjB0G,EAAkB,GAClBC,EAAuB,GANL,kBAWA1I,MAAM,qEAAD,OAAsEhQ,EAAKiQ,WAXhF,WAWZC,EAXY,QAYTC,GAZS,uBAaR,IAAIC,MAAM,iCAbF,yBAeKF,EAAIG,OAfT,WAgBD,QADXC,EAfY,SAgBoB,KAAbA,EAhBP,qBAiBQA,EAASE,MAAM,KACnB2B,SAASnR,GAlBb,uBAmBVuX,EAAYvS,MAAMuK,YAAY,qBAAsB,qCAC9C,IAAIH,MAAM,mCApBN,yBA0BCJ,MAAM,8DAAD,OAA+DhP,IA1BrE,YA0BZwQ,EA1BY,QA2BRrB,GA3BQ,uBA4BdoI,EAAYvS,MAAMuK,YAAY,qBAAsB,yBAC9C,IAAIH,MAAM,uBA7BF,yBA+BEoB,EAAKnB,OA/BP,YA+BZ2B,EA/BY,QAgCR/B,WAAajQ,EAAKiQ,SAhCV,uBAiCdsI,EAAYvS,MAAMuK,YAAY,qBAAsB,qCAC9C,IAAIH,MAAM,6BAlCF,YAmCP4B,EAAM/B,SAnCC,oBAoCduI,EAAaxG,EAAM/B,SACnB8B,EAAiBC,EAAM5C,SAInBwC,EAAa,GACK,OAAlBI,EAAME,SAAsC,KAAlBF,EAAME,UAChCN,EAAaI,EAAME,QAAQ1B,MAAM,MAER,OAAzBwB,EAAM2G,gBAAoD,KAAzB3G,EAAM2G,eA7C7B,sBA8CVD,EAAuB1G,EAAM2G,eAAenI,MAAM,MACzB2B,SAASnS,EAAKiQ,UA/C7B,uBAgDNsI,EAAYvS,MAAMuK,YAAY,qBAAsB,0CAC9C,IAAIH,MAAM,wCAjDV,YAkDCwB,EAAWO,SAASnS,EAAKiQ,UAlD1B,uBAmDNsI,EAAYvS,MAAMuK,YAAY,qBAAsB,iCAC9C,IAAIH,MAAM,+BApDV,QAsDNsI,EAAqB3T,KAAK/E,EAAKiQ,UAC/BwI,EAAkBzG,EAAM2G,eAAeP,OAArB,WAAgCpY,EAAKiQ,WAvDjD,oCA0DN2B,EAAWO,SAASnS,EAAKiQ,UA1DnB,uBA2DNsI,EAAYvS,MAAMuK,YAAY,qBAAsB,iCAC9C,IAAIH,MAAM,+BA5DV,QA8DVqI,EAAkBzY,EAAKiQ,SACvByI,EAAuB,CAAC1Y,EAAKiQ,UA/DnB,eAkElBsI,EAAYvS,MAAMuK,YAAY,qBAAsB,MAlElC,UAmECP,MAAM,8DAA+D,CACpFkB,OAAQ,MACJC,QAAS,CAAC,eAAgB,oBAC1BC,KAAMC,KAAKC,UAAU,CACjBC,YAAakH,EACbxI,SAAUuI,MAxEJ,YAmEZlG,EAnEY,QA2ERnC,GA3EQ,uBA4ER,IAAIC,MAAM,kDA5EF,yBA8EMkC,EAAKjC,OA9EX,iBAgFdpD,EAAOiC,KAAK,sBAAuB6C,GACnCwF,EAA4BvF,GAjFd,kDAoFlBvB,QAAQC,IAAR,MApFkB,0DAAH,qDAiGvB,OACI,sBAAKxK,UAAS,2BAAsBzG,EAAW,SAAW,KAA5C,aAAsDgC,GAAqBhC,EAAY,OAAS,MAA9G,UACI,sBAAKyG,UAAU,yBAAf,UACQ,yCACA,uBAAOA,UAAU,eAAe0O,SAAU,SAACrP,GAAD,OAAOnC,EAAgBmC,EAAEE,OAAOkM,QAAQ1F,KAAK,OAAO4I,YAAY,sBAElH,qBAAK3O,UAAU,iBAAf,SACI,qBAAKA,UAAU,uBAAf,SAEIpF,EAAW2L,OAEX,qBAAKvG,UAAU,cAAf,SAMIpF,EAAW+E,KAAI,SAAAuM,GACX,OAAIA,EAAEnC,UAAYmC,EAAEnC,SAASkI,cAAchG,SAASpR,EAAaoX,gBA3BjES,EA4BuBxG,EAAEyG,YA3B7BC,KAAKC,MACE,KAAUH,EA2BE,cAAC,GAAD,CAAc/B,aAAczE,EAAE4G,OAAQ/L,OAAQA,EAAyBuH,KAAMpC,EAAEnC,SACtF6G,OAAO,UAD2D1E,EAAEnC,UAG7D,cAAC,GAAD,CAAc4G,aAAczE,EAAE4G,OAAQ/L,OAAQA,EAAyBuH,KAAMpC,EAAEnC,SACtF6G,OAAO,WAD2D1E,EAAEnC,UAG9D,KAnCf,IAAC2I,OAuCN,oBAAI1S,UAAU,YAAd,4CAIV,sBAAKA,UAAU,YAAf,UACI,oBAAIA,UAAU,gBAAd,0BACA,uBAAOA,UAAU,iBAAiB0O,SAAU,SAACrP,GAAD,OAAOlC,EAAgBkC,EAAEE,OAAOkM,QAAQ1F,KAAK,OAAO4I,YAAY,qBAC5G,wBAAQ3O,UAAU,mBAAmBH,QAASuS,EAA9C,0BCrPDW,GAbK,SAAC,GAAoB,EAAnB9F,cAClB,OACA,sBAAKjN,UAAU,mBAAf,UACI,qBAAKA,UAAU,yBAAf,SACI,2CAEJ,qBAAKA,UAAU,sBAAf,SACI,2ECwDGgT,GAhED,SAAC,GAAsB,IAApB/F,EAAmB,EAAnBA,cAEb,EAAsDxO,aAAc,SAAAxC,GAAK,MAAK,CAC1ElC,cAAekC,EAAMlC,cACrBU,SAAUwB,EAAMxB,SAChBC,SAAUuB,EAAMvB,SAChBH,OAAQ0B,EAAM1B,WAJVR,EAAR,EAAQA,cAAeU,EAAvB,EAAuBA,SAAUC,EAAjC,EAAiCA,SAAUH,EAA3C,EAA2CA,OAO3C,EAAyDyM,aAAgB,SAAAC,GAAO,MAAK,CACjFnK,YAAamK,EAAQnK,YACrBC,YAAakK,EAAQlK,YACrBZ,QAAS8K,EAAQ9K,QACjBS,UAAWqK,EAAQrK,cAJfE,EAAR,EAAQA,YAAaC,EAArB,EAAqBA,YAAaZ,EAAlC,EAAkCA,QAASS,EAA3C,EAA2CA,UAOrCqW,EAAQ/Q,SAASC,cAAc,UAE/B+Q,EAAa,uCAAG,WAAO7T,GAAP,iBAAAuK,EAAA,+EAEIE,MAAM,+CAAgD,CACtEkB,OAAQ,MACRC,QAAS,CAAC,eAAgB,oBAC1BC,KAAMC,KAAKC,UAAU,CACnBrB,SAAUtP,EACVC,SAAUA,EACVwO,SAAUnP,MARA,cAERiQ,EAFQ,gBAWMA,EAAIG,OAXV,QAWR2B,EAXQ,QAYJ/B,UACFxP,GACAqC,GAAU,GAEdT,EAAQ2P,GACRmB,EAAc5N,IACG,gBAAVyM,EACPmH,EAAMnT,MAAMuK,YAAY,kBAAmB,oCAC1B,OAAV4I,GACPA,EAAMnT,MAAMuK,YAAY,kBAAmB,uDArBjC,kDAwBdE,QAAQC,IAAR,MAxBc,0DAAH,sDA6BnB,OACI,sBAAKxK,UAAU,QAAf,UACI,wCACA,sBAAKA,UAAU,WAAf,UACI,0CACA,uBAAO2O,YAAY,cAAcD,SAAU,SAACrP,GAAD,OAAOvC,EAAYuC,EAAEE,OAAOkM,QAAQ1F,KAAK,YAExF,sBAAK/F,UAAU,WAAf,UACI,0CACA,uBAAO2O,YAAY,cAAcD,SAAU,SAACrP,GAAD,OAAOtC,EAAYsC,EAAEE,OAAOkM,QAAQ1F,KAAK,gBAExF,wBAAQ/F,UAAU,WAAWyL,MAAM,QAAQ5L,QAASqT,EAApD,mBACA,wBAAQzH,MAAM,eAAe5L,QAASoN,EAAejN,UAAU,eAA/D,0BCWGmT,GAtEE,SAAC,GAAuB,IAArBlG,EAAoB,EAApBA,cAEhB,EAAsDxO,aAAc,SAAAxC,GAAK,MAAK,CAC1ElC,cAAekC,EAAMlC,cACrBU,SAAUwB,EAAMxB,SAChBC,SAAUuB,EAAMvB,SAChBH,OAAQ0B,EAAM1B,WAJVR,EAAR,EAAQA,cAAeU,EAAvB,EAAuBA,SAAUC,EAAjC,EAAiCA,SAAUH,EAA3C,EAA2CA,OAO3C,EAAyDyM,aAAgB,SAAAC,GAAO,MAAK,CACjFnK,YAAamK,EAAQnK,YACrBC,YAAakK,EAAQlK,YACrBZ,QAAS8K,EAAQ9K,QACjBS,UAAWqK,EAAQrK,cAJfE,EAAR,EAAQA,YAAaC,EAArB,EAAqBA,YAAaZ,EAAlC,EAAkCA,QAASS,EAA3C,EAA2CA,UAOrCwW,EAAWlR,SAASC,cAAc,aAqCxC,OACI,sBAAKnC,UAAU,WAAf,UACI,0CACA,sBAAKA,UAAU,WAAf,UACI,0CACA,uBAAO2O,YAAY,cAAcD,SAAU,SAACrP,GAAD,OAAOvC,EAAYuC,EAAEE,OAAOkM,QAAQ1F,KAAK,YAExF,sBAAK/F,UAAU,WAAf,UACI,0CACA,uBAAO2O,YAAY,cAAcD,SAAU,SAACrP,GAAD,OAAOtC,EAAYsC,EAAEE,OAAOkM,QAAO1F,KAAK,gBAEvF,wBAAQ/F,UAAU,cAAcyL,MAAM,WAAW5L,QA9ChC,SAACR,GAClB5E,EAAS8L,OAAS,EAClB6M,EAAStT,MAAMuK,YAAY,kBAAmB,4CACvC5P,EAAS8L,OAAS,GACzB6M,EAAStT,MAAMuK,YAAY,kBAAmB,gDACvC3P,EAAS6L,OAAS,EACzB6M,EAAStT,MAAMuK,YAAY,kBAAmB,4CAE9CP,MAAM,kDAAmD,CACvDkB,OAAQ,OACRC,QAAS,CAAC,eAAgB,oBAC1BC,KAAMC,KAAKC,UAAU,CACnBrB,SAAUtP,EACVC,SAAUA,EACVwO,SAAUnP,MAGbsZ,MAAK,SAAA/G,GAAQ,OAAIA,EAASnC,UAC1BkJ,MAAK,SAAAvH,GACAA,EAAM/B,UACFxP,GACAqC,GAAU,GAEhBT,EAAQ2P,GACRmB,EAAc5N,IACK,gBAAVyM,EACTsH,EAAStT,MAAMuK,YAAY,kBAAmB,oCAEpCyB,EAAM7B,IACZmJ,EAAStT,MAAMuK,YAAY,kBAAmB,yCAiBtD,sBACA,wBAAQoB,MAAM,YAAY5L,QAASoN,EAAejN,UAAU,eAA5D,uBCbGsT,GAjDK,SAAC,GAA+B,IAA7BrG,EAA4B,EAA5BA,cAAelG,EAAa,EAAbA,OAElC,EAA2BtI,aAAc,SAAAxC,GAAK,MAAK,CAC/CtB,QAASsB,EAAMtB,QACfd,MAAOoC,EAAMpC,UAFTc,EAAR,EAAQA,QAASd,EAAjB,EAAiBA,MAKTmD,EAAegK,aAAgB,SAAAC,GAAO,MAAK,CAC/CjK,WAAYiK,EAAQjK,eADhBA,WAIRmK,qBAAU,WACQ,gBAAVtN,GACA0Z,MAEN,CAAC1Z,IAEH,IAAM0Z,EAAa,uCAAG,gCAAA3J,EAAA,sDACTjL,EAAI,EADK,YACFA,EAAI,GADF,iCAESmL,MAAM,6DAAD,OAA8DnL,IAF5E,WAER2N,EAFQ,QAGArC,GAHA,sBAIJ,IAAIC,MAAM,SAJN,uBAMKoC,EAASnC,OANd,OAMRd,EANQ,OAOdrM,EAAWqM,GAPG,QACK1K,IADL,2DAAH,qDAWnB,OACI,qCACI,cAAC,EAAD,CAAYsO,cAAeA,EAAelG,OAAQA,IAElDpM,EAAQ4L,OAER,qBAAKvG,UAAU,mBAAf,SACI,qBAAKA,UAAU,UAAf,SAEIrF,EAAQgF,KAAI,SAAA6T,GACR,OAAO,qBAA0BxT,UAAU,WAApC,cAAiDwT,EAAOzJ,SAAxD,MAAoE,sBAAM/J,UAAU,OAAhB,SAAwBwT,EAAOC,OAAnG,WAASD,EAAOzJ,iBAKjC,S,UC/CDhD,G,OAAS2M,GAAG,0C,4BC4eVC,OAzdf,WAAgB,IAAD,EACX,EAAmQlV,aAAc,SAAAxC,GAAK,MAAK,CACvR3B,yBAA0B2B,EAAM3B,yBAChCT,MAAOoC,EAAMpC,MACbC,KAAMmC,EAAMnC,KACZE,aAAciC,EAAMjC,aACpBG,kBAAmB8B,EAAM9B,kBACzBC,uBAAwB6B,EAAM7B,uBAC9BG,OAAQ0B,EAAM1B,OACdF,wBAAyB4B,EAAM5B,wBAC/BhB,QAAS4C,EAAM9C,OAAOE,QACtBC,QAAS2C,EAAM9C,OAAOG,QACtBC,SAAU0C,EAAM9C,OAAOI,SACvBgC,kBAAmBU,EAAMV,kBACzBE,aAAcQ,EAAMR,aACpB9B,MAAOsC,EAAM9C,OAAOQ,MACpBiC,iBAAkBK,EAAML,iBACxBZ,UAAWiB,EAAMjB,UACjBW,qBAAsBM,EAAMN,yBAjBxBrB,EAAR,EAAQA,yBAA0BT,EAAlC,EAAkCA,MAAOC,EAAzC,EAAyCA,KAAME,EAA/C,EAA+CA,aAAcG,EAA7D,EAA6DA,kBAAmBC,EAAhF,EAAgFA,uBAAwBG,EAAxG,EAAwGA,OAAQF,EAAhH,EAAgHA,wBAAyBhB,EAAzI,EAAyIA,QAASC,EAAlJ,EAAkJA,QAASC,EAA3J,EAA2JA,SAAUgC,EAArK,EAAqKA,kBAAmBE,EAAxL,EAAwLA,aAAqBG,GAA7M,EAAsMjC,MAAtM,EAA6MiC,kBAAkBZ,EAA/N,EAA+NA,UAAWW,EAA1O,EAA0OA,qBAoB1O,EAA4UqL,aAAgB,SAAAC,GAAO,MAAK,CACpWlL,SAAUkL,EAAQlL,SAClBI,QAAS8K,EAAQ9K,QACjBC,iBAAkB6K,EAAQ7K,iBAC1BQ,UAAWqK,EAAQrK,UACnBF,2BAA4BuK,EAAQvK,2BACpCO,cAAegK,EAAQhK,cACvBV,mBAAoB0K,EAAQ1K,mBAC5Ba,iBAAkB6J,EAAQ7J,iBAC1BD,gBAAiB8J,EAAQ9J,gBACzBG,iBAAkB2J,EAAQ3J,iBAC1BR,YAAamK,EAAQnK,YACrBC,YAAakK,EAAQlK,YACrBkB,gBAAiBgJ,EAAQhJ,gBACzBF,qBAAsBkJ,EAAQlJ,qBAC9BC,kBAAmBiJ,EAAQjJ,kBAC3BG,wBAAyB8I,EAAQ9I,wBACjCC,oBAAqB6I,EAAQ7I,oBAC7Bf,aAAc4J,EAAQ5J,aACtBS,YAAamJ,EAAQnJ,gBAnBjB/B,EAAR,EAAQA,SAAUI,EAAlB,EAAkBA,QAASC,EAA3B,EAA2BA,iBAAkBQ,EAA7C,EAA6CA,UAAWF,EAAxD,EAAwDA,2BAA4BO,EAApF,EAAoFA,cAAeV,EAAnG,EAAmGA,mBAAoBa,EAAvH,EAAuHA,iBAAkBD,EAAzI,EAAyIA,gBAAiBG,EAA1J,EAA0JA,iBAAkBR,EAA5K,EAA4KA,YAAaC,EAAzL,EAAyLA,YAAakB,EAAtM,EAAsMA,gBAAiBF,EAAvN,EAAuNA,qBAAsBC,EAA7O,EAA6OA,kBAAmBG,EAAhQ,EAAgQA,wBAAyBC,EAAzR,EAAyRA,oBAAqBf,EAA9S,EAA8SA,aAsBxS4P,GAtBN,EAA4TnP,YAsBzS,uCAAG,WAAOuB,GAAP,eAAAuK,EAAA,sDACZ6B,EAAQpM,EAAEE,OAAOqU,aAAa,SADlB,KAEXnI,EAFW,OAGT,WAHS,OAST,iBATS,OAYT,cAZS,OAeT,WAfS,QAkBT,oBAlBS,QAqBT,UArBS,QAwBT,aAxBS,QA2BT,SA3BS,+BAIV,OAAI3R,QAAJ,IAAIA,OAAJ,EAAIA,EAAMiQ,WACNnN,GAAU,GAEdb,EAAS,SAPC,mCAUVA,EAAS,YAVC,mCAaVA,EAAS,SAbC,oCAgBVA,EAAS,YAhBC,oCAmBVA,EAAS,eAnBC,4CAyBVA,EAAS,YAzBC,oCA4BV,OAAIjC,QAAJ,IAAIA,OAAJ,EAAIA,EAAMiQ,WACNnN,GAAU,GAEdb,EAAS,QA/BC,8BAkCV,OAAIjC,QAAJ,IAAIA,OAAJ,EAAIA,EAAMiQ,WACNnN,GAAU,GAEdb,EAAS,SArCC,4CAAH,uDAyCb8X,EAAmB,WACrBzV,EAAoByF,OAAOiQ,OAAOC,MAAQlQ,OAAOiQ,OAAOE,SAG5D7M,qBAAU,WAaN,OAZAO,YAAW,WACPmM,IACAI,MACD,IAEHpQ,OAAO+J,iBAAiB,SAAUiG,GAClC3R,SAAS0L,iBAAiB,YAAasG,GAEvCnN,GAAOK,GAAG,WAAW,WACjBhL,EAAiB2K,GAAO9G,OAGrB,WACH8G,GAAOa,IAAI,WACX/D,OAAOmK,oBAAoB,SAAU6F,GACrC3R,SAAS8L,oBAAoB,YAAakG,MAE/C,IAEH/M,qBAAU,WACF9N,GACKE,GACD2G,EAAMU,WAAWC,MAAK,GAE1BX,EAAMC,aAAaU,MAAK,GACxBX,EAAMS,YAAYE,MAAK,GACvBX,EAAMY,SAASD,MAAK,GACpBX,EAAMa,UAAUF,MAAK,GACrBX,EAAMc,cAAcH,MAAK,GACzBX,EAAMe,kBAAkBJ,MAAK,GAC7BX,EAAMgB,WAAWL,MAAK,GACtBX,EAAMiB,SAASN,MAAK,GACpBX,EAAMkB,WAAWP,MAAK,GACtBX,EAAMmB,YAAYR,MAAK,GACvBX,EAAMoB,cAAcT,MAAK,GACzBX,EAAMqB,gBAAgBV,MAAK,KAGtBtH,GACD2G,EAAMU,WAAWC,MAAK,GAE1BX,EAAMC,aAAaU,MAAK,GACxBX,EAAMS,YAAYE,MAAK,GACvBX,EAAMY,SAASD,MAAK,GACpBX,EAAMa,UAAUF,MAAK,GACrBX,EAAMc,cAAcH,MAAK,GACzBX,EAAMe,kBAAkBJ,MAAK,GAC7BX,EAAMgB,WAAWL,MAAK,GACtBX,EAAMiB,SAASN,MAAK,GACpBX,EAAMkB,WAAWP,MAAK,GACtBX,EAAMmB,YAAYR,MAAK,GACvBX,EAAMoB,cAAcT,MAAK,GACzBX,EAAMqB,gBAAgBV,MAAK,MAEhC,CAACxH,IAEJ8N,qBAAU,WACF7N,GACA4G,EAAMM,WAAWK,MAAK,GACtBX,EAAMQ,UAAUG,MAAK,GACrBX,EAAMO,mBAAmBI,MAAK,KAE9BX,EAAMM,WAAWK,MAAK,GACtBX,EAAMQ,UAAUG,MAAK,GACrBX,EAAMO,mBAAmBI,MAAK,MAEnC,CAACvH,IAEJ6N,qBAAU,WAAO,IAAD,EAcZ,OAbA,OAAIrN,QAAJ,IAAIA,GAAJ,UAAIA,EAAMiQ,gBAAV,aAAI,EAAgBxD,SACF,UAAV1M,GAA+B,aAAVA,IACrBwW,IACA8D,GAAmB,IAEvBzX,EAA2B0S,YAAYgF,EAAkB,QAEzDtX,EAAY,MACZC,EAAY,MACZkS,cAAc5U,GACd4U,cAAc9U,IAGX,WACH8U,cAAc5U,MAEnB,QAACP,QAAD,IAACA,OAAD,EAACA,EAAMiQ,WAEV5C,qBAAU,WACD5M,IACD0U,cAAc9U,IACd,OAAIL,QAAJ,IAAIA,OAAJ,EAAIA,EAAMiQ,WACNsG,OAGT,CAAC9V,IAEJ4M,qBAAU,WA8BE,IAAD,EA7BO,SAAVtN,GACA+C,GAAU,GACVuX,GAAmB,GACnBlF,cAAc3U,GACd+V,IACArS,GAAkB,GACA,mBAAdhD,GACIkF,EAAMM,WAAW6T,WAEjBnU,EAAMM,WAAW8T,OAEhBpU,EAAMO,mBAAmB4T,WAE1BnU,EAAMO,mBAAmBuB,OAExB9B,EAAMC,aAAakU,WAEpBnU,EAAMC,aAAa6B,SAGlB9B,EAAMQ,UAAU2T,WAEjBnU,EAAMQ,UAAUsB,OAEhB9B,EAAMO,mBAAmB4T,WAEzBnU,EAAMO,mBAAmB6T,UAIjCjX,EAAa,cACbC,GAAiB,IACjB,OAAIxD,QAAJ,IAAIA,GAAJ,UAAIA,EAAMiQ,gBAAV,aAAI,EAAgBxD,SAChB4N,GAAmB,GAEvBlF,cAAc7U,GACVqB,IAAiByE,EAAMM,WAAW6T,WAElCnU,EAAMM,WAAWwB,OAEjB9B,EAAMQ,UAAU2T,WAEhBnU,EAAMQ,UAAU4T,OAEhBpU,EAAMO,mBAAmB4T,WAEzBnU,EAAMO,mBAAmB6T,OAEzBpU,EAAMC,aAAakU,WAEnBnU,EAAMC,aAAamU,QAyB3B,MArBe,UAAVza,GAAiC,aAAVA,IACL,WAAX,OAAJC,QAAI,IAAJA,OAAA,EAAAA,EAAMyT,OACNpR,EAAQ,MAEZ8S,cAAc3U,GACd2C,EAAc,IACdV,EAAmB,IACnBa,EAAiB,IACjBD,EAAgB,KAGN,aAAVtD,GACAkE,GAAqB,GAGrBxE,EACA2I,SAAS0L,iBAAiB,WAAY2G,GAEtCrS,SAAS0L,iBAAiB,UAAW2G,GAGlC,WACChb,EACA2I,SAAS8L,oBAAoB,WAAYuG,GAEzCrS,SAAS8L,oBAAoB,UAAWuG,MAGjD,CAAC1a,EAAOmB,EAAWW,EAAsBF,IAE5C,IAAM4U,EAAa,uCAAG,sBAAAzG,EAAA,+EAEQE,MAAM,yDAA0D,CACnFkB,OAAQ,MACRC,QAAS,CAAC,eAAgB,oBAC1BC,KAAMC,KAAKC,UAAU,CACjBrB,SAAQ,OAAEjQ,QAAF,IAAEA,OAAF,EAAEA,EAAMiQ,SAChBxP,QAAQ,MAPD,iBAUD0P,GAVC,sBAUU,IAAIC,MAAM,qCAVpB,uDAYfK,QAAQC,IAAR,MAZe,yDAAH,qDAgBb4J,EAAgB,uCAAG,sBAAAxK,EAAA,+EAEME,MAAM,4DAA6D,CACtFkB,OAAQ,MACRC,QAAS,CAAC,eAAgB,oBAC1BC,KAAMC,KAAKC,UAAU,CACjBrB,SAAQ,OAAEjQ,QAAF,IAAEA,OAAF,EAAEA,EAAMiQ,aANP,iBASHE,GATG,sBAUP,IAAIC,MAAM,SAVH,uDAajBK,QAAQC,IAAR,MAbiB,yDAAH,qDAiBhByJ,EAAY,uCAAG,sBAAArK,EAAA,+EAEUE,MAAM,sDAAuD,CAChFkB,OAAQ,SACRC,QAAS,CAAC,eAAgB,sBAJjB,iBAMChB,GAND,sBAMY,IAAIC,MAAM,wBANtB,uDAQbK,QAAQC,IAAR,MARa,yDAAH,qDAYZ+J,EAAkB,SAAClV,GAChB5D,GAAiByE,EAAMM,WAAW6T,WAAuB,SAAVxa,IAChDqG,EAAMM,WAAWwB,OACjB/D,MAIuB,WAArBoB,EAAEE,OAAOiV,UAA2BnV,EAAEE,OAAOE,UAAUC,SAAS,kBAEjEL,EAAEE,OAAOE,UAAUC,SAAS,cAE7BQ,EAAMS,YAAYqB,OAGtB,IAAMyS,EAAkBvS,SAASC,cAAc,iBAC3CsS,IAAoBpV,EAAEE,SAAU,OAACkV,QAAD,IAACA,OAAD,EAACA,EAAiB/U,SAASL,EAAEE,UAAsB,SAAV1F,GACzEsE,GAAwB,IAI5BuW,GAAiB,EACfR,EAAkB,SAAC7U,GAEO,WAArBA,EAAEE,OAAOiV,UAA2BnV,EAAEE,OAAOE,UAAUC,SAAS,kBAElEL,EAAEE,OAAOE,UAAUC,SAAS,YAEzBgV,IACAxU,EAAMU,WAAWoB,OACjB0S,GAAiB,GAGrBA,GAAiB,GAInBP,EAAkB,uCAAG,WAAOQ,GAAP,SAAA/K,EAAA,+EAEIE,MAAM,mDAAoD,CAC7EkB,OAAQ,MACRC,QAAS,CAAC,eAAgB,oBAC1BC,KAAMC,KAAKC,UAAU,CACjBrB,SAAQ,OAAEjQ,QAAF,IAAEA,OAAF,EAAEA,EAAMiQ,SAChB6K,SAAUD,MAPC,iBAUL1K,GAVK,sBAWT,IAAIC,MAAM,SAXD,uDAcnBK,QAAQC,IAAR,MAdmB,yDAAH,sDAsDxB,OApCA3G,OAAO+J,iBAAiB,gBAAgB,SAACvO,GACrCA,EAAEgG,kBACF,OAAIvL,QAAJ,IAAIA,OAAJ,EAAIA,EAAMiQ,YACNsG,IACA8D,GAAmB,IAET,SAAVta,GACAkN,GAAOiC,KAAK,iBAAkBhP,GAElCqF,EAAEwV,YAAc,MAGpB3S,SAASiD,UAAY,SAAC9F,GAClB,IAQwE,QARlEyV,EAAW5S,SAASC,cAAc,aAClC4S,EAAc7S,SAASC,cAAc,gBACrC6S,EAAc9S,SAASC,cAAc,8BACrC8S,EAAmB/S,SAASC,cAAc,iCAC1C+S,EAAchT,SAASC,cAAc,8BACrCgT,EAAmBjT,SAASC,cAAc,iCAC1CiT,EAAmBlT,SAASC,cAAc,qBAEjC,UAAV9C,EAAEoP,KAA+B,UAAV5U,GAA+B,aAAVA,EAQ3B,UAAVwF,EAAEoP,KAA+B,aAAV5U,IAC/BwF,EAAEgG,iBACFnF,EAAMS,YAAYqB,OAClBoT,EAAiBC,UAVjBhW,EAAEgG,mBACc,OAAX2P,QAAW,IAAXA,GAAA,UAAAA,EAAavJ,aAAb,eAAoBlF,UAApB,OAA8B2O,QAA9B,IAA8BA,GAA9B,UAA8BA,EAAazJ,aAA3C,aAA8B,EAAoBlF,UAA4B,OAAhB0O,QAAgB,IAAhBA,GAAA,UAAAA,EAAkBxJ,aAAlB,eAAyBlF,UAAzB,OAAmC4O,QAAnC,IAAmCA,GAAnC,UAAmCA,EAAkB1J,aAArD,aAAmC,EAAyBlF,WAC3HrG,EAAMS,YAAYqB,OACR,UAAVnI,EACEib,EAASO,QACTN,EAAYM,WAU1B,sCAEKzZ,GAAoBrC,EACnB,qBAAKyG,UAAU,eAAf,SAA8B,6DAC9B,KAGQ,UAAVnG,GAA+B,aAAVA,EAErB,sBAAKmG,UAAS,qBAAgBzG,EAAW,SAAW,MAApD,UACI,cAAC,EAAD,CAAYwN,OAAQA,GAAQkG,cAAeA,IAEtC1T,EAEC,KADA,cAAC,GAAD,CAAa0T,cAAeA,IAGlC,qBAAKjN,UAAU,WAAf,SACI,8CAEJ,cAAC,GAAD,CAAW+G,OAAQA,KACnB,qBAAK/G,UAAU,SAAf,SAEkB,UAAVnG,EACE,cAAC,GAAD,CAAOoT,cAAeA,IACtB,cAAC,GAAD,CAAUA,cAAeA,MAGnC,cAAC,GAAD,OAGJ,mCAEc,aAAVpT,GAAkC,gBAAVA,GAEhB,OAAJC,QAAI,IAAJA,GAAA,UAAAA,EAAMiQ,gBAAN,eAAgBxD,QAEhB,qCACI,sBAAKvG,UAAS,yBAA8B,gBAAVnG,EAA0B,OAAS,KAAvD,YAA+DN,EAAW,SAAW,MAAnG,UACI,cAAC,EAAD,CAAYwN,OAAQA,GAAQkG,cAAeA,IAC3C,cAAC,GAAD,CAASlG,OAAQA,KACjB,sBAAK/G,UAAS,wBAAmBzE,EAAoB,OAAS,MAA9D,UACI,cAAC,GAAD,CAAWwL,OAAQA,KACnB,cAAC,GAAD,OAEJ,cAAC,GAAD,OAEJ,sBAAK/G,UAAS,sBAA2B,aAAVnG,EAAuB,OAAS,MAA/D,UACI,cAAC,GAAD,CAAaoT,cAAeA,EAAelG,OAAQA,KACnD,cAAC,GAAD,UAIR,sBAAK/G,UAAS,sBAAiBzG,EAAW,SAAW,MAArD,UACI,cAAC,GAAD,CAAa0T,cAAeA,EAAelG,OAAQA,KACnD,cAAC,GAAD,OAGR,qBAAK/G,UAAS,mBAAczG,EAAW,SAAW,WAAlD,SACI,cAAC,GAAD,CAAMwN,OAAQA,GAAQkG,cAAeA,YCxdtCqI,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBnC,MAAK,YAAkD,IAA/CoC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCIRO,GAAQC,YAAY7c,GAE1B8c,IAASC,OACP,cAAC,IAAD,CAAeH,MAAOA,GAAtB,SACM,cAAC,GAAD,MAEN5T,SAASqF,eAAe,SAM1B+N,O","file":"static/js/main.804c7f46.chunk.js","sourcesContent":["import { useStoreState } from 'easy-peasy';\r\nimport { audio } from '../../audio';\r\nimport $ from 'jquery';\r\nimport './ships.css';\r\nimport '../boards/board.css';\r\n\r\nlet moving = false;\r\nlet rotating = false;\r\nlet orientation = 'hor';\r\nlet selectedShip = '';\r\nlet selectedShipName = '';\r\nlet shipIsSelected = false;\r\nlet setManualGridLocation = false;\r\nlet mouseX;\r\nlet mouseY;\r\n\r\nconst Ships = () => {\r\n    const { gameRoute, isMobile, showGameInstructions } = useStoreState(state => ({\r\n        gameRoute: state.gameRoute,\r\n        isMobile: state.stored.isMobile,\r\n        showGameInstructions: state.showGameInstructions\r\n    }));\r\n\r\n    // Decide what happens when a ship is selected to move\r\n\r\n    const onShipSelect = (e) => {\r\n        if (!shipIsSelected && (gameRoute === 'placeShips')) {\r\n            audio.pickUpShip.play();\r\n            const userBoard = document.querySelector('.userBoard');\r\n            shipIsSelected = true;\r\n            selectedShip = e.target.parentElement;\r\n            userBoard.style.cursor = 'pointer';\r\n            selectedShip.style.zIndex = '-2';\r\n            selectedShip.style.border = '2px solid rgba(0, 250, 0, 0.5)';\r\n\r\n            if (parseInt(e.target.parentElement.offsetWidth) > parseInt(e.target.parentElement.offsetHeight)) {\r\n                orientation = 'hor';\r\n            } else if (parseInt(e.target.parentElement.offsetHeight) > parseInt(e.target.parentElement.offsetWidth)) {\r\n                orientation = 'vert';\r\n            }\r\n\r\n            if (selectedShip.classList.contains('carrier')) {\r\n                selectedShipName = 'carrier';\r\n            } else if (selectedShip.classList.contains('battleship')) {\r\n                selectedShipName = 'battleship';\r\n            } else if (selectedShip.classList.contains('cruiser')) {\r\n                selectedShipName = 'cruiser';\r\n            } else if (selectedShip.classList.contains('submarine')) {\r\n                selectedShipName = 'submarine';\r\n            } else if (selectedShip.classList.contains('destroyer')) {\r\n                selectedShipName = 'destroyer';\r\n            }\r\n        }\r\n    }\r\n\r\n    // collision detection\r\n\r\n    const collisionDetection = (item1, item2) => {\r\n        let d1Offset = $(item1).offset();\r\n        let d1Height = $(item1).outerHeight(true);\r\n        let d1Width = $(item1).outerWidth(true);\r\n        let d1Top = d1Offset.top + d1Height;\r\n        let d1Left = d1Offset.left + d1Width;\r\n        let d2Offset = $(item2).offset();\r\n        let d2Height = $(item2).outerHeight(true);\r\n        let d2Width = $(item2).outerWidth(true);\r\n        let d2Top = d2Offset.top + d2Height;\r\n        let d2Left = d2Offset.left + d2Width;\r\n\r\n        const colliding = !(d1Top <= d2Offset.top + 2 || d1Offset.top >= d2Top - 2 || d1Left <= d2Offset.left + 2 || d1Offset.left >= d2Left - 2);\r\n        \r\n        return colliding;\r\n    }\r\n\r\n    // Place a ship down that is currently selected\r\n\r\n    window.onclick = (e) => {\r\n        if (!shipIsSelected && !isMobile && e.target?.parentElement?.classList?.contains('ship')) {\r\n            onShipSelect(e);\r\n        } else if (!isMobile && shipIsSelected && e.target.classList.contains('singleSquare') && rotating === false && areaIsClear()) {\r\n            audio.dropShip.play();\r\n            selectedShip.style.zIndex = '3';\r\n            document.querySelector('.userBoard').style.cursor = 'default';\r\n            selectedShip.style.border = null;\r\n            shipIsSelected = false;\r\n        }\r\n    }\r\n\r\n    const wasShipTouched = (x, y) => {\r\n        const shipLeft = selectedShip.getBoundingClientRect().left;\r\n        const shipRight = selectedShip.getBoundingClientRect().right;\r\n        const shipTop = selectedShip.getBoundingClientRect().top;\r\n        const shipBottom = selectedShip.getBoundingClientRect().bottom;\r\n\r\n        if ((x > shipLeft) && (x < shipRight) && (y > shipTop) && (y < shipBottom)) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    window.ontouchend = (e) => {\r\n        if (!showGameInstructions) {\r\n            if (shipIsSelected && !moving && areaIsClear() && !wasShipTouched(e.changedTouches[0].clientX, e.changedTouches[0].clientY)) {\r\n                audio.dropShip.play();\r\n                selectedShip.style.zIndex = '3';\r\n                document.querySelector('.userBoard').style.cursor = 'default';\r\n                selectedShip.style.border = null;\r\n                shipIsSelected = false;\r\n            } else if (shipIsSelected && !moving) {\r\n                if (orientation === 'hor') {\r\n                    orientation = 'vert';\r\n                    positionShipOnGrid(e);\r\n                } else if (orientation === 'vert') {\r\n                    orientation = 'hor';\r\n                    positionShipOnGrid(e);\r\n                }\r\n                audio.rotateShip.play();\r\n                setManualGridLocation = true;\r\n                rotating = true;\r\n            } else if (shipIsSelected && moving) {\r\n                if (isMobile && shipIsSelected && rotating === false && areaIsClear()) {\r\n                    audio.dropShip.play();\r\n                    selectedShip.style.zIndex = '3';\r\n                    document.querySelector('.userBoard').style.cursor = 'default';\r\n                    selectedShip.style.border = null;\r\n                    shipIsSelected = false;\r\n                }\r\n            } else if (!shipIsSelected && e.target.parentElement.classList.contains('ship')) {\r\n                onShipSelect(e);\r\n            }\r\n            moving = false;\r\n        }\r\n    }\r\n    \r\n    // Check to see if player is placing the ship in an open space\r\n\r\n    const areaIsClear = () => {\r\n        const ships = document.querySelectorAll('.ship');\r\n         for (let ship of ships) {\r\n            if (!ship.classList.contains(selectedShipName) && collisionDetection(selectedShip, ship)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    // Rotate the selected ship by right-clicking\r\n\r\n    window.oncontextmenu = (e) => {\r\n         if (!isMobile && shipIsSelected) {\r\n            audio.rotateShip.play();\r\n            if (orientation === 'hor') {\r\n                // selectedShip.style.transform = 'rotate(-90deg)';\r\n                orientation = 'vert';\r\n            } else if (orientation === 'vert') {\r\n                // selectedShip.style.transform = 'rotate(0deg)';\r\n                orientation = 'hor';\r\n            }\r\n            positionShipOnGrid(e);\r\n            setManualGridLocation = true;\r\n            rotating = true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    // Decide what happens on various key-press events\r\n\r\n    window.onkeydown = (e) => {\r\n        if (e.code === 'Enter') {\r\n            e.preventDefault();\r\n        }\r\n        // Rotate the selected ship by pressing the 'space' key\r\n\r\n        if (e.code === 'Space' && selectedShip.style !== undefined && shipIsSelected) {\r\n            audio.rotateShip.play();\r\n            if (orientation === 'hor') {\r\n                // selectedShip.style.transform = 'rotate(-90deg)';\r\n                orientation = 'vert';\r\n            } else if (orientation === 'vert') {\r\n                // selectedShip.style.transform = 'rotate(0deg)';\r\n                orientation = 'hor';\r\n            }\r\n            positionShipOnGrid(e);\r\n            setManualGridLocation = true;\r\n            rotating = true;\r\n        }\r\n    }\r\n\r\n    const matchTouchToSquares = (x, y) => {\r\n        const squares = document.querySelectorAll('.userBoard .singleSquare');\r\n        let selectedSquare = null;\r\n        squares.forEach(square => {\r\n            const squareLeft = square.getBoundingClientRect().left;\r\n            const squareRight = square.getBoundingClientRect().right;\r\n            const squareTop = square.getBoundingClientRect().top;\r\n            const squareBottom = square.getBoundingClientRect().bottom;\r\n\r\n            if ((x > squareLeft) && (x < squareRight) && (y > squareTop) && (y < squareBottom)) {\r\n                selectedSquare = square;\r\n                return;\r\n            }\r\n        })\r\n        return selectedSquare;\r\n    }\r\n\r\n    const positionShipOnGrid = (e) => {\r\n        let square;\r\n        if (e.type === 'touchmove') {\r\n            square = matchTouchToSquares(e.touches[0].clientX, e.touches[0].clientY);\r\n        } else if (e.type === 'touchend') {\r\n            square = matchTouchToSquares(e.changedTouches[0].clientX, e.changedTouches[0].clientY);\r\n        } else if (e.code === 'Space' || e.type === 'contextmenu') {\r\n            square = matchTouchToSquares(mouseX, mouseY);\r\n        } else {\r\n            square = e.target;\r\n        }\r\n\r\n        rotating = false;\r\n        selectedShip.style.transform = null;\r\n        const userGrid = document.querySelector('.userBoard');\r\n        const childShip = document.querySelector(`.${selectedShipName}Icon`);\r\n        const targetId = square?.id;\r\n        const colStart = targetId?.substring(0, targetId.indexOf('-'));\r\n        const rowStart = targetId?.substring((targetId.indexOf('-') + 1), targetId?.length);\r\n\r\n        if ((userGrid.contains(e.target) || userGrid.contains(square))\r\n        && (square?.classList?.contains('singleSquare'))\r\n        && shipIsSelected === true) {\r\n            if (orientation === 'hor') {\r\n                childShip.classList.remove(`rotate-${selectedShipName}`);\r\n                if (colStart < (11 - parseInt(selectedShip.id) + 1)) {\r\n                    selectedShip.style.gridColumn = `${colStart} / ${parseInt(colStart) + parseInt(selectedShip.id)}`;\r\n                } else if (colStart >= (11 - parseInt(selectedShip.id) + 1) && setManualGridLocation === true) {\r\n                    selectedShip.style.gridColumn = `11 / ${11 - parseInt(selectedShip.id)}`;\r\n                } else setManualGridLocation = false;\r\n                selectedShip.style.gridRow = `${rowStart} / ${parseInt(rowStart) + 1}`;\r\n            } else if (orientation === 'vert') {\r\n                childShip.classList.add(`rotate-${selectedShipName}`);\r\n                if (rowStart > (parseInt(selectedShip.id) - 1)) {\r\n                    selectedShip.style.gridRow = `${parseInt(rowStart) + 1} / ${parseInt(rowStart) - parseInt(selectedShip.id) + 1}`;\r\n                } else if (rowStart <= (parseInt(selectedShip.id) - 1) && setManualGridLocation === true) {\r\n                    selectedShip.style.gridRow = `${parseInt(selectedShip.id) + 1} / 1`;\r\n                } else setManualGridLocation = false;\r\n                selectedShip.style.gridColumn = `${colStart} / ${parseInt(colStart) + 1}`;\r\n            }\r\n        }\r\n    }\r\n\r\n    // Change the grid-row and grid-column of the selected ship mouse is over the user's board\r\n\r\n    window.onmouseover = (e) => {\r\n        mouseX = e.clientX;\r\n        mouseY = e.clientY;\r\n        if (shipIsSelected && !isMobile) {\r\n            positionShipOnGrid(e);\r\n        }\r\n    };\r\n\r\n    window.ontouchmove = (e) => {\r\n        moving = true;\r\n        if (shipIsSelected && isMobile) {\r\n            positionShipOnGrid(e);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div id='5' className='ship carrier'><div className='carrierIcon'></div></div>\r\n\r\n            <div id='4' className='ship battleship'><div className='battleshipIcon'></div></div>\r\n\r\n            <div id='3' className='ship cruiser'><div className='cruiserIcon'></div></div>\r\n\r\n            <div id='3' className='ship submarine'><div className='submarineIcon'></div></div>\r\n\r\n            <div id='2' className='ship destroyer'><div className='destroyerIcon'></div></div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Ships;\r\n","import { action, persist } from 'easy-peasy';\r\n\r\nconst isMobileDevice = () => {\r\n    if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\r\n        return true\r\n    }\r\n    return false\r\n}\r\n\r\nconst isIOSDevice = () => {\r\n    if (/iPhone|iPad|iPod/i.test(navigator.userAgent)) {\r\n        return true\r\n    }\r\n    return false\r\n}\r\n\r\nconst model = {\r\n\r\n    //State\r\n\r\n    stored: persist(\r\n        {\r\n            soundOn: true,\r\n            musicOn: true,\r\n            isMobile: isMobileDevice(),\r\n            isIOS: isIOSDevice()\r\n        },\r\n        {\r\n            storage: 'localStorage',\r\n        }\r\n\r\n    ),\r\n\r\n    route: 'login',\r\n    user: null,\r\n    currentSocket: null,\r\n    friendSocket: null,\r\n    opponentName: '',\r\n    unsortedFriends: [],\r\n    findMatchInterval: 0,\r\n    checkOppStatusInterval: 0,\r\n    updatLastOnlineInterval: 0,\r\n    getOnlineFriendsInterval: 0,\r\n    search: false,\r\n    friendRequests: [],\r\n    userName: '',\r\n    password: '',\r\n    topFive: [],\r\n    allFriends: [],\r\n    friendFilter: '',\r\n    friendSearch: '',\r\n    friendsOnline: [],\r\n    gameRoute: 'placeShips',\r\n    playerIsReady: false,\r\n    yourTurn: false,\r\n    chatText: '',\r\n    inviteSent: false,\r\n    inviteReceived: false,\r\n    playerTurnText: '',\r\n    showFriendsMobile: false,\r\n    showChatMobile: false,\r\n    audioStarted: false,\r\n    shipIsSelected: false,\r\n    showGameInstructions: false,\r\n    deviceInPortrait: true,\r\n    opponentIsReady: false,\r\n    firstGameInstructionLoad: true,\r\n\r\n\r\n    //Actions\r\n\r\n    setRoute: action((state, input) => {\r\n        state.route = input;\r\n    }),\r\n\r\n    setUser: action((state, input) => {\r\n        state.user = input;\r\n    }),\r\n\r\n    setCurrentSocket: action((state, input) => {\r\n        state.currentSocket = input;\r\n    }),\r\n\r\n    setFriendSocket: action((state, input) => {\r\n        state.friendSocket = input;\r\n    }),\r\n\r\n    setOpponentName: action((state, input) => {\r\n        state.opponentName = input;\r\n    }),\r\n\r\n    setUnsortedFriends: action((state, input) => {\r\n        state.unsortedFriends = input;\r\n    }),\r\n\r\n    setFindMatchInterval: action((state, input) => {\r\n        state.findMatchInterval = input;\r\n    }),\r\n\r\n    setCheckOppStatusInterval: action((state, input) => {\r\n        state.checkOppStatusInterval = input;\r\n    }),\r\n\r\n    setUpdatLastOnlineInterval: action((state, input) => {\r\n        state.updatLastOnlineInterval = input;\r\n    }),\r\n\r\n    setGetOnlineFriendsInterval: action((state, input) => {\r\n        state.getOnlineFriendsInterval = input;\r\n    }),\r\n\r\n    setSearch: action((state, input) => {\r\n        state.search = input;\r\n    }),\r\n\r\n    setFriendRequests: action((state, input) => {\r\n        state.friendRequests = input;\r\n    }),\r\n\r\n    setUserName: action((state, input) => {\r\n        state.userName = input;\r\n    }),\r\n\r\n    setPassword: action((state, input) => {\r\n        state.password = input;\r\n    }),\r\n\r\n    setTopFive: action((state, input) => {\r\n        state.topFive = input;\r\n    }),\r\n\r\n    setAllFriends: action((state, input) => {\r\n        state.allFriends = input;\r\n    }),\r\n\r\n    setFriendFilter: action((state, input) => {\r\n        state.friendFilter = input;\r\n    }),\r\n\r\n    setFriendSearch: action((state, input) => {\r\n        state.friendSearch = input;\r\n    }),\r\n\r\n    setFriendsOnline: action((state, input) => {\r\n        state.friendsOnline = input;\r\n    }),\r\n\r\n    setGameRoute: action((state, input) => {\r\n        state.gameRoute = input;\r\n    }),\r\n    \r\n    setPlayerIsReady: action((state, input) => {\r\n        state.playerIsReady = input;\r\n    }),\r\n\r\n    setYourTurn: action((state, input) => {\r\n        state.yourTurn = input;\r\n    }),\r\n\r\n    setChatText: action((state, input) => {\r\n        state.chatText = input;\r\n    }),\r\n\r\n    setInviteSent: action((state, input) => {\r\n        state.inviteSent = input;\r\n    }),\r\n\r\n    setInviteReceived: action((state, input) => {\r\n        state.inviteReceived = input;\r\n    }),\r\n    \r\n    setPlayerTurnText: action((state, input) => {\r\n        state.playerTurnText = input;\r\n    }),\r\n\r\n    setSoundOn: action((state) => {\r\n        state.stored.soundOn = !state.stored.soundOn;\r\n    }),\r\n\r\n    setMusicOn: action((state) => {\r\n        state.stored.musicOn = !state.stored.musicOn;\r\n    }),\r\n\r\n    setIsMobile: action((state, input) => {\r\n        state.stored.isMobile = input;\r\n    }),\r\n\r\n    setShowFriendsMobile: action((state, input) => {\r\n        state.showFriendsMobile = input;\r\n    }),\r\n\r\n    setShowChatMobile: action((state, input) => {\r\n        state.showChatMobile = input;\r\n    }),\r\n\r\n    setAudioStarted: action((state) => {\r\n        state.audioStarted = true;\r\n    }),\r\n\r\n    setShipIsSelected: action((state, input) => {\r\n        state.shipIsSelected = input;\r\n    }),\r\n\r\n    setShowGameInstructions: action((state, input) => {\r\n        state.showGameInstructions = input;\r\n    }),\r\n\r\n    setDeviceInPortrait: action((state, input) => {\r\n        state.deviceInPortrait = input;\r\n    }),\r\n\r\n    setOpponentIsReady: action((state, input) => {\r\n        state.opponentIsReady = input;\r\n    }),\r\n\r\n    setFirstGameInstructionLoad: action((state, input) => {\r\n        state.firstGameInstructionLoad = input;\r\n    }),\r\n}\r\n\r\nexport default model;","import React from 'react';\r\nimport { useStoreState } from 'easy-peasy';\r\n\r\nimport './board.css';\r\n\r\nconst AssembleBoard = ({ onSquareClicked }) => {\r\n\r\n    const { gameRoute } = useStoreState(state => ({\r\n        gameRoute: state.gameRoute,\r\n        route: state.route\r\n    }));\r\n\r\n    const allSquares = [];\r\n    for (let i = 1; i < 11; i++) {\r\n        for (let j = 0; j < 10; j++) {\r\n            allSquares.push({row: String.fromCharCode(97 + j), col: i, colStart: i, rowStart: j + 1})\r\n        }\r\n    }\r\n\r\n    const handleSquareClick = (e) => {\r\n        const parentBoard = e.target.parentElement.parentElement.parentElement;\r\n        if (gameRoute === 'gameInProgress' && parentBoard.classList.contains('opponentBoard')) {\r\n            onSquareClicked(e);\r\n        }\r\n    }\r\n\r\n    return (\r\n        allSquares.map(square => {\r\n            return (\r\n                <div\r\n                    onClick={handleSquareClick}\r\n                    style={{gridArea: square.row + square.col}}\r\n                    className={'singleSquare ' + square.row + ' ' + square.row + square.col}\r\n                    key={square.row + square.col}\r\n                    id={square.colStart + '-' + square.rowStart}\r\n                >\r\n                </div>\r\n            )\r\n        })\r\n    )\r\n}\r\n\r\nexport default AssembleBoard;\r\n","export default __webpack_public_path__ + \"static/media/ambient-waves.b96c967b.mp3\";","export default __webpack_public_path__ + \"static/media/lobby-theme.a9efad87.mp3\";","export default __webpack_public_path__ + \"static/media/ship-placement-theme.58d77477.mp3\";","export default __webpack_public_path__ + \"static/media/game-theme.07202b2d.mp3\";","export default __webpack_public_path__ + \"static/media/button-click.90b21783.mp3\";","export default __webpack_public_path__ + \"static/media/hover-sound.d0a3b451.mp3\";","export default __webpack_public_path__ + \"static/media/hit-sound.f966784e.mp3\";","export default __webpack_public_path__ + \"static/media/miss-sound.1dd4ce99.mp3\";","export default __webpack_public_path__ + \"static/media/ship-sunk.48a88457.mp3\";","export default __webpack_public_path__ + \"static/media/notification.00f0a2bd.mp3\";","export default __webpack_public_path__ + \"static/media/pick-up-ship.86313e09.mp3\";","export default __webpack_public_path__ + \"static/media/drop-ship.adae2f7b.mp3\";","export default __webpack_public_path__ + \"static/media/rotate-ship.410a2faf.mp3\";","export default __webpack_public_path__ + \"static/media/missile-lock.271bad3e.mp3\";","export default __webpack_public_path__ + \"static/media/missile-launch.1ef34a89.mp3\";","export default __webpack_public_path__ + \"static/media/incoming-missile.df9be7a9.mp3\";","import { Howl } from 'howler';\r\nimport ambientWaves from './audioclips/ambient-waves.mp3';\r\nimport lobbyTheme from './audioclips/lobby-theme.mp3';\r\nimport shipPlacementTheme from './audioclips/ship-placement-theme.mp3';\r\nimport gameTheme from './audioclips/game-theme.mp3';\r\nimport buttonClick from './audioclips/button-click.mp3';\r\nimport hoverSound from './audioclips/hover-sound.mp3';\r\nimport hitSound from './audioclips/hit-sound.mp3';\r\nimport missSound from './audioclips/miss-sound.mp3';\r\nimport shipSunkSound from './audioclips/ship-sunk.mp3';\r\nimport notificationSound from './audioclips/notification.mp3';\r\nimport pickUpShip from './audioclips/pick-up-ship.mp3';\r\nimport dropShip from './audioclips/drop-ship.mp3';\r\nimport rotateShip from './audioclips/rotate-ship.mp3';\r\nimport missileLock from './audioclips/missile-lock.mp3';\r\nimport missileLaunch from './audioclips/missile-launch.mp3';\r\nimport incomingMissile from './audioclips/incoming-missile.mp3';\r\n\r\nconst handleWaveFade = () => {\r\n    if (audio.ambientWaves.volume() === 0) {\r\n        audio.ambientWaves.stop();\r\n    }  \r\n}\r\n\r\nconst handleLobbyFade = () => {\r\n    if (audio.lobbyTheme.volume() === 0) {\r\n        audio.lobbyTheme.stop();\r\n    } \r\n}\r\n\r\nconst handleGameFade = () => {\r\n    if (audio.gameTheme.volume() === 0) {\r\n        audio.gameTheme.stop();\r\n    } \r\n}\r\n\r\nconst isMobileDevice = () => {\r\n    if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\r\n        return true\r\n    }\r\n    return false\r\n}\r\n\r\nexport const audio = {\r\n    ambientWaves: new Howl({\r\n        src: ambientWaves,\r\n        loop: true,\r\n        volume: 0.2,\r\n        // onfade: handleWaveFade\r\n    }),\r\n\r\n    lobbyTheme: new Howl({\r\n        src: lobbyTheme,\r\n        loop: true,\r\n        volume: 0.5,\r\n        // onfade: handleLobbyFade\r\n    }),\r\n\r\n    shipPlacementTheme: new Howl({\r\n        src: shipPlacementTheme,\r\n        loop: true,\r\n        volume: 0.5,\r\n    }),\r\n\r\n    gameTheme: new Howl({\r\n        src: gameTheme,\r\n        loop: true,\r\n        volume: 0.3,\r\n        // onfade: handleGameFade\r\n    }),\r\n\r\n    buttonClick: new Howl({\r\n        src: buttonClick,\r\n        volume: 0.6\r\n    }),\r\n\r\n    hoverSound: new Howl({\r\n        src: hoverSound,\r\n        volume: 0.6,\r\n        mute: isMobileDevice\r\n    }),\r\n\r\n    hitSound: new Howl({\r\n        src: hitSound,\r\n        volume: 0.7\r\n    }),\r\n\r\n    missSound: new Howl({\r\n        src: missSound,\r\n        volume: 0.4\r\n    }),\r\n\r\n    shipSunkSound: new Howl({\r\n        src: shipSunkSound,\r\n        volume: 0.9\r\n    }),\r\n\r\n    notificationSound: new Howl({\r\n        src: notificationSound,\r\n        volume: 0.9\r\n    }),\r\n\r\n    pickUpShip: new Howl({\r\n        src: pickUpShip,\r\n        volume: 0.9\r\n    }),\r\n\r\n    dropShip: new Howl({\r\n        src: dropShip,\r\n        volume: 0.9\r\n    }),\r\n    \r\n    rotateShip: new Howl({\r\n        src: rotateShip,\r\n        volume: 0.9\r\n    }),\r\n\r\n    missileLock: new Howl({\r\n        src: missileLock,\r\n        volume: 0.9\r\n    }),\r\n\r\n    missileLaunch: new Howl({\r\n        src: missileLaunch,\r\n        volume: 1\r\n    }),\r\n\r\n    incomingMissile: new Howl({\r\n        src: incomingMissile,\r\n        volume: 1\r\n    })\r\n}","export default __webpack_public_path__ + \"static/media/hit.3c86e79f.gif\";","import React, { useEffect } from 'react';\r\nimport { useStoreState, useStoreActions } from 'easy-peasy';\r\nimport Board from './Board';\r\nimport Ships from '../ships/Ships';\r\nimport $ from 'jquery';\r\nimport { audio } from '../../audio';\r\nimport hitGif from './hit.gif';\r\nimport './board.css';\r\n\r\nconst UserBoard = ({ socket }) => {\r\n    const { friendSocket } = useStoreState(state => ({\r\n        friendSocket: state.friendSocket\r\n    }));\r\n\r\n    const { setYourTurn } = useStoreActions(actions => ({\r\n        setYourTurn: actions.setYourTurn\r\n    }));\r\n\r\n    let shipHit = '';\r\n    useEffect(() => {\r\n        socket.on('receive shot', shot => {\r\n            const oppShot = document.getElementById(shot);\r\n\r\n            const incomingMissileDuration = audio.incomingMissile.duration() * 1000 - 100;\r\n            audio.incomingMissile.play();\r\n            setTimeout(() => {\r\n                applyHitOrMiss(oppShot);\r\n                setYourTurn(true);\r\n            }, incomingMissileDuration)\r\n        })\r\n\r\n        return () => {\r\n            socket.off('receive shot');\r\n        }\r\n    },[])\r\n\r\n    const hit = (item1, item2) => {\r\n        let d1Offset = $(item1).offset();\r\n        let d1Height = $(item1).outerHeight(true);\r\n        let d1Width = $(item1).outerWidth(true);\r\n        let d1Top = d1Offset.top + d1Height;\r\n        let d1Left = d1Offset.left + d1Width;\r\n        let d2Offset = $(item2).offset();\r\n        let d2Height = $(item2).outerHeight(true);\r\n        let d2Width = $(item2).outerWidth(true);\r\n        let d2Top = d2Offset.top + d2Height;\r\n        let d2Left = d2Offset.left + d2Width;\r\n\r\n        const colliding = !(d1Top <= d2Offset.top + 2 || d1Offset.top >= d2Top - 2 || d1Left <= d2Offset.left + 2 || d1Offset.left >= d2Left - 2);\r\n\r\n        return colliding;\r\n    }\r\n\r\n    const hitSquares = [];\r\n    const countHitsOnShip = (ship) => {\r\n        let count = 0;\r\n        for (let hit of hitSquares) {\r\n            if (hit === ship) {\r\n                count += 1;\r\n            }\r\n        }\r\n        return count;\r\n    }\r\n\r\n    const applyHitOrMiss = (oppShot) => {\r\n        if (matchOppShotToBoard(oppShot)) {\r\n            const hitMarkerBackgroundFlash = document.createElement('div');\r\n            hitMarkerBackgroundFlash.classList.add('hitMarkerBackgroundFlash');\r\n\r\n            const hitElem = document.createElement('img');\r\n            hitElem.src = hitGif;\r\n            hitElem.classList.add('hitMarkerGif');\r\n\r\n            const shrapN = document.createElement('div');\r\n            shrapN.classList.add('shrapN');\r\n\r\n            const shrapNE = document.createElement('div');\r\n            shrapNE.classList.add('shrapNE');\r\n\r\n            const shrapE = document.createElement('div');\r\n            shrapE.classList.add('shrapE');\r\n\r\n            const shrapSE = document.createElement('div');\r\n            shrapSE.classList.add('shrapSE');\r\n\r\n            const shrapS = document.createElement('div');\r\n            shrapS.classList.add('shrapS');\r\n\r\n            const shrapSW = document.createElement('div');\r\n            shrapSW.classList.add('shrapSW');\r\n\r\n            const shrapW = document.createElement('div');\r\n            shrapW.classList.add('shrapW');\r\n\r\n            const shrapNW = document.createElement('div');\r\n            shrapNW.classList.add('shrapNW');\r\n\r\n            oppShot.append(hitElem, hitMarkerBackgroundFlash, shrapN, shrapNE, shrapE, shrapSE, shrapS, shrapSW, shrapW, shrapNW);\r\n\r\n            setTimeout(() => {\r\n                hitMarkerBackgroundFlash.remove();\r\n                shrapN.remove();\r\n                shrapNE.remove();\r\n                shrapE.remove();\r\n                shrapSE.remove();\r\n                shrapS.remove();\r\n                shrapSW.remove();\r\n                shrapW.remove();\r\n                shrapNW.remove();\r\n            }, 1100);\r\n\r\n            hitSquares.push(shipHit);\r\n            oppShot.classList.add(`_${shipHit}_userboard`)\r\n            if (countHitsOnShip(shipHit) === parseInt(document.querySelector(`.${shipHit}`).id)) {\r\n                const sunkShipIcon = document.querySelector(`.${shipHit}Icon`);\r\n                const squares = document.querySelectorAll('.singleSquare');\r\n                audio.shipSunkSound.play();\r\n                for (let square of squares) {\r\n                    if (square.classList.contains(`_${shipHit}_userboard`)) {\r\n                        // square.classList.remove('hitMarker');\r\n                        square.querySelector('.hitMarkerGif').remove();\r\n                    }\r\n                }\r\n                sunkShipIcon.classList.add('shipSunkUser');\r\n            } else {\r\n                audio.hitSound.play();\r\n            }\r\n            socket.emit('send result to opponent board', {shotSquare: oppShot.id, shot: 'hit', socketid: friendSocket, shipHit: shipHit});\r\n        } else {\r\n            oppShot.classList.add('missMarker');\r\n            audio.missSound.play();\r\n            socket.emit('send result to opponent board', {shotSquare: oppShot.id, shot: 'miss', socketid: friendSocket, shipHit: shipHit});\r\n        }\r\n    }\r\n\r\n    const matchOppShotToBoard = (shot) => {\r\n        const ships = document.querySelectorAll('.ship');\r\n        for (let ship of ships) {\r\n            if (hit(shot, ship)) {\r\n                shipHit = ship.classList[1];\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    return (\r\n        <div className='board userBoard'>\r\n            <div className='rows'>\r\n                <h3>A</h3>\r\n                <h3>B</h3>\r\n                <h3>C</h3>\r\n                <h3>D</h3>\r\n                <h3>E</h3>\r\n                <h3>F</h3>\r\n                <h3>G</h3>\r\n                <h3>H</h3>\r\n                <h3>I</h3>\r\n                <h3>J</h3>\r\n            </div>\r\n\r\n            <div className='cols'>\r\n                <h3>1</h3>\r\n                <h3>2</h3>\r\n                <h3>3</h3>\r\n                <h3>4</h3>\r\n                <h3>5</h3>\r\n                <h3>6</h3>\r\n                <h3>7</h3>\r\n                <h3>8</h3>\r\n                <h3>9</h3>\r\n                <h3>10</h3>\r\n            </div>\r\n\r\n            <div className='grid'>\r\n                <div className='allSqaures'>\r\n                    <Board />\r\n                    <Ships />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UserBoard;\r\n\r\n","import React, { useEffect } from 'react';\r\nimport { useStoreState, useStoreActions } from 'easy-peasy';\r\nimport Board from './Board';\r\nimport { audio } from '../../audio';\r\nimport './board.css';\r\n\r\nconst OpponentBoard = ({ socket }) => {\r\n    const { friendSocket, yourTurn } = useStoreState(state => ({\r\n        friendSocket: state.friendSocket,\r\n        yourTurn: state.yourTurn\r\n    }));\r\n\r\n    const { setYourTurn } = useStoreActions(actions => ({\r\n        setYourTurn: actions.setYourTurn\r\n        \r\n    }));\r\n    \r\n    const hitSquares = [];\r\n    const countHitsOnShip = (ship) => {\r\n        let count = 0;\r\n        for (let hit of hitSquares) {\r\n            if (hit === ship) {\r\n                count += 1;\r\n            }\r\n        }\r\n        return count;\r\n    }\r\n\r\n    useEffect(() => {\r\n        socket.on('show result on opponent board', data => {\r\n            const clickedSquare = document.querySelector(`.opponentBoard [id='${data.shotSquare}']`);\r\n            document.querySelector('.preResultDiv').remove();\r\n            if (data.result === 'hit' && clickedSquare.classList !== undefined) {\r\n                clickedSquare.classList.add('hitMarker');\r\n                hitSquares.push(data.shipHit);\r\n                clickedSquare.classList.add(`_${data.shipHit}`)\r\n                if (countHitsOnShip(data.shipHit) === parseInt(document.querySelector(`.${data.shipHit}`).id)) {\r\n                    const squares = document.querySelectorAll('.singleSquare');\r\n                    audio.shipSunkSound.play();\r\n                    for (let square of squares) {\r\n                        if (square.classList.contains(`_${data.shipHit}`)) {\r\n                            square.classList.add('shipSunk');\r\n                        }\r\n                    }\r\n                } else {\r\n                    audio.hitSound.play();\r\n                }\r\n            } else if (data.result === 'miss' && clickedSquare.classList !== undefined) {\r\n                clickedSquare.classList.add('missMarker');\r\n                audio.missSound.play();\r\n            }\r\n        })\r\n\r\n        return () => {\r\n            socket.off('show result on opponent board');\r\n        }\r\n    },[])\r\n\r\n    const onSquareClicked = (e) => {\r\n        if (yourTurn && !e.target.classList.contains('hitMarker') && !e.target.classList.contains('missMarker')) {\r\n            // setSquareClicked(e.target);\r\n            setYourTurn(false);\r\n            const preResultDiv = document.createElement('div');\r\n            preResultDiv.classList.add('preResultDiv');\r\n            e.target.appendChild(preResultDiv);\r\n\r\n            audio.missileLaunch.play();\r\n            socket.emit('send shot to opponent', {target: e.target.id, socketid: friendSocket});\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className='board opponentBoard'>\r\n            <div className='rows'>\r\n                <h3>A</h3>\r\n                <h3>B</h3>\r\n                <h3>C</h3>\r\n                <h3>D</h3>\r\n                <h3>E</h3>\r\n                <h3>F</h3>\r\n                <h3>G</h3>\r\n                <h3>H</h3>\r\n                <h3>I</h3>\r\n                <h3>J</h3>\r\n            </div>\r\n\r\n            <div className='cols'>\r\n                <h3>1</h3>\r\n                <h3>2</h3>\r\n                <h3>3</h3>\r\n                <h3>4</h3>\r\n                <h3>5</h3>\r\n                <h3>6</h3>\r\n                <h3>7</h3>\r\n                <h3>8</h3>\r\n                <h3>9</h3>\r\n                <h3>10</h3>\r\n            </div>\r\n\r\n            <div className='grid'>\r\n                <div className='allSqaures'>\r\n                    <Board onSquareClicked={onSquareClicked} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default OpponentBoard;\r\n\r\n","import React, { useEffect } from 'react';\r\nimport { useStoreState, useStoreActions } from 'easy-peasy';\r\nimport './navigation.css';\r\nimport notificationIcon from './notification.png';\r\nimport { Dropdown } from 'react-bootstrap';\r\nimport { audio } from '../../audio';\r\nconst FriendRequests = ({ socket }) => {\r\n\r\n    const { user, friendRequests } = useStoreState(state => ({\r\n        user: state.user,\r\n        friendRequests: state.friendRequests\r\n    }));\r\n\r\n    const { setUnsortedFriends, setFriendRequests } = useStoreActions(actions => ({\r\n        setUnsortedFriends: actions.setUnsortedFriends,\r\n        setFriendRequests: actions.setFriendRequests\r\n    }));\r\n\r\n    useEffect(() => {\r\n        updateRequests();\r\n\r\n        socket.on('receive friend request', () => {\r\n            updateRequests();\r\n        })\r\n\r\n        return () => {\r\n            socket.off('receive friend request');\r\n        }\r\n    },[])\r\n\r\n    const updateRequests = async () => {\r\n        const navBar = document.querySelector('nav');\r\n        try {\r\n            const res = await fetch(`https://calm-ridge-60009.herokuapp.com/getFriendRequests?username=${user.username}`);\r\n            if (!res.ok) {\r\n                throw new Error('Could not get friend requests')\r\n            }\r\n            const requests = await res.json();\r\n            if (requests !== null && requests !== '') {\r\n                navBar.style.setProperty('--notification-color', 'rgba(255,0,0,0.8)');\r\n                setFriendRequests(requests.split(','));\r\n                audio.notificationSound.play();\r\n            } else {\r\n                navBar.style.setProperty('--notification-color', 'transparent');\r\n                setFriendRequests(null);\r\n            }\r\n        } catch(err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n\r\n    const removeRequest = async (friend) => {\r\n        let newRequestList = '';\r\n        try {\r\n            const res = await fetch(`https://calm-ridge-60009.herokuapp.com/getFriendRequests?username=${user.username}`);\r\n            if (!res.ok) {\r\n                throw new Error('Could not get friend requests')\r\n            }\r\n            const requests = await res.json();\r\n            if (requests !== null && requests !== '') {\r\n                const newRequestListArray = requests.split(',');\r\n                if (newRequestListArray.length <= 1) {\r\n                    newRequestList = null;\r\n                } else {\r\n                    const index = newRequestListArray.indexOf(friend);\r\n                    if (index > -1) {\r\n                        newRequestListArray.splice(index, 1);\r\n                        newRequestList = newRequestListArray.join(',');\r\n                    }\r\n                }\r\n            }\r\n\r\n            const res2 = await fetch('https://calm-ridge-60009.herokuapp.com/updateFriendRequests', {\r\n                method: 'put',\r\n                    headers: {'Content-Type': 'application/json'},\r\n                    body: JSON.stringify({\r\n                        requestlist: newRequestList,\r\n                        username: user.username\r\n                    })\r\n            });\r\n            if (!res2.ok) {\r\n                throw new Error('Could not update friend requests');\r\n            }\r\n            const userRemoved = await res2.json();\r\n            if (userRemoved) {\r\n                updateRequests();\r\n            }\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    const onRemoveRequest = (e) => {\r\n        removeRequest(e.target.id);\r\n    }\r\n\r\n     const addFriend = async (friend) => {\r\n        console.log('friend added');\r\n        document.querySelector('.addFriendInput').value = '';\r\n        let friendList = '';\r\n        let friendArray = [];\r\n        let friendlistOfFriends = '';\r\n        let friendSocketId = '';\r\n//-----------------------------------------------------------------------------------\r\n        // Search the database to check if the name matches any users in the databse\r\n//-----------------------------------------------------------------------------------\r\n        try {\r\n            const res = await fetch(`https://calm-ridge-60009.herokuapp.com/findFriend?username=${friend}`);\r\n            if (!res.ok) {\r\n                throw new Error('User does not exist')\r\n            }\r\n            const user1 = await res.json();\r\n            if (user1.username === user.username) {\r\n                throw new Error('Cannot add self as friend')\r\n            } else if (user1.username) {\r\n                let friendlistOfFriendsArray = [];\r\n                friendSocketId = user1.socketid;\r\n                if (user1?.friends?.length) {\r\n                    friendlistOfFriendsArray = user1.friends.split(',');\r\n                    if (friendlistOfFriendsArray.includes(user.username)) {\r\n                        throw new Error('You are already a friend of the user');\r\n                    }\r\n                }\r\n                friendlistOfFriendsArray.push(user.username);\r\n                if (friendlistOfFriendsArray.length > 1) {\r\n                    friendlistOfFriends = friendlistOfFriendsArray.join(',');\r\n                } else {\r\n                    friendlistOfFriends = friendlistOfFriendsArray[0];\r\n                }\r\n    //-----------------------------------------------------------------------------------\r\n                // If friend exists, grab the user's friend list string\r\n                // Make a temporary string and array with the new friend\r\n    //-----------------------------------------------------------------------------------\r\n                const res2 = await fetch(`https://calm-ridge-60009.herokuapp.com/getFriends?username=${user.username}`)\r\n                if (!res2.ok) {throw new Error('Problem accessing friends list')}\r\n                const friends = await res2.json();\r\n                if (friends?.length) {\r\n                    friends.forEach(f => {\r\n                        friendArray.push(f.username);\r\n                        if (f.username === friend) {\r\n                            throw new Error('User already your friend');\r\n                        }\r\n                    })\r\n                }\r\n                friendArray.push(friend);\r\n                friendList = friendArray.join(',');\r\n\r\n    //-----------------------------------------------------------------------------------\r\n                // Update the user's friend list with the new friends string\r\n                // Pass the updated friends array to 'fetchFriendData'\r\n    //-----------------------------------------------------------------------------------\r\n                const res3 = await fetch('https://calm-ridge-60009.herokuapp.com/addFriend', {\r\n                    method: 'put',\r\n                    headers: {'Content-Type': 'application/json'},\r\n                    body: JSON.stringify({\r\n                        username: user.username,\r\n                        friendlist: friendList\r\n                    })\r\n                })\r\n                if (!res3.ok) {throw new Error('Problem adding friend')}\r\n                const userAdded = await res3.json();\r\n                if (userAdded) {\r\n                    const allF = [];\r\n                    for (let f of friendArray) {\r\n                        try {\r\n                            const response = await fetch(`https://calm-ridge-60009.herokuapp.com/findFriend?username=${f}`);\r\n                            if (!response.ok) {throw new Error('User does not exist')}\r\n                            const user1 = await response.json();\r\n                            // if (opponentIsOnline(user1)) {\r\n                            //     allF.push({name: user1.username, status: 'online'})\r\n                            // } else {\r\n                            //     allF.push({name: user1.username, status: 'offline'})\r\n                            // }\r\n                            allF.push(user1);\r\n                        } catch(err) {\r\n                            console.log(err);\r\n                        }\r\n                    }\r\n                    setUnsortedFriends(allF);\r\n                }\r\n                const res4 = await fetch('https://calm-ridge-60009.herokuapp.com/addSelfToFriend', {\r\n                    method: 'put',\r\n                    headers: {'Content-Type': 'application/json'},\r\n                    body: JSON.stringify({\r\n                        friendlist: friendlistOfFriends,\r\n                        friendname: friend\r\n                    })\r\n                })\r\n                if (!res4.ok) {throw new Error('Problem adding self to friendlist of friend')}\r\n                const selfAdded = await res4.json();\r\n                if (selfAdded && friendSocketId !== null) {\r\n                    socket.emit('update user status', friendSocketId);\r\n                }\r\n            }\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    const addFriendStart = async (e) => {\r\n        try {\r\n            const res = await fetch(`https://calm-ridge-60009.herokuapp.com/findFriend?username=${e.target.id}`);\r\n            if (!res.ok) {\r\n                throw new Error('User does not exist')\r\n            }\r\n            const user1 = await res.json();\r\n            if (user1.username) {\r\n                removeRequest(e.target.id);\r\n                // socket.emit('send add friend', {socketid: user.socketid, user: username})\r\n                addFriend(e.target.id);\r\n                // Can't add friend if their offline   FIX\r\n            }\r\n        } catch(err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Dropdown className='dropdown'>\r\n              <Dropdown.Toggle variant=\"success\" className='messageToggle' id=\"dropdown-basic\"><img src={notificationIcon} alt='Message Icon' className='hasSound' /></Dropdown.Toggle>\r\n              <Dropdown.Menu id='dropdowns'>\r\n              {\r\n                friendRequests !== null\r\n                ?\r\n                  friendRequests.map(request => {\r\n                    return (\r\n                        <div key={request} className='dropdownItem'>\r\n                            <div className='text'>Friend request from <h3 className=\"requesterName\">{request}</h3></div>\r\n                            <div className='acceptReject'>\r\n                                <button onClick={addFriendStart} id={request} className='acceptInvite'>Accept</button>\r\n                                <button onClick={onRemoveRequest} id={request} className='rejectInvite'>Reject</button>\r\n                            </div>\r\n                        </div>\r\n                    )\r\n                  })\r\n                  : (null)\r\n              }\r\n              </Dropdown.Menu>\r\n            </Dropdown>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default FriendRequests;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAcRJREFUSEvN1TuvTVEUxfHf9YwQRCEeBQlCp1AQpRBfwSMkQqFCTyUhOgmNQoEgfAESiUKp1N3rTYLOM96EDFlHju3svc8+xeU0uzhzrv+ac8w15phJ+I1NAsMwkMRsxD5sxSK8wE2cwy18b7psG2QhrmEdXuEZPmIWlmABxrGpgAeymiBzS+IUHMUJ/Og7JbmHcIxfHVmKl4ModZBpeIOZWI0HDe1YjKfl/9n4Uo2tg+zGeWzA7SGGYxXu4kip7I+UQZDp+IBPmN8majkt5zxHNJxTdPsNGgTpTc8BnB6iil7ITlws2gTYCFmOR8j3SQdItMnhK/CwDbIS94rof4nYAE2bEx997g8LmYGvHSr5/yB5F3nFo1ayBhNN7cq0XcC2Yh3fOrQrDziWcxW7+t2hOsLL8LiY3+YOgF7oDWypTmYVcgZ7EN/6PAIkLX5b3Hl/L78KeYfXWD8CoJcSG8ol59VBDuJkcdVROXHquPOpOkgqi5NOrRAiZhZWdkh8LTHZLdexvRKbBfa+Sfi62+egyziLwziOvQVwpa3kts3YX3HMb0ffgZeqo1oHGxaS/MSuRYwwO/5OZVPWFtQF0taVfwv5CWkmWRrIFhWsAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAANVJREFUSEvtldsNwjAMRU8lGIUxmAa2AqZhC8QoSEVGBEXByXVaQP0gUj9aP05ix7cD/WsEhp4w5RxN2PRTEG/DUfArVkEsoa3kl969b9VcUUh+IovJYck2G7IFzkXDDbQCbs9nXbsM6iQWp3qg7KGrqJIo+7IgavaaZY/0RAGkfTEQbybK3c8uVzn1OaBlC8tKmpNcRiZDDsBedDCXk1LLQuU6ArvKf8ITSU8wvT0+/JLztyAnq9CnIF65rAKTIdHG/yFvF0gN6u97sgEuUk77HSzv9Q6B6kcaQhzgbAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAMBJREFUSEvV1T0OQVEQxfEfiUSj0UioLISWaEXsxCIkOolKoxG1SkdiTXTIlfcSofDx3iVuP/97MufMTAFLDFHw2Tuih+1teYCdUPyMea0qYY3uPficQW3K2qDzV+ARxjEUP1gUzMva4zmq6CdBuH6SBzhwpqglsQ0pyw0cBM7QTNORl+K0xys00HoGHqD85vBMsP8Z+E2xQivqaD9T/Co4mnlR4rZAJdaARBnpAI22hL67j6OdpqzH9JAc092tgxdcNzF1tGRORAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAZFJREFUSEvt1T1I1lEUx/GPWUIYgTVEQ4saDYWDgjQJYXsEGSiCSDSWQhA4O2tDUFsQCAUZtLQVQZMYDaE4lCKCSEvREBSJFUfuo3/+/J8XX3hC6I73nnO+9/7Oy21Qh9VQB4adQq7iPkYxXesFa4U0YRx38R3HMIkx/KoGqwVyHK/RhRe4jsfoxwdcwrdKoGqQU/iIZtzGg0ywm3iIHziHtXKgSpA+PGUzbx2YLwgSwRfS/hCmikBFkEY8QyR5BZ34WkGOFrxDG17iCjay9nnIUcziQqqiO1ivllgcwQRuYQ7d+Fnyy0NC93sYxJMagudNBpJkI+mSm+d5yDIO48wuACWX1VTWreVe8htLOLsHyKeUn0PlIH+wuA+Q9qxKebn+KeQEnqMHIUPI+hbX8CUnbci1q5c8wjDeJECAYpzE/o39grxCb64aQ9qYaZf/Q/J9cvDkinF+vky3x78So720SqVaZB5DMr6Hwtl1EhdTL2Sdoy/e43Nm83T6BrbGRzoL25ls/1T7GfcwwrZd6wL5C/y5ZhoUNFmSAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAVtJREFUSEvt1T8sJmEQx/HPK0cEDaFBNArRoHSVwhVqjUJCVBriGkTnrlZIXH3FUbjqoiJBJ3qVSCiuUVwiJP4kXHB5kn2TzWbfdRveVyI22eTZ7Mx8Z347M1tQgatQAYa3B5nCyjOka8NpKf+iXEXIAh5ywHowilyQGvzNARnBeiUhzThIJDiNb0m5nlNJFb5GkHAex4tD4h++GnfvkGTjlequ15erJTYnV7hH6LhaUvfcML6nzElmJXE5enGJOYyhLmNIkxOfCulGfxQknGcxg5BpF1ZxmAH5iZvY+1RI3H8QO7jGIz5jDbc51s1/QbZwhEmcYB5hiX5IgEIiy9Hd+tRaift+jAJ+wTHC81DUAHG7sJI6ECrfxiZ+IEj3OzLcwH7an7EB9fgTyZWlUhMmsIgLtOMTdpPZ5JC6pOkAfqGxnJBA78NSVNVeOSoJMYP0nTjHWbkgJbX8BxLhaRrnQs3GAAAAAElFTkSuQmCC\"","import React from 'react';\r\nimport { useStoreState, useStoreActions } from 'easy-peasy';\r\nimport FriendRequests from './FriendRequests';\r\nimport soundIcon from './sound-icon.png';\r\nimport musicIcon from './music-icon.png';\r\nimport leaderboardIcon from './leaderboard.png';\r\nimport logOutIcon from './log-out.png';\r\nimport homeIcon from './home-icon.png';\r\nimport backArrow from './back-arrow.png';\r\nimport friendsIcon from './friends-icon.png';\r\nimport chatIcon from './chat-icon.png';\r\nimport './navigation.css';\r\n\r\nconst Navigation = ({ socket, onRouteChange }) => {\r\n\r\n    const { friendSocket, user, route, soundOn, musicOn, isMobile, showChatMobile, showFriendsMobile } = useStoreState(state => ({\r\n        friendSocket: state.friendSocket,\r\n        user: state.user,\r\n        route: state.route,\r\n        soundOn: state.stored.soundOn,\r\n        musicOn: state.stored.musicOn,\r\n        isMobile: state.stored.isMobile,\r\n        showChatMobile: state.showChatMobile,\r\n        showFriendsMobile: state.showFriendsMobile\r\n    }));\r\n\r\n    const { setSearch, setSoundOn, setMusicOn, setShowFriendsMobile, setShowChatMobile } = useStoreActions(actions => ({\r\n        setSearch: actions.setSearch,\r\n        setSoundOn: actions.setSoundOn,\r\n        setMusicOn: actions.setMusicOn,\r\n        setShowFriendsMobile: actions.setShowFriendsMobile,\r\n        setShowChatMobile: actions.setShowChatMobile\r\n    }));\r\n\r\n    const handleExitClick = (e) => {\r\n        setSearch(false);\r\n        onRouteChange(e);\r\n        socket.emit('send exit game', friendSocket);\r\n    }\r\n\r\n    const setSoundClick = () => {\r\n        if (!isMobile) {\r\n            setSoundOn();\r\n        }\r\n    }\r\n\r\n    const setSoundTouch = () => {\r\n        if (isMobile) {\r\n            setSoundOn();\r\n        }\r\n    }\r\n\r\n    const setMusicClick = () => {\r\n        if (!isMobile) {\r\n            setMusicOn();\r\n        }\r\n    }\r\n\r\n    const setMusicTouch = () => {\r\n        if (isMobile) {\r\n            setMusicOn();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <nav className='nav'>\r\n            <div className='leftNav'>\r\n                <img alt='sound icon' src={soundIcon} onClick={setSoundClick} onTouchStart={setSoundTouch} className={`hasSound audioToggle soundToggle ${soundOn ? 'soundOn' : 'soundOff'}`} />\r\n                <img alt='music icon' src={musicIcon} onClick={setMusicClick} onTouchStart={setMusicTouch} className={`hasSound audioToggle musicToggle ${musicOn ? 'musicOn' : 'musicOff'}`} />\r\n            </div>\r\n            <div className='rightNav'>\r\n                {\r\n                route === 'login' || route === 'register'\r\n                ?\r\n                <>\r\n                    <img className='hasSound leaderboardIcon' src={leaderboardIcon} alt='leaderboard' value='goToLeaderboard' onClick={onRouteChange} />\r\n                </>\r\n                :\r\n                route === 'loggedIn'\r\n                ?\r\n                    !isMobile\r\n                    ?\r\n                    <>\r\n                        {/* <FriendRequests socket={socket} />\r\n                        <button value='goToLeaderboard' onClick={onRouteChange}>Leaderboard</button>\r\n                        <button value='logOut' onClick={onRouteChange}>Log Out</button> */}\r\n                        <FriendRequests socket={socket} />\r\n                        <img className='hasSound leaderboardIcon' src={leaderboardIcon} alt='leaderboard' value='goToLeaderboard' onClick={onRouteChange} />\r\n                        <img className='hasSound logOutIcon' src={logOutIcon} alt='log out' value='logOut' onClick={onRouteChange} />\r\n                    </>\r\n                    :\r\n                    <>\r\n                        <img className='hasSound friendsIcon' src={friendsIcon} alt='friends' onClick={() => setShowFriendsMobile(!showFriendsMobile)} />\r\n                        <FriendRequests socket={socket} />\r\n                        <img className='hasSound leaderboardIcon' src={leaderboardIcon} alt='leaderboard' value='goToLeaderboard' onClick={onRouteChange} />\r\n                        <img className='hasSound logOutIcon' src={logOutIcon} alt='log out' value='logOut' onClick={onRouteChange} />\r\n                    </>\r\n                :\r\n                <>\r\n                    {\r\n                    route === 'leaderboard'\r\n                    ?\r\n                        user?.username\r\n                        ?\r\n                        <>\r\n                            {/* <FriendRequests socket={socket} /> */}\r\n                            <img className='hasSound goHomeIcon' src={homeIcon} alt='go home' value='goHome' onClick={onRouteChange} />\r\n                            <img className='hasSound logOutIcon' src={logOutIcon} alt='log out' value='logOut' onClick={onRouteChange} />\r\n                        </>\r\n                        :\r\n                        <>\r\n                            <img className='hasSound goBackIcon' src={backArrow} alt='go back' value='goToLogin' onClick={onRouteChange} />\r\n                        </>\r\n                    : //route === 'game'\r\n                        user.hash === 'guest'\r\n                        ?\r\n                        <>\r\n                            {\r\n                                isMobile\r\n                                ? \r\n                                <div className='chatIconContainer'>\r\n                                    <img className='hasSound chatIcon' src={chatIcon} alt='chat' onClick={() => setShowChatMobile(!showChatMobile)} />\r\n                                </div>\r\n                                : null\r\n                            }\r\n                            <img className='hasSound logOutIcon' src={logOutIcon} alt='log out' value='logOut' onClick={handleExitClick} />\r\n                        </>\r\n                        :\r\n                        <>\r\n                        {\r\n                                isMobile\r\n                                ? \r\n                                <div className='chatIconContainer'>\r\n                                    <img className='hasSound chatIcon' src={chatIcon} alt='chat' onClick={() => setShowChatMobile(!showChatMobile)} />\r\n                                </div>\r\n                                : null\r\n                            }\r\n                            <img className='hasSound goHomeIcon' src={homeIcon} alt='go home' value='goHome' onClick={handleExitClick} />\r\n                            <img className='hasSound logOutIcon' src={logOutIcon} alt='log out' value='logOut' onClick={handleExitClick} />\r\n                        </>\r\n                    }\r\n                </>\r\n                }\r\n            </div>\r\n        </nav>\r\n    )\r\n}\r\n\r\nexport default Navigation;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAZNJREFUSEu11b9L1lEUx/GXPwIN0prN1bUhgposEspMssmWQjCqJWxyaAoSrSXBympqda0pGkoQ+gO0f6AEHWwJojTS4sj5gj34PI/49bnL98L33vc599zP59wmex+H0I4N/MbfWlub9sg9jKu4jTd4hR9lwW24jPP4hi08zXlVdr2M4/8lDGEOEeQUnpUFn8MtvMYH9OF0BfgIerCC1eIItTI+g0eYwEf8wcVdwB24jm68wJeAVwOfyEX3sYDNzKQS3IKjaMZd/MIsvgc4JPQcw2hNQEgr6vq24nYqwb14gHtYwzRm8CnAx/AOsWg9QXH0G1iuAo5EYm9I7grOZoABHI8SFuD3edsFpx44jhtZzmMRd/A551MY2S84Mj6JcVzAaJb0JSLJwYMC30yNlwbvLMVSWj2+UY7JnaUoc3mhnkId/11eyC0seq2E3MbS4k+yj2zLbbexX4P8TGNtG6TaCEs/xsM6lu5MS3cl9GstSxfBGtKEisD92eQPtG0GvCGNvihJQ56mAh4dL7KPh7TuY/oPvlCEY7YLExIAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAbxJREFUSEvt1EuIzmEUx/HPyF0kG2nSYCiyICxccil2lpgpSaxElGg0DaFsaLKgXBZDdsrCUtnJRqTYmAg7uWRGRLlfOnXeet83+v/feWtqylOnp+dfz/k+5/c/59diGFbLMDCMOMhkrMZ6HKxWqNFKJmJaVbRjGZZjAUZhDLUKlYHMwCrMwxy0YRZm4j2e4lnuS7FpKJBOnEfI8Q53cQf38AKf8DETH8OBoUB24jIWoR/jMiZgCdZkLMbolKxGoTJyVSCxT8fCjPn4ipd4lVWFjOuaqeRzJn2MR3iA53iNN3ibUp1qBrIWD/GjKn7VDfMhNAWZig8FDjFyIdFpm7ENX7LNY+JLddfYbNNQZysuol6umO5dOI2fKWM4QnwvhMxGN7bkxUHM/QtkEu7jCfYh5uYcNpSBXMBGXMmWjdeGhdRXMiXb9wjOZAXH0xzHFxlk+FEfjqYMXTjxj0pu4xt2ICq7hJinlUWQAVzF4ZyHHuxOUwyPqqzQvgMn0YrfOfV7caMIcjad9Hq+MhLdxJ48V98PW1+RVhI//1Ya5/ciSOi/H9vT8K6hNy0kXtvwKmOQDSetv/Af0pCEfwCqzmMah/JHMAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAxdJREFUSEvd1lnIV1UUBfCfjSRlpASN2EiWjRRNKNGEUQ+mNNFLZPVSVFJBgTQRQeVLSgMRFGUUQSUpZjRRkhQ0h9FI5tRAk4UN0iTrY1+5HS74IPTQgQ8+7r3nrL3XWnud/yj/wRq1mRh74hZsiz/wFua0Z7YgW2MRDsJf2AKzcR/WN5v3xgM4B79hSxyCm/AhrsA/2dMHGY37cSfe6B04FbfjiDqsezULr+DVATauwTeY14L8iGPx8cCmANyK03vvvsJ4vIwTq9Nt8BH2xRrs1geZgS/xbAMQCk7CC/V+1977xXgSv+AM7FcHf4pncBcO7YO8U3T0McLvAjxYNKWLVNyt0PEdjmpo3A7zMRExxkZNPseEqjZixwBP4HKMwY3I5gs6MfFQfXf+AL0p+k1c0oKktadxcrMpvMYx4fvCHsju5aBrB0DSSQDS6b86iW2fx+Rm0x64Dts3IFuVVQ/Dr709+S6uO7J71lk4dO2DT3BgzUj3zbSiKtxf1RSQwl7CFLxX7nsMeyFuHVktSISdi1OwrsQL9wEeix8akOuLymh2TM3MzZheDhsECWh8H4/Hrqn0YHyLe6qT3wsoE58DU0A6SQFn4nCchePxc9tJRD+vhirtZr2O7ysuJmFlPU8KZJpvqJRYUcXEUdHwUZyK/bG2oytVzMTDuLSAMmjRKjTF1smjVPg3HsHRWF78H4clNZCZnwxvnoXycQG5CDtUZnWUJ6tCVTh/t6fD19VNNAsVZ+PqmuwUsLBiKYP7RcXKbQH5oFodScxNrBx0MU7rfZd5WYadagCTymGgW2sCkkA8oCY+g3j3ANBr1X4CMTa+skQOHaEmdu1AYvXLsLRYWBaQtJVNETuXzx0DIHFbtBqHiJ57JO55Ec8hjss1EZ1i5dwlCdd0NCcg+ScREEtG5CGQ1ZVbO5f49+KEmouAhLIkwFr8VCC55D4LeEDeL+GSXeF6CCTxHTvGnqErf+E+hwakXekkl9nbOf//BZKceQo7VkjmLmjXuXi8gjLiJmV3wZ9dnDcbQv2qct30zf1JtKm5Gnm/AZ5HzANG5KjiAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAdFJREFUSEu91curTmEUx/HPkVskSbklMnAbmchAnInkD5CBmLhkykBiwkBRhkbUkVIyMTinQ1EGzEmR+z0Dl9ySkruW1iu99n733s7OmuzBXmt9n7We31pPn/9gff/AWIIvuFk3tglkGc5jDCZiFp7VAdWBbMAR3MdmXMUPTMWbkUACvgnH8AiL8SkTzsUtTKgDCJ+iStbgDE5iJ151JduP5Vg1Eki0Yh4elySZhGuYhjl4XQUrquQ0ruBgRfAKXMJaDPbyLYKMwlfEt8pCZU+xAyfKnMvUNZz3crSKgvH4gIV4UORfBpmJO5iccq1iLcBtjMb3budec/IEW3Ahgw5gAA9LiGdxA7uaQGbjOqZkUKySeznxK/G8APYx5ycU+tuqJj5asD4VFLKO6Q/ARWzEqS5QSHspPjeBxL46l6ebgXcZPC7vbAjb/0i4B99wqAkkfGMRvk8FdXfoBfblbot/67ANq5tCeikr5BvVhRrfJmQrYjXVvpMq6cb/OHncTz/2JvRw25DIFxtibMo7hrKzsX+xqtRVp5LwCclOTzF0JN9quzqQl9iN402GsW4V83E3q1hUFNRGuy7n+xPvS8zIX9YGJJKHfGPtFFobkMq2/gQE4FUaGykeQwAAAABJRU5ErkJggg==\"","import React, { useEffect } from 'react';\r\nimport { useStoreState, useStoreActions } from 'easy-peasy';\r\nimport { audio } from '../../audio';\r\n\r\nconst ChatBox = ({ socket }) => {\r\n    const { friendSocket, opponentName, chatText, showChatMobile, isMobile } = useStoreState(state => ({\r\n        friendSocket: state.friendSocket,\r\n        opponentName: state.opponentName,\r\n        chatText: state.chatText,\r\n        showChatMobile: state.showChatMobile,\r\n        isMobile: state.stored.isMobile\r\n    }));\r\n\r\n    const { setChatText } = useStoreActions(actions => ({\r\n        setChatText: actions.setChatText\r\n    }));\r\n\r\n    const chatBox = document.querySelector('.chatBox');\r\n    const root = document.querySelector(':root');\r\n\r\n    useEffect(() => {\r\n        if (showChatMobile) root.style.setProperty(\"--chatNotificationDisplay\", 'none')\r\n\r\n        document.addEventListener('keyup', handleEnterBtn);\r\n        socket.on('receive msg', message => {\r\n            handleReceivedMessage(message);\r\n        })\r\n\r\n        return () => {\r\n            socket.off('receive msg');\r\n            document.removeEventListener('keyup', handleEnterBtn);\r\n        }\r\n    },[chatBox, showChatMobile, chatText])\r\n\r\n    const handleReceivedMessage = (message) => {\r\n        const msgNode = document.createElement(\"DIV\");\r\n        msgNode.classList.add('message');\r\n        const textNode = document.createElement(\"H4\");\r\n        textNode.classList.add('opponentText');\r\n        const nameNode = document.createElement(\"H5\");\r\n        nameNode.classList.add('oppName');\r\n        const text = document.createTextNode(message);\r\n        const name = document.createTextNode(opponentName);\r\n        nameNode.appendChild(name);\r\n        textNode.appendChild(text);\r\n        msgNode.appendChild(nameNode);\r\n        msgNode.appendChild(textNode);\r\n        chatBox.appendChild(msgNode);\r\n        chatBox.scrollTop = chatBox.scrollHeight;\r\n\r\n        if (!showChatMobile) {\r\n            root.style.setProperty(\"--chatNotificationDisplay\", 'block');\r\n            audio.notificationSound.play();\r\n        }\r\n    }\r\n\r\n    const handleEnterBtn = (e) => {\r\n            if (e.key === 'Enter' && chatText !== '') {\r\n                e.preventDefault();\r\n                audio.buttonClick.play();\r\n                const msgNode = document.createElement(\"DIV\");\r\n                msgNode.classList.add('message');\r\n                const textNode = document.createElement(\"H4\");\r\n                textNode.classList.add('userText');\r\n                const nameNode = document.createElement(\"H5\");\r\n                nameNode.classList.add('userName');\r\n                const text = document.createTextNode(chatText);\r\n                const name = document.createTextNode(\"You\");\r\n                nameNode.appendChild(name);\r\n                textNode.appendChild(text);\r\n                msgNode.appendChild(nameNode);\r\n                msgNode.appendChild(textNode);\r\n                chatBox.appendChild(msgNode);\r\n                setChatText('');\r\n                socket.emit('send msg', {socketid: friendSocket, message: chatText});\r\n                document.querySelector('.chatInput').value = '';\r\n                chatBox.scrollTop = chatBox.scrollHeight;\r\n            }\r\n    }\r\n\r\n    return (\r\n        <div className={`${!showChatMobile && isMobile ? 'hide' : null} ${isMobile ? 'chatContainerMobile' : 'chatContainer'}`}>\r\n            <div className='chatBox'></div>\r\n            <input onChange={(e) => setChatText(e.target.value)} type='text' className='chatInput' placeholder='Type Here...' />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChatBox;\r\n","import React from 'react';\r\nimport './footer.css';\r\n\r\nconst Footer = () => {\r\n    return (\r\n        <footer><div className='footer'></div></footer>\r\n    )\r\n}\r\n\r\nexport default Footer;\r\n","import React, { useEffect } from 'react';\r\nimport { useStoreState, useStoreActions } from 'easy-peasy';\r\nimport UserBoard from './UserBoard';\r\nimport OpponentBoard from './OpponentBoard';\r\nimport Navigation from '../navigation/Navigation';\r\nimport ChatBox from './ChatBox';\r\nimport Footer from '../footer/Footer';\r\n\r\nconst Game = ({ socket, onRouteChange }) => {\r\n    const { friendSocket, opponentName, user, checkOppStatusInterval, gameRoute, playerIsReady, yourTurn, playerTurnText, isMobile, showGameInstructions, opponentIsReady, firstGameInstructionLoad } = useStoreState(state => ({\r\n        friendSocket: state.friendSocket,\r\n        opponentName: state.opponentName,\r\n        user: state.user,\r\n        checkOppStatusInterval: state.checkOppStatusInterval,\r\n        gameRoute: state.gameRoute,\r\n        playerIsReady: state.playerIsReady,\r\n        yourTurn: state.yourTurn,\r\n        playerTurnText: state.playerTurnText,\r\n        isMobile: state.stored.isMobile,\r\n        showGameInstructions: state.showGameInstructions,\r\n        opponentIsReady: state.opponentIsReady,\r\n        firstGameInstructionLoad: state.firstGameInstructionLoad\r\n    }));\r\n\r\n    const { setCheckOppStatusInterval, setRoute, setGameRoute, setPlayerIsReady, setYourTurn, setPlayerTurnText, setOpponentIsReady, setShowGameInstructions, setFirstGameInstructionLoad } = useStoreActions(actions => ({\r\n        setCheckOppStatusInterval: actions.setCheckOppStatusInterval,\r\n        setRoute: actions.setRoute,\r\n        setGameRoute: actions.setGameRoute,\r\n        setPlayerIsReady: actions.setPlayerIsReady,\r\n        setYourTurn: actions.setYourTurn,\r\n        setPlayerTurnText: actions.setPlayerTurnText,\r\n        setOpponentIsReady: actions.setOpponentIsReady,\r\n        setShowGameInstructions: actions.setShowGameInstructions,\r\n        setFirstGameInstructionLoad: actions.setFirstGameInstructionLoad\r\n    }));\r\n    \r\n    const pickUpShipInstructions = \r\n    !isMobile \r\n    ? \"Click once on the ship you want to move\"\r\n    : \"Tap once on the ship you want to move\"\r\n\r\n    const rotateShipInstructions = \r\n    !isMobile\r\n    ? 'Right click or press \"Spacebar\" while a ship is selected'\r\n    : \"When selected, tap the ship again\"\r\n\r\n    const dropShipInstructions = \r\n    !isMobile\r\n    ? \"Move the ship into position and left click again when ready to release\"\r\n    : \"Drag the selected ship and let go when the ship is in position\"\r\n\r\n    useEffect(() => {\r\n        setShowGameInstructions(false);\r\n        setFirstGameInstructionLoad(true);\r\n        setPlayerIsReady(false);\r\n        setOpponentIsReady(false);\r\n        setGameRoute('placeShips');\r\n\r\n        // const gamePage = document.querySelector('.gamePage');\r\n        socket.on('receive game over', () => {\r\n            // gamePage.style.setProperty('--player-turn-text', '\"You Won!\"');\r\n            // setTimeout(gameOver, 2000);\r\n            clearInterval(checkOppStatusInterval);\r\n            if (user?.hash !== 'guest') {\r\n                addWin();\r\n            }\r\n            setTimeout(() => {\r\n                window.alert('You Won!!!');\r\n                user.hash === 'guest' ? setRoute('login') : setRoute('loggedIn');\r\n            }, 300);\r\n        })\r\n\r\n        socket.on('receive exit game', () => {\r\n            window.alert('Opponent has left the game');\r\n            user.hash === 'guest' ? setRoute('login') : setRoute('loggedIn');\r\n        })\r\n\r\n        setCheckOppStatusInterval(setInterval(checkIfOpponentIsOnlineAndInGame, 2000));\r\n\r\n        return () => {\r\n            clearInterval(checkOppStatusInterval);\r\n            socket.off('receive game over');\r\n            socket.off('receive exit game');\r\n            setFirstGameInstructionLoad(true);\r\n        }\r\n    },[])\r\n\r\n    useEffect(() => {\r\n        socket.on('receive ready status', () => {\r\n            if (playerIsReady) {\r\n                setGameRoute('gameInProgress');\r\n            }\r\n            setOpponentIsReady(true);\r\n        })\r\n\r\n        return () => {\r\n            socket.off('receive ready status');\r\n        }\r\n    }, [playerIsReady])\r\n\r\n    useEffect(() => {\r\n        const shipContainers = document.querySelectorAll('.userBoard .ship');\r\n        let score = 0;\r\n        if (yourTurn) {\r\n            setPlayerTurnText('Your Turn')\r\n            shipContainers.forEach(shipContainer => {\r\n                if (shipContainer.childNodes[0].classList.contains('shipSunkUser')) {\r\n                    score += 1;\r\n                }\r\n            })\r\n            if (score >= 5) {\r\n                socket.emit('game over', friendSocket);\r\n                setTimeout(() => {\r\n                    window.alert('You Lose');\r\n                    user.hash === 'guest' ? setRoute('login') : setRoute('loggedIn');\r\n                }, 300);\r\n            }\r\n        } else {\r\n            setPlayerTurnText(`${opponentName}'s Turn!`)\r\n        }\r\n    },[yourTurn])\r\n\r\n    const checkIfOpponentIsOnlineAndInGame = async () => {\r\n        try {\r\n            const response = await fetch(`https://calm-ridge-60009.herokuapp.com/checkIfOppInGame?username=${opponentName}`)\r\n            if (!response.ok) {\r\n                throw new Error('Error')\r\n            }\r\n            const isOnline = await response.json();\r\n            if (!isOnline) {\r\n                window.alert('Opponent has left the game');\r\n                user.hash === 'guest' ? setRoute('login') : setRoute('loggedIn');\r\n            }\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n   }\r\n\r\n    const addWin = async () => {\r\n        try {\r\n            const res = await fetch('https://calm-ridge-60009.herokuapp.com/updateWins', {\r\n                method: 'put',\r\n                headers: {'Content-Type': 'application/json'},\r\n                body: JSON.stringify({\r\n                    username: user.username\r\n                })\r\n            })\r\n            const winsUpdated = await res.json();\r\n            if (!winsUpdated) {\r\n                throw new Error('Could not increment wins')\r\n            }\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    const handleReadyButton = () => {\r\n        const ships = document.querySelectorAll('.ship');\r\n        const readyBtn = document.querySelector('.readyBtn');\r\n        const instructionsBtn = document.querySelector('.instructionsBtn');\r\n        let allShipsPlaced = true;\r\n\r\n        for (let ship of ships) {\r\n            if (parseInt(ship.style.zIndex) < 0) {\r\n                ship.style.border = '3px solid rgba(255, 0, 0, 0.8)';\r\n                allShipsPlaced = false;\r\n                return;\r\n            }\r\n        }\r\n\r\n        if (allShipsPlaced) {\r\n            setPlayerIsReady(true);\r\n            instructionsBtn?.classList.add('hide');\r\n            readyBtn.childNodes[0].innerText = `${!isMobile ? 'Waiting...' : '•••'}`;\r\n            for (let ship of ships) {\r\n                ship.style.cursor = 'default';\r\n                ship.style.border = null;\r\n                ship.style.zIndex = '3';\r\n            }\r\n            if (opponentIsReady) {\r\n                setGameRoute('gameInProgress');\r\n                setYourTurn(true);\r\n            } else {\r\n                readyBtn.style.opacity = '0.3';\r\n                setGameRoute('waiting');\r\n            }\r\n            socket.emit('send ready status', friendSocket);\r\n        }\r\n    }\r\n\r\n    const handleInstructionsBtnClick = () => {\r\n        setShowGameInstructions(true);\r\n        if (firstGameInstructionLoad) {\r\n            setFirstGameInstructionLoad(false);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Navigation socket={socket} onRouteChange={onRouteChange} />\r\n            <UserBoard socket={socket} />\r\n            {\r\n            showGameInstructions\r\n            ?\r\n            <div className={`instructions`}>\r\n                <div>\r\n                    <h3>Picking up a ship</h3>\r\n                    <h5>{pickUpShipInstructions}</h5>\r\n                </div>\r\n\r\n                <div>\r\n                    <h3>Rotation</h3>\r\n                    <h5>{rotateShipInstructions}</h5>\r\n                </div>\r\n\r\n                <div>\r\n                    <h3>Dropping a ship</h3>\r\n                    <h5>{dropShipInstructions}</h5>\r\n                </div>\r\n            </div>\r\n            :\r\n            <button className={`instructionsBtn ${firstGameInstructionLoad ? 'firstGameInstructionLoad' : null}`} onClick={handleInstructionsBtnClick}><h2>i</h2></button>\r\n            }\r\n            <h3 className={`playerTurnText ${gameRoute !== 'gameInProgress' ? 'hide' : null}`}>{`${gameRoute === 'gameInProgress' ? playerTurnText : ''}`}</h3>\r\n            {\r\n            gameRoute !== 'gameInProgress'\r\n            ? \r\n            <div className='readyBtn'>\r\n                <button onClick={handleReadyButton} className='btn'>{isMobile ? '✔️' : 'Ready'}</button>\r\n            </div>\r\n            : (null)\r\n            }\r\n            <OpponentBoard socket={socket} />\r\n            <ChatBox socket={socket} />\r\n            <Footer />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Game;\r\n","import React from 'react';\r\nimport Board from '../boards/Board';\r\nimport './homeBoard.css';\r\n\r\nconst HomeBoard = () => {\r\n    return (\r\n        <div className='board homeBoard'>\r\n{/*            <div className='rows'>\r\n                <h3>A</h3>\r\n                <h3>B</h3>\r\n                <h3>C</h3>\r\n                <h3>D</h3>\r\n                <h3>E</h3>\r\n                <h3>F</h3>\r\n                <h3>G</h3>\r\n                <h3>H</h3>\r\n                <h3>I</h3>\r\n                <h3>J</h3>\r\n            </div>\r\n\r\n            <div className='cols'>\r\n                <h3>1</h3>\r\n                <h3>2</h3>\r\n                <h3>3</h3>\r\n                <h3>4</h3>\r\n                <h3>5</h3>\r\n                <h3>6</h3>\r\n                <h3>7</h3>\r\n                <h3>8</h3>\r\n                <h3>9</h3>\r\n                <h3>10</h3>\r\n            </div>*/}\r\n\r\n            <div className='grid'>\r\n                <div className='allSqaures'>\r\n                    <Board />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default HomeBoard;\r\n\r\n","import React, { useEffect } from 'react';\r\nimport { useStoreState, useStoreActions } from 'easy-peasy';\r\nimport './findMatch.css';\r\n\r\nconst FindMatch = ({ socket }) => {\r\n    \r\n    const { currentSocket, search, user, route } = useStoreState(state => ({\r\n        currentSocket: state.currentSocket,\r\n        search: state.search,\r\n        user: state.user,\r\n        route: state.route\r\n    }));\r\n\r\n    const { setSearch, setFindMatchInterval, setOpponentName, setFriendSocket, setRoute, setUser } = useStoreActions(actions => ({\r\n        setSearch: actions.setSearch,\r\n        setFindMatchInterval: actions.setFindMatchInterval,\r\n        setOpponentName: actions.setOpponentName,\r\n        setFriendSocket: actions.setFriendSocket,\r\n        setRoute: actions.setRoute,\r\n        setUser: actions.setUser\r\n    }));\r\n\r\n    useEffect(() => {\r\n        if ((route === 'login' || route === 'register')) {\r\n            if (user?.hash === 'guest') {\r\n                removeGuest();\r\n            }\r\n        }\r\n        socket.on('receive go to game', data => {\r\n            setOpponentName(data.senderName);\r\n            setFriendSocket(data.senderSocket);\r\n            setRoute('game');\r\n        })\r\n\r\n        return () => {\r\n            socket.off('receive go to game');\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (search) {\r\n            setFindMatchInterval(setInterval(searchForMatch, 1000));\r\n        }\r\n    }, [search, user])\r\n\r\n    // useEffect(() => {\r\n    //     if (user?.username?.length && (route === 'login' || route === 'register')) {\r\n    //         console.log(user);\r\n    //         updateSearching();\r\n    //     }\r\n    // }, [user?.username])\r\n\r\n    const stopSearching = async () => {\r\n         try {\r\n            const response = await fetch('https://calm-ridge-60009.herokuapp.com/updateSearching', {\r\n                method: 'put',\r\n                headers: {'Content-Type': 'application/json'},\r\n                body: JSON.stringify({\r\n                    username: user.username,\r\n                    search: false\r\n                })\r\n            })\r\n            if (!response.ok) {throw new Error('Problem updating searching status')}\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    const updateSearching = async () => {\r\n        try {\r\n            const response = await fetch('https://calm-ridge-60009.herokuapp.com/updateSearching', {\r\n                method: 'put',\r\n                headers: {'Content-Type': 'application/json'},\r\n                body: JSON.stringify({\r\n                    username: user.username,\r\n                    search: !search\r\n                })\r\n            })\r\n            if (!response.ok) {throw new Error('Problem updating searching status')}\r\n            const searchChanged = await response.json();\r\n            if (searchChanged) {\r\n                setSearch(!search);\r\n            }\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    const searchForMatch = async () => {\r\n        try {\r\n            const response = await fetch(`https://calm-ridge-60009.herokuapp.com/findMatch?username=${user.username}&socketid=${user.socketid}`)\r\n            if (!response.ok) {throw new Error('Could not find match')}\r\n            const match = await response.json();\r\n            if (match?.username) {\r\n                setFriendSocket(match.socketid);\r\n                setOpponentName(match.username);\r\n                stopSearching();\r\n                socket.emit('send go to game',  {receiverSocket: match.socketid, senderSocket: currentSocket, senderName: user.username});\r\n                setSearch(false);\r\n                setRoute('game');\r\n            }\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    const removeGuest = async () => {\r\n        try {\r\n            const response = await fetch('https://calm-ridge-60009.herokuapp.com/removeGuestUser', {\r\n                method: 'delete',\r\n                headers: {'Content-Type': 'application/json'},\r\n                body: JSON.stringify({\r\n                    username: user?.username\r\n                })\r\n            })\r\n            if (!response.ok) {throw new Error('Problem removing guest')}\r\n            setSearch(false);\r\n            setUser(null);\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    const addGuest = async () => {\r\n        try {\r\n            const response = await fetch('https://calm-ridge-60009.herokuapp.com/addGuestUser', {\r\n                method: 'post',\r\n                headers: {'Content-Type': 'application/json'},\r\n                body: JSON.stringify({\r\n                    socketid: currentSocket\r\n                })\r\n            })\r\n            if (!response.ok) {throw new Error('Problem adding guest')}\r\n            const data = await response.json();\r\n            await setUser(data);\r\n            setSearch(true);\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={`findMatchContainer ${(route === 'login' || route === 'register') ? 'playAsGuest' : null}`}>\r\n            {\r\n                route === 'login' || route === 'register'\r\n                ? <button onClick={!search ? addGuest : removeGuest} className='findMatch'>{!search ? 'Play as Guest' : 'Searching...'}</button>\r\n                : <button onClick={updateSearching} className='findMatch'>{!search ? 'Find Match' : 'Searching...'}</button>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FindMatch;\r\n","import React, { useEffect } from 'react';\r\nimport { useStoreState, useStoreActions } from 'easy-peasy';\r\nimport './singleFriend.css';\r\n\r\nconst SingleFriend = ({ friendInGame, socket, name, status }) => {\r\n\r\n    const { friendSocket, route, currentSocket, user } = useStoreState(state => ({\r\n        friendSocket: state.friendSocket,\r\n        route: state.route,\r\n        currentSocket: state.currentSocket,\r\n        user: state.user\r\n    }));\r\n\r\n    const { setOpponentName, setFriendSocket, setRoute } = useStoreActions(actions => ({\r\n        setOpponentName: actions.setOpponentName,\r\n        setFriendSocket: actions.setFriendSocket,\r\n        setRoute: actions.setRoute\r\n    }));    \r\n\r\n    useEffect(() => {\r\n        socket.on('receive go to game', data => {\r\n            setOpponentName(data.senderName);\r\n            setFriendSocket(data.senderSocket);\r\n            setRoute('game');\r\n        })\r\n\r\n        socket.on('receive invite', data => handleInvite(data))\r\n\r\n        return () => {\r\n            socket.off('receive go to game');\r\n            socket.off('receive invite');\r\n        }\r\n    },[])\r\n\r\n    useEffect(() => {\r\n        const btn = document.querySelector(`.btn${name}`);\r\n        if (status !== 'offline' && !friendInGame) {\r\n            btn.style.opacity = '0.8';\r\n            btn.disabled = false;\r\n            btn.childNodes[0].nodeValue = \"Invite\";\r\n        }\r\n    },[status, friendInGame])\r\n\r\n    const handleInvite = (data) => {\r\n        const btn = document.querySelector(`.btn${data.username}`);\r\n        if (route === 'loggedIn' && btn !== null) {\r\n            if (btn.disabled === true) {\r\n                btn.style.opacity = '0.8';\r\n                btn.disabled = false;\r\n            }\r\n            btn.childNodes[0].nodeValue = \"Accept\";\r\n            setFriendSocket(data.socketid);\r\n        }\r\n    }\r\n\r\n    const sendInvite = async (e) => {\r\n        const friend = e.target.id;\r\n        try {\r\n            const response = await fetch(`https://calm-ridge-60009.herokuapp.com/findFriend?username=${friend}`)\r\n            const user1 = await response.json();\r\n            if (user1.socketid) {\r\n                socket.emit('send invite', {currentSocket: currentSocket, username: user.username, socketid: user1.socketid});\r\n                e.target.childNodes[0].nodeValue = \"Invite sent\";\r\n                e.target.style.opacity = '0.4';\r\n                e.target.style.cursor = 'default';\r\n                e.target.disabled = true;\r\n            }\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    const acceptInvite = (e) => {\r\n        socket.emit('send go to game',  {receiverSocket: friendSocket, senderSocket: currentSocket, senderName: user.username});\r\n        setOpponentName(e.target.id);\r\n        setRoute('game');\r\n    }\r\n\r\n    const handleOnClick = (e) => {\r\n        if (e.target.innerHTML === 'Invite') {\r\n            sendInvite(e)\r\n        } else if (e.target.innerHTML === 'Accept') {\r\n            acceptInvite(e)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div id={name} value={name} className='friendBlock'>\r\n            <div className='friendText'>\r\n                <h3>{name}</h3>\r\n                {\r\n                    friendInGame && status === 'online'\r\n                    ? <button disabled className={`btn${name} friendInGameBtn`}>In Game</button>\r\n                    : \r\n                        status === 'online'\r\n                        ? <button className={`btn${name} friendOnlineBtn`} onClick={handleOnClick} id={name}>Invite</button>\r\n                        : <button disabled className={`btn${name} friendOfflineBtn`}>Offline</button>\r\n                }\r\n            </div>\r\n            <div id={status} className={status}></div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SingleFriend;\r\n","import React, { useEffect } from 'react';\r\nimport { useStoreState, useStoreActions } from 'easy-peasy';\r\nimport SingleFriend from './SingleFriend';\r\nimport './friends.css';\r\n\r\nconst Friends = ({ socket }) => {\r\n    \r\n    const { unsortedFriends, user, allFriends, friendFilter, friendSearch, friendsOnline, getOnlineFriendsInterval, isMobile, showFriendsMobile } = useStoreState(state => ({\r\n        unsortedFriends: state.unsortedFriends,\r\n        user: state.user,\r\n        allFriends: state.allFriends,\r\n        friendFilter: state.friendFilter,\r\n        friendSearch: state.friendSearch,\r\n        friendsOnline: state.friendsOnline,\r\n        getOnlineFriendsInterval: state.getOnlineFriendsInterval,\r\n        isMobile: state.stored.isMobile,\r\n        showFriendsMobile: state.showFriendsMobile\r\n    }));\r\n\r\n    const { setUnsortedFriends, setAllFriends, setFriendFilter, setFriendSearch, setFriendsOnline, setGetOnlineFriendsInterval } = useStoreActions(actions => ({\r\n        setUnsortedFriends: actions.setUnsortedFriends,\r\n        setAllFriends: actions.setAllFriends,\r\n        setFriendFilter: actions.setFriendFilter,\r\n        setFriendSearch: actions.setFriendSearch,\r\n        setFriendsOnline: actions.setFriendsOnline,\r\n        setGetOnlineFriendsInterval: actions.setGetOnlineFriendsInterval\r\n    }));\r\n\r\n    let userFromLastFriendRequest;\r\n    \r\n    // Start fetching friends on component mount\r\n// -----------------------------------------------------------------------------------\r\n    useEffect(() => {\r\n        fetchFriends();\r\n        socket.on('update friend status', () => {\r\n            getOnlineFriends();\r\n        });\r\n\r\n        setGetOnlineFriendsInterval(setInterval(getOnlineFriends, 1000));\r\n\r\n        return () => {\r\n            socket.off('update friend status');\r\n            clearInterval(getOnlineFriendsInterval);\r\n        }\r\n    }, [])\r\n//-----------------------------------------------------------------------------------\r\n    // Sort the friends when fetching has finished/unsortedFriends has updated\r\n//-----------------------------------------------------------------------------------\r\n    useEffect(() => {\r\n        sortFriends();\r\n    },[friendsOnline, unsortedFriends])\r\n    \r\n//-----------------------------------------------------------------------------------\r\n    // Sort friends. Online at top\r\n//-----------------------------------------------------------------------------------\r\n    const sortFriends = () => {\r\n        const offlineFriends = [];\r\n        const justAdded = [];\r\n        let onlineSorted = [];\r\n        let offlineSorted = [];\r\n\r\n        unsortedFriends.forEach(f => {\r\n            if (f.username === userFromLastFriendRequest?.username) {\r\n                justAdded.push(f);\r\n            } else {\r\n                let addFriendToOffline = true;\r\n                friendsOnline.forEach(olF => {\r\n                    if (olF.username === f.username) {\r\n                        return addFriendToOffline = false;\r\n                    }\r\n                })\r\n\r\n                if (addFriendToOffline) {\r\n                    offlineFriends.push(f);\r\n                }\r\n            }\r\n        })\r\n\r\n        onlineSorted = friendsOnline.sort((a, b) => {\r\n            return a.username.toLowerCase() > b.username.toLowerCase() ? 1 : -1;\r\n        })\r\n\r\n        offlineSorted = offlineFriends.sort((a, b) => {\r\n            return a.username.toLowerCase() > b.username.toLowerCase() ? 1 : -1;\r\n        })\r\n        \r\n        if (justAdded.length) {\r\n            setAllFriends(justAdded.concat(onlineSorted).concat(offlineSorted));\r\n        } else {\r\n            setAllFriends(onlineSorted.concat(offlineSorted));\r\n        }\r\n    }\r\n\r\n    const getOnlineFriends = async () => {\r\n         try {\r\n            const response = await fetch(`https://calm-ridge-60009.herokuapp.com/getFriendsOnline?username=${user.username}`)\r\n            if (!response.ok) {throw new Error('Could not get online friends')}\r\n            const onlineFriends = await response.json();\r\n            setFriendsOnline(onlineFriends);\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n//-----------------------------------------------------------------------------------\r\n    // Get array of friends\r\n// -----------------------------------------------------------------------------------\r\n    const fetchFriends = async () => {\r\n        try {\r\n            const response = await fetch(`https://calm-ridge-60009.herokuapp.com/getFriends?username=${user.username}`)\r\n            if (!response.ok) {throw new Error('Problem accessing friends list')}\r\n            const friends = await response.json();\r\n            if (user?.friends?.length && friends?.length) {\r\n                setUnsortedFriends(friends);\r\n                getOnlineFriends();\r\n            } else {\r\n                setAllFriends([]);\r\n                setUnsortedFriends([]);\r\n                setFriendsOnline([]);\r\n            }\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n//-----------------------------------------------------------------------------------\r\n    // Send friend request\r\n//-----------------------------------------------------------------------------------\r\n    const sendFriendRequest = async () => {\r\n        document.querySelector('.addFriendInput').value = '';\r\n        const friendAlert = document.querySelector('.friendsContainer');\r\n        let friendName = '';\r\n        let friendSocketId = '';\r\n        let friendsRequests = '';\r\n        let friendsRequestsArray = [];\r\n//-----------------------------------------------------------------------------------\r\n        // Check to see if friend already sent user request\r\n//-----------------------------------------------------------------------------------\r\n        try {\r\n            const res = await fetch(`https://calm-ridge-60009.herokuapp.com/getFriendRequests?username=${user.username}`);\r\n            if (!res.ok) {\r\n                throw new Error('Could not get friend requests')\r\n            }\r\n            const requests = await res.json();\r\n            if (requests !== null && requests !== '') {\r\n                const requestsArray = requests.split(',');\r\n                if (requestsArray.includes(friendSearch)) {\r\n                    friendAlert.style.setProperty('--add-friend-alert', '\"User already sent you a request\"');\r\n                    throw new Error('User already sent you a request')\r\n                }\r\n            }\r\n//-----------------------------------------------------------------------------------\r\n            // Check to see if friend exists\r\n//-----------------------------------------------------------------------------------\r\n            const res2 = await fetch(`https://calm-ridge-60009.herokuapp.com/findFriend?username=${friendSearch}`);\r\n            if (!res2.ok) {\r\n                friendAlert.style.setProperty('--add-friend-alert', '\"User does not exist\"');\r\n                throw new Error('User does not exist')\r\n            }\r\n            const user1 = await res2.json();\r\n            if (user1.username === user.username) {\r\n                friendAlert.style.setProperty('--add-friend-alert', '\"Cannot add yourself as a friend\"');\r\n                throw new Error('Cannot add self as friend')\r\n            } else if (user1.username) {\r\n                friendName = user1.username;\r\n                friendSocketId = user1.socketid;\r\n//-----------------------------------------------------------------------------------\r\n                // Add user to friend's friendrequests\r\n//-----------------------------------------------------------------------------------\r\n                let friendList = [];\r\n                if (user1.friends !== null && user1.friends !== '') {\r\n                    friendList = user1.friends.split(',');\r\n                }\r\n                if (user1.friendrequests !== null && user1.friendrequests !== '') {\r\n                    friendsRequestsArray = user1.friendrequests.split(',');\r\n                    if (friendsRequestsArray.includes(user.username)) {\r\n                        friendAlert.style.setProperty('--add-friend-alert', '\"You have already sent them a request\"');\r\n                        throw new Error('You have already sent them a request');\r\n                    } else if (friendList.includes(user.username)) {\r\n                        friendAlert.style.setProperty('--add-friend-alert', '\"User is already your friend\"');\r\n                        throw new Error('User is already your friend');\r\n                    } else {\r\n                        friendsRequestsArray.push(user.username);\r\n                        friendsRequests = user1.friendrequests.concat(`,${user.username}`);\r\n                    }\r\n                } else {\r\n                    if (friendList.includes(user.username)) {\r\n                        friendAlert.style.setProperty('--add-friend-alert', '\"User is already your friend\"');\r\n                        throw new Error('User is already your friend');\r\n                    }\r\n                    friendsRequests = user.username;\r\n                    friendsRequestsArray = [user.username];\r\n                }\r\n            }\r\n            friendAlert.style.setProperty('--add-friend-alert', '\"\"');\r\n            const res3 = await fetch('https://calm-ridge-60009.herokuapp.com/updateFriendRequests', {\r\n                method: 'put',\r\n                    headers: {'Content-Type': 'application/json'},\r\n                    body: JSON.stringify({\r\n                        requestlist: friendsRequests,\r\n                        username: friendName\r\n                    })\r\n            });\r\n            if (!res3.ok) {\r\n                throw new Error('Could not add self to friendrequests of friend');\r\n            }\r\n            const selfAdded = await res3.json();\r\n            if (selfAdded) {\r\n                socket.emit('send friend request', friendSocketId);\r\n                userFromLastFriendRequest = user1;\r\n            }\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    const friendIsOnline = (last) => {\r\n        const curTime = Date.now();\r\n        if ((last > (curTime - 5000)) && last) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={`friendsContainer ${isMobile ? 'mobile' : null} ${(!showFriendsMobile && isMobile) ? 'hide' : null}`}>\r\n            <div className='friendsContainerHeader'>\r\n                    <h2>Friends</h2>\r\n                    <input className='friendSearch' onChange={(e) => setFriendFilter(e.target.value)} type='text' placeholder='Filter friends'/>\r\n            </div>\r\n            <div className='friendsSection'>\r\n                <div className='friendsListContainer'>\r\n                {\r\n                    allFriends.length\r\n                    ?\r\n                    <div className='friendsList'>\r\n                    {\r\n//-----------------------------------------------------------------------------------\r\n                        // Map through the user's friends\r\n                        // Return a single friend div w/ their username and status\r\n//-----------------------------------------------------------------------------------\r\n                        allFriends.map(f => {\r\n                            if (f.username && f.username.toLowerCase().includes(friendFilter.toLowerCase())) {\r\n                                if (friendIsOnline(f.lastonline)) {\r\n                                    return <SingleFriend friendInGame={f.ingame} socket={socket} key={f.username} name={f.username} \r\n                                    status='online' />\r\n                                } else {\r\n                                    return <SingleFriend friendInGame={f.ingame} socket={socket} key={f.username} name={f.username} \r\n                                    status='offline' />\r\n                                }\r\n                            } else return null\r\n                        })\r\n                    }\r\n                    </div>\r\n                    : <h4 className='noFriends'>No friends have been added</h4>\r\n                }\r\n                </div>\r\n            </div>\r\n            <div className='addFriend'>\r\n                <h3 className='addFriendText' >Add a friend</h3>\r\n                <input className='addFriendInput' onChange={(e) => setFriendSearch(e.target.value)} type='text' placeholder='Enter a username'/>\r\n                <button className='friendRequestBtn' onClick={sendFriendRequest}>Send</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Friends;\r\n","import React from 'react';\r\nimport './friends.css';\r\n\r\nconst FriendsHome = ({onRouteChange}) => {\r\n    return (\r\n    <div className='friendsContainer'>\r\n        <div className='friendsContainerHeader'>\r\n            <h2>Friends</h2>\r\n        </div>\r\n        <div className='logToSeeFriendsText'>\r\n            <h3>Log in to add and view friends here</h3>\r\n        </div>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default FriendsHome;\r\n","import { useStoreState, useStoreActions } from 'easy-peasy';\r\n\r\nconst Login = ({ onRouteChange}) => {\r\n    \r\n    const { currentSocket, userName, password, search } = useStoreState(state => ({\r\n        currentSocket: state.currentSocket,\r\n        userName: state.userName,\r\n        password: state.password,\r\n        search: state.search\r\n    }));\r\n\r\n    const { setUserName, setPassword, setUser, setSearch } = useStoreActions(actions => ({\r\n        setUserName: actions.setUserName,\r\n        setPassword: actions.setPassword,\r\n        setUser: actions.setUser,\r\n        setSearch: actions.setSearch\r\n    }));\r\n    \r\n    const login = document.querySelector('.login');\r\n\r\n    const onSubmitLogin = async (e) => {\r\n        try {\r\n            const res = await fetch('https://calm-ridge-60009.herokuapp.com/login', {\r\n              method: 'put',\r\n              headers: {'Content-Type': 'application/json'},\r\n              body: JSON.stringify({\r\n                username: userName,\r\n                password: password,\r\n                socketid: currentSocket\r\n              })\r\n            })\r\n            const user1 = await res.json();\r\n            if (user1.username) {\r\n                if (search) {\r\n                    setSearch(false);\r\n                }\r\n                setUser(user1);\r\n                onRouteChange(e);\r\n            } else if (user1 === 'no socketid') {\r\n                login.style.setProperty(\"--reg-log-alert\", '\"Server error. Please try again\"');\r\n            } else if (login !== null) {\r\n                login.style.setProperty(\"--reg-log-alert\", '\"The username or password you entered is incorrect\"');\r\n            }\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n\r\n    }\r\n\r\n    return (\r\n        <div className='login'>\r\n            <h1>Log In</h1>\r\n            <div className='username'>\r\n                <h4>Username</h4>\r\n                <input placeholder='Username...' onChange={(e) => setUserName(e.target.value)} type='text' />\r\n            </div>\r\n            <div className='password'>\r\n                <h4>Password</h4>\r\n                <input placeholder='Password...' onChange={(e) => setPassword(e.target.value)} type='password' />\r\n            </div>\r\n            <button className='loginBtn' value='login' onClick={onSubmitLogin}>Login</button>\r\n            <button value='goToRegister' onClick={onRouteChange} className='changeLogReg'>Register</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login;\r\n","import { useStoreState, useStoreActions } from 'easy-peasy';\r\n\r\nconst Register = ({ onRouteChange }) => {\r\n\r\n    const { currentSocket, userName, password, search } = useStoreState(state => ({\r\n        currentSocket: state.currentSocket,\r\n        userName: state.userName,\r\n        password: state.password,\r\n        search: state.search\r\n    }));\r\n\r\n    const { setUserName, setPassword, setUser, setSearch } = useStoreActions(actions => ({\r\n        setUserName: actions.setUserName,\r\n        setPassword: actions.setPassword,\r\n        setUser: actions.setUser,\r\n        setSearch: actions.setSearch\r\n    }));\r\n\r\n    const register = document.querySelector('.register');\r\n\r\n    const onSubmitRegister = (e) => {\r\n        if (userName.length < 5) {\r\n            register.style.setProperty(\"--reg-log-alert\", '\"Username must be at least 5 characters\"');\r\n        } else if (userName.length > 10) {\r\n            register.style.setProperty(\"--reg-log-alert\", '\"Username cannot be more than 10 characters\"');\r\n        } else if (password.length < 5) {\r\n            register.style.setProperty(\"--reg-log-alert\", '\"Password must be at least 5 characters\"');\r\n        } else {\r\n            fetch('https://calm-ridge-60009.herokuapp.com/register', {\r\n              method: 'post',\r\n              headers: {'Content-Type': 'application/json'},\r\n              body: JSON.stringify({\r\n                username: userName,\r\n                password: password,\r\n                socketid: currentSocket\r\n              })\r\n            })\r\n            .then(response => response.json())\r\n            .then(user1 => {\r\n              if (user1.username) {\r\n                  if (search) {\r\n                      setSearch(false);\r\n                  }\r\n                setUser(user1);\r\n                onRouteChange(e);\r\n              } else if (user1 === 'no socketid') {\r\n                register.style.setProperty(\"--reg-log-alert\", '\"Server error. Please try again\"');\r\n                }\r\n                else if (!user1.ok) {\r\n                    register.style.setProperty(\"--reg-log-alert\", '\"Username has already been taken\"');\r\n              }\r\n            })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className='register'>\r\n            <h1>Register</h1>\r\n            <div className='username'>\r\n                <h4>Username</h4>\r\n                <input placeholder='Username...' onChange={(e) => setUserName(e.target.value)} type='text' />\r\n            </div>\r\n            <div className='password'>\r\n                <h4>Password</h4>\r\n                <input placeholder='Password...' onChange={(e) => setPassword(e.target.value)}type='password' />\r\n            </div>\r\n            <button className='registerBtn' value='register' onClick={onSubmitRegister}>Register</button>\r\n            <button value='goToLogin' onClick={onRouteChange} className='changeLogReg'>Login</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Register;\r\n\r\n","import React, { useEffect } from 'react';\r\nimport { useStoreState, useStoreActions } from 'easy-peasy';\r\n\r\nimport Navigation from '../navigation/Navigation';\r\n\r\nconst Leaderboard = ({ onRouteChange, socket }) => {\r\n\r\n    const { topFive, route } = useStoreState(state => ({\r\n        topFive: state.topFive,\r\n        route: state.route\r\n    }));\r\n\r\n    const { setTopFive } = useStoreActions(actions => ({\r\n        setTopFive: actions.setTopFive\r\n    }));\r\n\r\n    useEffect(() => {\r\n        if (route === 'leaderboard') {\r\n            getTopPlayers();\r\n        }\r\n    },[route])\r\n\r\n    const getTopPlayers = async () => {\r\n        for (let i = 0; i < 5; i++) {\r\n            const response = await fetch(`https://calm-ridge-60009.herokuapp.com/getTopFive?userNum=${i}`)\r\n            if (!response.ok) {\r\n                throw new Error('Error')\r\n            }\r\n            const data = await response.json();\r\n            setTopFive(data);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Navigation onRouteChange={onRouteChange} socket={socket} />\r\n            {\r\n            topFive.length\r\n            ?\r\n            <div className='topFiveContainer'>\r\n                <div className='topFive'>\r\n                    {\r\n                    topFive.map(player => {\r\n                        return <h3 key={player.username} className='LBplayer'> {player.username} : <span className='wins'>{player.wins}</span> wins </h3>\r\n                    })\r\n                    }\r\n                </div>\r\n            </div>\r\n            : null\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Leaderboard;\r\n","import io from 'socket.io-client';\r\nexport const socket = io('https://safe-mesa-81492.herokuapp.com/');       //,{autoConnect: false}\r\n","import React, { useEffect } from 'react';\nimport { useStoreState, useStoreActions } from 'easy-peasy';\nimport Game from './components/boards/Game';\nimport HomeBoard from './components/homeBoard/HomeBoard';\nimport FindMatch from './components/findMatch/FindMatch';\nimport Friends from './components/friends/Friends';\nimport FriendsHome from './components/friends/FriendsHome';\nimport Login from './components/logReg/Login';\nimport Register from './components/logReg/Register';\nimport Leaderboard from './components/leaderboard/Leaderboard';\nimport Navigation from './components/navigation/Navigation';\nimport Footer from './components/footer/Footer';\nimport { socket } from './socket/socketImport';\nimport { audio } from './audio';\nimport './logReg.css';\nimport './homePageLogged.css';\nimport './gamePage.css';\nimport './leaderboard.css';\n\n// let showInstructions = true;\nfunction App() {\n    const { getOnlineFriendsInterval, route, user, friendSocket, findMatchInterval, checkOppStatusInterval, search, updatLastOnlineInterval, soundOn, musicOn, isMobile, showFriendsMobile, audioStarted, isIOS, deviceInPortrait, gameRoute, showGameInstructions } = useStoreState(state => ({\n        getOnlineFriendsInterval: state.getOnlineFriendsInterval,\n        route: state.route,\n        user: state.user,\n        friendSocket: state.friendSocket,\n        findMatchInterval: state.findMatchInterval,\n        checkOppStatusInterval: state.checkOppStatusInterval,\n        search: state.search,\n        updatLastOnlineInterval: state.updatLastOnlineInterval,\n        soundOn: state.stored.soundOn,\n        musicOn: state.stored.musicOn,\n        isMobile: state.stored.isMobile,\n        showFriendsMobile: state.showFriendsMobile,\n        audioStarted: state.audioStarted,\n        isIOS: state.stored.isIOS,\n        deviceInPortrait: state.deviceInPortrait,\n        gameRoute: state.gameRoute,\n        showGameInstructions: state.showGameInstructions\n    }));\n\n    const { setRoute, setUser, setCurrentSocket, setSearch, setUpdatLastOnlineInterval, setAllFriends, setUnsortedFriends, setFriendsOnline, setFriendSearch, setPlayerIsReady, setUserName, setPassword, setAudioStarted, setShowFriendsMobile, setShowChatMobile, setShowGameInstructions, setDeviceInPortrait, setGameRoute, setIsMobile } = useStoreActions(actions => ({\n        setRoute: actions.setRoute,\n        setUser: actions.setUser,\n        setCurrentSocket: actions.setCurrentSocket,\n        setSearch: actions.setSearch,\n        setUpdatLastOnlineInterval: actions.setUpdatLastOnlineInterval,\n        setAllFriends: actions.setAllFriends,\n        setUnsortedFriends: actions.setUnsortedFriends,\n        setFriendsOnline: actions.setFriendsOnline,\n        setFriendSearch: actions.setFriendSearch,\n        setPlayerIsReady: actions.setPlayerIsReady,\n        setUserName: actions.setUserName,\n        setPassword: actions.setPassword,\n        setAudioStarted: actions.setAudioStarted,\n        setShowFriendsMobile: actions.setShowFriendsMobile,\n        setShowChatMobile: actions.setShowChatMobile,\n        setShowGameInstructions: actions.setShowGameInstructions,\n        setDeviceInPortrait: actions.setDeviceInPortrait,\n        setGameRoute: actions.setGameRoute,\n        setIsMobile: actions.setIsMobile\n    }));\n\n    const onRouteChange = async (e) => {\n        const value = e.target.getAttribute('value');\n        switch(value) {\n            case 'logOut':\n                if (user?.username) {\n                    setSearch(false);\n                }\n                setRoute('login');\n                break;\n            case 'goToRegister':\n                setRoute('register');\n                break;\n            case 'goToLogin':\n                setRoute('login');\n                break;\n            case 'goHome':\n                setRoute('loggedIn');\n                break;\n            case 'goToLeaderboard':\n                setRoute('leaderboard');\n                break;\n            case 'login':\n                setRoute('loggedIn');\n                break;\n            case 'register':\n                setRoute('loggedIn');\n                break;\n            case 'game':\n                if (user?.username) {\n                    setSearch(false);\n                }\n                setRoute('game');\n                break;\n            default:\n                if (user?.username) {\n                    setSearch(false);\n                }\n                setRoute('login');\n        }\n    }\n\n    const isDevicePortrait = () => {\n        setDeviceInPortrait(window.screen.width < window.screen.height);\n    }\n\n    useEffect(() => {\n        setTimeout(() => {\n            isDevicePortrait();\n            guestCleanup();\n        }, 10);\n\n        window.addEventListener('resize', isDevicePortrait);\n        document.addEventListener('mouseover', handleMouseOver);\n\n        socket.on('connect', () => {\n            setCurrentSocket(socket.id);\n        })\n\n        return () => {\n            socket.off('connect');\n            window.removeEventListener('resize', isDevicePortrait);\n            document.removeEventListener('mouseover', handleMouseOver);\n        }\n    }, [])\n\n    useEffect(() => {\n        if (soundOn) {\n            if (!isMobile) {\n                audio.hoverSound.mute(false);\n            }\n            audio.ambientWaves.mute(false);\n            audio.buttonClick.mute(false);\n            audio.hitSound.mute(false);\n            audio.missSound.mute(false);\n            audio.shipSunkSound.mute(false);\n            audio.notificationSound.mute(false);\n            audio.pickUpShip.mute(false);\n            audio.dropShip.mute(false);\n            audio.rotateShip.mute(false);\n            audio.missileLock.mute(false);\n            audio.missileLaunch.mute(false);\n            audio.incomingMissile.mute(false);\n            \n        } else {\n            if (!isMobile) {\n                audio.hoverSound.mute(true);\n            }\n            audio.ambientWaves.mute(true);\n            audio.buttonClick.mute(true);\n            audio.hitSound.mute(true);\n            audio.missSound.mute(true);\n            audio.shipSunkSound.mute(true);\n            audio.notificationSound.mute(true);\n            audio.pickUpShip.mute(true);\n            audio.dropShip.mute(true);\n            audio.rotateShip.mute(true);\n            audio.missileLock.mute(true);\n            audio.missileLaunch.mute(true);\n            audio.incomingMissile.mute(true);\n        }\n    }, [soundOn])\n\n    useEffect(() => {\n        if (musicOn) {\n            audio.lobbyTheme.mute(false);\n            audio.gameTheme.mute(false);\n            audio.shipPlacementTheme.mute(false);\n        } else {\n            audio.lobbyTheme.mute(true);\n            audio.gameTheme.mute(true);\n            audio.shipPlacementTheme.mute(true);\n        }\n    }, [musicOn])\n\n    useEffect(() => {\n        if (user?.username?.length) {\n            if (route !== 'login' && route !== 'register') {\n                stopSearching();\n                updateInGameStatus(false);\n            }\n            setUpdatLastOnlineInterval(setInterval(updateLastOnline, 1000));\n        } else {\n            setUserName(null);\n            setPassword(null);\n            clearInterval(updatLastOnlineInterval);\n            clearInterval(findMatchInterval);\n        }\n\n        return () => {\n            clearInterval(updatLastOnlineInterval);\n        }\n    }, [user?.username])\n\n    useEffect(() => {\n        if (!search) {\n            clearInterval(findMatchInterval);\n            if (user?.username) {\n                stopSearching();\n            }\n        }\n    }, [search])\n    \n    useEffect(() => {\n        if (route === 'game') {\n            setSearch(false);\n            updateInGameStatus(true);\n            clearInterval(getOnlineFriendsInterval);\n            stopSearching();\n            setShowChatMobile(false);\n            if (gameRoute !== 'gameInProgress') {\n                if (audio.lobbyTheme.playing()) {\n                    // audio.lobbyTheme.fade(0.5, 0, 2000);\n                    audio.lobbyTheme.stop();\n                } \n                if (!audio.shipPlacementTheme.playing()) {\n                    // audio.lobbyTheme.fade(0.5, 0, 2000);\n                    audio.shipPlacementTheme.play();\n                } \n                if (!audio.ambientWaves.playing()) {\n                    // audio.ambientWaves.fade(0, 0.2, 1000);\n                    audio.ambientWaves.play();\n                }\n            } else {\n                if (!audio.gameTheme.playing()) {\n                    // audio.gameTheme.fade(0, 0.3, 500);\n                    audio.gameTheme.play();\n                }\n                if (audio.shipPlacementTheme.playing()) {\n                    // audio.lobbyTheme.fade(0.5, 0, 2000);\n                    audio.shipPlacementTheme.stop();\n                } \n            }\n        } else {\n            setGameRoute('placeShips');\n            setPlayerIsReady(false);\n            if (user?.username?.length) {\n                updateInGameStatus(false);\n            }\n            clearInterval(checkOppStatusInterval);\n            if (audioStarted && !audio.lobbyTheme.playing()) {\n                // audio.lobbyTheme.fade(0, 0.5, 10);\n                audio.lobbyTheme.play();\n            } \n            if (audio.gameTheme.playing()) {\n                // audio.gameTheme.fade(0.3, 0, 2000);\n                audio.gameTheme.stop();\n            }\n            if (audio.shipPlacementTheme.playing()) {\n                // audio.gameTheme.fade(0.3, 0, 2000);\n                audio.shipPlacementTheme.stop();\n            }\n            if (audio.ambientWaves.playing()) {\n                // audio.ambientWaves.fade(0.2, 0, 2000);\n                audio.ambientWaves.stop();\n            }\n        }\n\n        if ((route === 'login') || (route === 'register')) {\n            if (user?.hash !== 'guest') {\n                setUser(null);\n            }\n            clearInterval(getOnlineFriendsInterval);\n            setAllFriends([]);\n            setUnsortedFriends([]);\n            setFriendsOnline([]);\n            setFriendSearch('');\n        }\n\n        if (route === 'loggedIn') {\n            setShowFriendsMobile(false);\n        }\n\n        if (isMobile) {\n            document.addEventListener('touchend', handleMouseDown);\n        } else {\n            document.addEventListener('mouseup', handleMouseDown);\n        }\n\n        return () => {\n            if (isMobile) {\n                document.removeEventListener('touchend', handleMouseDown);\n            } else {\n                document.removeEventListener('mouseup', handleMouseDown);\n            }\n        }\n    }, [route, gameRoute, showGameInstructions, audioStarted])\n\n    const stopSearching = async () => {\n        try {\n           const response = await fetch('https://calm-ridge-60009.herokuapp.com/updateSearching', {\n               method: 'put',\n               headers: {'Content-Type': 'application/json'},\n               body: JSON.stringify({\n                   username: user?.username,\n                   search: false\n               })\n           })\n           if (!response.ok) {throw new Error('Problem updating searching status')}\n       } catch(err) {\n           console.log(err);\n       }\n   }\n\n    const updateLastOnline = async () => {\n        try {\n            const response = await fetch(`https://calm-ridge-60009.herokuapp.com/updateOnlineStatus`, {\n                method: 'put',\n                headers: {'Content-Type': 'application/json'},\n                body: JSON.stringify({\n                    username: user?.username\n                })\n            })\n            if (!response.ok) {\n                throw new Error('Error');\n            }\n        } catch(err) {\n            console.log(err);\n        }\n    }\n\n    const guestCleanup = async () => {\n        try {\n            const response = await fetch('https://calm-ridge-60009.herokuapp.com/guestCleanup', {\n                method: 'delete',\n                headers: {'Content-Type': 'application/json'}\n            })\n            if (!response.ok) {throw new Error('Problem adding guest')}\n        } catch(err) {\n            console.log(err);\n        }\n    }\n\n    const handleMouseDown = (e) => {\n        if (!audioStarted && !audio.lobbyTheme.playing() && route !== 'game') {\n            audio.lobbyTheme.play();\n            setAudioStarted();\n        }\n\n        if (\n            ((e.target.tagName === 'BUTTON') && (!e.target.classList.contains('messageToggle')))\n            ||\n            (e.target.classList.contains('hasSound'))\n        ) {\n            audio.buttonClick.play();\n        }\n\n        const instructionsDiv = document.querySelector('.instructions');\n        if (instructionsDiv !== e.target && !instructionsDiv?.contains(e.target) && (route === 'game')) {\n            setShowGameInstructions(false);\n        }\n    }\n\n    let playHoverSound = true;\n    const handleMouseOver = (e) => {\n        if (\n            (((e.target.tagName === 'BUTTON') && (!e.target.classList.contains('messageToggle')))\n            ||\n            (e.target.classList.contains('hasSound')))\n        ) {\n            if (playHoverSound) {\n                audio.hoverSound.play();\n                playHoverSound = false;\n            }\n        } else {\n            playHoverSound = true;\n        }\n    }\n\n    const updateInGameStatus = async (inGame) => {\n        try {\n            const response = await fetch(`https://calm-ridge-60009.herokuapp.com/setInGame`, {\n                method: 'put',\n                headers: {'Content-Type': 'application/json'},\n                body: JSON.stringify({\n                    username: user?.username,\n                    isInGame: inGame\n                })\n            })\n            if (!response.ok) {\n                throw new Error('Error');\n            }\n        } catch(err) {\n            console.log(err);\n        }\n    }\n\n    window.addEventListener('beforeunload', (e) => {\n        e.preventDefault();\n        if (user?.username) {\n            stopSearching();\n            updateInGameStatus(false);\n        }\n        if (route === 'game') {\n            socket.emit('send exit game', friendSocket);\n        }\n        e.returnValue = '';\n    })\n\n    document.onkeydown = (e) => {\n        const loginBtn = document.querySelector('.loginBtn');\n        const registerBtn = document.querySelector('.registerBtn');\n        const logUsername = document.querySelector('.login > .username > input');\n        const registerUsername = document.querySelector('.register > .username > input');\n        const logPassword = document.querySelector('.login > .password > input');\n        const registerPassword = document.querySelector('.register > .password > input');\n        const friendRequestBtn = document.querySelector('.friendRequestBtn');\n\n        if ((e.key === 'Enter') && (route === 'login' || route === 'register')) {\n            e.preventDefault();\n            if ((logUsername?.value?.length && logPassword?.value?.length) || (registerUsername?.value?.length && registerPassword?.value?.length)) {\n                audio.buttonClick.play();\n                route === 'login'\n                ? loginBtn.click()\n                : registerBtn.click()\n            }\n        } else if ((e.key === 'Enter') && (route === 'loggedIn')) {\n            e.preventDefault();\n            audio.buttonClick.play();\n            friendRequestBtn.click();\n        }\n    };\n\n    return (\n    <>\n        {\n        !deviceInPortrait && isMobile\n        ? <div className='pleaseRotate'><h1>Please rotate your device</h1></div>\n        : null\n        }\n        {\n        route === 'login' || route === 'register'\n        ?\n        <div className={`logRegPage ${isMobile ? 'mobile' : null}`}>\n            <Navigation socket={socket} onRouteChange={onRouteChange} />\n            {\n                !isMobile \n                ? <FriendsHome onRouteChange={onRouteChange}/>\n                : null\n            }\n            <div className='homeText'>\n                <h1>Battleship</h1>\n            </div>\n            <FindMatch socket={socket} />\n            <div className='logReg'>\n                {\n                    route === 'login'\n                    ? <Login onRouteChange={onRouteChange}/>\n                    : <Register onRouteChange={onRouteChange}/>\n                }\n            </div>\n            <Footer />\n        </div>\n        :\n        <>\n            {\n            route === 'loggedIn' || route === 'leaderboard'\n            ?\n                user?.username?.length\n                ?\n                <>\n                    <div className={`homePageLogged ${route === 'leaderboard' ? 'hide' : null} ${isMobile ? 'mobile' : null}`}>\n                        <Navigation socket={socket} onRouteChange={onRouteChange} />\n                        <Friends socket={socket} />\n                        <div className={`matchAndBoard ${showFriendsMobile ? 'hide' : null}`}>\n                            <FindMatch socket={socket} />\n                            <HomeBoard />\n                        </div>\n                        <Footer />\n                    </div>\n                    <div className={`leaderboard ${route === 'loggedIn' ? 'hide' : null}`}>\n                        <Leaderboard onRouteChange={onRouteChange} socket={socket} />\n                        <Footer />\n                    </div>\n                </>\n                :\n                <div className={`leaderboard ${isMobile ? 'mobile' : null}`}>\n                    <Leaderboard onRouteChange={onRouteChange} socket={socket} />\n                    <Footer />\n                </div>\n            : \n            <div className={`gamePage ${isMobile ? 'mobile' : 'desktop'}`}>\n                <Game socket={socket} onRouteChange={onRouteChange} />\n            </div>\n            }\n        </>\n        }       \n    </>\n    );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import 'react-app-polyfill/ie11';\nimport 'react-app-polyfill/ie9';\nimport 'react-app-polyfill/stable';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { StoreProvider, createStore } from 'easy-peasy';\nimport model from './model';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nconst store = createStore(model);\n\nReactDOM.render(\n  <StoreProvider store={store}>\n        <App />\n    </StoreProvider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}