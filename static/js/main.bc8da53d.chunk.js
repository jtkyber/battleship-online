(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{198:function(e,t,n){},199:function(e,t,n){},439:function(e,t,n){},441:function(e,t,n){},445:function(e,t,n){},446:function(e,t,n){},447:function(e,t,n){},448:function(e,t,n){},449:function(e,t,n){},450:function(e,t,n){},451:function(e,t,n){},452:function(e,t,n){},453:function(e,t,n){"use strict";n.r(t);n(128),n(213),n(254);var r,s,a=n(1),c=n(100),o=n.n(c),i=n(3),u={stored:Object(i.d)({soundOn:!0,musicOn:!0,isMobile:!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isIOS:!!/iPhone|iPad|iPod/i.test(navigator.userAgent),showGameInstructions:!0},{storage:"localStorage"}),route:"login",user:null,opponentName:"",unsortedFriends:[],findMatchInterval:0,checkOppStatusInterval:0,updatLastOnlineInterval:0,getOnlineFriendsInterval:0,search:!1,friendRequests:[],userName:"",password:"",topFive:[],allFriends:[],friendFilter:"",friendSearch:"",friendsOnline:[],gameRoute:"placeShips",playerIsReady:!1,yourTurn:!1,chatText:"",inviteSent:!1,inviteReceived:!1,playerTurnText:"",showFriendsMobile:!1,showChatMobile:!1,audioStarted:!1,shipIsSelected:!1,deviceInPortrait:!0,opponentIsReady:!1,firstGameInstructionLoad:!0,gameTimer:90,gameCountdownInterval:0,skippedTurns:0,playingWithAI:!1,aiShipLayout:{},allSquareIDs:[],aiTurn:!1,aiShotMatchedToUserShot:"",channel:"",pusher:null,setRoute:Object(i.b)((function(e,t){e.route=t})),setUser:Object(i.b)((function(e,t){e.user=t})),setOpponentName:Object(i.b)((function(e,t){e.opponentName=t})),setUnsortedFriends:Object(i.b)((function(e,t){e.unsortedFriends=t})),setFindMatchInterval:Object(i.b)((function(e,t){e.findMatchInterval=t})),setCheckOppStatusInterval:Object(i.b)((function(e,t){e.checkOppStatusInterval=t})),setUpdatLastOnlineInterval:Object(i.b)((function(e,t){e.updatLastOnlineInterval=t})),setGetOnlineFriendsInterval:Object(i.b)((function(e,t){e.getOnlineFriendsInterval=t})),setSearch:Object(i.b)((function(e,t){e.search=t})),setFriendRequests:Object(i.b)((function(e,t){e.friendRequests=t})),setUserName:Object(i.b)((function(e,t){e.userName=t})),setPassword:Object(i.b)((function(e,t){e.password=t})),setTopFive:Object(i.b)((function(e,t){e.topFive=t})),setAllFriends:Object(i.b)((function(e,t){e.allFriends=t})),setFriendFilter:Object(i.b)((function(e,t){e.friendFilter=t})),setFriendSearch:Object(i.b)((function(e,t){e.friendSearch=t})),setFriendsOnline:Object(i.b)((function(e,t){e.friendsOnline=t})),setGameRoute:Object(i.b)((function(e,t){e.gameRoute=t})),setPlayerIsReady:Object(i.b)((function(e,t){e.playerIsReady=t})),setYourTurn:Object(i.b)((function(e,t){e.yourTurn=t})),setChatText:Object(i.b)((function(e,t){e.chatText=t})),setInviteSent:Object(i.b)((function(e,t){e.inviteSent=t})),setInviteReceived:Object(i.b)((function(e,t){e.inviteReceived=t})),setPlayerTurnText:Object(i.b)((function(e,t){e.playerTurnText=t})),setSoundOn:Object(i.b)((function(e){e.stored.soundOn=!e.stored.soundOn})),setMusicOn:Object(i.b)((function(e){e.stored.musicOn=!e.stored.musicOn})),setIsMobile:Object(i.b)((function(e,t){e.stored.isMobile=t})),setShowFriendsMobile:Object(i.b)((function(e,t){e.showFriendsMobile=t})),setShowChatMobile:Object(i.b)((function(e,t){e.showChatMobile=t})),setAudioStarted:Object(i.b)((function(e){e.audioStarted=!0})),setShipIsSelected:Object(i.b)((function(e,t){e.shipIsSelected=t})),setShowGameInstructions:Object(i.b)((function(e,t){e.stored.showGameInstructions=t})),setDeviceInPortrait:Object(i.b)((function(e,t){e.deviceInPortrait=t})),setOpponentIsReady:Object(i.b)((function(e,t){e.opponentIsReady=t})),setFirstGameInstructionLoad:Object(i.b)((function(e,t){e.firstGameInstructionLoad=t})),setGameTimer:Object(i.b)((function(e,t){e.gameTimer=t})),setGameCountdownInterval:Object(i.b)((function(e,t){e.gameCountdownInterval=t})),setSkippedTurns:Object(i.b)((function(e,t){e.skippedTurns=t})),setPlayigWithAI:Object(i.b)((function(e,t){e.playingWithAI=t})),setAiShipLayout:Object(i.b)((function(e,t){e.aiShipLayout=t})),setAllSquareIDs:Object(i.b)((function(e,t){e.allSquareIDs=t})),setAIturn:Object(i.b)((function(e,t){e.aiTurn=t})),setAIShotMatchedToUserShot:Object(i.b)((function(e,t){e.aiShotMatchedToUserShot=t})),setChannel:Object(i.b)((function(e,t){e.channel=t})),setPusher:Object(i.b)((function(e,t){e.pusher=t}))},l=(n(439),n(4)),d=n.n(l),h=n(7),p=n(18),m=n(62),f=(n(99),n(0)),b=function(e){for(var t=e.onSquareClicked,n=Object(i.f)((function(e){return{gameRoute:e.gameRoute,route:e.route}})).gameRoute,r=[],s=1;s<11;s++)for(var a=0;a<10;a++)r.push({row:String.fromCharCode(97+a),col:s,colStart:s,rowStart:a+1});var c=function(e){var r=e.target.parentElement.parentElement.parentElement;"gameInProgress"===n&&r.classList.contains("opponentBoard")&&t(e)};return r.map((function(e){return Object(f.jsx)("div",{onClick:c,style:{gridArea:e.row+e.col},className:"singleSquare "+e.row+" "+e.row+e.col,id:e.colStart+"-"+e.rowStart},e.row+e.col)}))},v=n(24),j=n.p+"static/media/ambient-waves.b96c967b.mp3",g=n.p+"static/media/lobby-theme.a9efad87.mp3",O=n.p+"static/media/ship-placement-theme.58d77477.mp3",x=n.p+"static/media/game-theme.07202b2d.mp3",y=n.p+"static/media/button-click.90b21783.mp3",A=n.p+"static/media/hover-sound.d0a3b451.mp3",w=n.p+"static/media/hit-sound.f966784e.mp3",I=n.p+"static/media/miss-sound.1dd4ce99.mp3",S=n.p+"static/media/ship-sunk.48a88457.mp3",k=n.p+"static/media/notification.00f0a2bd.mp3",N=n.p+"static/media/pick-up-ship.86313e09.mp3",C=n.p+"static/media/drop-ship.adae2f7b.mp3",T=n.p+"static/media/rotate-ship.410a2faf.mp3",E=n.p+"static/media/missile-lock.271bad3e.mp3",R=n.p+"static/media/missile-launch.1ef34a89.mp3",F=n.p+"static/media/incoming-missile.df9be7a9.mp3",M={ambientWaves:new v.Howl({src:j,loop:!0,volume:.2}),lobbyTheme:new v.Howl({src:g,loop:!0,volume:.5}),shipPlacementTheme:new v.Howl({src:O,loop:!0,volume:.5}),gameTheme:new v.Howl({src:x,loop:!0,volume:.3}),buttonClick:new v.Howl({src:y,volume:.6}),hoverSound:new v.Howl({src:A,volume:.6,mute:function(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}}),hitSound:new v.Howl({src:w,volume:.7}),missSound:new v.Howl({src:I,volume:.4}),shipSunkSound:new v.Howl({src:S,volume:.9}),notificationSound:new v.Howl({src:k,volume:.9}),pickUpShip:new v.Howl({src:N,volume:.9}),dropShip:new v.Howl({src:C,volume:.9}),rotateShip:new v.Howl({src:T,volume:.9}),missileLock:new v.Howl({src:E,volume:.9}),missileLaunch:new v.Howl({src:R,volume:1}),incomingMissile:new v.Howl({src:F,volume:1})},L=n(32),U=n.n(L),q=(n(441),!1),P=!1,G="hor",_="",B="",H=!1,Y=!1,D=function(){var e=Object(i.f)((function(e){return{gameRoute:e.gameRoute,isMobile:e.stored.isMobile,showGameInstructions:e.stored.showGameInstructions,gameTimer:e.gameTimer}})),t=e.gameRoute,n=e.isMobile,c=e.showGameInstructions,o=e.gameTimer;Object(a.useEffect)((function(){o<=0&&l()}),[o]);var u=function(e){if(!H&&"placeShips"===t){M.pickUpShip.play();var n=document.querySelector(".userBoard");H=!0,_=e.target.parentElement,n.style.cursor="pointer",_.style.pointerEvents="none",_.style.border="2px solid rgba(0, 250, 0, 0.5)",parseInt(e.target.parentElement.offsetWidth)>parseInt(e.target.parentElement.offsetHeight)?G="hor":parseInt(e.target.parentElement.offsetHeight)>parseInt(e.target.parentElement.offsetWidth)&&(G="vert"),_.classList.contains("carrier")?B="carrier":_.classList.contains("battleship")?B="battleship":_.classList.contains("cruiser")?B="cruiser":_.classList.contains("submarine")?B="submarine":_.classList.contains("destroyer")&&(B="destroyer")}},l=function(){H&&(_.remove(),H=!1)},d=function(e,t){var n=U()(e).offset(),r=U()(e).outerHeight(!0),s=U()(e).outerWidth(!0),a=n.top+r,c=n.left+s,o=U()(t).offset(),i=U()(t).outerHeight(!0),u=U()(t).outerWidth(!0),l=o.top+i,d=o.left+u;return!(a<=o.top+2||n.top>=l-2||c<=o.left+2||n.left>=d-2)};window.onclick=function(e){var t,r,s;H||n||!(null===(t=e.target)||void 0===t||null===(r=t.parentElement)||void 0===r||null===(s=r.classList)||void 0===s?void 0:s.contains("ship"))?!n&&H&&e.target.classList.contains("singleSquare")&&!1===P&&h()&&(M.dropShip.play(),_.style.pointerEvents="auto",document.querySelector(".userBoard").style.cursor="default",_.style.border=null,H=!1):u(e)};window.ontouchend=function(e){c||(H&&!q&&h()&&!function(e,t){var n=_.getBoundingClientRect().left,r=_.getBoundingClientRect().right,s=_.getBoundingClientRect().top,a=_.getBoundingClientRect().bottom;return e>n&&e<r&&t>s&&t<a}(e.changedTouches[0].clientX,e.changedTouches[0].clientY)?(M.dropShip.play(),_.style.pointerEvents="auto",document.querySelector(".userBoard").style.cursor="default",_.style.border=null,H=!1):H&&!q?("hor"===G?(G="vert",b(e)):"vert"===G&&(G="hor",b(e)),M.rotateShip.play(),Y=!0,P=!0):H&&q?n&&H&&!1===P&&h()&&(M.dropShip.play(),_.style.pointerEvents="auto",document.querySelector(".userBoard").style.cursor="default",_.style.border=null,H=!1):!H&&e.target.parentElement.classList.contains("ship")&&u(e),q=!1)};var h=function(){var e,t=document.querySelectorAll(".ship"),n=Object(p.a)(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(!r.classList.contains(B)&&d(_,r))return!1}}catch(s){n.e(s)}finally{n.f()}return!0};window.oncontextmenu=function(e){return!n&&H&&(M.rotateShip.play(),"hor"===G?G="vert":"vert"===G&&(G="hor"),b(e),Y=!0,P=!0),!1},window.onkeydown=function(e){"Enter"===e.code&&e.preventDefault(),"Space"===e.code&&void 0!==_.style&&H&&(M.rotateShip.play(),"hor"===G?G="vert":"vert"===G&&(G="hor"),b(e),Y=!0,P=!0)};var m=function(e,t){var n=document.querySelectorAll(".userBoard .singleSquare"),r=null;return n.forEach((function(n){var s=n.getBoundingClientRect().left,a=n.getBoundingClientRect().right,c=n.getBoundingClientRect().top,o=n.getBoundingClientRect().bottom;e>s&&e<a&&t>c&&t<o&&(r=n)})),r},b=function(e){var t,n,a,c;c="touchmove"===e.type?m(e.touches[0].clientX,e.touches[0].clientY):"touchend"===e.type?m(e.changedTouches[0].clientX,e.changedTouches[0].clientY):"Space"===e.code||"contextmenu"===e.type?m(r,s):e.target,P=!1,_.style.transform=null;var o=document.querySelector(".userBoard"),i=document.querySelector(".".concat(B,"Icon")),u=null===(t=c)||void 0===t?void 0:t.id,l=null===u||void 0===u?void 0:u.substring(0,u.indexOf("-")),d=null===u||void 0===u?void 0:u.substring(u.indexOf("-")+1,null===u||void 0===u?void 0:u.length);(o.contains(e.target)||o.contains(c))&&(null===(n=c)||void 0===n||null===(a=n.classList)||void 0===a?void 0:a.contains("singleSquare"))&&!0===H&&("hor"===G?(i.classList.remove("rotate-".concat(B)),l<11-parseInt(_.id)+1?_.style.gridColumn="".concat(l," / ").concat(parseInt(l)+parseInt(_.id)):l>=11-parseInt(_.id)+1&&!0===Y?_.style.gridColumn="11 / ".concat(11-parseInt(_.id)):Y=!1,_.style.gridRow="".concat(d," / ").concat(parseInt(d)+1)):"vert"===G&&(i.classList.add("rotate-".concat(B)),d>parseInt(_.id)-1?_.style.gridRow="".concat(parseInt(d)+1," / ").concat(parseInt(d)-parseInt(_.id)+1):d<=parseInt(_.id)-1&&!0===Y?_.style.gridRow="".concat(parseInt(_.id)+1," / 1"):Y=!1,_.style.gridColumn="".concat(l," / ").concat(parseInt(l)+1)))};return window.onmouseover=function(e){r=e.clientX,s=e.clientY,H&&!n&&b(e)},window.ontouchmove=function(e){q=!0,H&&n&&b(e)},Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{id:"5",className:"ship carrier",children:Object(f.jsx)("div",{className:"carrierIcon"})}),Object(f.jsx)("div",{id:"4",className:"ship battleship",children:Object(f.jsx)("div",{className:"battleshipIcon"})}),Object(f.jsx)("div",{id:"3",className:"ship cruiser",children:Object(f.jsx)("div",{className:"cruiserIcon"})}),Object(f.jsx)("div",{id:"3",className:"ship submarine",children:Object(f.jsx)("div",{className:"submarineIcon"})}),Object(f.jsx)("div",{id:"2",className:"ship destroyer",children:Object(f.jsx)("div",{className:"destroyerIcon"})})]})},J=n.p+"static/media/hit.3c86e79f.gif",Q=[],W="",V="",Z=null,X=function(){var e=Object(i.f)((function(e){return{playingWithAI:e.playingWithAI,allSquareIDs:e.allSquareIDs,aiTurn:e.aiTurn,channel:e.channel,opponentName:e.opponentName}})),t=e.playingWithAI,n=e.allSquareIDs,r=e.aiTurn,s=e.channel,c=e.opponentName,o=Object(i.e)((function(e){return{setYourTurn:e.setYourTurn,setAllSquareIDs:e.setAllSquareIDs,setAIturn:e.setAIturn}})),u=o.setYourTurn,l=o.setAllSquareIDs,m=o.setAIturn,v="";Object(a.useEffect)((function(){var e,t=document.querySelectorAll(".opponentBoard .singleSquare"),n=[],r=Object(p.a)(t);try{for(r.s();!(e=r.n()).done;){var a=e.value;n.push(a.id)}}catch(c){r.e(c)}finally{r.f()}return l(n),s.bind("receive-shot",(function(e){if("oppOutOfTime"===e.shot)u(!0);else{var t=document.getElementById(e.shot),n=1e3*M.incomingMissile.duration()-100;M.incomingMissile.play(),setTimeout((function(){S(t),u(!0)}),n)}return e})),function(){s.unbind("receive-shot"),m(!1),l([]),Q=[],W="",V="",Z=null}}),[]);var j=function(e){for(var t,n=e.length;0!==n;){t=Math.floor(Math.random()*n),n--;var r=[e[t],e[n]];e[n]=r[0],e[t]=r[1]}return e},g=function(e){return e.split("-")[0]},O=function(e){return e.split("-")[1]},x=function(e){return[Z&&"hor"!==Z?null:"".concat(parseInt(g(e))-1,"-").concat(parseInt(O(e))),Z&&"hor"!==Z?null:"".concat(parseInt(g(e))+1,"-").concat(parseInt(O(e))),Z&&"vert"!==Z?null:"".concat(parseInt(g(e)),"-").concat(parseInt(O(e))-1),Z&&"vert"!==Z?null:"".concat(parseInt(g(e)),"-").concat(parseInt(O(e))+1)]},y=function(){var e="";Z=V!==W?g(V)!==g(W)?"hor":"vert":null;var t=0,r=x(V);j(r);var s,a=Object(p.a)(r);try{for(a.s();!(s=a.n()).done;){var c,o=s.value,i=Object(p.a)(n);try{for(i.s();!(c=i.n()).done;){c.value===o&&(t+=1,e=Z?"AI: Choosing ".concat("hor"===Z?"horizontal":"vertical"," neighbor to last hit --\x3e "):"AI: Choosing random available neighbor to last hit --\x3e ")}}catch(I){i.e(I)}finally{i.f()}}}catch(I){a.e(I)}finally{a.f()}if(t<=0){V=W,r=x(W);var u,l=!1,d=Object(p.a)(r);try{for(d.s();!(u=d.n()).done;){var h,m=u.value,f=Object(p.a)(n);try{for(f.s();!(h=f.n()).done;){h.value===m&&(l=!0,e="AI: Going back to first hit with another ".concat("hor"===Z?"horizontal":"vertical"," guess --\x3e "))}}catch(I){f.e(I)}finally{f.f()}}}catch(I){d.e(I)}finally{d.f()}l||(Z=null,e="AI: Going back to first hit and choosing random available neighbor --\x3e ",r=x(W)),j(r)}if(r){var b,v=Object(p.a)(r);try{for(v.s();!(b=v.n()).done;){var O,y=b.value,A=Object(p.a)(n);try{for(A.s();!(O=A.n()).done;){if(O.value===y){var w=function(){var t=y;return n.splice(n.indexOf(t),1),setTimeout((function(){console.log(e,t),console.log("__________________________________________________________________________________")}),1e3),{v:t}}();if("object"===typeof w)return w.v}}}catch(I){A.e(I)}finally{A.f()}}}catch(I){v.e(I)}finally{v.f()}}else console.log(Error,"Could not find possible square")},A=function(){var e,t=document.querySelectorAll(".userBoard .singleSquare"),n=Object(p.a)(t);try{var r=function(){var t,n=e.value;if(null===n||void 0===n||null===(t=n.childNodes[0])||void 0===t?void 0:t.classList.contains("hitMarkerGif"))return setTimeout((function(){console.log("AI: Going back to unfinished ship -- > ",n.id)}),500),{v:n.id}};for(n.s();!(e=n.n()).done;){var s=r();if("object"===typeof s)return s.v}}catch(a){n.e(a)}finally{n.f()}return!1};Object(a.useEffect)((function(){var e;r&&(V?e=document.getElementById(y()):A()?(W=A(),V=A(),e=document.getElementById(y())):e=document.getElementById(function(){var e=Math.round(Math.random()*(n.length-1-0)+0),t=n[e];return n.splice(e,1),setTimeout((function(){console.log("AI: Choosing random available square --\x3e ",t),console.log("__________________________________________________________________________________")}),1e3),t}()),setTimeout((function(){var t=1e3*M.incomingMissile.duration();M.incomingMissile.play(),setTimeout((function(){S(e),u(!0)}),t)}),1300),m(!1))}),[r]);var w=function(e,t){var n=U()(e).offset(),r=U()(e).outerHeight(!0),s=U()(e).outerWidth(!0),a=n.top+r,c=n.left+s,o=U()(t).offset(),i=U()(t).outerHeight(!0),u=U()(t).outerWidth(!0),l=o.top+i,d=o.left+u;return!(a<=o.top+2||n.top>=l-2||c<=o.left+2||n.left>=d-2)},I=function(e){var t,n=0,r=Object(p.a)(Q);try{for(r.s();!(t=r.n()).done;){t.value===e&&(n+=1)}}catch(s){r.e(s)}finally{r.f()}return n},S=function(){var e=Object(h.a)(d.a.mark((function e(n){var r,s,a,o,i,u,l,h,m,f,b,j,g,O,x;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k(n)){e.next=34;break}if((r=document.createElement("div")).classList.add("hitMarkerBackgroundFlash"),(s=document.createElement("img")).src=J,s.classList.add("hitMarkerGif"),(a=document.createElement("div")).classList.add("shrapN"),(o=document.createElement("div")).classList.add("shrapNE"),(i=document.createElement("div")).classList.add("shrapE"),(u=document.createElement("div")).classList.add("shrapSE"),(l=document.createElement("div")).classList.add("shrapS"),(h=document.createElement("div")).classList.add("shrapSW"),(m=document.createElement("div")).classList.add("shrapW"),(f=document.createElement("div")).classList.add("shrapNW"),n.append(s,r,a,o,i,u,l,h,m,f),setTimeout((function(){r.remove(),a.remove(),o.remove(),i.remove(),u.remove(),l.remove(),h.remove(),m.remove(),f.remove()}),1100),Q.push(v),V=n.id,W||(W=n.id),n.classList.add("_".concat(v,"_userboard")),I(v)===parseInt(document.querySelector(".".concat(v)).id)){b=document.querySelector(".".concat(v,"Icon")),j=document.querySelectorAll(".singleSquare"),M.shipSunkSound.play(),W="",V="",g=Object(p.a)(j);try{for(g.s();!(O=g.n()).done;)(x=O.value).classList.contains("_".concat(v,"_userboard"))&&x.querySelector(".hitMarkerGif").remove()}catch(d){g.e(d)}finally{g.f()}b.classList.add("shipSunkUser")}else M.hitSound.play();if(t){e.next=32;break}return e.next=32,fetch("".concat("http://localhost:4000/pusher","/sendResultToOpponentBoard?channelName=").concat(c,"&shotSquare=").concat(n.id,"&shot=hit&shipHit=").concat(v));case 32:e.next=39;break;case 34:if(n.classList.add("missMarker"),M.missSound.play(),t){e.next=39;break}return e.next=39,fetch("".concat("http://localhost:4000/pusher","/sendResultToOpponentBoard?channelName=").concat(c,"&shotSquare=").concat(n.id,"&shot=miss&shipHit=").concat(v));case 39:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(e){var t,n=document.querySelectorAll(".ship"),r=Object(p.a)(n);try{for(r.s();!(t=r.n()).done;){var s=t.value;if(w(e,s))return v=s.classList[1],!0}}catch(a){r.e(a)}finally{r.f()}return!1};return Object(f.jsxs)("div",{className:"board userBoard",children:[Object(f.jsxs)("div",{className:"rows",children:[Object(f.jsx)("h3",{children:"A"}),Object(f.jsx)("h3",{children:"B"}),Object(f.jsx)("h3",{children:"C"}),Object(f.jsx)("h3",{children:"D"}),Object(f.jsx)("h3",{children:"E"}),Object(f.jsx)("h3",{children:"F"}),Object(f.jsx)("h3",{children:"G"}),Object(f.jsx)("h3",{children:"H"}),Object(f.jsx)("h3",{children:"I"}),Object(f.jsx)("h3",{children:"J"})]}),Object(f.jsxs)("div",{className:"cols",children:[Object(f.jsx)("h3",{children:"1"}),Object(f.jsx)("h3",{children:"2"}),Object(f.jsx)("h3",{children:"3"}),Object(f.jsx)("h3",{children:"4"}),Object(f.jsx)("h3",{children:"5"}),Object(f.jsx)("h3",{children:"6"}),Object(f.jsx)("h3",{children:"7"}),Object(f.jsx)("h3",{children:"8"}),Object(f.jsx)("h3",{children:"9"}),Object(f.jsx)("h3",{children:"10"})]}),Object(f.jsx)("div",{className:"grid",children:Object(f.jsxs)("div",{className:"allSqaures",children:[Object(f.jsx)(b,{}),Object(f.jsx)(D,{})]})})]})},K=[],z=0,$=function(){var e=Object(i.f)((function(e){return{yourTurn:e.yourTurn,playingWithAI:e.playingWithAI,aiShipLayout:e.aiShipLayout,user:e.user,channel:e.channel,opponentName:e.opponentName}})),t=e.yourTurn,n=e.playingWithAI,r=e.aiShipLayout,s=e.user,c=e.channel,o=e.opponentName,u=Object(i.e)((function(e){return{setYourTurn:e.setYourTurn,setSkippedTurns:e.setSkippedTurns,setAiShipLayout:e.setAiShipLayout,setAIturn:e.setAIturn,setRoute:e.setRoute,setUser:e.setUser}})),l=u.setYourTurn,v=u.setSkippedTurns,j=u.setAiShipLayout,g=u.setAIturn,O=u.setRoute,x=u.setUser,y={destroyer:[],submarine:[],cruiser:[],battleship:[],carrier:[]},A=function(e){var t,n=0,r=Object(p.a)(K);try{for(r.s();!(t=r.n()).done;){t.value===e&&(n+=1)}}catch(s){r.e(s)}finally{r.f()}return n};Object(a.useEffect)((function(){return n&&E(),c.bind("show-result-on-opponent-board",(function(e){var t=document.querySelector(".opponentBoard [id='".concat(e.shotSquare,"']"));if(document.querySelector(".preResultDiv").remove(),"hit"===e.result&&void 0!==t.classList)if(t.classList.add("hitMarker"),K.push(e.shipHit),t.classList.add("_".concat(e.shipHit)),A(e.shipHit)===parseInt(document.querySelector(".".concat(e.shipHit)).id)){var n=document.querySelectorAll(".singleSquare");M.shipSunkSound.play();var r,s=Object(p.a)(n);try{for(s.s();!(r=s.n()).done;){var a=r.value;a.classList.contains("_".concat(e.shipHit))&&a.classList.add("shipSunk")}}catch(c){s.e(c)}finally{s.f()}}else M.hitSound.play();else"miss"===e.result&&void 0!==t.classList&&(t.classList.add("missMarker"),M.missSound.play());return e})),function(){c.unbind("show-result-on-opponent-board"),j({}),g(!1),v(0),z=0,K=[]}}),[]);var w=function(e){for(var t in y){var n,r=Object(p.a)(y[t]);try{for(r.s();!(n=r.n()).done;){if(n.value===e)return!1}}catch(s){r.e(s)}finally{r.f()}}return!0},I=function(){for(var e,t=0;t<100;)if(t++,e="".concat(Math.round(9*Math.random()+1),"-").concat(Math.round(9*Math.random()+1)),w(e))return e},S=function(e){for(var t,n=e.length;0!==n;){t=Math.floor(Math.random()*n),n--;var r=[e[t],e[n]];e[n]=r[0],e[t]=r[1]}return e},k=function(e){return e.split("-")[0]},N=function(e){return e.split("-")[1]},C=function(e,t,n){var r=y[n][0],s=y[n][e-1];if(r&&s)return Math.min(parseInt(r.split("-")[t]),parseInt(s.split("-")[t]))===parseInt(r.split("-")[t])?{lowest:r,highest:s}:{lowest:s,highest:r}},T=function(e,t){for(;y[t].length!==e;){y[t]=[];for(var n=function(e){if(0===e)y[t][0]=I();else if(1===e){var n=y[t][0],r=[k(n)>1?"".concat(parseInt(k(n))-1,"-").concat(parseInt(N(n))):null,k(n)<10?"".concat(parseInt(k(n))+1,"-").concat(parseInt(N(n))):null,N(n)>1?"".concat(parseInt(k(n)),"-").concat(parseInt(N(n))-1):null,N(n)<10?"".concat(parseInt(k(n)),"-").concat(parseInt(N(n))+1):null];S(r),r.every((function(e){return!e||!w(e)||(y[t][1]=e,!1)}))}else{var s=y[t][0];if(k(s)!==k(y[t][1])){var a,c,o=null===(a=C(e,0,t))||void 0===a?void 0:a.lowest,i=null===(c=C(e,0,t))||void 0===c?void 0:c.highest,u=[o&&parseInt(k(o))>1?"".concat(parseInt(k(o))-1,"-").concat(N(o)):null,i&&parseInt(k(i))<10?"".concat(parseInt(k(i))+1,"-").concat(N(i)):null];S(u),u.every((function(n){return!(n&&k(n)>0&&k(n)<11&&N(n)>0&&N(n)<11&&w(n))||(y[t][e]=n,!1)}))}else{var l,d,h=null===(l=C(e,1,t))||void 0===l?void 0:l.lowest,p=null===(d=C(e,1,t))||void 0===d?void 0:d.highest,m=[h&&parseInt(N(h))>1?"".concat(k(h),"-").concat(parseInt(N(h))-1):null,p&&parseInt(N(h))<10?"".concat(k(p),"-").concat(parseInt(N(p))+1):null];S(m),m.every((function(n){return!(n&&k(n)>0&&k(n)<11&&N(n)>0&&N(n)<11&&w(n))||(y[t][e]=n,!1)}))}}},r=0;r<e;r++)n(r)}},E=function(){T(2,"destroyer"),T(3,"submarine"),T(3,"cruiser"),T(4,"battleship"),T(5,"carrier"),j(y)},R=function(){var e=Object(h.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:4000","/updateScore"),{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s.username,scoreIncrement:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:if(r=e.sent){e.next=11;break}throw new Error("Could not increment score");case 11:x(Object(m.a)(Object(m.a)({},s),{},{score:r}));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),F=function(e){document.querySelector(".preResultDiv").remove();var t,n=e.id,a=!1,c="";for(var o in r){var i,u=Object(p.a)(r[o]);try{for(u.s();!(i=u.n()).done;){i.value===n&&(a=!0,c=o)}}catch(f){u.e(f)}finally{u.f()}}if(a&&void 0!==e.classList){if(K.push(c),e.classList.add("hitMarker"),e.classList.add("_".concat(c)),A(c)===parseInt(document.querySelector(".".concat(c)).id)){var l=document.querySelectorAll(".singleSquare");M.shipSunkSound.play(),z+=1;var d,h=Object(p.a)(l);try{for(h.s();!(d=h.n()).done;){var m=d.value;m.classList.contains("_".concat(c))&&m.classList.add("shipSunk")}}catch(f){h.e(f)}finally{h.f()}}else M.hitSound.play();if(z>=5)return t=5,(null===s||void 0===s?void 0:s.username)&&"guest"!==(null===s||void 0===s?void 0:s.hash)&&R(t),void setTimeout((function(){window.alert("You Won!!!"),"guest"!==(null===s||void 0===s?void 0:s.hash)&&(null===s||void 0===s?void 0:s.username)?O("loggedIn"):O("login")}),300)}else a||void 0===e.classList||(e.classList.add("missMarker"),M.missSound.play());g(!0)},L=function(){var e=Object(h.a)(d.a.mark((function e(r){var s,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||r.target.classList.contains("hitMarker")||r.target.classList.contains("missMarker")){e.next=15;break}if(v(0),l(!1),(s=document.createElement("div")).classList.add("preResultDiv"),r.target.appendChild(s),M.missileLaunch.play(),!n){e.next=13;break}a=r.target,c=1e3*M.missileLaunch.duration()-100,setTimeout((function(){F(a)}),c),e.next=15;break;case 13:return e.next=15,fetch("".concat("http://localhost:4000/pusher","/sendShotToOpponent?channelName=").concat(o,"&target=").concat(r.target.id));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"board opponentBoard",children:[Object(f.jsxs)("div",{className:"rows",children:[Object(f.jsx)("h3",{children:"A"}),Object(f.jsx)("h3",{children:"B"}),Object(f.jsx)("h3",{children:"C"}),Object(f.jsx)("h3",{children:"D"}),Object(f.jsx)("h3",{children:"E"}),Object(f.jsx)("h3",{children:"F"}),Object(f.jsx)("h3",{children:"G"}),Object(f.jsx)("h3",{children:"H"}),Object(f.jsx)("h3",{children:"I"}),Object(f.jsx)("h3",{children:"J"})]}),Object(f.jsxs)("div",{className:"cols",children:[Object(f.jsx)("h3",{children:"1"}),Object(f.jsx)("h3",{children:"2"}),Object(f.jsx)("h3",{children:"3"}),Object(f.jsx)("h3",{children:"4"}),Object(f.jsx)("h3",{children:"5"}),Object(f.jsx)("h3",{children:"6"}),Object(f.jsx)("h3",{children:"7"}),Object(f.jsx)("h3",{children:"8"}),Object(f.jsx)("h3",{children:"9"}),Object(f.jsx)("h3",{children:"10"})]}),Object(f.jsx)("div",{className:"grid",children:Object(f.jsx)("div",{className:"allSqaures",children:Object(f.jsx)(b,{onSquareClicked:L})})})]})},ee=(n(198),n(458)),te=function(){var e=Object(i.f)((function(e){return{user:e.user,friendRequests:e.friendRequests,channel:e.channel}})),t=e.user,n=e.friendRequests,r=e.channel,s=Object(i.e)((function(e){return{setUnsortedFriends:e.setUnsortedFriends,setFriendRequests:e.setFriendRequests}})),c=s.setUnsortedFriends,o=s.setFriendRequests;Object(a.useEffect)((function(){return u(),function(){}}),[]),Object(a.useEffect)((function(){if(r)return r.bind("receive-friend-request",(function(e){return u(),e})),function(){r&&r.unbind("receive-friend-request")}}),[r]);var u=function(){var e=Object(h.a)(d.a.mark((function e(){var n,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.querySelector("nav"),e.prev=1,e.next=4,fetch("".concat("http://localhost:4000","/getFriendRequests?username=").concat(t.username));case 4:if((r=e.sent).ok){e.next=7;break}throw new Error("Could not get friend requests");case 7:return e.next=9,r.json();case 9:null!==(s=e.sent)&&""!==s?(n.style.setProperty("--notification-color","rgba(255,0,0,0.8)"),o(s.split(",")),M.notificationSound.play()):(n.style.setProperty("--notification-color","transparent"),o(null)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(h.a)(d.a.mark((function e(n){var r,s,a,c,o,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",e.prev=1,e.next=4,fetch("".concat("http://localhost:4000","/getFriendRequests?username=").concat(t.username));case 4:if((s=e.sent).ok){e.next=7;break}throw new Error("Could not get friend requests");case 7:return e.next=9,s.json();case 9:return null!==(a=e.sent)&&""!==a&&((c=a.split(",")).length<=1?r=null:(o=c.indexOf(n))>-1&&(c.splice(o,1),r=c.join(","))),e.next=13,fetch("".concat("http://localhost:4000","/updateFriendRequests"),{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({requestlist:r,username:t.username})});case 13:if((i=e.sent).ok){e.next=16;break}throw new Error("Could not update friend requests");case 16:return e.next=18,i.json();case 18:e.sent&&u(),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(1),console.log(e.t0);case 25:case"end":return e.stop()}}),e,null,[[1,22]])})));return function(t){return e.apply(this,arguments)}}(),m=function(e){l(e.target.id)},b=function(){var e=Object(h.a)(d.a.mark((function e(n){var r,s,a,o,i,u,l,h,m,f,b,v,j,g,O,x,y;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.querySelector(".addFriendInput").value="",r="",s=[],a="",e.prev=4,e.next=7,fetch("".concat("http://localhost:4000","/findFriend?username=").concat(n));case 7:if((o=e.sent).ok){e.next=10;break}throw new Error("User does not exist");case 10:return e.next=12,o.json();case 12:if((i=e.sent).username!==t.username){e.next=17;break}throw new Error("Cannot add self as friend");case 17:if(!i.username){e.next=88;break}if(l=[],!(null===i||void 0===i||null===(u=i.friends)||void 0===u?void 0:u.length)){e.next=23;break}if(!(l=i.friends.split(",")).includes(t.username)){e.next=23;break}throw new Error("You are already a friend of the user");case 23:return l.push(t.username),a=l.length>1?l.join(","):l[0],e.next=27,fetch("".concat("http://localhost:4000","/getFriends?username=").concat(t.username));case 27:if((h=e.sent).ok){e.next=30;break}throw new Error("Problem accessing friends list");case 30:return e.next=32,h.json();case 32:return(null===(m=e.sent)||void 0===m?void 0:m.length)&&m.forEach((function(e){if(s.push(e.username),e.username===n)throw new Error("User already your friend")})),s.push(n),r=s.join(","),e.next=38,fetch("".concat("http://localhost:4000","/addFriend"),{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t.username,friendlist:r})});case 38:if((f=e.sent).ok){e.next=41;break}throw new Error("Problem adding friend");case 41:return e.next=43,f.json();case 43:if(!e.sent){e.next=77;break}b=[],v=Object(p.a)(s),e.prev=47,v.s();case 49:if((j=v.n()).done){e.next=68;break}return g=j.value,e.prev=51,e.next=54,fetch("".concat("http://localhost:4000","/findFriend?username=").concat(g));case 54:if((O=e.sent).ok){e.next=57;break}throw new Error("User does not exist");case 57:return e.next=59,O.json();case 59:x=e.sent,b.push(x),e.next=66;break;case 63:e.prev=63,e.t0=e.catch(51),console.log(e.t0);case 66:e.next=49;break;case 68:e.next=73;break;case 70:e.prev=70,e.t1=e.catch(47),v.e(e.t1);case 73:return e.prev=73,v.f(),e.finish(73);case 76:c(b);case 77:return e.next=79,fetch("".concat("http://localhost:4000","/addSelfToFriend"),{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({friendlist:a,friendname:n})});case 79:if((y=e.sent).ok){e.next=82;break}throw new Error("Problem adding self to friendlist of friend");case 82:return e.next=84,y.json();case 84:if(!e.sent){e.next=88;break}return e.next=88,fetch("".concat("http://localhost:4000/pusher","/updateUserStatus?channelName=").concat(n));case 88:e.next=93;break;case 90:e.prev=90,e.t2=e.catch(4),console.log(e.t2);case 93:case"end":return e.stop()}}),e,null,[[4,90],[47,70,73,76],[51,63]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(h.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:4000","/findFriend?username=").concat(t.target.id));case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("User does not exist");case 6:return e.next=8,n.json();case 8:e.sent.username&&(l(t.target.id),b(t.target.id)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(ee.a,{className:"dropdown",children:[Object(f.jsx)(ee.a.Toggle,{variant:"success",className:"messageToggle",id:"dropdown-basic",children:Object(f.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAcRJREFUSEvN1TuvTVEUxfHf9YwQRCEeBQlCp1AQpRBfwSMkQqFCTyUhOgmNQoEgfAESiUKp1N3rTYLOM96EDFlHju3svc8+xeU0uzhzrv+ac8w15phJ+I1NAsMwkMRsxD5sxSK8wE2cwy18b7psG2QhrmEdXuEZPmIWlmABxrGpgAeymiBzS+IUHMUJ/Og7JbmHcIxfHVmKl4ModZBpeIOZWI0HDe1YjKfl/9n4Uo2tg+zGeWzA7SGGYxXu4kip7I+UQZDp+IBPmN8majkt5zxHNJxTdPsNGgTpTc8BnB6iil7ITlws2gTYCFmOR8j3SQdItMnhK/CwDbIS94rof4nYAE2bEx997g8LmYGvHSr5/yB5F3nFo1ayBhNN7cq0XcC2Yh3fOrQrDziWcxW7+t2hOsLL8LiY3+YOgF7oDWypTmYVcgZ7EN/6PAIkLX5b3Hl/L78KeYfXWD8CoJcSG8ol59VBDuJkcdVROXHquPOpOkgqi5NOrRAiZhZWdkh8LTHZLdexvRKbBfa+Sfi62+egyziLwziOvQVwpa3kts3YX3HMb0ffgZeqo1oHGxaS/MSuRYwwO/5OZVPWFtQF0taVfwv5CWkmWRrIFhWsAAAAAElFTkSuQmCC",alt:"Message Icon",className:"hasSound"})}),Object(f.jsx)(ee.a.Menu,{id:"dropdowns",children:null!==n?n.map((function(e){return Object(f.jsxs)("div",{className:"dropdownItem",children:[Object(f.jsxs)("div",{className:"text",children:["Friend request from ",Object(f.jsx)("h3",{className:"requesterName",children:e})]}),Object(f.jsxs)("div",{className:"acceptReject",children:[Object(f.jsx)("button",{onClick:v,id:e,className:"acceptInvite",children:"Accept"}),Object(f.jsx)("button",{onClick:m,id:e,className:"rejectInvite",children:"Reject"})]})]},e)})):null})]})})},ne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAANVJREFUSEvtldsNwjAMRU8lGIUxmAa2AqZhC8QoSEVGBEXByXVaQP0gUj9aP05ix7cD/WsEhp4w5RxN2PRTEG/DUfArVkEsoa3kl969b9VcUUh+IovJYck2G7IFzkXDDbQCbs9nXbsM6iQWp3qg7KGrqJIo+7IgavaaZY/0RAGkfTEQbybK3c8uVzn1OaBlC8tKmpNcRiZDDsBedDCXk1LLQuU6ArvKf8ITSU8wvT0+/JLztyAnq9CnIF65rAKTIdHG/yFvF0gN6u97sgEuUk77HSzv9Q6B6kcaQhzgbAAAAABJRU5ErkJggg==",re="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAMBJREFUSEvV1T0OQVEQxfEfiUSj0UioLISWaEXsxCIkOolKoxG1SkdiTXTIlfcSofDx3iVuP/97MufMTAFLDFHw2Tuih+1teYCdUPyMea0qYY3uPficQW3K2qDzV+ARxjEUP1gUzMva4zmq6CdBuH6SBzhwpqglsQ0pyw0cBM7QTNORl+K0xys00HoGHqD85vBMsP8Z+E2xQivqaD9T/Co4mnlR4rZAJdaARBnpAI22hL67j6OdpqzH9JAc092tgxdcNzF1tGRORAAAAABJRU5ErkJggg==",se="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAZFJREFUSEvt1T1I1lEUx/GPWUIYgTVEQ4saDYWDgjQJYXsEGSiCSDSWQhA4O2tDUFsQCAUZtLQVQZMYDaE4lCKCSEvREBSJFUfuo3/+/J8XX3hC6I73nnO+9/7Oy21Qh9VQB4adQq7iPkYxXesFa4U0YRx38R3HMIkx/KoGqwVyHK/RhRe4jsfoxwdcwrdKoGqQU/iIZtzGg0ywm3iIHziHtXKgSpA+PGUzbx2YLwgSwRfS/hCmikBFkEY8QyR5BZ34WkGOFrxDG17iCjay9nnIUcziQqqiO1ivllgcwQRuYQ7d+Fnyy0NC93sYxJMagudNBpJkI+mSm+d5yDIO48wuACWX1VTWreVe8htLOLsHyKeUn0PlIH+wuA+Q9qxKebn+KeQEnqMHIUPI+hbX8CUnbci1q5c8wjDeJECAYpzE/o39grxCb64aQ9qYaZf/Q/J9cvDkinF+vky3x78So720SqVaZB5DMr6Hwtl1EhdTL2Sdoy/e43Nm83T6BrbGRzoL25ls/1T7GfcwwrZd6wL5C/y5ZhoUNFmSAAAAAElFTkSuQmCC",ae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAVtJREFUSEvt1T8sJmEQx/HPK0cEDaFBNArRoHSVwhVqjUJCVBriGkTnrlZIXH3FUbjqoiJBJ3qVSCiuUVwiJP4kXHB5kn2TzWbfdRveVyI22eTZ7Mx8Z347M1tQgatQAYa3B5nCyjOka8NpKf+iXEXIAh5ywHowilyQGvzNARnBeiUhzThIJDiNb0m5nlNJFb5GkHAex4tD4h++GnfvkGTjlequ15erJTYnV7hH6LhaUvfcML6nzElmJXE5enGJOYyhLmNIkxOfCulGfxQknGcxg5BpF1ZxmAH5iZvY+1RI3H8QO7jGIz5jDbc51s1/QbZwhEmcYB5hiX5IgEIiy9Hd+tRaift+jAJ+wTHC81DUAHG7sJI6ECrfxiZ+IEj3OzLcwH7an7EB9fgTyZWlUhMmsIgLtOMTdpPZ5JC6pOkAfqGxnJBA78NSVNVeOSoJMYP0nTjHWbkgJbX8BxLhaRrnQs3GAAAAAElFTkSuQmCC",ce=function(e){var t=e.onRouteChange,n=Object(i.f)((function(e){return{user:e.user,route:e.route,soundOn:e.stored.soundOn,musicOn:e.stored.musicOn,isMobile:e.stored.isMobile,showChatMobile:e.showChatMobile,showFriendsMobile:e.showFriendsMobile,playingWithAI:e.playingWithAI,opponentName:e.opponentName}})),r=n.user,s=n.route,a=n.soundOn,c=n.musicOn,o=n.isMobile,u=n.showChatMobile,l=n.showFriendsMobile,p=n.playingWithAI,m=n.opponentName,b=Object(i.e)((function(e){return{setSearch:e.setSearch,setSoundOn:e.setSoundOn,setMusicOn:e.setMusicOn,setShowFriendsMobile:e.setShowFriendsMobile,setShowChatMobile:e.setShowChatMobile}})),v=b.setSearch,j=b.setSoundOn,g=b.setMusicOn,O=b.setShowFriendsMobile,x=b.setShowChatMobile,y=function(){var e=Object(h.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!1),t(n),e.next=4,fetch("".concat("http://localhost:4000/pusher","/sendExitGame?channelName=").concat(m));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("nav",{className:"nav",children:[Object(f.jsxs)("div",{className:"leftNav",children:[Object(f.jsx)("img",{alt:"sound icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAZNJREFUSEu11b9L1lEUx/GXPwIN0prN1bUhgposEspMssmWQjCqJWxyaAoSrSXBympqda0pGkoQ+gO0f6AEHWwJojTS4sj5gj34PI/49bnL98L33vc599zP59wmex+H0I4N/MbfWlub9sg9jKu4jTd4hR9lwW24jPP4hi08zXlVdr2M4/8lDGEOEeQUnpUFn8MtvMYH9OF0BfgIerCC1eIItTI+g0eYwEf8wcVdwB24jm68wJeAVwOfyEX3sYDNzKQS3IKjaMZd/MIsvgc4JPQcw2hNQEgr6vq24nYqwb14gHtYwzRm8CnAx/AOsWg9QXH0G1iuAo5EYm9I7grOZoABHI8SFuD3edsFpx44jhtZzmMRd/A551MY2S84Mj6JcVzAaJb0JSLJwYMC30yNlwbvLMVSWj2+UY7JnaUoc3mhnkId/11eyC0seq2E3MbS4k+yj2zLbbexX4P8TGNtG6TaCEs/xsM6lu5MS3cl9GstSxfBGtKEisD92eQPtG0GvCGNvihJQ56mAh4dL7KPh7TuY/oPvlCEY7YLExIAAAAASUVORK5CYII=",onClick:function(){o||j()},onTouchStart:function(){o&&j()},className:"hasSound audioToggle soundToggle ".concat(a?"soundOn":"soundOff")}),Object(f.jsx)("img",{alt:"music icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAbxJREFUSEvt1EuIzmEUx/HPyF0kG2nSYCiyICxccil2lpgpSaxElGg0DaFsaLKgXBZDdsrCUtnJRqTYmAg7uWRGRLlfOnXeet83+v/feWtqylOnp+dfz/k+5/c/59diGFbLMDCMOMhkrMZ6HKxWqNFKJmJaVbRjGZZjAUZhDLUKlYHMwCrMwxy0YRZm4j2e4lnuS7FpKJBOnEfI8Q53cQf38AKf8DETH8OBoUB24jIWoR/jMiZgCdZkLMbolKxGoTJyVSCxT8fCjPn4ipd4lVWFjOuaqeRzJn2MR3iA53iNN3ibUp1qBrIWD/GjKn7VDfMhNAWZig8FDjFyIdFpm7ENX7LNY+JLddfYbNNQZysuol6umO5dOI2fKWM4QnwvhMxGN7bkxUHM/QtkEu7jCfYh5uYcNpSBXMBGXMmWjdeGhdRXMiXb9wjOZAXH0xzHFxlk+FEfjqYMXTjxj0pu4xt2ICq7hJinlUWQAVzF4ZyHHuxOUwyPqqzQvgMn0YrfOfV7caMIcjad9Hq+MhLdxJ48V98PW1+RVhI//1Ya5/ciSOi/H9vT8K6hNy0kXtvwKmOQDSetv/Af0pCEfwCqzmMah/JHMAAAAABJRU5ErkJggg==",onClick:function(){o||g()},onTouchStart:function(){o&&g()},className:"hasSound audioToggle musicToggle ".concat(c?"musicOn":"musicOff")})]}),Object(f.jsx)("div",{className:"rightNav",children:"login"===s||"register"===s?Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("img",{className:"hasSound leaderboardIcon",src:ne,alt:"leaderboard",value:"goToLeaderboard",onClick:t})}):"loggedIn"===s?o?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("img",{className:"hasSound friendsIcon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAxdJREFUSEvd1lnIV1UUBfCfjSRlpASN2EiWjRRNKNGEUQ+mNNFLZPVSVFJBgTQRQeVLSgMRFGUUQSUpZjRRkhQ0h9FI5tRAk4UN0iTrY1+5HS74IPTQgQ8+7r3nrL3XWnud/yj/wRq1mRh74hZsiz/wFua0Z7YgW2MRDsJf2AKzcR/WN5v3xgM4B79hSxyCm/AhrsA/2dMHGY37cSfe6B04FbfjiDqsezULr+DVATauwTeY14L8iGPx8cCmANyK03vvvsJ4vIwTq9Nt8BH2xRrs1geZgS/xbAMQCk7CC/V+1977xXgSv+AM7FcHf4pncBcO7YO8U3T0McLvAjxYNKWLVNyt0PEdjmpo3A7zMRExxkZNPseEqjZixwBP4HKMwY3I5gs6MfFQfXf+AL0p+k1c0oKktadxcrMpvMYx4fvCHsju5aBrB0DSSQDS6b86iW2fx+Rm0x64Dts3IFuVVQ/Dr709+S6uO7J71lk4dO2DT3BgzUj3zbSiKtxf1RSQwl7CFLxX7nsMeyFuHVktSISdi1OwrsQL9wEeix8akOuLymh2TM3MzZheDhsECWh8H4/Hrqn0YHyLe6qT3wsoE58DU0A6SQFn4nCchePxc9tJRD+vhirtZr2O7ysuJmFlPU8KZJpvqJRYUcXEUdHwUZyK/bG2oytVzMTDuLSAMmjRKjTF1smjVPg3HsHRWF78H4clNZCZnwxvnoXycQG5CDtUZnWUJ6tCVTh/t6fD19VNNAsVZ+PqmuwUsLBiKYP7RcXKbQH5oFodScxNrBx0MU7rfZd5WYadagCTymGgW2sCkkA8oCY+g3j3ANBr1X4CMTa+skQOHaEmdu1AYvXLsLRYWBaQtJVNETuXzx0DIHFbtBqHiJ57JO55Ec8hjss1EZ1i5dwlCdd0NCcg+ScREEtG5CGQ1ZVbO5f49+KEmouAhLIkwFr8VCC55D4LeEDeL+GSXeF6CCTxHTvGnqErf+E+hwakXekkl9nbOf//BZKceQo7VkjmLmjXuXi8gjLiJmV3wZ9dnDcbQv2qct30zf1JtKm5Gnm/AZ5HzANG5KjiAAAAAElFTkSuQmCC",alt:"friends",onClick:function(){return O(!l)}}),Object(f.jsx)(te,{}),Object(f.jsx)("img",{className:"hasSound leaderboardIcon",src:ne,alt:"leaderboard",value:"goToLeaderboard",onClick:t}),Object(f.jsx)("img",{className:"hasSound logOutIcon",src:re,alt:"log out",value:"logOut",onClick:t})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(te,{}),Object(f.jsx)("img",{className:"hasSound leaderboardIcon",src:ne,alt:"leaderboard",value:"goToLeaderboard",onClick:t}),Object(f.jsx)("img",{className:"hasSound logOutIcon",src:re,alt:"log out",value:"logOut",onClick:t})]}):Object(f.jsx)(f.Fragment,{children:"leaderboard"===s?(null===r||void 0===r?void 0:r.username)?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("img",{className:"hasSound goHomeIcon",src:se,alt:"go home",value:"goHome",onClick:t}),Object(f.jsx)("img",{className:"hasSound logOutIcon",src:re,alt:"log out",value:"logOut",onClick:t})]}):Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("img",{className:"hasSound goBackIcon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAdFJREFUSEu91curTmEUx/HPkVskSbklMnAbmchAnInkD5CBmLhkykBiwkBRhkbUkVIyMTinQ1EGzEmR+z0Dl9ySkruW1iu99n733s7OmuzBXmt9n7We31pPn/9gff/AWIIvuFk3tglkGc5jDCZiFp7VAdWBbMAR3MdmXMUPTMWbkUACvgnH8AiL8SkTzsUtTKgDCJ+iStbgDE5iJ151JduP5Vg1Eki0Yh4elySZhGuYhjl4XQUrquQ0ruBgRfAKXMJaDPbyLYKMwlfEt8pCZU+xAyfKnMvUNZz3crSKgvH4gIV4UORfBpmJO5iccq1iLcBtjMb3budec/IEW3Ahgw5gAA9LiGdxA7uaQGbjOqZkUKySeznxK/G8APYx5ycU+tuqJj5asD4VFLKO6Q/ARWzEqS5QSHspPjeBxL46l6ebgXcZPC7vbAjb/0i4B99wqAkkfGMRvk8FdXfoBfblbot/67ANq5tCeikr5BvVhRrfJmQrYjXVvpMq6cb/OHncTz/2JvRw25DIFxtibMo7hrKzsX+xqtRVp5LwCclOTzF0JN9quzqQl9iN402GsW4V83E3q1hUFNRGuy7n+xPvS8zIX9YGJJKHfGPtFFobkMq2/gQE4FUaGykeQwAAAABJRU5ErkJggg==",alt:"go back",value:"goToLogin",onClick:t})}):"guest"!==(null===r||void 0===r?void 0:r.hash)&&(null===r||void 0===r?void 0:r.hash)?Object(f.jsxs)(f.Fragment,{children:[o&&!p?Object(f.jsx)("div",{className:"chatIconContainer",children:Object(f.jsx)("img",{className:"hasSound chatIcon",src:ae,alt:"chat",onClick:function(){return x(!u)}})}):null,Object(f.jsx)("img",{className:"hasSound goHomeIcon",src:se,alt:"go home",value:"goHome",onClick:y}),Object(f.jsx)("img",{className:"hasSound logOutIcon",src:re,alt:"log out",value:"logOut",onClick:y})]}):Object(f.jsxs)(f.Fragment,{children:[o&&!p?Object(f.jsx)("div",{className:"chatIconContainer",children:Object(f.jsx)("img",{className:"hasSound chatIcon",src:ae,alt:"chat",onClick:function(){return x(!u)}})}):null,Object(f.jsx)("img",{className:"hasSound logOutIcon",src:re,alt:"log out",value:"logOut",onClick:y})]})})})]})},oe=function(){var e=Object(i.f)((function(e){return{opponentName:e.opponentName,chatText:e.chatText,showChatMobile:e.showChatMobile,isMobile:e.stored.isMobile,playingWithAI:e.playingWithAI,channel:e.channel}})),t=e.opponentName,n=e.chatText,r=e.showChatMobile,s=e.isMobile,c=e.playingWithAI,o=e.channel,u=Object(i.e)((function(e){return{setChatText:e.setChatText}})).setChatText,l=document.querySelector(".chatBox"),p=document.querySelector(":root");Object(a.useEffect)((function(){c&&!s&&(document.querySelector(".chatContainer").style.display="none")}),[]),Object(a.useEffect)((function(){if(l)return o.bind("receive-msg",(function(e){return m(e.message),e})),function(){o.unbind("receive-msg")}}),[l]),Object(a.useEffect)((function(){return r&&p.style.setProperty("--chatNotificationDisplay","none"),document.addEventListener("keyup",b),function(){document.removeEventListener("keyup",b)}}),[l,r,n]);var m=function(e){var n=document.createElement("DIV");n.classList.add("message");var s=document.createElement("H4");s.classList.add("opponentText");var a=document.createElement("H5");a.classList.add("oppName");var c=document.createTextNode(e),o=document.createTextNode(t);a.appendChild(o),s.appendChild(c),n.appendChild(a),n.appendChild(s),l.appendChild(n),l.scrollTop=l.scrollHeight,r||(p.style.setProperty("--chatNotificationDisplay","block"),M.notificationSound.play())},b=function(){var e=Object(h.a)(d.a.mark((function e(r){var s,a,c,o,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==r.key||""===n){e.next=21;break}return r.preventDefault(),M.buttonClick.play(),(s=document.createElement("DIV")).classList.add("message"),(a=document.createElement("H4")).classList.add("userText"),(c=document.createElement("H5")).classList.add("userName"),o=document.createTextNode(n),i=document.createTextNode("You"),c.appendChild(i),a.appendChild(o),s.appendChild(c),s.appendChild(a),l.appendChild(s),u(""),e.next=19,fetch("".concat("http://localhost:4000/pusher","/sendMessage?channelName=").concat(t,"&message=").concat(n));case 19:document.querySelector(".chatInput").value="",l.scrollTop=l.scrollHeight;case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"".concat(!r&&s?"hide":null," ").concat(s?"chatContainerMobile":"chatContainer"),children:[Object(f.jsx)("div",{className:"chatBox"}),Object(f.jsx)("input",{onChange:function(e){return u(e.target.value)},type:"text",className:"chatInput",placeholder:"Type Here..."})]})},ie=(n(445),function(){return Object(f.jsx)("footer",{children:Object(f.jsx)("div",{className:"footer"})})}),ue=function(e){var t=e.onRouteChange,n=Object(i.f)((function(e){return{opponentName:e.opponentName,user:e.user,checkOppStatusInterval:e.checkOppStatusInterval,gameRoute:e.gameRoute,playerIsReady:e.playerIsReady,yourTurn:e.yourTurn,playerTurnText:e.playerTurnText,isMobile:e.stored.isMobile,showGameInstructions:e.stored.showGameInstructions,opponentIsReady:e.opponentIsReady,firstGameInstructionLoad:e.firstGameInstructionLoad,gameTimer:e.gameTimer,gameCountdownInterval:e.gameCountdownInterval,skippedTurns:e.skippedTurns,playingWithAI:e.playingWithAI,channel:e.channel}})),r=n.opponentName,s=n.user,c=n.checkOppStatusInterval,o=n.gameRoute,u=n.playerIsReady,l=n.yourTurn,b=n.playerTurnText,v=n.isMobile,j=n.showGameInstructions,g=n.opponentIsReady,O=n.firstGameInstructionLoad,x=n.gameTimer,y=n.gameCountdownInterval,A=n.skippedTurns,w=n.playingWithAI,I=n.channel,S=Object(i.e)((function(e){return{setCheckOppStatusInterval:e.setCheckOppStatusInterval,setRoute:e.setRoute,setGameRoute:e.setGameRoute,setPlayerIsReady:e.setPlayerIsReady,setYourTurn:e.setYourTurn,setPlayerTurnText:e.setPlayerTurnText,setOpponentIsReady:e.setOpponentIsReady,setShowGameInstructions:e.setShowGameInstructions,setFirstGameInstructionLoad:e.setFirstGameInstructionLoad,setGameTimer:e.setGameTimer,setGameCountdownInterval:e.setGameCountdownInterval,setSkippedTurns:e.setSkippedTurns,setPlayigWithAI:e.setPlayigWithAI,setUser:e.setUser}})),k=S.setCheckOppStatusInterval,N=S.setRoute,C=S.setGameRoute,T=S.setPlayerIsReady,E=S.setYourTurn,R=S.setPlayerTurnText,F=S.setOpponentIsReady,M=S.setShowGameInstructions,L=S.setFirstGameInstructionLoad,U=S.setGameTimer,q=S.setGameCountdownInterval,P=S.setSkippedTurns,G=S.setPlayigWithAI,_=S.setUser,B=v?"Tap once on the ship you want to move":"Click once on the ship you want to move",H=v?"When selected, tap the ship again":'Right click or press "Spacebar" while a ship is selected',Y=v?"Drag the selected ship and let go when the ship is in position":"Move the ship into position and left click again when ready to release";Object(a.useEffect)((function(){var e=90;return clearInterval(y),U(90),L(!0),T(!1),F(!!w),C("placeShips"),w||q(setInterval((function(){U(e-1),e-=1}),1e3)),I.bind("receive-game-over",(function(e){return D(20),e})),I.bind("receive-exit-game",(function(e){return window.alert("Opponent has left the game"),"guest"===s.hash?N("login"):N("loggedIn"),e})),w||k(setInterval(Q,2e3)),function(){I.unbind("receive-game-over"),I.unbind("receive-exit-game"),clearInterval(c),clearInterval(y),L(!0),U(90),E(!1),P(0),G(!1)}}),[]),Object(a.useEffect)((function(){return I.bind("receive-ready-status",(function(e){return u&&C("gameInProgress"),F(!0),e})),function(){I.unbind("receive-ready-status")}}),[u]),Object(a.useEffect)((function(){var e=15;clearInterval(y);var t=document.querySelectorAll(".userBoard .ship"),n=0;l?(R("Your Turn"),t.forEach((function(e){e.childNodes[0].classList.contains("shipSunkUser")&&(n+=1)})),n>=t.length?J("You Lost ):"):"gameInProgress"!==o||w||q(setInterval((function(){U(e-1),e-=1}),1e3))):"gameInProgress"===o?(setTimeout((function(){return R(w?"Computer's turn":"".concat(r,"'s Turn!"))}),900),U(15)):R(w?"Computer's turn":"".concat(r,"'s Turn!"))}),[l]),Object(a.useEffect)((function(){var e=document.querySelector(".readyBtn"),t=document.querySelector(".instructionsBtn"),n=document.querySelector(".shipPlacementTimer");x<=0&&!w&&(clearInterval(y),"gameInProgress"===o?(E(!1),Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("http://localhost:4000/pusher","/sendShotToOpponent?channelName=").concat(r,"&target=oppOutOfTime"));case 2:case"end":return e.stop()}}),e)})))(),P(A+1)):(clearInterval(y),w||(n.style.display="none"),U(15),T(!0),null===t||void 0===t||t.classList.add("hide"),g?(C("gameInProgress"),E(!0)):(e.style.opacity="0.3",C("waiting")),w||Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("http://localhost:4000/pusher","/sendReadyStatus?channelName=").concat(r));case 2:case"end":return e.stop()}}),e)})))()))}),[x]),Object(a.useEffect)((function(){A>=3&&!w&&J("You've been kicked due to innactivity")}),[A]);var D=function(e){clearInterval(c),"guest"!==(null===s||void 0===s?void 0:s.hash)&&W(e),setTimeout((function(){window.alert("You Won!!!"),"guest"===s.hash?N("login"):N("loggedIn")}),300)},J=function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w){e.next=3;break}return e.next=3,fetch("".concat("http://localhost:4000/pusher","/gameOver?channelName=").concat(r));case 3:setTimeout((function(){window.alert(t),"guest"!==(null===s||void 0===s?void 0:s.hash)&&(null===s||void 0===s?void 0:s.hash)?N("loggedIn"):N("login")}),300);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:4000","/checkIfOppInGame?username=").concat(r));case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Error");case 6:return e.next=8,t.json();case 8:e.sent||(window.alert("Opponent has left the game"),"guest"===s.hash?N("login"):N("loggedIn")),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(h.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:4000","/updateScore"),{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s.username,scoreIncrement:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:if(r=e.sent){e.next=11;break}throw new Error("Could not increment score");case 11:_(Object(m.a)(Object(m.a)({},s),{},{score:r}));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(ce,{onRouteChange:t}),Object(f.jsx)(X,{}),j?Object(f.jsxs)("div",{className:"instructions",children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("h3",{children:"Picking up a ship"}),Object(f.jsx)("h5",{children:B})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("h3",{children:"Rotation"}),Object(f.jsx)("h5",{children:H})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("h3",{children:"Dropping a ship"}),Object(f.jsx)("h5",{children:Y})]})]}):Object(f.jsx)("button",{className:"instructionsBtn ".concat(O?"firstGameInstructionLoad":null),onClick:function(){M(!0),O&&L(!1)},children:Object(f.jsx)("h2",{children:"i"})}),"gameInProgress"===o?Object(f.jsxs)("div",{className:"playerTurnTextContainer",children:[Object(f.jsx)("h3",{className:"playerTurnText",children:b}),l&&!w?Object(f.jsx)("h3",{className:"playerTurnTimer",children:x}):null]}):null,"gameInProgress"!==o?Object(f.jsxs)("div",{className:"readyBtn",children:[w?null:Object(f.jsx)("h3",{className:"shipPlacementTimer",children:x}),Object(f.jsx)("button",{onClick:function(){var e,t=document.querySelectorAll(".ship"),n=document.querySelector(".readyBtn"),s=document.querySelector(".instructionsBtn"),a=document.querySelector(".shipPlacementTimer"),c=!0,o=Object(p.a)(t);try{for(o.s();!(e=o.n()).done;){var i=e.value;if("none"===i.style.pointerEvents)return i.style.border="3px solid rgba(255, 0, 0, 0.8)",void(c=!1)}}catch(f){o.e(f)}finally{o.f()}if(c){clearInterval(y),w||(a.style.display="none"),U(15),T(!0),null===s||void 0===s||s.classList.add("hide"),n.querySelector("button").innerText="".concat(v?"\u2022\u2022\u2022":"Waiting...");var u,l=Object(p.a)(t);try{for(l.s();!(u=l.n()).done;){var m=u.value;m.style.cursor="default",m.style.border=null,m.style.pointerEvents="auto"}}catch(f){l.e(f)}finally{l.f()}g?(C("gameInProgress"),E(!0)):(n.style.opacity="0.3",C("waiting")),w||Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("http://localhost:4000/pusher","/sendReadyStatus?channelName=").concat(r));case 2:case"end":return e.stop()}}),e)})))()}},className:"btn",children:v?"\u2714\ufe0f":"Ready"})]}):null,Object(f.jsx)($,{}),Object(f.jsx)(oe,{}),Object(f.jsx)(ie,{})]})},le=(n(446),function(){return Object(f.jsx)("div",{className:"board homeBoard",children:Object(f.jsx)("div",{className:"grid",children:Object(f.jsx)("div",{className:"allSqaures",children:Object(f.jsx)(b,{})})})})}),de=(n(447),function(){var e=Object(i.f)((function(e){return{search:e.search,user:e.user,route:e.route,channel:e.channel}})),t=e.search,n=e.user,r=e.route,s=e.channel,c=Object(i.e)((function(e){return{setSearch:e.setSearch,setFindMatchInterval:e.setFindMatchInterval,setOpponentName:e.setOpponentName,setRoute:e.setRoute,setUser:e.setUser}})),o=c.setSearch,u=(c.setFindMatchInterval,c.setOpponentName),l=c.setRoute,p=c.setUser;Object(a.useEffect)((function(){return"login"!==r&&"register"!==r||"guest"===(null===n||void 0===n?void 0:n.hash)&&j(),function(){}}),[]),Object(a.useEffect)((function(){t&&v()}),[t,n]),Object(a.useEffect)((function(){return s&&s.bind("receive-go-to-game",(function(e){return u(e.senderName),l("game"),e})),function(){s&&s.unbind("receive-go-to-game")}}),[s]);var m=function(){var e=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:4000","/updateSearching"),{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n.username,search:!1})});case 3:if(e.sent.ok){e.next=6;break}throw new Error("Problem updating searching status");case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(h.a)(d.a.mark((function e(){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:4000","/updateSearching"),{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n.username,search:!t})});case 3:if((r=e.sent).ok){e.next=6;break}throw new Error("Problem updating searching status");case 6:return e.next=8,r.json();case 8:e.sent&&o(!t),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(h.a)(d.a.mark((function e(){var t,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:4000","/findMatch"),{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n.username})});case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Could not find match");case 6:return e.next=8,t.json();case 8:if(!(null===(r=e.sent)||void 0===r?void 0:r.username)){e.next=20;break}return u(r.username),m(),o(!1),e.next=15,fetch("".concat("http://localhost:4000/pusher","/sendGoToGame?friendName=").concat(null===r||void 0===r?void 0:r.username,"&username=").concat(null===n||void 0===n?void 0:n.username));case 15:return s=e.sent,e.next=18,s.json();case 18:e.sent&&(u(r.username),l("game"));case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),console.log(e.t0);case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:4000","/removeGuestUser"),{method:"delete",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:null===n||void 0===n?void 0:n.username})});case 3:if(e.sent.ok){e.next=6;break}throw new Error("Problem removing guest");case 6:o(!1),p(null),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(h.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:4000","/addGuestUser"),{method:"post",headers:{"Content-Type":"application/json"}});case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Problem adding guest");case 6:return e.next=8,t.json();case 8:return n=e.sent,e.next=11,p(n);case 11:o(!0),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{className:"findMatchContainer ".concat("login"===r||"register"===r?"playAsGuest":null),children:"login"===r||"register"===r?Object(f.jsx)("button",{onClick:t?j:g,className:"findMatch",children:t?"Searching...":"Play as Guest"}):Object(f.jsx)("button",{onClick:b,className:"findMatch",children:t?"Searching...":"Find Match"})})}),he=(n(448),function(e){var t=e.friendInGame,n=e.name,r=e.status,s=Object(i.f)((function(e){return{route:e.route,user:e.user,channel:e.channel}})),c=s.route,o=s.user,u=s.channel,l=Object(i.e)((function(e){return{setOpponentName:e.setOpponentName,setRoute:e.setRoute}})),p=l.setOpponentName,m=l.setRoute;Object(a.useEffect)((function(){return u.bind("receive-go-to-game",(function(e){return p(e.senderName),m("game"),e})),u.bind("receive-invite",(function(e){return b(e),e})),function(){u.unbind("receive-go-to-game"),u.unbind("receive-go-to-game")}}),[]),Object(a.useEffect)((function(){var e=document.querySelector(".btn".concat(n));"offline"===r||t||(e.style.opacity="0.8",e.disabled=!1,e.childNodes[0].nodeValue="Invite")}),[r,t]);var b=function(e){var t=document.querySelector(".btn".concat(e.username));"loggedIn"===c&&null!==t&&(!0===t.disabled&&(t.style.opacity="0.8",t.disabled=!1),t.childNodes[0].nodeValue="Accept")},v=function(){var e=Object(h.a)(d.a.mark((function e(t){var n,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.id,e.prev=1,e.next=4,fetch("".concat("http://localhost:4000","/findFriend?username=").concat(n));case 4:return r=e.sent,e.next=7,r.json();case 7:if(!(s=e.sent).username){e.next=15;break}return e.next=11,fetch("".concat("http://localhost:4000/pusher","/sendInvite?username=").concat(o.username,"&friendName=").concat(s.username));case 11:t.target.childNodes[0].nodeValue="Invite sent",t.target.style.opacity="0.4",t.target.style.cursor="default",t.target.disabled=!0;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("http://localhost:4000/pusher","/sendGoToGame?username=").concat(o.username,"&friendName=").concat(n));case 2:p(t.target.id),m("game");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{id:n,value:n,className:"friendBlock",children:[Object(f.jsxs)("div",{className:"friendText",children:[Object(f.jsx)("h3",{children:n}),t&&"online"===r?Object(f.jsx)("button",{disabled:!0,className:"btn".concat(n," friendInGameBtn"),children:"In Game"}):"online"===r?Object(f.jsx)("button",{className:"btn".concat(n," friendOnlineBtn"),onClick:function(e){"Invite"===e.target.innerHTML?v(e):"Accept"===e.target.innerHTML&&j(e)},id:n,children:"Invite"}):Object(f.jsx)("button",{disabled:!0,className:"btn".concat(n," friendOfflineBtn"),children:"Offline"})]}),Object(f.jsx)("div",{id:r,className:r})]})}),pe=(n(199),function(){var e,t=Object(i.f)((function(e){return{unsortedFriends:e.unsortedFriends,user:e.user,allFriends:e.allFriends,friendFilter:e.friendFilter,friendSearch:e.friendSearch,friendsOnline:e.friendsOnline,getOnlineFriendsInterval:e.getOnlineFriendsInterval,isMobile:e.stored.isMobile,showFriendsMobile:e.showFriendsMobile,channel:e.channel}})),n=t.unsortedFriends,r=t.user,s=t.allFriends,c=t.friendFilter,o=t.friendSearch,u=t.friendsOnline,l=t.getOnlineFriendsInterval,p=t.isMobile,m=t.showFriendsMobile,b=t.channel,v=Object(i.e)((function(e){return{setUnsortedFriends:e.setUnsortedFriends,setAllFriends:e.setAllFriends,setFriendFilter:e.setFriendFilter,setFriendSearch:e.setFriendSearch,setFriendsOnline:e.setFriendsOnline,setGetOnlineFriendsInterval:e.setGetOnlineFriendsInterval}})),j=v.setUnsortedFriends,g=v.setAllFriends,O=v.setFriendFilter,x=v.setFriendSearch,y=v.setFriendsOnline,A=v.setGetOnlineFriendsInterval;Object(a.useEffect)((function(){return S(),A(setInterval(I,1e3)),function(){clearInterval(l)}}),[]),Object(a.useEffect)((function(){if(b===r.username)return b.bind("update-friend-status",(function(e){return I(),e})),function(){b&&b.unbind("update-friend-status")}}),[b]),Object(a.useEffect)((function(){w()}),[u,n]);var w=function(){var t,r=[],s=[],a=[];n.forEach((function(t){var n;if(t.username===(null===(n=e)||void 0===n?void 0:n.username))s.push(t);else{var a=!0;u.forEach((function(e){if(e.username===t.username)return a=!1})),a&&r.push(t)}})),a=u.sort((function(e,t){return e.username.toLowerCase()>t.username.toLowerCase()?1:-1})),t=r.sort((function(e,t){return e.username.toLowerCase()>t.username.toLowerCase()?1:-1})),s.length?g(s.concat(a).concat(t)):g(a.concat(t))},I=function(){var e=Object(h.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:4000","/getFriendsOnline?username=").concat(r.username));case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Could not get online friends");case 6:return e.next=8,t.json();case 8:n=e.sent,y(n),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(h.a)(d.a.mark((function e(){var t,n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:4000","/getFriends?username=").concat(r.username));case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("Problem accessing friends list");case 6:return e.next=8,n.json();case 8:s=e.sent,(null===r||void 0===r||null===(t=r.friends)||void 0===t?void 0:t.length)&&(null===s||void 0===s?void 0:s.length)?(j(s),I()):(g([]),j([]),y([])),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var t=Object(h.a)(d.a.mark((function t(){var n,s,a,c,i,u,l,h,p,m;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return document.querySelector(".addFriendInput").value="",n=document.querySelector(".friendsContainer"),s="",a="",c=[],t.prev=5,t.next=8,fetch("".concat("http://localhost:4000","/getFriendRequests?username=").concat(r.username));case 8:if((i=t.sent).ok){t.next=11;break}throw new Error("Could not get friend requests");case 11:return t.next=13,i.json();case 13:if(null===(u=t.sent)||""===u){t.next=19;break}if(!u.split(",").includes(o)){t.next=19;break}throw n.style.setProperty("--add-friend-alert",'"User already sent you a request"'),new Error("User already sent you a request");case 19:return t.next=21,fetch("".concat("http://localhost:4000","/findFriend?username=").concat(o));case 21:if((l=t.sent).ok){t.next=25;break}throw n.style.setProperty("--add-friend-alert",'"User does not exist"'),new Error("User does not exist");case 25:return t.next=27,l.json();case 27:if((h=t.sent).username!==r.username){t.next=33;break}throw n.style.setProperty("--add-friend-alert",'"Cannot add yourself as a friend"'),new Error("Cannot add self as friend");case 33:if(!h.username){t.next=58;break}if(s=h.username,p=[],null!==h.friends&&""!==h.friends&&(p=h.friends.split(",")),null===h.friendrequests||""===h.friendrequests){t.next=53;break}if(!(c=h.friendrequests.split(",")).includes(r.username)){t.next=44;break}throw n.style.setProperty("--add-friend-alert",'"You have already sent them a request"'),new Error("You have already sent them a request");case 44:if(!p.includes(r.username)){t.next=49;break}throw n.style.setProperty("--add-friend-alert",'"User is already your friend"'),new Error("User is already your friend");case 49:c.push(r.username),a=h.friendrequests.concat(",".concat(r.username));case 51:t.next=58;break;case 53:if(!p.includes(r.username)){t.next=56;break}throw n.style.setProperty("--add-friend-alert",'"User is already your friend"'),new Error("User is already your friend");case 56:a=r.username,c=[r.username];case 58:return n.style.setProperty("--add-friend-alert",'""'),t.next=61,fetch("".concat("http://localhost:4000","/updateFriendRequests"),{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({requestlist:a,username:s})});case 61:if((m=t.sent).ok){t.next=64;break}throw new Error("Could not add self to friendrequests of friend");case 64:return t.next=66,m.json();case 66:if(!t.sent){t.next=71;break}return t.next=70,fetch("".concat("http://localhost:4000/pusher","/sendFriendRequest?channelName=").concat(o));case 70:e=h;case 71:t.next=76;break;case 73:t.prev=73,t.t0=t.catch(5),console.log(t.t0);case 76:case"end":return t.stop()}}),t,null,[[5,73]])})));return function(){return t.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"friendsContainer ".concat(p?"mobile":null," ").concat(!m&&p?"hide":null),children:[Object(f.jsxs)("div",{className:"friendsContainerHeader",children:[Object(f.jsx)("h2",{children:"Friends"}),Object(f.jsx)("input",{className:"friendSearch",onChange:function(e){return O(e.target.value)},type:"text",placeholder:"Filter friends"})]}),Object(f.jsx)("div",{className:"friendsSection",children:Object(f.jsx)("div",{className:"friendsListContainer",children:s.length?Object(f.jsx)("div",{className:"friendsList",children:s.map((function(e){return e.username&&e.username.toLowerCase().includes(c.toLowerCase())?(t=e.lastonline)>Date.now()-5e3&&t?Object(f.jsx)(he,{friendInGame:e.ingame,name:e.username,status:"online"},e.username):Object(f.jsx)(he,{friendInGame:e.ingame,name:e.username,status:"offline"},e.username):null;var t}))}):Object(f.jsx)("h4",{className:"noFriends",children:"No friends have been added"})})}),Object(f.jsxs)("div",{className:"addFriend",children:[Object(f.jsx)("h3",{className:"addFriendText",children:"Add a friend"}),Object(f.jsx)("input",{className:"addFriendInput",onChange:function(e){return x(e.target.value)},type:"text",placeholder:"Enter a username"}),Object(f.jsx)("button",{className:"friendRequestBtn",onClick:k,children:"Send"})]})]})}),me=function(e){e.onRouteChange;return Object(f.jsxs)("div",{className:"friendsContainer",children:[Object(f.jsx)("div",{className:"friendsContainerHeader",children:Object(f.jsx)("h2",{children:"Friends"})}),Object(f.jsx)("div",{className:"logToSeeFriendsText",children:Object(f.jsx)("h3",{children:"Log in to add and view friends here"})})]})},fe=function(e){var t=e.onRouteChange,n=Object(i.f)((function(e){return{userName:e.userName,password:e.password,search:e.search}})),r=n.userName,s=n.password,a=n.search,c=Object(i.e)((function(e){return{setUserName:e.setUserName,setPassword:e.setPassword,setUser:e.setUser,setSearch:e.setSearch}})),o=c.setUserName,u=c.setPassword,l=c.setUser,p=c.setSearch,m=document.querySelector(".login"),b=function(){var e=Object(h.a)(d.a.mark((function e(n){var c,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:4000","/login"),{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:s})});case 3:return c=e.sent,e.next=6,c.json();case 6:(o=e.sent).username?(a&&p(!1),l(o),t(n)):"no socketid"===o?m.style.setProperty("--reg-log-alert",'"Server error. Please try again"'):null!==m&&m.style.setProperty("--reg-log-alert",'"The username or password you entered is incorrect"'),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"login",children:[Object(f.jsx)("h1",{children:"Log In"}),Object(f.jsxs)("div",{className:"username",children:[Object(f.jsx)("h4",{children:"Username"}),Object(f.jsx)("input",{placeholder:"Username...",onChange:function(e){return o(e.target.value)},type:"text"})]}),Object(f.jsxs)("div",{className:"password",children:[Object(f.jsx)("h4",{children:"Password"}),Object(f.jsx)("input",{placeholder:"Password...",onChange:function(e){return u(e.target.value)},type:"password"})]}),Object(f.jsx)("button",{className:"loginBtn",value:"login",onClick:b,children:"Login"}),Object(f.jsx)("button",{value:"goToRegister",onClick:t,className:"changeLogReg",children:"Register"})]})},be=function(e){var t=e.onRouteChange,n=Object(i.f)((function(e){return{userName:e.userName,password:e.password,search:e.search}})),r=n.userName,s=n.password,a=n.search,c=Object(i.e)((function(e){return{setUserName:e.setUserName,setPassword:e.setPassword,setUser:e.setUser,setSearch:e.setSearch}})),o=c.setUserName,u=c.setPassword,l=c.setUser,d=c.setSearch,h=document.querySelector(".register");return Object(f.jsxs)("div",{className:"register",children:[Object(f.jsx)("h1",{children:"Register"}),Object(f.jsxs)("div",{className:"username",children:[Object(f.jsx)("h4",{children:"Username"}),Object(f.jsx)("input",{placeholder:"Username...",onChange:function(e){return o(e.target.value)},type:"text"})]}),Object(f.jsxs)("div",{className:"password",children:[Object(f.jsx)("h4",{children:"Password"}),Object(f.jsx)("input",{placeholder:"Password...",onChange:function(e){return u(e.target.value)},type:"password"})]}),Object(f.jsx)("button",{className:"registerBtn",value:"register",onClick:function(e){r.length<5?h.style.setProperty("--reg-log-alert",'"Username must be at least 5 characters"'):r.length>10?h.style.setProperty("--reg-log-alert",'"Username cannot be more than 10 characters"'):s.length<5?h.style.setProperty("--reg-log-alert",'"Password must be at least 5 characters"'):fetch("".concat("http://localhost:4000","/register"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:s})}).then((function(e){return e.json()})).then((function(n){n.username?(a&&d(!1),l(n),t(e)):"no socketid"===n?h.style.setProperty("--reg-log-alert",'"Server error. Please try again"'):n.ok||h.style.setProperty("--reg-log-alert",'"Username has already been taken"')}))},children:"Register"}),Object(f.jsx)("button",{value:"goToLogin",onClick:t,className:"changeLogReg",children:"Login"})]})},ve=function(e){var t=e.onRouteChange,n=Object(i.f)((function(e){return{topFive:e.topFive,route:e.route}})),r=n.topFive,s=n.route,c=Object(i.e)((function(e){return{setTopFive:e.setTopFive}})).setTopFive;Object(a.useEffect)((function(){"leaderboard"===s&&o()}),[s]);var o=function(){var e=Object(h.a)(d.a.mark((function e(){var t,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<5)){e.next=14;break}return e.next=4,fetch("".concat("http://localhost:4000","/getTopFive?userNum=").concat(t));case 4:if((n=e.sent).ok){e.next=7;break}throw new Error("Error");case 7:return e.next=9,n.json();case 9:r=e.sent,c(r);case 11:t++,e.next=1;break;case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(ce,{onRouteChange:t}),r.length?Object(f.jsx)("div",{className:"topFiveContainer",children:Object(f.jsx)("div",{className:"topFive",children:r.map((function(e){return Object(f.jsxs)("h3",{className:"LBplayer",children:[" ",e.username," : ",Object(f.jsx)("span",{className:"score",children:e.score})]},e.username)}))})}):null]})},je=n(203),ge=n.n(je),Oe=(n(449),n(450),n(451),n(452),function(){var e,t=Object(i.f)((function(e){return{getOnlineFriendsInterval:e.getOnlineFriendsInterval,route:e.route,user:e.user,findMatchInterval:e.findMatchInterval,checkOppStatusInterval:e.checkOppStatusInterval,search:e.search,updatLastOnlineInterval:e.updatLastOnlineInterval,soundOn:e.stored.soundOn,musicOn:e.stored.musicOn,isMobile:e.stored.isMobile,showFriendsMobile:e.showFriendsMobile,audioStarted:e.audioStarted,deviceInPortrait:e.deviceInPortrait,gameRoute:e.gameRoute,showGameInstructions:e.stored.showGameInstructions,playingWithAI:e.playingWithAI,pusher:e.pusher,opponentName:e.opponentName,playerIsReady:e.playerIsReady,opponentIsReady:e.opponentIsReady}})),n=t.getOnlineFriendsInterval,r=t.route,s=t.user,c=t.findMatchInterval,o=t.checkOppStatusInterval,u=t.search,l=t.updatLastOnlineInterval,p=t.soundOn,m=t.musicOn,b=t.isMobile,v=t.showFriendsMobile,j=t.audioStarted,g=t.deviceInPortrait,O=t.gameRoute,x=t.showGameInstructions,y=t.playingWithAI,A=t.pusher,w=t.opponentName,I=(t.playerIsReady,t.opponentIsReady,Object(i.e)((function(e){return{setRoute:e.setRoute,setUser:e.setUser,setSearch:e.setSearch,setUpdatLastOnlineInterval:e.setUpdatLastOnlineInterval,setAllFriends:e.setAllFriends,setUnsortedFriends:e.setUnsortedFriends,setFriendsOnline:e.setFriendsOnline,setFriendSearch:e.setFriendSearch,setPlayerIsReady:e.setPlayerIsReady,setUserName:e.setUserName,setPassword:e.setPassword,setAudioStarted:e.setAudioStarted,setShowFriendsMobile:e.setShowFriendsMobile,setShowChatMobile:e.setShowChatMobile,setShowGameInstructions:e.setShowGameInstructions,setDeviceInPortrait:e.setDeviceInPortrait,setGameRoute:e.setGameRoute,setPlayigWithAI:e.setPlayigWithAI,setPusher:e.setPusher,setChannel:e.setChannel,setOpponentIsReady:e.setOpponentIsReady}}))),S=I.setRoute,k=I.setUser,N=I.setSearch,C=I.setUpdatLastOnlineInterval,T=I.setAllFriends,E=I.setUnsortedFriends,R=I.setFriendsOnline,F=I.setFriendSearch,L=I.setPlayerIsReady,U=I.setUserName,q=I.setPassword,P=I.setAudioStarted,G=I.setShowFriendsMobile,_=I.setShowChatMobile,B=I.setShowGameInstructions,H=I.setDeviceInPortrait,Y=I.setGameRoute,D=I.setPlayigWithAI,J=I.setPusher,Q=I.setChannel,W=I.setOpponentIsReady,V=function(){var e=Object(h.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.getAttribute("value"),e.t0=n,e.next="logOut"===e.t0?4:"goToRegister"===e.t0?7:"goToLogin"===e.t0?9:"goHome"===e.t0?11:"goToLeaderboard"===e.t0?13:"login"===e.t0?15:"register"===e.t0?17:"game"===e.t0?19:22;break;case 4:return(null===s||void 0===s?void 0:s.username)&&N(!1),S("login"),e.abrupt("break",24);case 7:return S("register"),e.abrupt("break",24);case 9:return S("login"),e.abrupt("break",24);case 11:return S("loggedIn"),e.abrupt("break",24);case 13:return S("leaderboard"),e.abrupt("break",24);case 15:case 17:return S("loggedIn"),e.abrupt("break",24);case 19:return(null===s||void 0===s?void 0:s.username)&&N(!1),S("game"),e.abrupt("break",24);case 22:(null===s||void 0===s?void 0:s.username)&&N(!1),S("login");case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){H(window.screen.width<window.screen.height)};Object(a.useEffect)((function(){return setTimeout((function(){Z(),z()}),10),window.addEventListener("resize",Z),document.addEventListener("mouseover",te),window.addEventListener("beforeunload",re),function(){window.removeEventListener("resize",Z),document.removeEventListener("mouseover",te),window.removeEventListener("beforeunload",re)}}),[]),Object(a.useEffect)((function(){p?(b||M.hoverSound.mute(!1),M.ambientWaves.mute(!1),M.buttonClick.mute(!1),M.hitSound.mute(!1),M.missSound.mute(!1),M.shipSunkSound.mute(!1),M.notificationSound.mute(!1),M.pickUpShip.mute(!1),M.dropShip.mute(!1),M.rotateShip.mute(!1),M.missileLock.mute(!1),M.missileLaunch.mute(!1),M.incomingMissile.mute(!1)):(b||M.hoverSound.mute(!0),M.ambientWaves.mute(!0),M.buttonClick.mute(!0),M.hitSound.mute(!0),M.missSound.mute(!0),M.shipSunkSound.mute(!0),M.notificationSound.mute(!0),M.pickUpShip.mute(!0),M.dropShip.mute(!0),M.rotateShip.mute(!0),M.missileLock.mute(!0),M.missileLaunch.mute(!0),M.incomingMissile.mute(!0))}),[p,b]),Object(a.useEffect)((function(){m?(M.lobbyTheme.mute(!1),M.gameTheme.mute(!1),M.shipPlacementTheme.mute(!1)):(M.lobbyTheme.mute(!0),M.gameTheme.mute(!0),M.shipPlacementTheme.mute(!0))}),[m]),Object(a.useEffect)((function(){(null===s||void 0===s?void 0:s.username)&&Q(A.subscribe(s.username))}),[A]),Object(a.useEffect)((function(){var e;return(null===s||void 0===s||null===(e=s.username)||void 0===e?void 0:e.length)?(J(new ge.a("e782959a5cfb6f1739ff",{cluster:"us2",authEndpoint:"".concat("http://localhost:4000/pusher","/auth"),auth:{params:{username:s.username}}})),"login"!==r&&"register"!==r&&(X(),ne(!1)),C(setInterval(K,1e3))):(U(null),q(null),clearInterval(l),clearInterval(c)),function(){clearInterval(l)}}),[null===s||void 0===s?void 0:s.username]),Object(a.useEffect)((function(){u||(clearInterval(c),(null===s||void 0===s?void 0:s.username)&&X())}),[u]),Object(a.useEffect)((function(){var e;"game"===r?(N(!1),(null===s||void 0===s?void 0:s.username)&&ne(!0),clearInterval(n),(null===s||void 0===s?void 0:s.username)&&X(),_(!1),"gameInProgress"!==O?(M.lobbyTheme.playing()&&M.lobbyTheme.stop(),M.shipPlacementTheme.playing()||M.shipPlacementTheme.play(),M.ambientWaves.playing()||M.ambientWaves.play()):(M.gameTheme.playing()||M.gameTheme.play(),M.shipPlacementTheme.playing()&&M.shipPlacementTheme.stop())):(Y("placeShips"),L(!1),W(!1),(null===s||void 0===s||null===(e=s.username)||void 0===e?void 0:e.length)&&ne(!1),clearInterval(o),j&&!M.lobbyTheme.playing()&&M.lobbyTheme.play(),M.gameTheme.playing()&&M.gameTheme.stop(),M.shipPlacementTheme.playing()&&M.shipPlacementTheme.stop(),M.ambientWaves.playing()&&M.ambientWaves.stop());return document.addEventListener("click",$),function(){document.removeEventListener("click",$)}}),[r,O,x,j]),Object(a.useEffect)((function(){"login"!==r&&"register"!==r||("guest"!==(null===s||void 0===s?void 0:s.hash)&&k(null),clearInterval(n),T([]),E([]),R([]),F("")),"loggedIn"===r&&G(!1)}),[r]);var X=function(){var e=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:4000","/updateSearching"),{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:null===s||void 0===s?void 0:s.username,search:!1})});case 3:if(e.sent.ok){e.next=6;break}throw new Error("Problem updating searching status");case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:4000","/updateOnlineStatus"),{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:null===s||void 0===s?void 0:s.username})});case 3:if(e.sent.ok){e.next=6;break}throw new Error("Error");case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:4000","/guestCleanup"),{method:"delete",headers:{"Content-Type":"application/json"}});case 3:if(e.sent.ok){e.next=6;break}throw new Error("Problem adding guest");case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),$=function(e){j||M.lobbyTheme.playing()||"game"===r||(M.lobbyTheme.play(),P()),("BUTTON"===e.target.tagName&&!e.target.classList.contains("messageToggle")||e.target.classList.contains("hasSound"))&&M.buttonClick.play(),x&&B(!1)},ee=!0,te=function(e){"BUTTON"===e.target.tagName&&!e.target.classList.contains("messageToggle")||e.target.classList.contains("hasSound")?ee&&(M.hoverSound.play(),ee=!1):ee=!0},ne=function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:4000","/setInGame"),{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:null===s||void 0===s?void 0:s.username,isInGame:t})});case 3:if(e.sent.ok){e.next=6;break}throw new Error("Error");case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),(null===s||void 0===s?void 0:s.username)&&(X(),ne(!1)),"game"!==r){e.next=6;break}if(y||!w){e.next=6;break}return e.next=6,fetch("".concat("http://localhost:4000/pusher","/sendExitGame?channelName=").concat(w));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();document.onkeydown=function(e){var t,n,s,a,c=document.querySelector(".loginBtn"),o=document.querySelector(".registerBtn"),i=document.querySelector(".login > .username > input"),u=document.querySelector(".register > .username > input"),l=document.querySelector(".login > .password > input"),d=document.querySelector(".register > .password > input"),h=document.querySelector(".friendRequestBtn");"Enter"!==e.key||"login"!==r&&"register"!==r?"Enter"===e.key&&"loggedIn"===r&&(e.preventDefault(),M.buttonClick.play(),h.click()):(e.preventDefault(),((null===i||void 0===i||null===(t=i.value)||void 0===t?void 0:t.length)&&(null===l||void 0===l||null===(n=l.value)||void 0===n?void 0:n.length)||(null===u||void 0===u||null===(s=u.value)||void 0===s?void 0:s.length)&&(null===d||void 0===d||null===(a=d.value)||void 0===a?void 0:a.length))&&(M.buttonClick.play(),"login"===r?c.click():o.click()))};var se=function(){D(!0),S("game")};return Object(f.jsxs)(f.Fragment,{children:[!g&&b?Object(f.jsx)("div",{className:"pleaseRotate",children:Object(f.jsx)("h1",{children:"Please rotate your device"})}):null,"login"===r||"register"===r?Object(f.jsxs)("div",{className:"logRegPage ".concat(b?"mobile":null),children:[Object(f.jsx)(ce,{onRouteChange:V}),b?null:Object(f.jsx)(me,{onRouteChange:V}),Object(f.jsx)("div",{className:"homeText",children:Object(f.jsx)("h1",{children:"Battleship"})}),Object(f.jsxs)("div",{className:"playGameBtnContainer",children:[Object(f.jsx)(de,{}),Object(f.jsx)("div",{className:"playAIbtnContainer",children:Object(f.jsx)("button",{onClick:se,className:"playAIbtn",children:"Play with Computer"})})]}),Object(f.jsx)("div",{className:"logReg",children:"login"===r?Object(f.jsx)(fe,{onRouteChange:V}):Object(f.jsx)(be,{onRouteChange:V})}),Object(f.jsx)(ie,{})]}):Object(f.jsx)(f.Fragment,{children:"loggedIn"===r||"leaderboard"===r?(null===s||void 0===s||null===(e=s.username)||void 0===e?void 0:e.length)?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"homePageLogged ".concat("leaderboard"===r?"hide":null," ").concat(b?"mobile":null),children:[Object(f.jsx)(ce,{onRouteChange:V}),Object(f.jsx)(pe,{}),Object(f.jsxs)("div",{className:"matchAndBoard ".concat(v?"hide":null),children:[Object(f.jsxs)("div",{className:"playGameBtnContainer",children:[Object(f.jsx)(de,{}),Object(f.jsx)("div",{className:"playAIbtnContainer",children:Object(f.jsx)("button",{onClick:se,className:"playAIbtn",children:"Play with Computer"})})]}),Object(f.jsx)(le,{})]}),Object(f.jsx)("div",{className:"userScore",children:Object(f.jsxs)("h3",{children:[Object(f.jsx)("span",{className:"scoreText",children:"Score:"})," ",Object(f.jsx)("span",{className:"scoreValue",children:s.score})]})}),Object(f.jsx)(ie,{})]}),Object(f.jsxs)("div",{className:"leaderboard ".concat("loggedIn"===r?"hide":null),children:[Object(f.jsx)(ve,{onRouteChange:V}),Object(f.jsx)(ie,{})]})]}):Object(f.jsxs)("div",{className:"leaderboard ".concat(b?"mobile":null),children:[Object(f.jsx)(ve,{onRouteChange:V}),Object(f.jsx)(ie,{})]}):Object(f.jsx)("div",{className:"gamePage ".concat(b?"mobile":"desktop"),children:Object(f.jsx)(ue,{onRouteChange:V})})})]})}),xe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,459)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),s(e),a(e),c(e)}))},ye=Object(i.c)(u);o.a.render(Object(f.jsx)(i.a,{store:ye,children:Object(f.jsx)(Oe,{})}),document.getElementById("root")),xe()},99:function(e,t,n){}},[[453,1,2]]]);
//# sourceMappingURL=main.bc8da53d.chunk.js.map