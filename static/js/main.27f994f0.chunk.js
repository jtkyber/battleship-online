(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{105:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){},463:function(e,t,n){},465:function(e,t,n){},469:function(e,t,n){},470:function(e,t,n){},471:function(e,t,n){},472:function(e,t,n){},502:function(e,t,n){},503:function(e,t,n){},504:function(e,t,n){},505:function(e,t,n){},506:function(e,t,n){"use strict";n.r(t);n(140),n(238),n(278);var r,s,a=n(1),o=n(108),c=n.n(o),i=n(3),u={stored:Object(i.d)({soundOn:!0,musicOn:!0,isMobile:!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isIOS:!!/iPhone|iPad|iPod/i.test(navigator.userAgent)},{storage:"localStorage"}),route:"login",user:null,currentSocket:null,friendSocket:null,opponentName:"",unsortedFriends:[],findMatchInterval:0,checkOppStatusInterval:0,updatLastOnlineInterval:0,getOnlineFriendsInterval:0,search:!1,friendRequests:[],userName:"",password:"",topFive:[],allFriends:[],friendFilter:"",friendSearch:"",friendsOnline:[],gameRoute:"placeShips",playerIsReady:!1,yourTurn:!1,chatText:"",inviteSent:!1,inviteReceived:!1,playerTurnText:"",showFriendsMobile:!1,showChatMobile:!1,audioStarted:!1,shipIsSelected:!1,showGameInstructions:!0,deviceInPortrait:!0,opponentIsReady:!1,setRoute:Object(i.b)((function(e,t){e.route=t})),setUser:Object(i.b)((function(e,t){e.user=t})),setCurrentSocket:Object(i.b)((function(e,t){e.currentSocket=t})),setFriendSocket:Object(i.b)((function(e,t){e.friendSocket=t})),setOpponentName:Object(i.b)((function(e,t){e.opponentName=t})),setUnsortedFriends:Object(i.b)((function(e,t){e.unsortedFriends=t})),setFindMatchInterval:Object(i.b)((function(e,t){e.findMatchInterval=t})),setCheckOppStatusInterval:Object(i.b)((function(e,t){e.checkOppStatusInterval=t})),setUpdatLastOnlineInterval:Object(i.b)((function(e,t){e.updatLastOnlineInterval=t})),setGetOnlineFriendsInterval:Object(i.b)((function(e,t){e.getOnlineFriendsInterval=t})),setSearch:Object(i.b)((function(e,t){e.search=t})),setFriendRequests:Object(i.b)((function(e,t){e.friendRequests=t})),setUserName:Object(i.b)((function(e,t){e.userName=t})),setPassword:Object(i.b)((function(e,t){e.password=t})),setTopFive:Object(i.b)((function(e,t){e.topFive=t})),setAllFriends:Object(i.b)((function(e,t){e.allFriends=t})),setFriendFilter:Object(i.b)((function(e,t){e.friendFilter=t})),setFriendSearch:Object(i.b)((function(e,t){e.friendSearch=t})),setFriendsOnline:Object(i.b)((function(e,t){e.friendsOnline=t})),setGameRoute:Object(i.b)((function(e,t){e.gameRoute=t})),setPlayerIsReady:Object(i.b)((function(e,t){e.playerIsReady=t})),setYourTurn:Object(i.b)((function(e,t){e.yourTurn=t})),setChatText:Object(i.b)((function(e,t){e.chatText=t})),setInviteSent:Object(i.b)((function(e,t){e.inviteSent=t})),setInviteReceived:Object(i.b)((function(e,t){e.inviteReceived=t})),setPlayerTurnText:Object(i.b)((function(e,t){e.playerTurnText=t})),setSoundOn:Object(i.b)((function(e){e.stored.soundOn=!e.stored.soundOn})),setMusicOn:Object(i.b)((function(e){e.stored.musicOn=!e.stored.musicOn})),setIsMobile:Object(i.b)((function(e,t){e.stored.isMobile=t})),setShowFriendsMobile:Object(i.b)((function(e,t){e.showFriendsMobile=t})),setShowChatMobile:Object(i.b)((function(e,t){e.showChatMobile=t})),setAudioStarted:Object(i.b)((function(e){e.audioStarted=!0})),setShipIsSelected:Object(i.b)((function(e,t){e.shipIsSelected=t})),setShowGameInstructions:Object(i.b)((function(e,t){e.showGameInstructions=t})),setDeviceInPortrait:Object(i.b)((function(e,t){e.deviceInPortrait=t})),setOpponentIsReady:Object(i.b)((function(e,t){e.opponentIsReady=t}))},l=(n(463),n(6)),d=n.n(l),h=n(12),p=n(31),m=(n(105),n(0)),f=function(e){for(var t=e.onSquareClicked,n=Object(i.f)((function(e){return{gameRoute:e.gameRoute,route:e.route}})).gameRoute,r=[],s=1;s<11;s++)for(var a=0;a<10;a++)r.push({row:String.fromCharCode(97+a),col:s,colStart:s,rowStart:a+1});var o=function(e){var r=e.target.parentElement.parentElement.parentElement;"gameInProgress"===n&&r.classList.contains("opponentBoard")&&t(e)};return r.map((function(e){return Object(m.jsx)("div",{onClick:o,style:{gridArea:e.row+e.col},className:"singleSquare "+e.row+" "+e.row+e.col,id:e.colStart+"-"+e.rowStart},e.row+e.col)}))},b=n(24),g=n.p+"static/media/ambient-waves.b96c967b.mp3",j=n.p+"static/media/lobby-theme.a9efad87.mp3",v=n.p+"static/media/ship-placement-theme.58d77477.mp3",O=n.p+"static/media/game-theme.07202b2d.mp3",x=n.p+"static/media/button-click.41ea4214.mp3",k=n.p+"static/media/hover-sound.d0a3b451.mp3",y=n.p+"static/media/hit-sound.f966784e.mp3",S=n.p+"static/media/miss-sound.1dd4ce99.mp3",w=n.p+"static/media/ship-sunk.48a88457.mp3",A=n.p+"static/media/notification.00f0a2bd.mp3",I=n.p+"static/media/pick-up-ship.86313e09.mp3",N=n.p+"static/media/drop-ship.adae2f7b.mp3",C=n.p+"static/media/rotate-ship.410a2faf.mp3",F=n.p+"static/media/missile-lock.271bad3e.mp3",E=n.p+"static/media/missile-launch.1ef34a89.mp3",R=n.p+"static/media/incoming-missile.df9be7a9.mp3",T={ambientWaves:new b.Howl({src:g,loop:!0,volume:.2}),lobbyTheme:new b.Howl({src:j,loop:!0,volume:.5}),shipPlacementTheme:new b.Howl({src:v,loop:!0,volume:.5}),gameTheme:new b.Howl({src:O,loop:!0,volume:.3}),buttonClick:new b.Howl({src:x,volume:.6}),hoverSound:new b.Howl({src:k,volume:.6,mute:function(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}}),hitSound:new b.Howl({src:y,volume:.7}),missSound:new b.Howl({src:S,volume:.4}),shipSunkSound:new b.Howl({src:w,volume:.9}),notificationSound:new b.Howl({src:A,volume:.9}),pickUpShip:new b.Howl({src:I,volume:.9}),dropShip:new b.Howl({src:N,volume:.9}),rotateShip:new b.Howl({src:C,volume:.9}),missileLock:new b.Howl({src:F,volume:.9}),missileLaunch:new b.Howl({src:E,volume:.9}),incomingMissile:new b.Howl({src:R,volume:.9})},M=n(32),U=n.n(M),L=(n(465),!1),q=!1,P="hor",B="",G="",H=!1,Y=!1,J=function(){var e=Object(i.f)((function(e){return{gameRoute:e.gameRoute,isMobile:e.stored.isMobile,showGameInstructions:e.showGameInstructions}})),t=e.gameRoute,n=e.isMobile,a=e.showGameInstructions,o=function(e){if(!H&&"placeShips"===t){T.pickUpShip.play();var n=document.querySelector(".userBoard");H=!0,B=e.target.parentElement,n.style.cursor="pointer",B.style.zIndex="-2",B.style.border="2px solid rgba(0, 250, 0, 0.5)",parseInt(e.target.parentElement.offsetWidth)>parseInt(e.target.parentElement.offsetHeight)?P="hor":parseInt(e.target.parentElement.offsetHeight)>parseInt(e.target.parentElement.offsetWidth)&&(P="vert"),B.classList.contains("carrier")?G="carrier":B.classList.contains("battleship")?G="battleship":B.classList.contains("cruiser")?G="cruiser":B.classList.contains("submarine")?G="submarine":B.classList.contains("destroyer")&&(G="destroyer")}},c=function(e,t){var n=U()(e).offset(),r=U()(e).outerHeight(!0),s=U()(e).outerWidth(!0),a=n.top+r,o=n.left+s,c=U()(t).offset(),i=U()(t).outerHeight(!0),u=U()(t).outerWidth(!0),l=c.top+i,d=c.left+u;return!(a<=c.top+2||n.top>=l-2||o<=c.left+2||n.left>=d-2)};window.onclick=function(e){var t,r,s;H||n||!(null===(t=e.target)||void 0===t||null===(r=t.parentElement)||void 0===r||null===(s=r.classList)||void 0===s?void 0:s.contains("ship"))?!n&&H&&e.target.classList.contains("singleSquare")&&!1===q&&u()&&(T.dropShip.play(),B.style.zIndex="3",document.querySelector(".userBoard").style.cursor="default",B.style.border=null,H=!1):o(e)};window.ontouchend=function(e){a||(H&&!L&&u()&&!function(e,t){var n=B.getBoundingClientRect().left,r=B.getBoundingClientRect().right,s=B.getBoundingClientRect().top,a=B.getBoundingClientRect().bottom;return e>n&&e<r&&t>s&&t<a}(e.changedTouches[0].clientX,e.changedTouches[0].clientY)?(T.dropShip.play(),B.style.zIndex="3",document.querySelector(".userBoard").style.cursor="default",B.style.border=null,H=!1):H&&!L?("hor"===P?(P="vert",d(e)):"vert"===P&&(P="hor",d(e)),T.rotateShip.play(),Y=!0,q=!0):H&&L?n&&H&&!1===q&&u()&&(T.dropShip.play(),B.style.zIndex="3",document.querySelector(".userBoard").style.cursor="default",B.style.border=null,H=!1):!H&&e.target.parentElement.classList.contains("ship")&&o(e),L=!1)};var u=function(){var e,t=document.querySelectorAll(".ship"),n=Object(p.a)(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(!r.classList.contains(G)&&c(B,r))return!1}}catch(s){n.e(s)}finally{n.f()}return!0};window.oncontextmenu=function(e){return!n&&H&&(T.rotateShip.play(),"hor"===P?P="vert":"vert"===P&&(P="hor"),d(e),Y=!0,q=!0),!1},window.onkeydown=function(e){"Enter"===e.code&&e.preventDefault(),"Space"===e.code&&void 0!==B.style&&H&&(T.rotateShip.play(),"hor"===P?P="vert":"vert"===P&&(P="hor"),d(e),Y=!0,q=!0)};var l=function(e,t){var n=document.querySelectorAll(".userBoard .singleSquare"),r=null;return n.forEach((function(n){var s=n.getBoundingClientRect().left,a=n.getBoundingClientRect().right,o=n.getBoundingClientRect().top,c=n.getBoundingClientRect().bottom;if(e>s&&e<a&&t>o&&t<c)return console.log(n),void(r=n)})),r},d=function(e){var t,n,a,o;o="touchmove"===e.type?l(e.touches[0].clientX,e.touches[0].clientY):"touchend"===e.type?l(e.changedTouches[0].clientX,e.changedTouches[0].clientY):"Space"===e.code||"contextmenu"===e.type?l(r,s):e.target,q=!1,B.style.transform=null;var c=document.querySelector(".userBoard"),i=document.querySelector(".".concat(G,"Icon")),u=null===(t=o)||void 0===t?void 0:t.id,d=null===u||void 0===u?void 0:u.substring(0,u.indexOf("-")),h=null===u||void 0===u?void 0:u.substring(u.indexOf("-")+1,null===u||void 0===u?void 0:u.length);(c.contains(e.target)||c.contains(o))&&(null===(n=o)||void 0===n||null===(a=n.classList)||void 0===a?void 0:a.contains("singleSquare"))&&!0===H&&("hor"===P?(i.classList.remove("rotate-".concat(G)),d<11-parseInt(B.id)+1?B.style.gridColumn="".concat(d," / ").concat(parseInt(d)+parseInt(B.id)):d>=11-parseInt(B.id)+1&&!0===Y?B.style.gridColumn="11 / ".concat(11-parseInt(B.id)):Y=!1,B.style.gridRow="".concat(h," / ").concat(parseInt(h)+1)):"vert"===P&&(i.classList.add("rotate-".concat(G)),h>parseInt(B.id)-1?B.style.gridRow="".concat(parseInt(h)+1," / ").concat(parseInt(h)-parseInt(B.id)+1):h<=parseInt(B.id)-1&&!0===Y?B.style.gridRow="".concat(parseInt(B.id)+1," / 1"):Y=!1,B.style.gridColumn="".concat(d," / ").concat(parseInt(d)+1)))};return window.onmouseover=function(e){r=e.clientX,s=e.clientY,H&&!n&&d(e)},window.ontouchmove=function(e){L=!0,H&&n&&d(e)},Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{id:"5",className:"ship carrier",children:Object(m.jsx)("div",{className:"carrierIcon"})}),Object(m.jsx)("div",{id:"4",className:"ship battleship",children:Object(m.jsx)("div",{className:"battleshipIcon"})}),Object(m.jsx)("div",{id:"3",className:"ship cruiser",children:Object(m.jsx)("div",{className:"cruiserIcon"})}),Object(m.jsx)("div",{id:"3",className:"ship submarine",children:Object(m.jsx)("div",{className:"submarineIcon"})}),Object(m.jsx)("div",{id:"2",className:"ship destroyer",children:Object(m.jsx)("div",{className:"destroyerIcon"})})]})},Q=function(e){var t=e.socket,n=Object(i.f)((function(e){return{friendSocket:e.friendSocket}})).friendSocket,r=Object(i.e)((function(e){return{setYourTurn:e.setYourTurn}})).setYourTurn,s="";Object(a.useEffect)((function(){return t.on("receive shot",(function(e){var t=document.getElementById(e),n=1e3*T.incomingMissile.duration()-100;T.incomingMissile.play(),setTimeout((function(){u(t),r(!0)}),n)})),function(){t.off("receive shot")}}),[]);var o=function(e,t){var n=U()(e).offset(),r=U()(e).outerHeight(!0),s=U()(e).outerWidth(!0),a=n.top+r,o=n.left+s,c=U()(t).offset(),i=U()(t).outerHeight(!0),u=U()(t).outerWidth(!0),l=c.top+i,d=c.left+u;return!(a<=c.top+2||n.top>=l-2||o<=c.left+2||n.left>=d-2)},c=[],u=function(e){if(l(e)){if(e.classList.add("hit"),e.classList.add("hitMarker"),c.push(s),e.classList.add("_".concat(s,"_userboard")),function(e){var t,n=0,r=Object(p.a)(c);try{for(r.s();!(t=r.n()).done;)t.value===e&&(n+=1)}catch(s){r.e(s)}finally{r.f()}return n}(s)===parseInt(document.querySelector(".".concat(s)).id)){var r=document.querySelector(".".concat(s,"Icon")),a=document.querySelectorAll(".singleSquare");T.shipSunkSound.play();var o,i=Object(p.a)(a);try{for(i.s();!(o=i.n()).done;){var u=o.value;u.classList.contains("_".concat(s,"_userboard"))&&u.classList.remove("hitMarker")}}catch(d){i.e(d)}finally{i.f()}r.classList.add("shipSunkUser")}else T.hitSound.play();t.emit("send result to opponent board",{shotSquare:e.id,shot:"hit",socketid:n,shipHit:s})}else e.classList.add("missMarker"),T.missSound.play(),t.emit("send result to opponent board",{shotSquare:e.id,shot:"miss",socketid:n,shipHit:s})},l=function(e){var t,n=document.querySelectorAll(".ship"),r=Object(p.a)(n);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(o(e,a))return s=a.classList[1],!0}}catch(c){r.e(c)}finally{r.f()}return!1};return Object(m.jsxs)("div",{className:"board userBoard",children:[Object(m.jsxs)("div",{className:"rows",children:[Object(m.jsx)("h3",{children:"A"}),Object(m.jsx)("h3",{children:"B"}),Object(m.jsx)("h3",{children:"C"}),Object(m.jsx)("h3",{children:"D"}),Object(m.jsx)("h3",{children:"E"}),Object(m.jsx)("h3",{children:"F"}),Object(m.jsx)("h3",{children:"G"}),Object(m.jsx)("h3",{children:"H"}),Object(m.jsx)("h3",{children:"I"}),Object(m.jsx)("h3",{children:"J"})]}),Object(m.jsxs)("div",{className:"cols",children:[Object(m.jsx)("h3",{children:"1"}),Object(m.jsx)("h3",{children:"2"}),Object(m.jsx)("h3",{children:"3"}),Object(m.jsx)("h3",{children:"4"}),Object(m.jsx)("h3",{children:"5"}),Object(m.jsx)("h3",{children:"6"}),Object(m.jsx)("h3",{children:"7"}),Object(m.jsx)("h3",{children:"8"}),Object(m.jsx)("h3",{children:"9"}),Object(m.jsx)("h3",{children:"10"})]}),Object(m.jsx)("div",{className:"grid",children:Object(m.jsxs)("div",{className:"allSqaures",children:[Object(m.jsx)(f,{}),Object(m.jsx)(J,{})]})})]})},D=function(e){var t=e.socket,n=Object(i.f)((function(e){return{friendSocket:e.friendSocket,yourTurn:e.yourTurn}})),r=n.friendSocket,s=n.yourTurn,o=Object(i.e)((function(e){return{setYourTurn:e.setYourTurn}})).setYourTurn,c=[];Object(a.useEffect)((function(){return t.on("show result on opponent board",(function(e){var t=document.querySelector(".opponentBoard [id='".concat(e.shotSquare,"']"));if("hit"===e.result&&void 0!==t.classList)if(t.classList.add("hitMarker"),c.push(e.shipHit),t.classList.add("_".concat(e.shipHit)),function(e){var t,n=0,r=Object(p.a)(c);try{for(r.s();!(t=r.n()).done;)t.value===e&&(n+=1)}catch(s){r.e(s)}finally{r.f()}return n}(e.shipHit)===parseInt(document.querySelector(".".concat(e.shipHit)).id)){var n=document.querySelectorAll(".singleSquare");T.shipSunkSound.play();var r,s=Object(p.a)(n);try{for(s.s();!(r=s.n()).done;){var a=r.value;a.classList.contains("_".concat(e.shipHit))&&a.classList.add("shipSunk")}}catch(o){s.e(o)}finally{s.f()}}else T.hitSound.play();else"miss"===e.result&&void 0!==t.classList&&(t.classList.add("missMarker"),T.missSound.play())})),function(){t.off("show result on opponent board")}}),[]);return Object(m.jsxs)("div",{className:"board opponentBoard",children:[Object(m.jsxs)("div",{className:"rows",children:[Object(m.jsx)("h3",{children:"A"}),Object(m.jsx)("h3",{children:"B"}),Object(m.jsx)("h3",{children:"C"}),Object(m.jsx)("h3",{children:"D"}),Object(m.jsx)("h3",{children:"E"}),Object(m.jsx)("h3",{children:"F"}),Object(m.jsx)("h3",{children:"G"}),Object(m.jsx)("h3",{children:"H"}),Object(m.jsx)("h3",{children:"I"}),Object(m.jsx)("h3",{children:"J"})]}),Object(m.jsxs)("div",{className:"cols",children:[Object(m.jsx)("h3",{children:"1"}),Object(m.jsx)("h3",{children:"2"}),Object(m.jsx)("h3",{children:"3"}),Object(m.jsx)("h3",{children:"4"}),Object(m.jsx)("h3",{children:"5"}),Object(m.jsx)("h3",{children:"6"}),Object(m.jsx)("h3",{children:"7"}),Object(m.jsx)("h3",{children:"8"}),Object(m.jsx)("h3",{children:"9"}),Object(m.jsx)("h3",{children:"10"})]}),Object(m.jsx)("div",{className:"grid",children:Object(m.jsx)("div",{className:"allSqaures",children:Object(m.jsx)(f,{onSquareClicked:function(e){!s||e.target.classList.contains("hitMarker")||e.target.classList.contains("missMarker")||(o(!1),T.missileLaunch.play(),t.emit("send shot to opponent",{target:e.target.id,socketid:r}))}})})})]})},V=(n(208),n(511)),Z=function(e){var t=e.socket,n=Object(i.f)((function(e){return{user:e.user,friendRequests:e.friendRequests}})),r=n.user,s=n.friendRequests,o=Object(i.e)((function(e){return{setUnsortedFriends:e.setUnsortedFriends,setFriendRequests:e.setFriendRequests}})),c=o.setUnsortedFriends,u=o.setFriendRequests;Object(a.useEffect)((function(){return l(),t.on("receive friend request",(function(){l()})),function(){t.off("receive friend request")}}),[]);var l=function(){var e=Object(h.a)(d.a.mark((function e(){var t,n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector("nav"),e.prev=1,e.next=4,fetch("https://calm-ridge-60009.herokuapp.com/getFriendRequests?username=".concat(r.username));case 4:if((n=e.sent).ok){e.next=7;break}throw new Error("Could not get friend requests");case 7:return e.next=9,n.json();case 9:null!==(s=e.sent)&&""!==s?(t.style.setProperty("--notification-color","rgba(255,0,0,0.8)"),u(s.split(",")),T.notificationSound.play()):(t.style.setProperty("--notification-color","transparent"),u(null)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(h.a)(d.a.mark((function e(t){var n,s,a,o,c,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.prev=1,e.next=4,fetch("https://calm-ridge-60009.herokuapp.com/getFriendRequests?username=".concat(r.username));case 4:if((s=e.sent).ok){e.next=7;break}throw new Error("Could not get friend requests");case 7:return e.next=9,s.json();case 9:return null!==(a=e.sent)&&""!==a&&((o=a.split(",")).length<=1?n=null:(c=o.indexOf(t))>-1&&(o.splice(c,1),n=o.join(","))),e.next=13,fetch("https://calm-ridge-60009.herokuapp.com/updateFriendRequests",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({requestlist:n,username:r.username})});case 13:if((i=e.sent).ok){e.next=16;break}throw new Error("Could not update friend requests");case 16:return e.next=18,i.json();case 18:e.sent&&l(),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(1),console.log(e.t0);case 25:case"end":return e.stop()}}),e,null,[[1,22]])})));return function(t){return e.apply(this,arguments)}}(),b=function(e){f(e.target.id)},g=function(){var e=Object(h.a)(d.a.mark((function e(n){var s,a,o,i,u,l,h,m,f,b,g,j,v,O,x,k,y,S;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("friend added"),document.querySelector(".addFriendInput").value="",s="",a=[],o="",i="",e.prev=6,e.next=9,fetch("https://calm-ridge-60009.herokuapp.com/findFriend?username=".concat(n));case 9:if((u=e.sent).ok){e.next=12;break}throw new Error("User does not exist");case 12:return e.next=14,u.json();case 14:if((l=e.sent).username!==r.username){e.next=19;break}throw new Error("Cannot add self as friend");case 19:if(!l.username){e.next=89;break}if(m=[],i=l.socketid,!(null===l||void 0===l||null===(h=l.friends)||void 0===h?void 0:h.length)){e.next=26;break}if(!(m=l.friends.split(",")).includes(r.username)){e.next=26;break}throw new Error("You are already a friend of the user");case 26:return m.push(r.username),o=m.length>1?m.join(","):m[0],e.next=30,fetch("https://calm-ridge-60009.herokuapp.com/getFriends?username=".concat(r.username));case 30:if((f=e.sent).ok){e.next=33;break}throw new Error("Problem accessing friends list");case 33:return e.next=35,f.json();case 35:return(null===(b=e.sent)||void 0===b?void 0:b.length)&&b.forEach((function(e){if(a.push(e.username),e.username===n)throw new Error("User already your friend")})),a.push(n),s=a.join(","),e.next=41,fetch("https://calm-ridge-60009.herokuapp.com/addFriend",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r.username,friendlist:s})});case 41:if((g=e.sent).ok){e.next=44;break}throw new Error("Problem adding friend");case 44:return e.next=46,g.json();case 46:if(!e.sent){e.next=80;break}j=[],v=Object(p.a)(a),e.prev=50,v.s();case 52:if((O=v.n()).done){e.next=71;break}return x=O.value,e.prev=54,e.next=57,fetch("https://calm-ridge-60009.herokuapp.com/findFriend?username=".concat(x));case 57:if((k=e.sent).ok){e.next=60;break}throw new Error("User does not exist");case 60:return e.next=62,k.json();case 62:y=e.sent,j.push(y),e.next=69;break;case 66:e.prev=66,e.t0=e.catch(54),console.log(e.t0);case 69:e.next=52;break;case 71:e.next=76;break;case 73:e.prev=73,e.t1=e.catch(50),v.e(e.t1);case 76:return e.prev=76,v.f(),e.finish(76);case 79:c(j);case 80:return e.next=82,fetch("https://calm-ridge-60009.herokuapp.com/addSelfToFriend",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({friendlist:o,friendname:n})});case 82:if((S=e.sent).ok){e.next=85;break}throw new Error("Problem adding self to friendlist of friend");case 85:return e.next=87,S.json();case 87:e.sent&&null!==i&&t.emit("update user status",i);case 89:e.next=94;break;case 91:e.prev=91,e.t2=e.catch(6),console.log(e.t2);case 94:case"end":return e.stop()}}),e,null,[[6,91],[50,73,76,79],[54,66]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(h.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/findFriend?username=".concat(t.target.id));case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("User does not exist");case 6:return e.next=8,n.json();case 8:e.sent.username&&(f(t.target.id),g(t.target.id)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(V.a,{className:"dropdown",children:[Object(m.jsx)(V.a.Toggle,{variant:"success",className:"messageToggle",id:"dropdown-basic",children:Object(m.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAcRJREFUSEvN1TuvTVEUxfHf9YwQRCEeBQlCp1AQpRBfwSMkQqFCTyUhOgmNQoEgfAESiUKp1N3rTYLOM96EDFlHju3svc8+xeU0uzhzrv+ac8w15phJ+I1NAsMwkMRsxD5sxSK8wE2cwy18b7psG2QhrmEdXuEZPmIWlmABxrGpgAeymiBzS+IUHMUJ/Og7JbmHcIxfHVmKl4ModZBpeIOZWI0HDe1YjKfl/9n4Uo2tg+zGeWzA7SGGYxXu4kip7I+UQZDp+IBPmN8majkt5zxHNJxTdPsNGgTpTc8BnB6iil7ITlws2gTYCFmOR8j3SQdItMnhK/CwDbIS94rof4nYAE2bEx997g8LmYGvHSr5/yB5F3nFo1ayBhNN7cq0XcC2Yh3fOrQrDziWcxW7+t2hOsLL8LiY3+YOgF7oDWypTmYVcgZ7EN/6PAIkLX5b3Hl/L78KeYfXWD8CoJcSG8ol59VBDuJkcdVROXHquPOpOkgqi5NOrRAiZhZWdkh8LTHZLdexvRKbBfa+Sfi62+egyziLwziOvQVwpa3kts3YX3HMb0ffgZeqo1oHGxaS/MSuRYwwO/5OZVPWFtQF0taVfwv5CWkmWRrIFhWsAAAAAElFTkSuQmCC",alt:"Message Icon",className:"hasSound"})}),Object(m.jsx)(V.a.Menu,{id:"dropdowns",children:null!==s?s.map((function(e){return Object(m.jsxs)("div",{className:"dropdownItem",children:[Object(m.jsxs)("div",{className:"text",children:["Friend request from ",Object(m.jsx)("h3",{className:"requesterName",children:e})]}),Object(m.jsxs)("div",{className:"acceptReject",children:[Object(m.jsx)("button",{onClick:j,id:e,className:"acceptInvite",children:"Accept"}),Object(m.jsx)("button",{onClick:b,id:e,className:"rejectInvite",children:"Reject"})]})]},e)})):null})]})})},W="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAANVJREFUSEvtldsNwjAMRU8lGIUxmAa2AqZhC8QoSEVGBEXByXVaQP0gUj9aP05ix7cD/WsEhp4w5RxN2PRTEG/DUfArVkEsoa3kl969b9VcUUh+IovJYck2G7IFzkXDDbQCbs9nXbsM6iQWp3qg7KGrqJIo+7IgavaaZY/0RAGkfTEQbybK3c8uVzn1OaBlC8tKmpNcRiZDDsBedDCXk1LLQuU6ArvKf8ITSU8wvT0+/JLztyAnq9CnIF65rAKTIdHG/yFvF0gN6u97sgEuUk77HSzv9Q6B6kcaQhzgbAAAAABJRU5ErkJggg==",X="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAMBJREFUSEvV1T0OQVEQxfEfiUSj0UioLISWaEXsxCIkOolKoxG1SkdiTXTIlfcSofDx3iVuP/97MufMTAFLDFHw2Tuih+1teYCdUPyMea0qYY3uPficQW3K2qDzV+ARxjEUP1gUzMva4zmq6CdBuH6SBzhwpqglsQ0pyw0cBM7QTNORl+K0xys00HoGHqD85vBMsP8Z+E2xQivqaD9T/Co4mnlR4rZAJdaARBnpAI22hL67j6OdpqzH9JAc092tgxdcNzF1tGRORAAAAABJRU5ErkJggg==",z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAZFJREFUSEvt1T1I1lEUx/GPWUIYgTVEQ4saDYWDgjQJYXsEGSiCSDSWQhA4O2tDUFsQCAUZtLQVQZMYDaE4lCKCSEvREBSJFUfuo3/+/J8XX3hC6I73nnO+9/7Oy21Qh9VQB4adQq7iPkYxXesFa4U0YRx38R3HMIkx/KoGqwVyHK/RhRe4jsfoxwdcwrdKoGqQU/iIZtzGg0ywm3iIHziHtXKgSpA+PGUzbx2YLwgSwRfS/hCmikBFkEY8QyR5BZ34WkGOFrxDG17iCjay9nnIUcziQqqiO1ivllgcwQRuYQ7d+Fnyy0NC93sYxJMagudNBpJkI+mSm+d5yDIO48wuACWX1VTWreVe8htLOLsHyKeUn0PlIH+wuA+Q9qxKebn+KeQEnqMHIUPI+hbX8CUnbci1q5c8wjDeJECAYpzE/o39grxCb64aQ9qYaZf/Q/J9cvDkinF+vky3x78So720SqVaZB5DMr6Hwtl1EhdTL2Sdoy/e43Nm83T6BrbGRzoL25ls/1T7GfcwwrZd6wL5C/y5ZhoUNFmSAAAAAElFTkSuQmCC",K="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAVtJREFUSEvt1T8sJmEQx/HPK0cEDaFBNArRoHSVwhVqjUJCVBriGkTnrlZIXH3FUbjqoiJBJ3qVSCiuUVwiJP4kXHB5kn2TzWbfdRveVyI22eTZ7Mx8Z347M1tQgatQAYa3B5nCyjOka8NpKf+iXEXIAh5ywHowilyQGvzNARnBeiUhzThIJDiNb0m5nlNJFb5GkHAex4tD4h++GnfvkGTjlequ15erJTYnV7hH6LhaUvfcML6nzElmJXE5enGJOYyhLmNIkxOfCulGfxQknGcxg5BpF1ZxmAH5iZvY+1RI3H8QO7jGIz5jDbc51s1/QbZwhEmcYB5hiX5IgEIiy9Hd+tRaift+jAJ+wTHC81DUAHG7sJI6ECrfxiZ+IEj3OzLcwH7an7EB9fgTyZWlUhMmsIgLtOMTdpPZ5JC6pOkAfqGxnJBA78NSVNVeOSoJMYP0nTjHWbkgJbX8BxLhaRrnQs3GAAAAAElFTkSuQmCC",_=function(e){var t=e.socket,n=e.onRouteChange,r=Object(i.f)((function(e){return{friendSocket:e.friendSocket,user:e.user,route:e.route,soundOn:e.stored.soundOn,musicOn:e.stored.musicOn,isMobile:e.stored.isMobile,showChatMobile:e.showChatMobile,showFriendsMobile:e.showFriendsMobile}})),s=r.friendSocket,a=r.user,o=r.route,c=r.soundOn,u=r.musicOn,l=r.isMobile,d=r.showChatMobile,h=r.showFriendsMobile,p=Object(i.e)((function(e){return{setSearch:e.setSearch,setSoundOn:e.setSoundOn,setMusicOn:e.setMusicOn,setShowFriendsMobile:e.setShowFriendsMobile,setShowChatMobile:e.setShowChatMobile}})),f=p.setSearch,b=p.setSoundOn,g=p.setMusicOn,j=p.setShowFriendsMobile,v=p.setShowChatMobile,O=function(e){f(!1),n(e),t.emit("send exit game",s)};return Object(m.jsxs)("nav",{className:"nav",children:[Object(m.jsxs)("div",{className:"leftNav",children:[Object(m.jsx)("img",{alt:"sound icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAZNJREFUSEu11b9L1lEUx/GXPwIN0prN1bUhgposEspMssmWQjCqJWxyaAoSrSXBympqda0pGkoQ+gO0f6AEHWwJojTS4sj5gj34PI/49bnL98L33vc599zP59wmex+H0I4N/MbfWlub9sg9jKu4jTd4hR9lwW24jPP4hi08zXlVdr2M4/8lDGEOEeQUnpUFn8MtvMYH9OF0BfgIerCC1eIItTI+g0eYwEf8wcVdwB24jm68wJeAVwOfyEX3sYDNzKQS3IKjaMZd/MIsvgc4JPQcw2hNQEgr6vq24nYqwb14gHtYwzRm8CnAx/AOsWg9QXH0G1iuAo5EYm9I7grOZoABHI8SFuD3edsFpx44jhtZzmMRd/A551MY2S84Mj6JcVzAaJb0JSLJwYMC30yNlwbvLMVSWj2+UY7JnaUoc3mhnkId/11eyC0seq2E3MbS4k+yj2zLbbexX4P8TGNtG6TaCEs/xsM6lu5MS3cl9GstSxfBGtKEisD92eQPtG0GvCGNvihJQ56mAh4dL7KPh7TuY/oPvlCEY7YLExIAAAAASUVORK5CYII=",onClick:function(){l||b()},onTouchStart:function(){l&&b()},className:"hasSound audioToggle soundToggle ".concat(c?"soundOn":"soundOff")}),Object(m.jsx)("img",{alt:"music icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAbxJREFUSEvt1EuIzmEUx/HPyF0kG2nSYCiyICxccil2lpgpSaxElGg0DaFsaLKgXBZDdsrCUtnJRqTYmAg7uWRGRLlfOnXeet83+v/feWtqylOnp+dfz/k+5/c/59diGFbLMDCMOMhkrMZ6HKxWqNFKJmJaVbRjGZZjAUZhDLUKlYHMwCrMwxy0YRZm4j2e4lnuS7FpKJBOnEfI8Q53cQf38AKf8DETH8OBoUB24jIWoR/jMiZgCdZkLMbolKxGoTJyVSCxT8fCjPn4ipd4lVWFjOuaqeRzJn2MR3iA53iNN3ibUp1qBrIWD/GjKn7VDfMhNAWZig8FDjFyIdFpm7ENX7LNY+JLddfYbNNQZysuol6umO5dOI2fKWM4QnwvhMxGN7bkxUHM/QtkEu7jCfYh5uYcNpSBXMBGXMmWjdeGhdRXMiXb9wjOZAXH0xzHFxlk+FEfjqYMXTjxj0pu4xt2ICq7hJinlUWQAVzF4ZyHHuxOUwyPqqzQvgMn0YrfOfV7caMIcjad9Hq+MhLdxJ48V98PW1+RVhI//1Ya5/ciSOi/H9vT8K6hNy0kXtvwKmOQDSetv/Af0pCEfwCqzmMah/JHMAAAAABJRU5ErkJggg==",onClick:function(){l||g()},onTouchStart:function(){l&&g()},className:"hasSound audioToggle musicToggle ".concat(u?"musicOn":"musicOff")})]}),Object(m.jsx)("div",{className:"rightNav",children:"login"===o||"register"===o?Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("img",{className:"hasSound leaderboardIcon",src:W,alt:"leaderboard",value:"goToLeaderboard",onClick:n})}):"loggedIn"===o?l?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("img",{className:"hasSound friendsIcon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAxdJREFUSEvd1lnIV1UUBfCfjSRlpASN2EiWjRRNKNGEUQ+mNNFLZPVSVFJBgTQRQeVLSgMRFGUUQSUpZjRRkhQ0h9FI5tRAk4UN0iTrY1+5HS74IPTQgQ8+7r3nrL3XWnud/yj/wRq1mRh74hZsiz/wFua0Z7YgW2MRDsJf2AKzcR/WN5v3xgM4B79hSxyCm/AhrsA/2dMHGY37cSfe6B04FbfjiDqsezULr+DVATauwTeY14L8iGPx8cCmANyK03vvvsJ4vIwTq9Nt8BH2xRrs1geZgS/xbAMQCk7CC/V+1977xXgSv+AM7FcHf4pncBcO7YO8U3T0McLvAjxYNKWLVNyt0PEdjmpo3A7zMRExxkZNPseEqjZixwBP4HKMwY3I5gs6MfFQfXf+AL0p+k1c0oKktadxcrMpvMYx4fvCHsju5aBrB0DSSQDS6b86iW2fx+Rm0x64Dts3IFuVVQ/Dr709+S6uO7J71lk4dO2DT3BgzUj3zbSiKtxf1RSQwl7CFLxX7nsMeyFuHVktSISdi1OwrsQL9wEeix8akOuLymh2TM3MzZheDhsECWh8H4/Hrqn0YHyLe6qT3wsoE58DU0A6SQFn4nCchePxc9tJRD+vhirtZr2O7ysuJmFlPU8KZJpvqJRYUcXEUdHwUZyK/bG2oytVzMTDuLSAMmjRKjTF1smjVPg3HsHRWF78H4clNZCZnwxvnoXycQG5CDtUZnWUJ6tCVTh/t6fD19VNNAsVZ+PqmuwUsLBiKYP7RcXKbQH5oFodScxNrBx0MU7rfZd5WYadagCTymGgW2sCkkA8oCY+g3j3ANBr1X4CMTa+skQOHaEmdu1AYvXLsLRYWBaQtJVNETuXzx0DIHFbtBqHiJ57JO55Ec8hjss1EZ1i5dwlCdd0NCcg+ScREEtG5CGQ1ZVbO5f49+KEmouAhLIkwFr8VCC55D4LeEDeL+GSXeF6CCTxHTvGnqErf+E+hwakXekkl9nbOf//BZKceQo7VkjmLmjXuXi8gjLiJmV3wZ9dnDcbQv2qct30zf1JtKm5Gnm/AZ5HzANG5KjiAAAAAElFTkSuQmCC",alt:"friends",onClick:function(){return j(!h)}}),Object(m.jsx)(Z,{socket:t}),Object(m.jsx)("img",{className:"hasSound leaderboardIcon",src:W,alt:"leaderboard",value:"goToLeaderboard",onClick:n}),Object(m.jsx)("img",{className:"hasSound logOutIcon",src:X,alt:"log out",value:"logOut",onClick:n})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Z,{socket:t}),Object(m.jsx)("img",{className:"hasSound leaderboardIcon",src:W,alt:"leaderboard",value:"goToLeaderboard",onClick:n}),Object(m.jsx)("img",{className:"hasSound logOutIcon",src:X,alt:"log out",value:"logOut",onClick:n})]}):Object(m.jsx)(m.Fragment,{children:"leaderboard"===o?(null===a||void 0===a?void 0:a.username)?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("img",{className:"hasSound goHomeIcon",src:z,alt:"go home",value:"goHome",onClick:n}),Object(m.jsx)("img",{className:"hasSound logOutIcon",src:X,alt:"log out",value:"logOut",onClick:n})]}):Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("img",{className:"hasSound goBackIcon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAdFJREFUSEu91curTmEUx/HPkVskSbklMnAbmchAnInkD5CBmLhkykBiwkBRhkbUkVIyMTinQ1EGzEmR+z0Dl9ySkruW1iu99n733s7OmuzBXmt9n7We31pPn/9gff/AWIIvuFk3tglkGc5jDCZiFp7VAdWBbMAR3MdmXMUPTMWbkUACvgnH8AiL8SkTzsUtTKgDCJ+iStbgDE5iJ151JduP5Vg1Eki0Yh4elySZhGuYhjl4XQUrquQ0ruBgRfAKXMJaDPbyLYKMwlfEt8pCZU+xAyfKnMvUNZz3crSKgvH4gIV4UORfBpmJO5iccq1iLcBtjMb3budec/IEW3Ahgw5gAA9LiGdxA7uaQGbjOqZkUKySeznxK/G8APYx5ycU+tuqJj5asD4VFLKO6Q/ARWzEqS5QSHspPjeBxL46l6ebgXcZPC7vbAjb/0i4B99wqAkkfGMRvk8FdXfoBfblbot/67ANq5tCeikr5BvVhRrfJmQrYjXVvpMq6cb/OHncTz/2JvRw25DIFxtibMo7hrKzsX+xqtRVp5LwCclOTzF0JN9quzqQl9iN402GsW4V83E3q1hUFNRGuy7n+xPvS8zIX9YGJJKHfGPtFFobkMq2/gQE4FUaGykeQwAAAABJRU5ErkJggg==",alt:"go back",value:"goToLogin",onClick:n})}):"guest"===a.hash?Object(m.jsxs)(m.Fragment,{children:[l?Object(m.jsx)("div",{className:"chatIconContainer",children:Object(m.jsx)("img",{className:"hasSound chatIcon",src:K,alt:"chat",onClick:function(){return v(!d)}})}):null,Object(m.jsx)("img",{className:"hasSound logOutIcon",src:X,alt:"log out",value:"logOut",onClick:O})]}):Object(m.jsxs)(m.Fragment,{children:[l?Object(m.jsx)("div",{className:"chatIconContainer",children:Object(m.jsx)("img",{className:"hasSound chatIcon",src:K,alt:"chat",onClick:function(){return v(!d)}})}):null,Object(m.jsx)("img",{className:"hasSound goHomeIcon",src:z,alt:"go home",value:"goHome",onClick:O}),Object(m.jsx)("img",{className:"hasSound logOutIcon",src:X,alt:"log out",value:"logOut",onClick:O})]})})})]})},$=function(e){var t=e.socket,n=Object(i.f)((function(e){return{friendSocket:e.friendSocket,opponentName:e.opponentName,chatText:e.chatText,showChatMobile:e.showChatMobile,isMobile:e.stored.isMobile}})),r=n.friendSocket,s=n.opponentName,o=n.chatText,c=n.showChatMobile,u=n.isMobile,l=Object(i.e)((function(e){return{setChatText:e.setChatText}})).setChatText,d=document.querySelector(".chatBox"),h=document.querySelector(":root");Object(a.useEffect)((function(){return c&&h.style.setProperty("--chatNotificationDisplay","none"),document.addEventListener("keyup",f),t.on("receive msg",(function(e){p(e)})),function(){t.off("receive msg"),document.removeEventListener("keyup",f)}}),[d,c,o]);var p=function(e){var t=document.createElement("DIV");t.classList.add("message");var n=document.createElement("H4");n.classList.add("opponentText");var r=document.createElement("H5");r.classList.add("oppName");var a=document.createTextNode(e),o=document.createTextNode(s);r.appendChild(o),n.appendChild(a),t.appendChild(r),t.appendChild(n),d.appendChild(t),d.scrollTop=d.scrollHeight,c||(h.style.setProperty("--chatNotificationDisplay","block"),T.notificationSound.play())},f=function(e){if("Enter"===e.key&&""!==o){e.preventDefault(),T.buttonClick.play();var n=document.createElement("DIV");n.classList.add("message");var s=document.createElement("H4");s.classList.add("userText");var a=document.createElement("H5");a.classList.add("userName");var c=document.createTextNode(o),i=document.createTextNode("You");a.appendChild(i),s.appendChild(c),n.appendChild(a),n.appendChild(s),d.appendChild(n),l(""),t.emit("send msg",{socketid:r,message:o}),document.querySelector(".chatInput").value="",d.scrollTop=d.scrollHeight}};return Object(m.jsxs)("div",{className:"".concat(!c&&u?"hide":null," ").concat(u?"chatContainerMobile":"chatContainer"),children:[Object(m.jsx)("div",{className:"chatBox"}),Object(m.jsx)("input",{onChange:function(e){return l(e.target.value)},type:"text",className:"chatInput",placeholder:"Type Here..."})]})},ee=(n(469),function(){return Object(m.jsx)("footer",{children:Object(m.jsx)("div",{className:"footer"})})}),te=function(e){var t=e.socket,n=e.onRouteChange,r=Object(i.f)((function(e){return{friendSocket:e.friendSocket,opponentName:e.opponentName,user:e.user,checkOppStatusInterval:e.checkOppStatusInterval,gameRoute:e.gameRoute,playerIsReady:e.playerIsReady,yourTurn:e.yourTurn,playerTurnText:e.playerTurnText,isMobile:e.stored.isMobile,showGameInstructions:e.showGameInstructions,opponentIsReady:e.opponentIsReady}})),s=r.friendSocket,o=r.opponentName,c=r.user,u=r.checkOppStatusInterval,l=r.gameRoute,f=r.playerIsReady,b=r.yourTurn,g=r.playerTurnText,j=r.isMobile,v=r.showGameInstructions,O=r.opponentIsReady,x=Object(i.e)((function(e){return{setCheckOppStatusInterval:e.setCheckOppStatusInterval,setRoute:e.setRoute,setGameRoute:e.setGameRoute,setPlayerIsReady:e.setPlayerIsReady,setYourTurn:e.setYourTurn,setPlayerTurnText:e.setPlayerTurnText,setOpponentIsReady:e.setOpponentIsReady}})),k=x.setCheckOppStatusInterval,y=x.setRoute,S=x.setGameRoute,w=x.setPlayerIsReady,A=x.setYourTurn,I=x.setPlayerTurnText,N=x.setOpponentIsReady,C=j?"Tap once on the ship you want to move":"Click once on the ship you want to move",F=j?"When selected, tap the ship again":'Right click or press "Spacebar" while a ship is selected',E=j?"Drag the selected ship and let go when the ship is in position":"Move the ship into position and left click again when ready to release";Object(a.useEffect)((function(){return w(!1),N(!1),S("placeShips"),t.on("receive game over",(function(){clearInterval(u),"guest"!==(null===c||void 0===c?void 0:c.hash)&&T(),setTimeout((function(){window.alert("You Won!!!"),"guest"===c.hash?y("login"):y("loggedIn")}),300)})),t.on("receive exit game",(function(){window.alert("Opponent has left the game"),"guest"===c.hash?y("login"):y("loggedIn")})),k(setInterval(R,2e3)),function(){clearInterval(u),t.off("receive ready status"),t.off("receive game over"),t.off("receive exit game")}}),[]),Object(a.useEffect)((function(){return t.on("receive ready status",(function(){f&&S("gameInProgress"),N(!0)})),function(){t.off("receive ready status")}}),[f]),Object(a.useEffect)((function(){var e=document.querySelectorAll(".userBoard .ship"),n=0;b?(I("Your Turn"),e.forEach((function(e){e.childNodes[0].classList.contains("shipSunkUser")&&(n+=1)})),n>=5&&(t.emit("game over",s),setTimeout((function(){window.alert("You Lose"),"guest"===c.hash?y("login"):y("loggedIn")}),300))):I("".concat(o,"'s Turn!"))}),[b]);var R=function(){var e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/checkIfOppInGame?username=".concat(o));case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Error");case 6:return e.next=8,t.json();case 8:e.sent||(window.alert("Opponent has left the game"),"guest"===c.hash?y("login"):y("loggedIn")),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/updateWins",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:c.username})});case 3:return t=e.sent,e.next=6,t.json();case 6:if(e.sent){e.next=9;break}throw new Error("Could not increment wins");case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(_,{socket:t,onRouteChange:n}),Object(m.jsx)(Q,{socket:t}),!j||v?Object(m.jsxs)("div",{className:"instructions",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{children:"Picking up a ship"}),Object(m.jsx)("h5",{children:C})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{children:"Rotation"}),Object(m.jsx)("h5",{children:F})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{children:"Dropping a ship"}),Object(m.jsx)("h5",{children:E})]})]}):null,Object(m.jsx)("h3",{className:"playerTurnText ".concat("gameInProgress"!==l?"hide":null),children:"".concat("gameInProgress"===l?g:"")}),"gameInProgress"!==l?Object(m.jsx)("div",{className:"readyBtn",children:Object(m.jsx)("button",{onClick:function(){var e,n=document.querySelectorAll(".ship"),r=document.querySelector(".readyBtn"),a=document.querySelector(".instructions"),o=!0,c=Object(p.a)(n);try{for(c.s();!(e=c.n()).done;){var i=e.value;if(parseInt(i.style.zIndex)<0)return i.style.border="3px solid rgba(255, 0, 0, 0.8)",void(o=!1)}}catch(h){c.e(h)}finally{c.f()}if(o){w(!0),j||a.classList.add("hide"),r.childNodes[0].innerText="".concat(j?"\u2022\u2022\u2022":"Waiting...");var u,l=Object(p.a)(n);try{for(l.s();!(u=l.n()).done;){var d=u.value;d.style.cursor="default",d.style.border=null,d.style.zIndex="3"}}catch(h){l.e(h)}finally{l.f()}O?(S("gameInProgress"),A(!0)):(r.style.opacity="0.3",S("waiting")),t.emit("send ready status",s)}},className:"btn",children:j?"\u2714\ufe0f":"Ready"})}):null,Object(m.jsx)(D,{socket:t}),Object(m.jsx)($,{socket:t}),Object(m.jsx)(ee,{})]})},ne=(n(470),function(){return Object(m.jsx)("div",{className:"board homeBoard",children:Object(m.jsx)("div",{className:"grid",children:Object(m.jsx)("div",{className:"allSqaures",children:Object(m.jsx)(f,{})})})})}),re=(n(471),function(e){var t=e.socket,n=Object(i.f)((function(e){return{currentSocket:e.currentSocket,search:e.search,user:e.user,route:e.route}})),r=n.currentSocket,s=n.search,o=n.user,c=n.route,u=Object(i.e)((function(e){return{setSearch:e.setSearch,setFindMatchInterval:e.setFindMatchInterval,setOpponentName:e.setOpponentName,setFriendSocket:e.setFriendSocket,setRoute:e.setRoute,setUser:e.setUser}})),l=u.setSearch,p=u.setFindMatchInterval,f=u.setOpponentName,b=u.setFriendSocket,g=u.setRoute,j=u.setUser;Object(a.useEffect)((function(){return"login"!==c&&"register"!==c||"guest"===(null===o||void 0===o?void 0:o.hash)&&k(),t.on("receive go to game",(function(e){f(e.senderName),b(e.senderSocket),g("game")})),function(){t.off("receive go to game")}}),[]),Object(a.useEffect)((function(){s&&p(setInterval(x,1e3))}),[s,o]);var v=function(){var e=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/updateSearching",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o.username,search:!1})});case 3:if(e.sent.ok){e.next=6;break}throw new Error("Problem updating searching status");case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/updateSearching",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o.username,search:!s})});case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Problem updating searching status");case 6:return e.next=8,t.json();case 8:e.sent&&l(!s),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(h.a)(d.a.mark((function e(){var n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/findMatch?username=".concat(o.username,"&socketid=").concat(o.socketid));case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("Could not find match");case 6:return e.next=8,n.json();case 8:(null===(s=e.sent)||void 0===s?void 0:s.username)&&(b(s.socketid),f(s.username),v(),t.emit("send go to game",{receiverSocket:s.socketid,senderSocket:r,senderName:o.username}),l(!1),g("game")),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/removeGuestUser",{method:"delete",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:null===o||void 0===o?void 0:o.username})});case 3:if(e.sent.ok){e.next=6;break}throw new Error("Problem removing guest");case 6:l(!1),j(null),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(h.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/addGuestUser",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({socketid:r})});case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Problem adding guest");case 6:return e.next=8,t.json();case 8:return n=e.sent,e.next=11,j(n);case 11:l(!0),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"findMatchContainer ".concat("login"===c||"register"===c?"playAsGuest":null),children:"login"===c||"register"===c?Object(m.jsx)("button",{onClick:s?k:y,className:"findMatch",children:s?"Searching...":"Play as Guest"}):Object(m.jsx)("button",{onClick:O,className:"findMatch",children:s?"Searching...":"Find Match"})})}),se=(n(472),function(e){var t=e.friendInGame,n=e.socket,r=e.name,s=e.status,o=Object(i.f)((function(e){return{friendSocket:e.friendSocket,route:e.route,currentSocket:e.currentSocket,user:e.user}})),c=o.friendSocket,u=o.route,l=o.currentSocket,p=o.user,f=Object(i.e)((function(e){return{setOpponentName:e.setOpponentName,setFriendSocket:e.setFriendSocket,setRoute:e.setRoute}})),b=f.setOpponentName,g=f.setFriendSocket,j=f.setRoute;Object(a.useEffect)((function(){return n.on("receive go to game",(function(e){b(e.senderName),g(e.senderSocket),j("game")})),n.on("receive invite",(function(e){return v(e)})),function(){n.off("receive go to game"),n.off("receive invite")}}),[]),Object(a.useEffect)((function(){var e=document.querySelector(".btn".concat(r));"offline"===s||t||(e.style.opacity="0.8",e.disabled=!1,e.childNodes[0].nodeValue="Invite")}),[s,t]);var v=function(e){var t=document.querySelector(".btn".concat(e.username));"loggedIn"===u&&null!==t&&(!0===t.disabled&&(t.style.opacity="0.8",t.disabled=!1),t.childNodes[0].nodeValue="Accept",g(e.socketid))},O=function(){var e=Object(h.a)(d.a.mark((function e(t){var r,s,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.target.id,e.prev=1,e.next=4,fetch("https://calm-ridge-60009.herokuapp.com/findFriend?username=".concat(r));case 4:return s=e.sent,e.next=7,s.json();case 7:(a=e.sent).socketid&&(n.emit("send invite",{currentSocket:l,username:p.username,socketid:a.socketid}),t.target.childNodes[0].nodeValue="Invite sent",t.target.style.opacity="0.4",t.target.style.cursor="default",t.target.disabled=!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{id:r,value:r,className:"friendBlock",children:[Object(m.jsxs)("div",{className:"friendText",children:[Object(m.jsx)("h3",{children:r}),t&&"online"===s?Object(m.jsx)("button",{disabled:!0,className:"btn".concat(r," friendInGameBtn"),children:"In Game"}):"online"===s?Object(m.jsx)("button",{className:"btn".concat(r," friendOnlineBtn"),onClick:function(e){"Invite"===e.target.innerHTML?O(e):"Accept"===e.target.innerHTML&&function(e){n.emit("send go to game",{receiverSocket:c,senderSocket:l,senderName:p.username}),b(e.target.id),j("game")}(e)},id:r,children:"Invite"}):Object(m.jsx)("button",{disabled:!0,className:"btn".concat(r," friendOfflineBtn"),children:"Offline"})]}),Object(m.jsx)("div",{id:s,className:s})]})}),ae=(n(209),function(e){var t,n=e.socket,r=Object(i.f)((function(e){return{unsortedFriends:e.unsortedFriends,user:e.user,allFriends:e.allFriends,friendFilter:e.friendFilter,friendSearch:e.friendSearch,friendsOnline:e.friendsOnline,getOnlineFriendsInterval:e.getOnlineFriendsInterval,isMobile:e.stored.isMobile,showFriendsMobile:e.showFriendsMobile}})),s=r.unsortedFriends,o=r.user,c=r.allFriends,u=r.friendFilter,l=r.friendSearch,p=r.friendsOnline,f=r.getOnlineFriendsInterval,b=r.isMobile,g=r.showFriendsMobile,j=Object(i.e)((function(e){return{setUnsortedFriends:e.setUnsortedFriends,setAllFriends:e.setAllFriends,setFriendFilter:e.setFriendFilter,setFriendSearch:e.setFriendSearch,setFriendsOnline:e.setFriendsOnline,setGetOnlineFriendsInterval:e.setGetOnlineFriendsInterval}})),v=j.setUnsortedFriends,O=j.setAllFriends,x=j.setFriendFilter,k=j.setFriendSearch,y=j.setFriendsOnline,S=j.setGetOnlineFriendsInterval;Object(a.useEffect)((function(){return I(),n.on("update friend status",(function(){A()})),S(setInterval(A,1e3)),function(){n.off("update friend status"),clearInterval(f)}}),[]),Object(a.useEffect)((function(){w()}),[p,s]);var w=function(){var e,n=[],r=[],a=[];s.forEach((function(e){var s;if(e.username===(null===(s=t)||void 0===s?void 0:s.username))r.push(e);else{var a=!0;p.forEach((function(t){if(t.username===e.username)return a=!1})),a&&n.push(e)}})),a=p.sort((function(e,t){return e.username.toLowerCase()>t.username.toLowerCase()?1:-1})),e=n.sort((function(e,t){return e.username.toLowerCase()>t.username.toLowerCase()?1:-1})),r.length?O(r.concat(a).concat(e)):O(a.concat(e))},A=function(){var e=Object(h.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/getFriendsOnline?username=".concat(o.username));case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Could not get online friends");case 6:return e.next=8,t.json();case 8:n=e.sent,y(n),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(h.a)(d.a.mark((function e(){var t,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/getFriends?username=".concat(o.username));case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("Problem accessing friends list");case 6:return e.next=8,n.json();case 8:r=e.sent,(null===o||void 0===o||null===(t=o.friends)||void 0===t?void 0:t.length)&&(null===r||void 0===r?void 0:r.length)?(v(r),A()):(O([]),v([]),y([])),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(h.a)(d.a.mark((function e(){var r,s,a,c,i,u,h,p,m,f,b;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.querySelector(".addFriendInput").value="",r=document.querySelector(".friendsContainer"),s="",a="",c="",i=[],e.prev=6,e.next=9,fetch("https://calm-ridge-60009.herokuapp.com/getFriendRequests?username=".concat(o.username));case 9:if((u=e.sent).ok){e.next=12;break}throw new Error("Could not get friend requests");case 12:return e.next=14,u.json();case 14:if(null===(h=e.sent)||""===h){e.next=20;break}if(!h.split(",").includes(l)){e.next=20;break}throw r.style.setProperty("--add-friend-alert",'"User already sent you a request"'),new Error("User already sent you a request");case 20:return e.next=22,fetch("https://calm-ridge-60009.herokuapp.com/findFriend?username=".concat(l));case 22:if((p=e.sent).ok){e.next=26;break}throw r.style.setProperty("--add-friend-alert",'"User does not exist"'),new Error("User does not exist");case 26:return e.next=28,p.json();case 28:if((m=e.sent).username!==o.username){e.next=34;break}throw r.style.setProperty("--add-friend-alert",'"Cannot add yourself as a friend"'),new Error("Cannot add self as friend");case 34:if(!m.username){e.next=60;break}if(s=m.username,a=m.socketid,f=[],null!==m.friends&&""!==m.friends&&(f=m.friends.split(",")),null===m.friendrequests||""===m.friendrequests){e.next=55;break}if(!(i=m.friendrequests.split(",")).includes(o.username)){e.next=46;break}throw r.style.setProperty("--add-friend-alert",'"You have already sent them a request"'),new Error("You have already sent them a request");case 46:if(!f.includes(o.username)){e.next=51;break}throw r.style.setProperty("--add-friend-alert",'"User is already your friend"'),new Error("User is already your friend");case 51:i.push(o.username),c=m.friendrequests.concat(",".concat(o.username));case 53:e.next=60;break;case 55:if(!f.includes(o.username)){e.next=58;break}throw r.style.setProperty("--add-friend-alert",'"User is already your friend"'),new Error("User is already your friend");case 58:c=o.username,i=[o.username];case 60:return r.style.setProperty("--add-friend-alert",'""'),e.next=63,fetch("https://calm-ridge-60009.herokuapp.com/updateFriendRequests",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({requestlist:c,username:s})});case 63:if((b=e.sent).ok){e.next=66;break}throw new Error("Could not add self to friendrequests of friend");case 66:return e.next=68,b.json();case 68:e.sent&&(n.emit("send friend request",a),t=m),e.next=75;break;case 72:e.prev=72,e.t0=e.catch(6),console.log(e.t0);case 75:case"end":return e.stop()}}),e,null,[[6,72]])})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"friendsContainer ".concat(b?"mobile":null," ").concat(!g&&b?"hide":null),children:[Object(m.jsxs)("div",{className:"friendsContainerHeader",children:[Object(m.jsx)("h2",{children:"Friends"}),Object(m.jsx)("input",{className:"friendSearch",onChange:function(e){return x(e.target.value)},type:"text",placeholder:"Filter friends"})]}),Object(m.jsx)("div",{className:"friendsSection",children:Object(m.jsx)("div",{className:"friendsListContainer",children:c.length?Object(m.jsx)("div",{className:"friendsList",children:c.map((function(e){return e.username&&e.username.toLowerCase().includes(u.toLowerCase())?(t=e.lastonline)>Date.now()-5e3&&t?Object(m.jsx)(se,{friendInGame:e.ingame,socket:n,name:e.username,status:"online"},e.username):Object(m.jsx)(se,{friendInGame:e.ingame,socket:n,name:e.username,status:"offline"},e.username):null;var t}))}):Object(m.jsx)("h4",{className:"noFriends",children:"No friends have been added"})})}),Object(m.jsxs)("div",{className:"addFriend",children:[Object(m.jsx)("h3",{className:"addFriendText",children:"Add a friend"}),Object(m.jsx)("input",{className:"addFriendInput",onChange:function(e){return k(e.target.value)},type:"text",placeholder:"Enter a username"}),Object(m.jsx)("button",{className:"friendRequestBtn",onClick:N,children:"Send"})]})]})}),oe=function(e){e.onRouteChange;return Object(m.jsxs)("div",{className:"friendsContainer",children:[Object(m.jsx)("div",{className:"friendsContainerHeader",children:Object(m.jsx)("h2",{children:"Friends"})}),Object(m.jsx)("div",{className:"logToSeeFriendsText",children:Object(m.jsx)("h3",{children:"Log in to add and view friends here"})})]})},ce=function(e){var t=e.onRouteChange,n=Object(i.f)((function(e){return{currentSocket:e.currentSocket,userName:e.userName,password:e.password}})),r=n.currentSocket,s=n.userName,a=n.password,o=Object(i.e)((function(e){return{setUserName:e.setUserName,setPassword:e.setPassword,setUser:e.setUser}})),c=o.setUserName,u=o.setPassword,l=o.setUser,p=document.querySelector(".login"),f=function(){var e=Object(h.a)(d.a.mark((function e(n){var o,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/login",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s,password:a,socketid:r})});case 3:return o=e.sent,e.next=6,o.json();case 6:(c=e.sent).username?(l(c),t(n)):"no socketid"===c?p.style.setProperty("--reg-log-alert",'"Server error. Please try again"'):null!==p&&p.style.setProperty("--reg-log-alert",'"The username or password you entered is incorrect"'),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"login",children:[Object(m.jsx)("h1",{children:"Log In"}),Object(m.jsxs)("div",{className:"username",children:[Object(m.jsx)("h4",{children:"Username"}),Object(m.jsx)("input",{placeholder:"Username...",onChange:function(e){return c(e.target.value)},type:"text"})]}),Object(m.jsxs)("div",{className:"password",children:[Object(m.jsx)("h4",{children:"Password"}),Object(m.jsx)("input",{placeholder:"Password...",onChange:function(e){return u(e.target.value)},type:"password"})]}),Object(m.jsx)("button",{className:"loginBtn",value:"login",onClick:f,children:"Login"}),Object(m.jsx)("button",{value:"goToRegister",onClick:t,className:"changeLogReg",children:"Register"})]})},ie=function(e){var t=e.onRouteChange,n=Object(i.f)((function(e){return{currentSocket:e.currentSocket,userName:e.userName,password:e.password}})),r=n.currentSocket,s=n.userName,a=n.password,o=Object(i.e)((function(e){return{setUserName:e.setUserName,setPassword:e.setPassword,setUser:e.setUser}})),c=o.setUserName,u=o.setPassword,l=o.setUser,d=document.querySelector(".register");return Object(m.jsxs)("div",{className:"register",children:[Object(m.jsx)("h1",{children:"Register"}),Object(m.jsxs)("div",{className:"username",children:[Object(m.jsx)("h4",{children:"Username"}),Object(m.jsx)("input",{placeholder:"Username...",onChange:function(e){return c(e.target.value)},type:"text"})]}),Object(m.jsxs)("div",{className:"password",children:[Object(m.jsx)("h4",{children:"Password"}),Object(m.jsx)("input",{placeholder:"Password...",onChange:function(e){return u(e.target.value)},type:"password"})]}),Object(m.jsx)("button",{className:"registerBtn",value:"register",onClick:function(e){s.length<5?d.style.setProperty("--reg-log-alert",'"Username must be at least 5 characters"'):s.length>10?d.style.setProperty("--reg-log-alert",'"Username cannot be more than 10 characters"'):a.length<5?d.style.setProperty("--reg-log-alert",'"Password must be at least 5 characters"'):fetch("https://calm-ridge-60009.herokuapp.com/register",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s,password:a,socketid:r})}).then((function(e){return e.json()})).then((function(n){n.username?(l(n),t(e)):"no socketid"===n?d.style.setProperty("--reg-log-alert",'"Server error. Please try again"'):n.ok||d.style.setProperty("--reg-log-alert",'"Username has already been taken"')}))},children:"Register"}),Object(m.jsx)("button",{value:"goToLogin",onClick:t,className:"changeLogReg",children:"Login"})]})},ue=function(e){var t=e.onRouteChange,n=e.socket,r=Object(i.f)((function(e){return{topFive:e.topFive,route:e.route}})),s=r.topFive,o=r.route,c=Object(i.e)((function(e){return{setTopFive:e.setTopFive}})).setTopFive;Object(a.useEffect)((function(){"leaderboard"===o&&u()}),[o]);var u=function(){var e=Object(h.a)(d.a.mark((function e(){var t,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<5)){e.next=14;break}return e.next=4,fetch("https://calm-ridge-60009.herokuapp.com/getTopFive?userNum=".concat(t));case 4:if((n=e.sent).ok){e.next=7;break}throw new Error("Error");case 7:return e.next=9,n.json();case 9:r=e.sent,c(r);case 11:t++,e.next=1;break;case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(_,{onRouteChange:t,socket:n}),s.length?Object(m.jsx)("div",{className:"topFiveContainer",children:Object(m.jsx)("div",{className:"topFive",children:s.map((function(e){return Object(m.jsxs)("h3",{className:"LBplayer",children:[" ",e.username," : ",Object(m.jsx)("span",{className:"wins",children:e.wins})," wins "]},e.username)}))})}):null]})},le=n(228),de=n.n(le)()("https://safe-mesa-81492.herokuapp.com/"),he=(n(502),n(503),n(504),n(505),!0);var pe=function(){var e,t=Object(i.f)((function(e){return{getOnlineFriendsInterval:e.getOnlineFriendsInterval,route:e.route,user:e.user,friendSocket:e.friendSocket,findMatchInterval:e.findMatchInterval,checkOppStatusInterval:e.checkOppStatusInterval,search:e.search,updatLastOnlineInterval:e.updatLastOnlineInterval,soundOn:e.stored.soundOn,musicOn:e.stored.musicOn,isMobile:e.stored.isMobile,showFriendsMobile:e.showFriendsMobile,audioStarted:e.audioStarted,isIOS:e.stored.isIOS,deviceInPortrait:e.deviceInPortrait,gameRoute:e.gameRoute}})),n=t.getOnlineFriendsInterval,r=t.route,s=t.user,o=t.friendSocket,c=t.findMatchInterval,u=t.checkOppStatusInterval,l=t.search,p=t.updatLastOnlineInterval,f=t.soundOn,b=t.musicOn,g=t.isMobile,j=t.showFriendsMobile,v=t.audioStarted,O=t.isIOS,x=t.deviceInPortrait,k=t.gameRoute,y=Object(i.e)((function(e){return{setRoute:e.setRoute,setUser:e.setUser,setCurrentSocket:e.setCurrentSocket,setSearch:e.setSearch,setUpdatLastOnlineInterval:e.setUpdatLastOnlineInterval,setAllFriends:e.setAllFriends,setUnsortedFriends:e.setUnsortedFriends,setFriendsOnline:e.setFriendsOnline,setFriendSearch:e.setFriendSearch,setPlayerIsReady:e.setPlayerIsReady,setUserName:e.setUserName,setPassword:e.setPassword,setAudioStarted:e.setAudioStarted,setShowFriendsMobile:e.setShowFriendsMobile,setShowChatMobile:e.setShowChatMobile,setShowGameInstructions:e.setShowGameInstructions,setDeviceInPortrait:e.setDeviceInPortrait,setGameRoute:e.setGameRoute,setIsMobile:e.setIsMobile}})),S=y.setRoute,w=y.setUser,A=y.setCurrentSocket,I=y.setSearch,N=y.setUpdatLastOnlineInterval,C=y.setAllFriends,F=y.setUnsortedFriends,E=y.setFriendsOnline,R=y.setFriendSearch,M=y.setPlayerIsReady,U=y.setUserName,L=y.setPassword,q=y.setAudioStarted,P=y.setShowFriendsMobile,B=y.setShowChatMobile,G=y.setShowGameInstructions,H=y.setDeviceInPortrait,Y=y.setGameRoute,J=(y.setIsMobile,function(){var e=Object(h.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.getAttribute("value"),e.t0=n,e.next="logOut"===e.t0?4:"goToRegister"===e.t0?7:"goToLogin"===e.t0?9:"goHome"===e.t0?11:"goToLeaderboard"===e.t0?13:"login"===e.t0?15:"register"===e.t0?17:"game"===e.t0?19:22;break;case 4:return(null===s||void 0===s?void 0:s.username)&&I(!1),S("login"),e.abrupt("break",24);case 7:return S("register"),e.abrupt("break",24);case 9:return S("login"),e.abrupt("break",24);case 11:return S("loggedIn"),e.abrupt("break",24);case 13:return S("leaderboard"),e.abrupt("break",24);case 15:case 17:return S("loggedIn"),e.abrupt("break",24);case 19:return(null===s||void 0===s?void 0:s.username)&&I(!1),S("game"),e.abrupt("break",24);case 22:(null===s||void 0===s?void 0:s.username)&&I(!1),S("login");case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Q=function(){H(window.screen.width<window.screen.height)};Object(a.useEffect)((function(){return setTimeout((function(){Q(),Z()}),10),window.addEventListener("resize",Q),document.addEventListener("mouseover",X),de.on("connect",(function(){A(de.id)})),function(){de.off("connect"),window.removeEventListener("resize",Q),document.removeEventListener("mouseover",X)}}),[]),Object(a.useEffect)((function(){f?(T.ambientWaves.mute(!1),T.buttonClick.mute(!1),g||T.hoverSound.mute(!1),T.hitSound.mute(!1),T.missSound.mute(!1),T.shipSunkSound.mute(!1)):(T.ambientWaves.mute(!0),T.buttonClick.mute(!0),g||T.hoverSound.mute(!0),T.hitSound.mute(!0),T.missSound.mute(!0),T.shipSunkSound.mute(!0))}),[f]),Object(a.useEffect)((function(){b?(T.lobbyTheme.mute(!1),T.gameTheme.mute(!1),T.shipPlacementTheme.mute(!1)):(T.lobbyTheme.mute(!0),T.gameTheme.mute(!0),T.shipPlacementTheme.mute(!0))}),[b]),Object(a.useEffect)((function(){var e;return(null===s||void 0===s||null===(e=s.username)||void 0===e?void 0:e.length)?("login"!==r&&"register"!==r&&(D(),z(!1)),N(setInterval(V,1e3))):(U(null),L(null),clearInterval(p),clearInterval(c)),function(){clearInterval(p)}}),[null===s||void 0===s?void 0:s.username]),Object(a.useEffect)((function(){l||(clearInterval(c),(null===s||void 0===s?void 0:s.username)&&D())}),[l]),Object(a.useEffect)((function(){var e;"game"===r?(I(!1),z(!0),clearInterval(n),D(),B(!1),"gameInProgress"!==k?(T.lobbyTheme.playing()&&T.lobbyTheme.stop(),T.shipPlacementTheme.playing()||T.shipPlacementTheme.play(),T.ambientWaves.playing()||T.ambientWaves.play()):(T.gameTheme.playing()||T.gameTheme.play(),T.shipPlacementTheme.playing()&&T.shipPlacementTheme.stop())):(Y("placeShips"),M(!1),(null===s||void 0===s||null===(e=s.username)||void 0===e?void 0:e.length)&&z(!1),clearInterval(u),v&&!T.lobbyTheme.playing()&&T.lobbyTheme.play(),T.gameTheme.playing()&&T.gameTheme.stop(),T.shipPlacementTheme.playing()&&T.shipPlacementTheme.stop(),T.ambientWaves.playing()&&T.ambientWaves.stop());return"login"!==r&&"register"!==r||("guest"!==(null===s||void 0===s?void 0:s.hash)&&w(null),clearInterval(n),C([]),F([]),E([]),R("")),"loggedIn"===r&&P(!1),document.addEventListener("mousedown",W),O&&document.addEventListener("touchstart",W),function(){document.removeEventListener("mousedown",W),O&&document.removeEventListener("touchstart",W)}}),[r,k]);var D=function(){var e=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/updateSearching",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:null===s||void 0===s?void 0:s.username,search:!1})});case 3:if(e.sent.ok){e.next=6;break}throw new Error("Problem updating searching status");case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/updateOnlineStatus",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:null===s||void 0===s?void 0:s.username})});case 3:if(e.sent.ok){e.next=6;break}throw new Error("Error");case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/guestCleanup",{method:"delete",headers:{"Content-Type":"application/json"}});case 3:if(e.sent.ok){e.next=6;break}throw new Error("Problem adding guest");case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),W=function(e){v||T.lobbyTheme.playing()||"game"===r||(T.lobbyTheme.play(),q()),("BUTTON"===e.target.tagName&&!e.target.classList.contains("messageToggle")||e.target.classList.contains("hasSound"))&&T.buttonClick.play();var t=document.querySelector(".gamePage.mobile .instructions");t!==e.target&&!(null===t||void 0===t?void 0:t.contains(e.target))&&"game"===r&&g&&he&&(G(!1),he=!1)},X=function(e){("BUTTON"===e.target.tagName&&!e.target.classList.contains("messageToggle")||e.target.classList.contains("hasSound"))&&T.hoverSound.play()},z=function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/setInGame",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:null===s||void 0===s?void 0:s.username,isInGame:t})});case 3:if(e.sent.ok){e.next=6;break}throw new Error("Error");case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return window.addEventListener("beforeunload",(function(e){e.preventDefault(),(null===s||void 0===s?void 0:s.username)&&(D(),z(!1)),"game"===r&&de.emit("send exit game",o),e.returnValue=""})),document.onkeydown=function(e){var t,n,s,a,o=document.querySelector(".loginBtn"),c=document.querySelector(".registerBtn"),i=document.querySelector(".login > .username > input"),u=document.querySelector(".register > .username > input"),l=document.querySelector(".login > .password > input"),d=document.querySelector(".register > .password > input"),h=document.querySelector(".friendRequestBtn");"Enter"!==e.key||"login"!==r&&"register"!==r?"Enter"===e.key&&"loggedIn"===r&&(e.preventDefault(),T.buttonClick.play(),h.click()):(e.preventDefault(),((null===i||void 0===i||null===(t=i.value)||void 0===t?void 0:t.length)&&(null===l||void 0===l||null===(n=l.value)||void 0===n?void 0:n.length)||(null===u||void 0===u||null===(s=u.value)||void 0===s?void 0:s.length)&&(null===d||void 0===d||null===(a=d.value)||void 0===a?void 0:a.length))&&(T.buttonClick.play(),"login"===r?o.click():c.click()))},Object(m.jsxs)(m.Fragment,{children:[!x&&g?Object(m.jsx)("div",{className:"pleaseRotate",children:Object(m.jsx)("h1",{children:"Please rotate your device"})}):null,"login"===r||"register"===r?Object(m.jsxs)("div",{className:"logRegPage ".concat(g?"mobile":null),children:[Object(m.jsx)(_,{socket:de,onRouteChange:J}),g?null:Object(m.jsx)(oe,{onRouteChange:J}),Object(m.jsx)("div",{className:"homeText",children:Object(m.jsx)("h1",{children:"Battleship"})}),Object(m.jsx)(re,{socket:de}),Object(m.jsx)("div",{className:"logReg",children:"login"===r?Object(m.jsx)(ce,{onRouteChange:J}):Object(m.jsx)(ie,{onRouteChange:J})}),Object(m.jsx)(ee,{})]}):Object(m.jsx)(m.Fragment,{children:"loggedIn"===r||"leaderboard"===r?(null===s||void 0===s||null===(e=s.username)||void 0===e?void 0:e.length)?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"homePageLogged ".concat("leaderboard"===r?"hide":null," ").concat(g?"mobile":null),children:[Object(m.jsx)(_,{socket:de,onRouteChange:J}),Object(m.jsx)(ae,{socket:de}),Object(m.jsxs)("div",{className:"matchAndBoard ".concat(j?"hide":null),children:[Object(m.jsx)(re,{socket:de}),Object(m.jsx)(ne,{})]}),Object(m.jsx)(ee,{})]}),Object(m.jsxs)("div",{className:"leaderboard ".concat("loggedIn"===r?"hide":null),children:[Object(m.jsx)(ue,{onRouteChange:J,socket:de}),Object(m.jsx)(ee,{})]})]}):Object(m.jsxs)("div",{className:"leaderboard ".concat(g?"mobile":null),children:[Object(m.jsx)(ue,{onRouteChange:J,socket:de}),Object(m.jsx)(ee,{})]}):Object(m.jsx)("div",{className:"gamePage ".concat(g?"mobile":null),children:Object(m.jsx)(te,{socket:de,onRouteChange:J})})})]})},me=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,512)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),s(e),a(e),o(e)}))},fe=Object(i.c)(u);c.a.render(Object(m.jsx)(i.a,{store:fe,children:Object(m.jsx)(pe,{})}),document.getElementById("root")),me()}},[[506,1,2]]]);
//# sourceMappingURL=main.27f994f0.chunk.js.map