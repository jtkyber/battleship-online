(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{104:function(e,t,n){},207:function(e,t,n){},208:function(e,t,n){},462:function(e,t,n){},464:function(e,t,n){},468:function(e,t,n){},469:function(e,t,n){},470:function(e,t,n){},471:function(e,t,n){},501:function(e,t,n){},502:function(e,t,n){},503:function(e,t,n){},504:function(e,t,n){},505:function(e,t,n){"use strict";n.r(t);n(139),n(237),n(277);var r=n(1),s=n(107),a=n.n(s),c=n(3),o={stored:Object(c.d)({},{storage:"localStorage"}),route:"login",user:null,currentSocket:null,friendSocket:null,opponentName:"",unsortedFriends:[],findMatchInterval:0,checkOppStatusInterval:0,updatLastOnlineInterval:0,search:!1,friendRequests:[],userName:"",password:"",topFive:[],allFriends:[],friendFilter:"",friendSearch:"",friendsOnline:[],gameRoute:"placeShips",playerIsReady:!1,opponentIsReady:!1,yourTurn:!1,chatText:"",inviteSent:!1,inviteReceived:!1,setRoute:Object(c.b)((function(e,t){e.route=t})),setUser:Object(c.b)((function(e,t){e.user=t})),setCurrentSocket:Object(c.b)((function(e,t){e.currentSocket=t})),setFriendSocket:Object(c.b)((function(e,t){e.friendSocket=t})),setOpponentName:Object(c.b)((function(e,t){e.opponentName=t})),setUnsortedFriends:Object(c.b)((function(e,t){e.unsortedFriends=t})),setFindMatchInterval:Object(c.b)((function(e,t){e.findMatchInterval=t})),setCheckOppStatusInterval:Object(c.b)((function(e,t){e.checkOppStatusInterval=t})),setUpdatLastOnlineInterval:Object(c.b)((function(e,t){e.updatLastOnlineInterval=t})),setSearch:Object(c.b)((function(e,t){e.search=t})),setFriendRequests:Object(c.b)((function(e,t){e.friendRequests=t})),setUserName:Object(c.b)((function(e,t){e.userName=t})),setPassword:Object(c.b)((function(e,t){e.password=t})),setTopFive:Object(c.b)((function(e,t){e.topFive=t})),setAllFriends:Object(c.b)((function(e,t){e.allFriends=t})),setFriendsFilter:Object(c.b)((function(e,t){e.friendFilter=t})),setFriendSearch:Object(c.b)((function(e,t){e.friendSearch=t})),setFriendsOnline:Object(c.b)((function(e,t){e.friendsOnline=t})),setGameRoute:Object(c.b)((function(e,t){e.gameRoute=t})),setPlayerIsReady:Object(c.b)((function(e,t){e.playerIsReady=t})),setOpponentIsReady:Object(c.b)((function(e,t){e.opponentIsReady=t})),setYourTurn:Object(c.b)((function(e,t){e.yourTurn=t})),setChatText:Object(c.b)((function(e,t){e.chatText=t})),setInviteSent:Object(c.b)((function(e,t){e.inviteSent=t})),setInviteReceived:Object(c.b)((function(e,t){e.inviteReceived=t}))},i=(n(462),n(30)),u=n(6),d=n.n(u),l=n(15),h=(n(104),n(0)),f=function(e){for(var t=e.onSquareClicked,n=Object(c.f)((function(e){return{gameRoute:e.gameRoute,route:e.route}})).gameRoute,r=[],s=1;s<11;s++)for(var a=0;a<10;a++)r.push({row:String.fromCharCode(97+a),col:s,colStart:s,rowStart:a+1});var o=function(e){var r=e.target.parentElement.parentElement.parentElement;"gameInProgress"===n&&r.classList.contains("opponentBoard")&&t(e)};return r.map((function(e){return Object(h.jsx)("div",{onClick:o,style:{gridArea:e.row+e.col},className:"singleSquare "+e.row+" "+e.row+e.col,id:e.colStart+"-"+e.rowStart},e.row+e.col)}))},p=n(31),m=n.n(p),j=(n(464),function(){var e=Object(c.f)((function(e){return{gameRoute:e.gameRoute}})).gameRoute,t=!1,n="hor",r="",s="",a=!1,o=!1,u=function(t){if(!a&&"placeShips"===e){var c=document.querySelector(".userBoard");a=!0,r=t.target.parentElement,c.style.cursor="pointer",r.style.zIndex="-2",r.style.border="2px solid rgba(0, 250, 0, 0.5)",parseInt(t.target.parentElement.offsetWidth)>parseInt(t.target.parentElement.offsetHeight)?n="hor":parseInt(t.target.parentElement.offsetHeight)>parseInt(t.target.parentElement.offsetWidth)&&(n="vert"),r.classList.contains("carrier")?s="carrier":r.classList.contains("battleship")?s="battleship":r.classList.contains("cruiser")?s="cruiser":r.classList.contains("submarine")?s="submarine":r.classList.contains("destroyer")&&(s="destroyer")}},d=function(e,t){var n=m()(e).offset(),r=m()(e).outerHeight(!0),s=m()(e).outerWidth(!0),a=n.top+r,c=n.left+s,o=m()(t).offset(),i=m()(t).outerHeight(!0),u=m()(t).outerWidth(!0),d=o.top+i,l=o.left+u;return!(a<=o.top+2||n.top>=d-2||c<=o.left+2||n.left>=l-2)};document.addEventListener("click",(function(e){a&&e.target.classList.contains("singleSquare")&&!1===t&&l()&&(r.style.zIndex="3",document.querySelector(".userBoard").style.cursor="default",r.style.border=null,a=!1)}));var l=function(){var e,t=document.querySelectorAll(".ship"),n=Object(i.a)(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(!a.classList.contains(s)&&d(r,a))return console.log(a.className),!1}}catch(c){n.e(c)}finally{n.f()}return!0};return window.oncontextmenu=function(e){return a&&("hor"===n?(r.style.transform="rotate(-90deg)",n="vert"):"vert"===n&&(r.style.transform="rotate(0deg)",n="hor"),o=!0,t=!0),!1},document.addEventListener("keydown",(function(e){13===e.keyCode&&e.preventDefault(),32===e.keyCode&&void 0!==r.style&&a&&("hor"===n?(r.style.transform="rotate(-90deg)",n="vert"):"vert"===n&&(r.style.transform="rotate(0deg)",n="hor"),o=!0,t=!0)})),window.onmouseover=function(e){if(a){t=!1,r.style.transform=null;var c=document.querySelector(".userBoard"),i=document.querySelector(".".concat(s,"Icon")),u=e.target.id,d=u.substring(0,u.indexOf("-")),l=u.substring(u.indexOf("-")+1,u.length);c.contains(e.target)&&e.target.classList.contains("singleSquare")&&!0===a&&("hor"===n?(i.classList.remove("rotate-".concat(s)),d<11-parseInt(r.id)+1?r.style.gridColumn="".concat(d," / ").concat(parseInt(d)+parseInt(r.id)):d>=11-parseInt(r.id)+1&&!0===o?r.style.gridColumn="11 / ".concat(11-parseInt(r.id)):o=!1,r.style.gridRow="".concat(l," / ").concat(parseInt(l)+1)):"vert"===n&&(i.classList.add("rotate-".concat(s)),l>parseInt(r.id)-1?r.style.gridRow="".concat(parseInt(l)+1," / ").concat(parseInt(l)-parseInt(r.id)+1):l<=parseInt(r.id)-1&&!0===o?r.style.gridRow="".concat(parseInt(r.id)+1," / 1"):o=!1,r.style.gridColumn="".concat(d," / ").concat(parseInt(d)+1)))}},Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{id:"5",className:"ship carrier",children:Object(h.jsx)("div",{onClick:u,className:"carrierIcon"})}),Object(h.jsx)("div",{id:"4",className:"ship battleship",children:Object(h.jsx)("div",{onClick:u,className:"battleshipIcon"})}),Object(h.jsx)("div",{id:"3",className:"ship cruiser",children:Object(h.jsx)("div",{onClick:u,className:"cruiserIcon"})}),Object(h.jsx)("div",{id:"3",className:"ship submarine",children:Object(h.jsx)("div",{onClick:u,className:"submarineIcon"})}),Object(h.jsx)("div",{id:"2",className:"ship destroyer",children:Object(h.jsx)("div",{onClick:u,className:"destroyerIcon"})})]})}),b=function(e){var t=e.socket,n=Object(c.f)((function(e){return{gameRoute:e.gameRoute,friendSocket:e.friendSocket,route:e.route}})),s=n.gameRoute,a=n.friendSocket,o=n.route,u=Object(c.e)((function(e){return{setYourTurn:e.setYourTurn}})).setYourTurn,d="";Object(r.useEffect)((function(){return t.on("receive shot",(function(e){var t=document.getElementById(e);p(t),u(!0)})),function(){t.off("receive shot")}}),[]);var l=function(e,t){var n=m()(e).offset(),r=m()(e).outerHeight(!0),s=m()(e).outerWidth(!0),a=n.top+r,c=n.left+s,o=m()(t).offset(),i=m()(t).outerHeight(!0),u=m()(t).outerWidth(!0),d=o.top+i,l=o.left+u;return!(a<=o.top+2||n.top>=d-2||c<=o.left+2||n.left>=l-2)},p=function(e){b(e)?(e.classList.add("hit"),t.emit("send result to opponent board",{shotSquare:e.id,shot:"hit",socketid:a,shipHit:d})):(e.classList.add("miss"),t.emit("send result to opponent board",{shotSquare:e.id,shot:"miss",socketid:a,shipHit:d}))},b=function(e){var t,n=document.querySelectorAll(".ship"),r=Object(i.a)(n);try{for(r.s();!(t=r.n()).done;){var s=t.value;if(l(e,s))return d=s.classList[1],!0}}catch(a){r.e(a)}finally{r.f()}return!1};return Object(h.jsxs)("div",{className:"board userBoard",children:[Object(h.jsxs)("div",{className:"rows",children:[Object(h.jsx)("h3",{children:"A"}),Object(h.jsx)("h3",{children:"B"}),Object(h.jsx)("h3",{children:"C"}),Object(h.jsx)("h3",{children:"D"}),Object(h.jsx)("h3",{children:"E"}),Object(h.jsx)("h3",{children:"F"}),Object(h.jsx)("h3",{children:"G"}),Object(h.jsx)("h3",{children:"H"}),Object(h.jsx)("h3",{children:"I"}),Object(h.jsx)("h3",{children:"J"})]}),Object(h.jsxs)("div",{className:"cols",children:[Object(h.jsx)("h3",{children:"1"}),Object(h.jsx)("h3",{children:"2"}),Object(h.jsx)("h3",{children:"3"}),Object(h.jsx)("h3",{children:"4"}),Object(h.jsx)("h3",{children:"5"}),Object(h.jsx)("h3",{children:"6"}),Object(h.jsx)("h3",{children:"7"}),Object(h.jsx)("h3",{children:"8"}),Object(h.jsx)("h3",{children:"9"}),Object(h.jsx)("h3",{children:"10"})]}),Object(h.jsx)("div",{className:"grid",children:Object(h.jsxs)("div",{className:"allSqaures",children:[Object(h.jsx)(f,{gameRoute:s}),Object(h.jsx)(j,{gameRoute:s,route:o})]})})]})},v=function(e){var t=e.socket,n=Object(c.f)((function(e){return{gameRoute:e.gameRoute,friendSocket:e.friendSocket,route:e.route,yourTurn:e.yourTurn}})),s=n.gameRoute,a=n.friendSocket,o=n.route,u=n.yourTurn,d=Object(c.e)((function(e){return{setYourTurn:e.setYourTurn}})).setYourTurn,l=[];Object(r.useEffect)((function(){return t.on("show result on opponent board",(function(e){var t=document.querySelector(".opponentBoard [id='".concat(e.shotSquare,"']"));if("hit"===e.result&&void 0!==t.classList){if(t.classList.add("hit"),l.push(e.shipHit),t.classList.add("_".concat(e.shipHit)),function(e){var t,n=0,r=Object(i.a)(l);try{for(r.s();!(t=r.n()).done;)t.value===e&&(n+=1)}catch(s){r.e(s)}finally{r.f()}return n}(e.shipHit)===parseInt(document.querySelector(".".concat(e.shipHit)).id)){var n,r=document.querySelectorAll(".singleSquare"),s=Object(i.a)(r);try{for(s.s();!(n=s.n()).done;){var a=n.value;a.classList.contains("_".concat(e.shipHit))&&a.classList.add("shipSunk")}}catch(c){s.e(c)}finally{s.f()}}}else"miss"===e.result&&void 0!==t.classList&&t.classList.add("miss")})),function(){t.off("show result on opponent board")}}),[]);return Object(h.jsxs)("div",{className:"board opponentBoard",children:[Object(h.jsxs)("div",{className:"rows",children:[Object(h.jsx)("h3",{children:"A"}),Object(h.jsx)("h3",{children:"B"}),Object(h.jsx)("h3",{children:"C"}),Object(h.jsx)("h3",{children:"D"}),Object(h.jsx)("h3",{children:"E"}),Object(h.jsx)("h3",{children:"F"}),Object(h.jsx)("h3",{children:"G"}),Object(h.jsx)("h3",{children:"H"}),Object(h.jsx)("h3",{children:"I"}),Object(h.jsx)("h3",{children:"J"})]}),Object(h.jsxs)("div",{className:"cols",children:[Object(h.jsx)("h3",{children:"1"}),Object(h.jsx)("h3",{children:"2"}),Object(h.jsx)("h3",{children:"3"}),Object(h.jsx)("h3",{children:"4"}),Object(h.jsx)("h3",{children:"5"}),Object(h.jsx)("h3",{children:"6"}),Object(h.jsx)("h3",{children:"7"}),Object(h.jsx)("h3",{children:"8"}),Object(h.jsx)("h3",{children:"9"}),Object(h.jsx)("h3",{children:"10"})]}),Object(h.jsx)("div",{className:"grid",children:Object(h.jsx)("div",{className:"allSqaures",children:Object(h.jsx)(f,{gameRoute:s,route:o,onSquareClicked:function(e){!u||e.target.classList.contains("hit")||e.target.classList.contains("miss")||(t.emit("send shot to opponent",{target:e.target.id,socketid:a}),d(!1))}})})})]})},g=(n(207),n.p+"static/media/msg-icon.b63e7a13.png"),x=n(510),O=function(e){var t=e.socket,n=Object(c.f)((function(e){return{user:e.user,friendRequests:e.friendRequests}})),s=n.user,a=n.friendRequests,o=Object(c.e)((function(e){return{setUnsortedFriends:e.setUnsortedFriends,setFriendRequests:e.setFriendRequests}})),u=o.setUnsortedFriends,f=o.setFriendRequests;Object(r.useEffect)((function(){return p(),t.on("receive friend request",(function(){p()})),function(){t.off("receive friend request")}}),[]);var p=function(){var e=Object(l.a)(d.a.mark((function e(){var t,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector("nav"),e.prev=1,e.next=4,fetch("https://calm-ridge-60009.herokuapp.com/getFriendRequests?username=".concat(s.username));case 4:if((n=e.sent).ok){e.next=7;break}throw new Error("Could not get friend requests");case 7:return e.next=9,n.json();case 9:null!==(r=e.sent)&&""!==r?(t.style.setProperty("--notification-color","rgba(255,0,0,0.8)"),f(r.split(","))):(t.style.setProperty("--notification-color","transparent"),f(null)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(l.a)(d.a.mark((function e(t){var n,r,a,c,o,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.prev=1,e.next=4,fetch("https://calm-ridge-60009.herokuapp.com/getFriendRequests?username=".concat(s.username));case 4:if((r=e.sent).ok){e.next=7;break}throw new Error("Could not get friend requests");case 7:return e.next=9,r.json();case 9:return null!==(a=e.sent)&&""!==a&&((c=a.split(",")).length<=1?n=null:(o=c.indexOf(t))>-1&&(c.splice(o,1),n=c.join(","))),e.next=13,fetch("https://calm-ridge-60009.herokuapp.com/updateFriendRequests",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({requestlist:n,username:s.username})});case 13:if((i=e.sent).ok){e.next=16;break}throw new Error("Could not update friend requests");case 16:return e.next=18,i.json();case 18:e.sent&&p(),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(1),console.log(e.t0);case 25:case"end":return e.stop()}}),e,null,[[1,22]])})));return function(t){return e.apply(this,arguments)}}(),j=function(e){m(e.target.id)},b=function(){var e=Object(l.a)(d.a.mark((function e(n){var r,a,c,o,l,h,f,p,m,j,b,v,g,x,O,k,y;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("friend added"),document.querySelector(".addFriendInput").value="",r="",a=[],c="",o="",e.prev=6,e.next=9,fetch("https://calm-ridge-60009.herokuapp.com/findFriend?username=".concat(n));case 9:if((l=e.sent).ok){e.next=12;break}throw new Error("User does not exist");case 12:return e.next=14,l.json();case 14:if(h=e.sent,s.username!==s.username){e.next=19;break}throw new Error("Cannot add self as friend");case 19:if(!h.username){e.next=89;break}if(f=[],o=h.socketid,null===h.friends||""===h.friends){e.next=26;break}if(!(f=h.friends.split(",")).includes(s.username)){e.next=26;break}throw new Error("You are already a friend of the user");case 26:return f.push(s.username),c=f.length>1?f.join(","):f[0],e.next=30,fetch("https://calm-ridge-60009.herokuapp.com/getFriends?username=".concat(s.username));case 30:if((p=e.sent).ok){e.next=33;break}throw new Error("Problem accessing friends list");case 33:return e.next=35,p.json();case 35:return(m=e.sent).length&&m.forEach((function(e){if(e.username===n)throw new Error("User already your friend")})),a.push(n),r=a.join(","),e.next=41,fetch("https://calm-ridge-60009.herokuapp.com/addFriend",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s.username,friendlist:r})});case 41:if((j=e.sent).ok){e.next=44;break}throw new Error("Problem adding friend");case 44:return e.next=46,j.json();case 46:if(!e.sent){e.next=80;break}b=[],v=Object(i.a)(a),e.prev=50,v.s();case 52:if((g=v.n()).done){e.next=71;break}return x=g.value,e.prev=54,e.next=57,fetch("https://calm-ridge-60009.herokuapp.com/findFriend?username=".concat(x));case 57:if((O=e.sent).ok){e.next=60;break}throw new Error("User does not exist");case 60:return e.next=62,O.json();case 62:(k=e.sent).socketid?b.push({name:k.username,status:"online"}):b.push({name:k.username,status:"offline"}),e.next=69;break;case 66:e.prev=66,e.t0=e.catch(54),console.log(e.t0);case 69:e.next=52;break;case 71:e.next=76;break;case 73:e.prev=73,e.t1=e.catch(50),v.e(e.t1);case 76:return e.prev=76,v.f(),e.finish(76);case 79:u(b);case 80:return e.next=82,fetch("https://calm-ridge-60009.herokuapp.com/addSelfToFriend",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({friendlist:c,friendname:n})});case 82:if((y=e.sent).ok){e.next=85;break}throw new Error("Problem adding self to friendlist of friend");case 85:return e.next=87,y.json();case 87:e.sent&&null!==o&&t.emit("update user status",o);case 89:e.next=94;break;case 91:e.prev=91,e.t2=e.catch(6),console.log(e.t2);case 94:case"end":return e.stop()}}),e,null,[[6,91],[50,73,76,79],[54,66]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(l.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/findFriend?username=".concat(t.target.id));case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("User does not exist");case 6:return e.next=8,n.json();case 8:e.sent.username&&(m(t.target.id),b(t.target.id)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(x.a,{className:"dropdown",children:[Object(h.jsx)(x.a.Toggle,{variant:"success",className:"messageToggle",id:"dropdown-basic",children:Object(h.jsx)("img",{src:g,alt:"Message Icon"})}),Object(h.jsx)(x.a.Menu,{id:"dropdowns",children:null!==a?a.map((function(e){return Object(h.jsxs)("div",{className:"dropdownItem",children:[Object(h.jsxs)("div",{className:"text",children:["Friend request from ",Object(h.jsx)("h3",{className:"requesterName",children:e})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{onClick:v,id:e,className:"acceptInvite",children:"Accept"}),Object(h.jsx)("button",{onClick:j,id:e,className:"rejectInvite",children:"Reject"})]})]},e)})):null})]})})},k=function(e){var t=e.socket,n=e.onRouteChange,r=Object(c.f)((function(e){return{friendSocket:e.friendSocket,user:e.user,route:e.route}})),s=r.friendSocket,a=r.user,o=r.route,i=Object(c.e)((function(e){return{setSearch:e.setSearch,setUnsortedFriends:e.setUnsortedFriends}})),u=i.setSearch,d=i.setUnsortedFriends,l=function(e){u(!1),n(e),t.emit("send exit game",s)};return Object(h.jsx)("nav",{className:"nav",children:"login"===o||"register"===o?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("button",{value:"goToLeaderboard",onClick:n,children:"Leaderboard"})}):"loggedIn"===o?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(O,{setUnsortedFriends:d,socket:t,username:a.username}),Object(h.jsx)("button",{value:"goToLeaderboard",onClick:n,children:"Leaderboard"}),Object(h.jsx)("button",{value:"logOut",onClick:n,children:"Log Out"})]}):Object(h.jsx)(h.Fragment,{children:"leaderboard"===o?a.username?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(O,{setUnsortedFriends:d,socket:t,username:a.username}),Object(h.jsx)("button",{value:"goHome",onClick:n,children:"Back"}),Object(h.jsx)("button",{value:"logOut",onClick:n,children:"Log Out"})]}):Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("button",{value:"goToLogin",onClick:n,children:"Back"})}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(O,{setUnsortedFriends:d,socket:t,username:a.username}),Object(h.jsx)("button",{value:"goHome",onClick:l,children:"Exit"}),Object(h.jsx)("button",{value:"logOut",onClick:l,children:"Log Out"})]})})})},y=function(e){var t=e.socket,n=Object(c.f)((function(e){return{friendSocket:e.friendSocket,opponentName:e.opponentName,chatText:e.chatText}})),s=n.friendSocket,a=n.opponentName,o=n.chatText,i=Object(c.e)((function(e){return{setChatText:e.setChatText}})).setChatText,u=document.querySelector(".chatBox");Object(r.useEffect)((function(){return document.addEventListener("keyup",l),t.on("receive msg",(function(e){d(e)})),function(){t.off("receive msg"),document.removeEventListener("keyup",l)}}),[o]);var d=function(e){var t=document.querySelector(".chatBox");if(null!==t){var n=document.createElement("DIV");n.classList.add("message");var r=document.createElement("H4");r.classList.add("opponentText");var s=document.createElement("H5");s.classList.add("oppName");var c=document.createTextNode(e),o=document.createTextNode(a);s.appendChild(o),r.appendChild(c),n.appendChild(s),n.appendChild(r),t.appendChild(n),t.scrollTop=t.scrollHeight}},l=function(e){if(13===e.keyCode&&null!==u&&""!==o){e.preventDefault();var n=document.createElement("DIV");n.classList.add("message");var r=document.createElement("H4");r.classList.add("userText");var a=document.createElement("H5");a.classList.add("userName");var c=document.createTextNode(o),d=document.createTextNode("You");a.appendChild(d),r.appendChild(c),n.appendChild(a),n.appendChild(r),u.appendChild(n),i(""),t.emit("send msg",{socketid:s,message:o}),document.querySelector(".chatInput").value="",u.scrollTop=u.scrollHeight}};return Object(h.jsxs)("div",{className:"chatContainer",children:[Object(h.jsx)("div",{className:"chatBox"}),Object(h.jsx)("input",{onChange:function(e){return i(e.target.value)},type:"text",className:"chatInput",placeholder:"Type Here..."})]})},S=(n(468),function(){return Object(h.jsx)("footer",{children:Object(h.jsx)("div",{className:"footer"})})}),w=function(e){var t=e.socket,n=e.onRouteChange,s=Object(c.f)((function(e){return{friendSocket:e.friendSocket,opponentName:e.opponentName,user:e.user,checkOppStatusInterval:e.checkOppStatusInterval,gameRoute:e.gameRoute,playerIsReady:e.playerIsReady,opponentIsReady:e.opponentIsReady,yourTurn:e.yourTurn}})),a=s.friendSocket,o=s.opponentName,u=s.user,f=s.checkOppStatusInterval,p=s.gameRoute,m=s.playerIsReady,j=s.opponentIsReady,g=s.yourTurn,x=Object(c.e)((function(e){return{setSearch:e.setSearch,setCheckOppStatusInterval:e.setCheckOppStatusInterval,setRoute:e.setRoute,setGameRoute:e.setGameRoute,setPlayerIsReady:e.setPlayerIsReady,setOpponentIsReady:e.setOpponentIsReady,setYourTurn:e.setYourTurn}})),O=x.setSearch,w=x.setCheckOppStatusInterval,N=x.setRoute,I=x.setGameRoute,F=x.setPlayerIsReady,C=x.setOpponentIsReady,R=x.setYourTurn;Object(r.useEffect)((function(){return t.on("receive game over",(function(){q(),setTimeout((function(){window.alert("You Won!!!"),N("loggedIn")}),300)})),t.on("receive exit game",(function(){O(!1),window.alert("Opponent has left the game"),N("loggedIn")})),w(setInterval(E,3e3)),function(){clearInterval(f),t.off("receive ready status"),t.off("receive game over"),t.off("receive exit game")}}),[]),Object(r.useEffect)((function(){var e=document.querySelector(".gamePage");"placeShips"===p?e.style.setProperty("--player-turn-text",'"'.concat("Place your ships!",'"')):g?e.style.setProperty("--player-turn-text",'"Your Turn!"'):e.style.setProperty("--player-turn-text",'"'.concat(o,"'s Turn!\""))}),[g,p]),Object(r.useEffect)((function(){var e=document.querySelectorAll(".userBoard .singleSquare"),n=0;if(g){var r,s=Object(i.a)(e);try{for(s.s();!(r=s.n()).done;){r.value.classList.contains("hit")&&(n+=1)}}catch(c){s.e(c)}finally{s.f()}n>=17&&(t.emit("game over",a),setTimeout((function(){window.alert("You Lose"),N("loggedIn")}),300))}}),[g]);var E=function(){var e=Object(l.a)(d.a.mark((function e(){var t,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=!1,e.next=4,fetch("https://calm-ridge-60009.herokuapp.com/getFriendsOnline?username=".concat(u.username));case 4:if((n=e.sent).ok){e.next=7;break}throw new Error("Error");case 7:return e.next=9,n.json();case 9:return r=e.sent,e.next=12,r.forEach((function(e){if(e.username===o)return t=!0}));case 12:t||(window.alert("Opponent has left the game"),N("loggedIn")),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/updateWins",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:u.username})});case 3:return t=e.sent,e.next=6,t.json();case 6:if(e.sent){e.next=9;break}throw new Error("Could not increment wins");case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();t.on("receive ready status",(function(){m&&I("gameInProgress"),C(!0)}));return Object(h.jsxs)("div",{className:"gamePage",children:[Object(h.jsx)(k,{socket:t,onRouteChange:n}),Object(h.jsx)(b,{socket:t}),"placeShips"===p?Object(h.jsx)("div",{className:"readyBtn",children:Object(h.jsx)("button",{onClick:function(){var e,n=document.querySelectorAll(".ship"),r=document.querySelector(".readyBtn"),s=Object(i.a)(n);try{for(s.s();!(e=s.n()).done;){e.value.style.cursor="default"}}catch(c){s.e(c)}finally{s.f()}j?(I("gameInProgress"),R(!0)):r.style.opacity="0.4",F(!0),t.emit("send ready status",a)},className:"btn",children:"Ready"})}):null,Object(h.jsx)(v,{socket:t}),Object(h.jsx)(y,{socket:t}),Object(h.jsx)(S,{})]})},N=(n(469),function(){return Object(h.jsx)("div",{className:"board homeBoard",children:Object(h.jsx)("div",{className:"grid",children:Object(h.jsx)("div",{className:"allSqaures",children:Object(h.jsx)(f,{})})})})}),I=(n(470),function(e){var t=e.socket,n=Object(c.f)((function(e){return{currentSocket:e.currentSocket,search:e.search,findMatchInterval:e.search,user:e.user}})),s=n.currentSocket,a=n.search,o=n.findMatchInterval,i=n.user,u=Object(c.e)((function(e){return{setSearch:e.setSearch,setFindMatchInterval:e.setFindMatchInterval,setOpponentName:e.setOpponentName,setFriendSocket:e.setFriendSocket,setRoute:e.setRoute}})),f=u.setSearch,p=u.setFindMatchInterval,m=u.setOpponentName,j=u.setFriendSocket,b=u.setRoute;Object(r.useEffect)((function(){return t.on("receive go to game",(function(e){m(e.senderName),j(e.senderSocket),b("game")})),function(){t.off("receive go to game")}}),[]),Object(r.useEffect)((function(){a&&p(setInterval(x,1e3))}),[a]);var v=function(){var e=Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,clearInterval(o),e.next=4,fetch("https://calm-ridge-60009.herokuapp.com/updateSearching",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:i.username,search:!1})});case 4:if(e.sent.ok){e.next=7;break}throw new Error("Problem updating searching status");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/updateSearching",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:i.username,search:!a})});case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Problem updating searching status");case 6:return e.next=8,t.json();case 8:e.sent&&f(!a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(l.a)(d.a.mark((function e(){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/findMatch?username=".concat(i.username));case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("Could not find match");case 6:return e.next=8,n.json();case 8:if(!(r=e.sent)){e.next=21;break}return e.next=12,j(r.socketid);case 12:return e.next=14,m(r.username);case 14:return e.next=16,v();case 16:return e.next=18,t.emit("send go to game",{receiverSocket:r.socketid,senderSocket:s,senderName:i.username});case 18:return e.next=20,f(!1);case 20:b("game");case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),console.log(e.t0);case 26:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"findMatchContainer",children:Object(h.jsx)("button",{onClick:g,className:"findMatch",children:!1===a?"Find Match":"Searching..."})})}),F=(n(471),function(e){var t=e.socket,n=e.name,s=e.status,a=Object(c.f)((function(e){return{friendSocket:e.friendSocket,route:e.route,currentSocket:e.currentSocket,user:e.user}})),o=a.friendSocket,i=a.route,u=a.currentSocket,f=a.user,p=Object(c.e)((function(e){return{setOpponentName:e.setOpponentName,setFriendSocket:e.setFriendSocket,setRoute:e.setRoute}})),m=p.setOpponentName,j=p.setFriendSocket,b=p.setRoute;Object(r.useEffect)((function(){return t.on("receive go to game",(function(e){m(e.senderName),j(e.senderSocket),b("game")})),t.on("receive invite",(function(e){return v(e)})),function(){t.off("receive go to game"),t.off("receive invite")}}),[]);var v=function(e){var t=document.querySelector(".btn".concat(e.username));"loggedIn"===i&&null!==t&&(!0===t.disabled&&(t.style.opacity="0.8",t.disabled=!1),t.childNodes[0].nodeValue="Accept",j(e.socketid))},g=function(){var e=Object(l.a)(d.a.mark((function e(n){var r,s,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.target.id,e.prev=1,e.next=4,fetch("https://calm-ridge-60009.herokuapp.com/findFriend?username=".concat(r));case 4:return s=e.sent,e.next=7,s.json();case 7:(a=e.sent).socketid&&(t.emit("send invite",{currentSocket:u,username:f.username,socketid:a.socketid}),n.target.childNodes[0].nodeValue="Invite sent",n.target.style.opacity="0.4",n.target.style.cursor="default",n.target.disabled=!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{id:n,value:n,className:"friendBlock",children:[Object(h.jsxs)("div",{className:"friendText",children:[Object(h.jsx)("h3",{children:n}),Object(h.jsx)("button",{className:"btn"+n,onClick:function(e){"Invite"===e.target.innerHTML?g(e):"Accept"===e.target.innerHTML&&function(e){t.emit("send go to game",{receiverSocket:o,senderSocket:u,senderName:f.username}),m(e.target.id),b("game")}(e)},id:n,children:"Invite"})]}),Object(h.jsx)("div",{id:s,className:s})]})}),C=(n(208),function(e){var t=e.socket,n=e.showOnlineStatusToFriends,s=Object(c.f)((function(e){return{unsortedFriends:e.unsortedFriends,user:e.user,allFriends:e.allFriends,friendFilter:e.friendFilter,friendSearch:e.friendSearch,friendsOnline:e.friendsOnline}})),a=s.unsortedFriends,o=s.user,i=s.allFriends,u=s.friendFilter,f=s.friendSearch,p=s.friendsOnline,m=Object(c.e)((function(e){return{setUnsortedFriends:e.setUnsortedFriends,setAllFriends:e.setAllFriends,setFriendFilter:e.setFriendFilter,setFriendSearch:e.setFriendSearch,setFriendsOnline:e.setFriendsOnline}})),j=m.setUnsortedFriends,b=m.setAllFriends,v=m.setFriendFilter,g=m.setFriendSearch,x=m.setFriendsOnline;Object(r.useEffect)((function(){y(),n(),t.on("update friend status",(function(){k()}));var e=setInterval(k,3e3);return function(){t.off("update friend status"),clearInterval(e)}}),[]),Object(r.useEffect)((function(){O()}),[a,p]);var O=function(){var e=[],t=[];a.forEach((function(n){if(n.username===f)t.push(n);else{var r=!0;p.forEach((function(e){if(e.username===n.username)return r=!1})),r&&e.push(n)}})),t.length?b(t.concat(p).concat(e)):b(p.concat(e))},k=function(){var e=Object(l.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/getFriendsOnline?username=".concat(o.username));case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,x(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/getFriends?username=".concat(o.username));case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Problem accessing friends list");case 6:return e.next=8,t.json();case 8:(n=e.sent).length?(j(n),k()):(b([]),j([])),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(l.a)(d.a.mark((function e(){var n,r,s,a,c,i,u,l,h,p,m;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.querySelector(".addFriendInput").value="",n=document.querySelector(".friendsContainer"),r="",s="",a="",c=[],e.prev=6,e.next=9,fetch("https://calm-ridge-60009.herokuapp.com/getFriendRequests?username=".concat(o.username));case 9:if((i=e.sent).ok){e.next=12;break}throw new Error("Could not get friend requests");case 12:return e.next=14,i.json();case 14:if(null===(u=e.sent)||""===u){e.next=20;break}if(!u.split(",").includes(f)){e.next=20;break}throw n.style.setProperty("--add-friend-alert",'"User already sent you a request"'),new Error("User already sent you a request");case 20:return e.next=22,fetch("https://calm-ridge-60009.herokuapp.com/findFriend?username=".concat(f));case 22:if((l=e.sent).ok){e.next=26;break}throw n.style.setProperty("--add-friend-alert",'"User does not exist"'),new Error("User does not exist");case 26:return e.next=28,l.json();case 28:if((h=e.sent).username!==o.username){e.next=34;break}throw n.style.setProperty("--add-friend-alert",'"Cannot add yourself as a friend"'),new Error("Cannot add self as friend");case 34:if(!h.username){e.next=60;break}if(r=h.username,s=h.socketid,p=[],null!==h.friends&&""!==h.friends&&(p=h.friends.split(",")),null===h.friendrequests||""===h.friendrequests){e.next=55;break}if(!(c=h.friendrequests.split(",")).includes(o.username)){e.next=46;break}throw n.style.setProperty("--add-friend-alert",'"You have already sent them a request"'),new Error("You have already sent them a request");case 46:if(!p.includes(o.username)){e.next=51;break}throw n.style.setProperty("--add-friend-alert",'"User is already your friend"'),new Error("User is already your friend");case 51:c.push(o.username),a=h.friendrequests.concat(",".concat(o.username));case 53:e.next=60;break;case 55:if(!p.includes(o.username)){e.next=58;break}throw n.style.setProperty("--add-friend-alert",'"User is already your friend"'),new Error("User is already your friend");case 58:a=o.username,c=[o.username];case 60:return n.style.setProperty("--add-friend-alert",'""'),e.next=63,fetch("https://calm-ridge-60009.herokuapp.com/updateFriendRequests",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({requestlist:a,username:r})});case 63:if((m=e.sent).ok){e.next=66;break}throw new Error("Could not add self to friendrequests of friend");case 66:return e.next=68,m.json();case 68:e.sent&&t.emit("send friend request",s),e.next=75;break;case 72:e.prev=72,e.t0=e.catch(6),console.log(e.t0);case 75:case"end":return e.stop()}}),e,null,[[6,72]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"friendsContainer",children:[Object(h.jsxs)("div",{className:"friendsContainerHeader",children:[Object(h.jsx)("h2",{children:"Friends"}),Object(h.jsx)("input",{className:"friendSearch",onChange:function(e){return v(e.target.value)},type:"text",placeholder:"Enter a username"})]}),Object(h.jsxs)("div",{className:"friendsSection",children:[Object(h.jsx)("div",{className:"friendsListContainer",children:i.length?Object(h.jsx)("div",{className:"friendsList",children:i.map((function(e){return e.username&&e.username.toLowerCase().includes(u.toLowerCase())?Object(h.jsx)(F,{socket:t,name:e.username,status:p.includes(e)?"online":"offline"},e.username):null}))}):Object(h.jsx)("h4",{className:"noFriends",children:"No friends have been added"})}),Object(h.jsxs)("div",{className:"addFriend",children:[Object(h.jsx)("h3",{className:"addFriendText",children:"Add a friend"}),Object(h.jsx)("input",{className:"addFriendInput",onChange:function(e){return g(e.target.value)},type:"text",placeholder:"Enter a username"}),Object(h.jsx)("button",{className:"friendRequestBtn",onClick:S,children:"Send Request"})]})]})]})}),R=function(e){e.onRouteChange;return Object(h.jsxs)("div",{className:"friendsContainer",children:[Object(h.jsx)("div",{className:"friendsContainerHeader",children:Object(h.jsx)("h2",{children:"Friends"})}),Object(h.jsx)("div",{className:"logToSeeFriendsText",children:Object(h.jsx)("h3",{children:"Log in to add and view friends here"})})]})},E=function(e){var t=e.onRouteChange,n=Object(c.f)((function(e){return{currentSocket:e.currentSocket,userName:e.userName,password:e.password}})),r=n.currentSocket,s=n.userName,a=n.password,o=Object(c.e)((function(e){return{setUserName:e.setUserName,setPassword:e.setPassword,setUser:e.setUser}})),i=o.setUserName,u=o.setPassword,f=o.setUser,p=document.querySelector(".login"),m=function(){var e=Object(l.a)(d.a.mark((function e(n){var c,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/login",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s,password:a,socketid:r})});case 3:return c=e.sent,e.next=6,c.json();case 6:(o=e.sent).username?(f(o),t(n)):"no socketid"===o?p.style.setProperty("--reg-log-alert",'"Server error. Please try again"'):null!==p&&p.style.setProperty("--reg-log-alert",'"The username or password you entered is incorrect"'),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"login",children:[Object(h.jsx)("h1",{children:"Log In"}),Object(h.jsxs)("div",{className:"username",children:[Object(h.jsx)("h4",{children:"Username"}),Object(h.jsx)("input",{onChange:function(e){return i(e.target.value)},type:"text"})]}),Object(h.jsxs)("div",{className:"password",children:[Object(h.jsx)("h4",{children:"Password"}),Object(h.jsx)("input",{onChange:function(e){return u(e.target.value)},type:"password"})]}),Object(h.jsx)("button",{className:"loginBtn",value:"login",onClick:m,children:"Login"}),Object(h.jsx)("button",{value:"goToRegister",onClick:t,className:"changeLogReg",children:"Register"})]})},q=function(e){var t=e.onRouteChange,n=Object(c.f)((function(e){return{currentSocket:e.currentSocket,userName:e.userName,password:e.password}})),r=n.currentSocket,s=n.userName,a=n.password,o=Object(c.e)((function(e){return{setUserName:e.setUserName,setPassword:e.setPassword,setUser:e.setUser}})),i=o.setUserName,u=o.setPassword,d=o.setUser,l=document.querySelector(".register");return Object(h.jsxs)("div",{className:"register",children:[Object(h.jsx)("h1",{children:"Register"}),Object(h.jsxs)("div",{className:"username",children:[Object(h.jsx)("h4",{children:"Username"}),Object(h.jsx)("input",{onChange:function(e){return i(e.target.value)},type:"text"})]}),Object(h.jsxs)("div",{className:"password",children:[Object(h.jsx)("h4",{children:"Password"}),Object(h.jsx)("input",{onChange:function(e){return u(e.target.value)},type:"password"})]}),Object(h.jsx)("button",{className:"registerBtn",value:"register",onClick:function(e){s.length<5?l.style.setProperty("--reg-log-alert",'"Username must be at least 5 characters"'):s.length>10?l.style.setProperty("--reg-log-alert",'"Username cannot be more than 10 characters"'):a.length<5?l.style.setProperty("--reg-log-alert",'"Password must be at least 5 characters"'):fetch("https://calm-ridge-60009.herokuapp.com/register",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s,password:a,socketid:r})}).then((function(e){return e.json()})).then((function(n){n.username?(d(n),t(e)):"no socketid"===n?l.style.setProperty("--reg-log-alert",'"Server error. Please try again"'):n.ok||l.style.setProperty("--reg-log-alert",'"Username has already been taken"')}))},children:"Register"}),Object(h.jsx)("button",{value:"goToLogin",onClick:t,className:"changeLogReg",children:"Login"})]})},T=function(e){var t=e.onRouteChange,n=e.socket,s=Object(c.f)((function(e){return{topFive:e.topFive}})).topFive,a=Object(c.e)((function(e){return{setTopFive:e.setTopFive}})).setTopFive;Object(r.useEffect)((function(){o()}),[]);var o=function(){var e=Object(l.a)(d.a.mark((function e(){var t,n,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=0;case 2:if(!(n<5)){e.next=15;break}return e.next=5,fetch("https://calm-ridge-60009.herokuapp.com/getTopFive?userNum=".concat(n));case 5:if((r=e.sent).ok){e.next=8;break}throw new Error("Error");case 8:return e.next=10,r.json();case 10:s=e.sent,t.push({name:s.username,wins:s.wins});case 12:n++,e.next=2;break;case 15:a(t);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(k,{onRouteChange:t,socket:n}),s.length?Object(h.jsx)("div",{className:"topFiveContainer",children:Object(h.jsx)("div",{className:"topFive",children:s.map((function(e){return Object(h.jsxs)("h3",{className:"LBplayer",children:[" ",e.name," : ",Object(h.jsx)("span",{className:"wins",children:e.wins})," wins "]},e.name)}))})}):null]})},L=n(227),P=n.n(L)()("https://safe-mesa-81492.herokuapp.com/");n(501),n(502),n(503),n(504);var U=function(){var e=Object(c.f)((function(e){return{route:e.route,user:e.user,friendSocket:e.friendSocket,findMatchInterval:e.findMatchInterval,checkOppStatusInterval:e.checkOppStatusInterval,search:e.search,updatLastOnlineInterval:e.updatLastOnlineInterval,inviteSent:e.inviteSent,inviteReceived:e.inviteReceived}})),t=e.route,n=e.user,s=e.friendSocket,a=e.findMatchInterval,o=e.checkOppStatusInterval,u=e.search,f=e.updatLastOnlineInterval,p=(e.inviteSent,e.inviteReceived,Object(c.e)((function(e){return{setRoute:e.setRoute,setUser:e.setUser,setCurrentSocket:e.setCurrentSocket,setSearch:e.setSearch,setUpdatLastOnlineInterval:e.setUpdatLastOnlineInterval,setInviteSent:e.setInviteSent,setInviteReceived:e.setInviteReceived,setAllFriends:e.setAllFriends}}))),m=p.setRoute,j=p.setUser,b=p.setCurrentSocket,v=p.setSearch,g=p.setUpdatLastOnlineInterval,x=(p.setAllFriends,p.setInviteSent,p.setInviteReceived,function(){var e=Object(l.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.target.value,e.next="logOut"===e.t0?3:"goToRegister"===e.t0?6:"goToLogin"===e.t0?8:"goHome"===e.t0?10:"goToLeaderboard"===e.t0?12:"login"===e.t0?14:"register"===e.t0?16:"game"===e.t0?18:21;break;case 3:return(null===n||void 0===n?void 0:n.username)&&(v(!1),L(!0)),m("login"),e.abrupt("break",23);case 6:return m("register"),e.abrupt("break",23);case 8:return m("login"),e.abrupt("break",23);case 10:return m("loggedIn"),e.abrupt("break",23);case 12:return m("leaderboard"),e.abrupt("break",23);case 14:case 16:return m("loggedIn"),e.abrupt("break",23);case 18:return(null===n||void 0===n?void 0:n.username)&&v(!1),m("game"),e.abrupt("break",23);case 21:(null===n||void 0===n?void 0:n.username)&&(v(!1),L(!0)),m("login");case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),O=function(){var e=Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/updateSearching",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:null===n||void 0===n?void 0:n.username,search:!1})});case 3:if(e.sent.ok){e.next=6;break}throw new Error("Problem updating searching status");case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/updateOnlineStatus",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:null===n||void 0===n?void 0:n.username})});case 3:if(e.sent.ok){e.next=6;break}throw new Error("Error");case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){return P.on("connect",(function(){b(P.id)})),function(){P.off("connect")}}),[]),Object(r.useEffect)((function(){var e;return(null===n||void 0===n||null===(e=n.username)||void 0===e?void 0:e.length)?(O(),g(setInterval(y,1e3))):clearInterval(f),function(){clearInterval(f)}}),[n]),Object(r.useEffect)((function(){!u&&a>0&&(clearInterval(a),O())}),[u]),Object(r.useEffect)((function(){"game"!==t?clearInterval(o):clearInterval(a),"login"!==t&&"register"!==t||j(null)}),[t]);var F=function(){var e=Object(l.a)(d.a.mark((function e(){var t,r,s,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/getFriends?username=".concat(n.username));case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Error");case 6:return e.next=8,t.json();case 8:if((r=e.sent).length){s=Object(i.a)(r);try{for(s.s();!(a=s.n()).done;)(c=a.value).socketid&&P.emit("update user status",c.socketid)}catch(o){s.e(o)}finally{s.f()}}e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(l.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://calm-ridge-60009.herokuapp.com/removeUserSocket",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n.username})});case 2:return r=e.sent,e.next=5,r.json();case 5:e.sent&&t&&F();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return window.addEventListener("beforeunload",(function(e){e.preventDefault(),O(),"game"===t&&P.emit("send exit game",s),L(!1),e.returnValue=""})),document.onkeydown=function(e){var n,r,s,a,c=document.querySelector(".loginBtn"),o=document.querySelector(".registerBtn"),i=document.querySelector(".login > .username > input"),u=document.querySelector(".register > .username > input"),d=document.querySelector(".login > .password > input"),l=document.querySelector(".register > .password > input"),h=document.querySelector(".friendRequestBtn");"Enter"!==e.code||"login"!==t&&"register"!==t?"Enter"===e.code&&"loggedIn"===t&&(e.preventDefault(),h.click()):(e.preventDefault(),((null===i||void 0===i||null===(n=i.value)||void 0===n?void 0:n.length)&&(null===d||void 0===d||null===(r=d.value)||void 0===r?void 0:r.length)||(null===u||void 0===u||null===(s=u.value)||void 0===s?void 0:s.length)&&(null===l||void 0===l||null===(a=l.value)||void 0===a?void 0:a.length))&&("login"===t?c.click():o.click()))},"login"===t||"register"===t?Object(h.jsxs)("div",{className:"logRegPage",children:[Object(h.jsx)(k,{socket:P,onRouteChange:x}),Object(h.jsx)(R,{onRouteChange:x}),Object(h.jsx)("div",{className:"homeText",children:Object(h.jsx)("h1",{children:"Battleship"})}),Object(h.jsx)("div",{className:"logReg",children:"login"===t?Object(h.jsx)(E,{onRouteChange:x}):Object(h.jsx)(q,{onRouteChange:x})}),Object(h.jsx)(S,{})]}):Object(h.jsx)(h.Fragment,{children:"loggedIn"===t?Object(h.jsxs)("div",{className:"homePageLogged",children:[Object(h.jsx)(k,{socket:P,onRouteChange:x}),Object(h.jsx)(C,{socket:P,showOnlineStatusToFriends:F}),Object(h.jsxs)("div",{className:"matchAndBoard",children:[Object(h.jsx)(I,{socket:P}),Object(h.jsx)(N,{})]}),Object(h.jsx)(S,{})]}):Object(h.jsx)(h.Fragment,{children:"leaderboard"===t?Object(h.jsxs)("div",{className:"leaderboard",children:[Object(h.jsx)(T,{onRouteChange:x,socket:P}),Object(h.jsx)(S,{})]}):Object(h.jsx)(w,{socket:P,onRouteChange:x})})})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,511)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),s(e),a(e),c(e)}))},H=Object(c.c)(o);a.a.render(Object(h.jsx)(c.a,{store:H,children:Object(h.jsx)(U,{})}),document.getElementById("root")),B()}},[[505,1,2]]]);
//# sourceMappingURL=main.d7d10da0.chunk.js.map