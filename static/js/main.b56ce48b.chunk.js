(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{103:function(e,t,n){},207:function(e,t,n){},208:function(e,t,n){},461:function(e,t,n){},463:function(e,t,n){},467:function(e,t,n){},468:function(e,t,n){},469:function(e,t,n){},470:function(e,t,n){},500:function(e,t,n){},501:function(e,t,n){},502:function(e,t,n){},503:function(e,t,n){},504:function(e,t,n){"use strict";n.r(t);n(139),n(237),n(277);var r=n(1),s=n(106),a=n.n(s),c=(n(461),n(30)),o=n(5),i=n.n(o),u=n(15),l=n(11),d=(n(103),n(0)),h=function(e){for(var t=e.gameRoute,n=(e.route,e.onSquareClicked),r=[],s=1;s<11;s++)for(var a=0;a<10;a++)r.push({row:String.fromCharCode(97+a),col:s,colStart:s,rowStart:a+1});var c=function(e){var r=e.target.parentElement.parentElement.parentElement;"gameInProgress"===t&&r.classList.contains("opponentBoard")&&n(e)};return r.map((function(e){return Object(d.jsx)("div",{onClick:c,style:{gridArea:e.row+e.col},className:"singleSquare "+e.row+" "+e.row+e.col,id:e.colStart+"-"+e.rowStart},e.row+e.col)}))},p=n(31),f=n.n(p),j=(n(463),function(e){var t=e.gameRoute,n=(e.route,!1),r="hor",s="",a="",o=!1,i=!1,u=function(e){if(!o&&"placeShips"===t){var n=document.querySelector(".userBoard");o=!0,s=e.target.parentElement,n.style.cursor="pointer",s.style.zIndex="-2",s.style.border="2px solid rgba(0, 250, 0, 0.5)",parseInt(e.target.parentElement.offsetWidth)>parseInt(e.target.parentElement.offsetHeight)?r="hor":parseInt(e.target.parentElement.offsetHeight)>parseInt(e.target.parentElement.offsetWidth)&&(r="vert"),s.classList.contains("carrier")?a="carrier":s.classList.contains("battleship")?a="battleship":s.classList.contains("cruiser")?a="cruiser":s.classList.contains("submarine")?a="submarine":s.classList.contains("destroyer")&&(a="destroyer")}},l=function(e,t){var n=f()(e).offset(),r=f()(e).outerHeight(!0),s=f()(e).outerWidth(!0),a=n.top+r,c=n.left+s,o=f()(t).offset(),i=f()(t).outerHeight(!0),u=f()(t).outerWidth(!0),l=o.top+i,d=o.left+u;return!(a<=o.top+2||n.top>=l-2||c<=o.left+2||n.left>=d-2)};document.addEventListener("click",(function(e){o&&e.target.classList.contains("singleSquare")&&!1===n&&h()&&(s.style.zIndex="3",document.querySelector(".userBoard").style.cursor="default",s.style.border=null,o=!1)}));var h=function(){var e,t=document.querySelectorAll(".ship"),n=Object(c.a)(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(!r.classList.contains(a)&&l(s,r))return console.log(r.className),!1}}catch(o){n.e(o)}finally{n.f()}return!0};return window.oncontextmenu=function(e){return o&&("hor"===r?(s.style.transform="rotate(-90deg)",r="vert"):"vert"===r&&(s.style.transform="rotate(0deg)",r="hor"),i=!0,n=!0),!1},document.addEventListener("keydown",(function(e){13===e.keyCode&&e.preventDefault(),32===e.keyCode&&void 0!==s.style&&o&&("hor"===r?(s.style.transform="rotate(-90deg)",r="vert"):"vert"===r&&(s.style.transform="rotate(0deg)",r="hor"),i=!0,n=!0)})),window.onmouseover=function(e){if(o){n=!1,s.style.transform=null;var t=document.querySelector(".userBoard"),c=document.querySelector(".".concat(a,"Icon")),u=e.target.id,l=u.substring(0,u.indexOf("-")),d=u.substring(u.indexOf("-")+1,u.length);t.contains(e.target)&&e.target.classList.contains("singleSquare")&&!0===o&&("hor"===r?(c.classList.remove("rotate-".concat(a)),l<11-parseInt(s.id)+1?s.style.gridColumn="".concat(l," / ").concat(parseInt(l)+parseInt(s.id)):l>=11-parseInt(s.id)+1&&!0===i?s.style.gridColumn="11 / ".concat(11-parseInt(s.id)):i=!1,s.style.gridRow="".concat(d," / ").concat(parseInt(d)+1)):"vert"===r&&(c.classList.add("rotate-".concat(a)),d>parseInt(s.id)-1?s.style.gridRow="".concat(parseInt(d)+1," / ").concat(parseInt(d)-parseInt(s.id)+1):d<=parseInt(s.id)-1&&!0===i?s.style.gridRow="".concat(parseInt(s.id)+1," / 1"):i=!1,s.style.gridColumn="".concat(l," / ").concat(parseInt(l)+1)))}},Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{id:"5",className:"ship carrier",children:Object(d.jsx)("div",{onClick:u,className:"carrierIcon"})}),Object(d.jsx)("div",{id:"4",className:"ship battleship",children:Object(d.jsx)("div",{onClick:u,className:"battleshipIcon"})}),Object(d.jsx)("div",{id:"3",className:"ship cruiser",children:Object(d.jsx)("div",{onClick:u,className:"cruiserIcon"})}),Object(d.jsx)("div",{id:"3",className:"ship submarine",children:Object(d.jsx)("div",{onClick:u,className:"submarineIcon"})}),Object(d.jsx)("div",{id:"2",className:"ship destroyer",children:Object(d.jsx)("div",{onClick:u,className:"destroyerIcon"})})]})}),m=function(e){e.yourTurn;var t=e.setYourTurn,n=e.gameRoute,s=e.socket,a=e.friendSocket,o=e.route,i="";Object(r.useEffect)((function(){return s.on("receive shot",(function(e){var n=document.getElementById(e);l(n),t(!0)})),function(){s.off("receive shot")}}),[]);var u=function(e,t){var n=f()(e).offset(),r=f()(e).outerHeight(!0),s=f()(e).outerWidth(!0),a=n.top+r,c=n.left+s,o=f()(t).offset(),i=f()(t).outerHeight(!0),u=f()(t).outerWidth(!0),l=o.top+i,d=o.left+u;return!(a<=o.top+2||n.top>=l-2||c<=o.left+2||n.left>=d-2)},l=function(e){p(e)?(e.classList.add("hit"),s.emit("send result to opponent board",{shotSquare:e.id,shot:"hit",socketid:a,shipHit:i})):(e.classList.add("miss"),s.emit("send result to opponent board",{shotSquare:e.id,shot:"miss",socketid:a,shipHit:i}))},p=function(e){var t,n=document.querySelectorAll(".ship"),r=Object(c.a)(n);try{for(r.s();!(t=r.n()).done;){var s=t.value;if(u(e,s))return i=s.classList[1],!0}}catch(a){r.e(a)}finally{r.f()}return!1};return Object(d.jsxs)("div",{className:"board userBoard",children:[Object(d.jsxs)("div",{className:"rows",children:[Object(d.jsx)("h3",{children:"A"}),Object(d.jsx)("h3",{children:"B"}),Object(d.jsx)("h3",{children:"C"}),Object(d.jsx)("h3",{children:"D"}),Object(d.jsx)("h3",{children:"E"}),Object(d.jsx)("h3",{children:"F"}),Object(d.jsx)("h3",{children:"G"}),Object(d.jsx)("h3",{children:"H"}),Object(d.jsx)("h3",{children:"I"}),Object(d.jsx)("h3",{children:"J"})]}),Object(d.jsxs)("div",{className:"cols",children:[Object(d.jsx)("h3",{children:"1"}),Object(d.jsx)("h3",{children:"2"}),Object(d.jsx)("h3",{children:"3"}),Object(d.jsx)("h3",{children:"4"}),Object(d.jsx)("h3",{children:"5"}),Object(d.jsx)("h3",{children:"6"}),Object(d.jsx)("h3",{children:"7"}),Object(d.jsx)("h3",{children:"8"}),Object(d.jsx)("h3",{children:"9"}),Object(d.jsx)("h3",{children:"10"})]}),Object(d.jsx)("div",{className:"grid",children:Object(d.jsxs)("div",{className:"allSqaures",children:[Object(d.jsx)(h,{gameRoute:n}),Object(d.jsx)(j,{gameRoute:n,route:o})]})})]})},b=function(e){var t=e.yourTurn,n=e.setYourTurn,s=e.gameRoute,a=e.socket,o=e.friendSocket,i=e.route,u=[];Object(r.useEffect)((function(){return a.on("show result on opponent board",(function(e){var t=document.querySelector(".opponentBoard [id='".concat(e.shotSquare,"']"));if("hit"===e.result&&void 0!==t.classList){if(t.classList.add("hit"),u.push(e.shipHit),t.classList.add("_".concat(e.shipHit)),function(e){var t,n=0,r=Object(c.a)(u);try{for(r.s();!(t=r.n()).done;)t.value===e&&(n+=1)}catch(s){r.e(s)}finally{r.f()}return n}(e.shipHit)===parseInt(document.querySelector(".".concat(e.shipHit)).id)){var n,r=document.querySelectorAll(".singleSquare"),s=Object(c.a)(r);try{for(s.s();!(n=s.n()).done;){var a=n.value;a.classList.contains("_".concat(e.shipHit))&&a.classList.add("shipSunk")}}catch(o){s.e(o)}finally{s.f()}}}else"miss"===e.result&&void 0!==t.classList&&t.classList.add("miss")})),function(){a.off("show result on opponent board")}}),[]);return Object(d.jsxs)("div",{className:"board opponentBoard",children:[Object(d.jsxs)("div",{className:"rows",children:[Object(d.jsx)("h3",{children:"A"}),Object(d.jsx)("h3",{children:"B"}),Object(d.jsx)("h3",{children:"C"}),Object(d.jsx)("h3",{children:"D"}),Object(d.jsx)("h3",{children:"E"}),Object(d.jsx)("h3",{children:"F"}),Object(d.jsx)("h3",{children:"G"}),Object(d.jsx)("h3",{children:"H"}),Object(d.jsx)("h3",{children:"I"}),Object(d.jsx)("h3",{children:"J"})]}),Object(d.jsxs)("div",{className:"cols",children:[Object(d.jsx)("h3",{children:"1"}),Object(d.jsx)("h3",{children:"2"}),Object(d.jsx)("h3",{children:"3"}),Object(d.jsx)("h3",{children:"4"}),Object(d.jsx)("h3",{children:"5"}),Object(d.jsx)("h3",{children:"6"}),Object(d.jsx)("h3",{children:"7"}),Object(d.jsx)("h3",{children:"8"}),Object(d.jsx)("h3",{children:"9"}),Object(d.jsx)("h3",{children:"10"})]}),Object(d.jsx)("div",{className:"grid",children:Object(d.jsx)("div",{className:"allSqaures",children:Object(d.jsx)(h,{gameRoute:s,route:i,onSquareClicked:function(e){!t||e.target.classList.contains("hit")||e.target.classList.contains("miss")||(a.emit("send shot to opponent",{target:e.target.id,socketid:o}),n(!1))}})})})]})},g=(n(207),n.p+"static/media/msg-icon.b63e7a13.png"),x=n(509),v=function(e){var t=e.setUnsortedFriends,n=e.socket,s=e.username,a=Object(r.useState)([]),o=Object(l.a)(a,2),h=o[0],p=o[1];Object(r.useEffect)((function(){return f(),n.on("receive friend request",(function(){f()})),function(){n.off("receive friend request")}}),[]);var f=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector("nav"),e.prev=1,e.next=4,fetch("https://calm-ridge-60009.herokuapp.com/getFriendRequests?username=".concat(s));case 4:if((n=e.sent).ok){e.next=7;break}throw new Error("Could not get friend requests");case 7:return e.next=9,n.json();case 9:null!==(r=e.sent)&&""!==r?(t.style.setProperty("--notification-color","rgba(255,0,0,0.8)"),p(r.split(","))):(t.style.setProperty("--notification-color","transparent"),p(null)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r,a,c,o,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.prev=1,e.next=4,fetch("https://calm-ridge-60009.herokuapp.com/getFriendRequests?username=".concat(s));case 4:if((r=e.sent).ok){e.next=7;break}throw new Error("Could not get friend requests");case 7:return e.next=9,r.json();case 9:return null!==(a=e.sent)&&""!==a&&((c=a.split(",")).length<=1?n=null:(o=c.indexOf(t))>-1&&(c.splice(o,1),n=c.join(","))),e.next=13,fetch("https://calm-ridge-60009.herokuapp.com/updateFriendRequests",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({requestlist:n,username:s})});case 13:if((u=e.sent).ok){e.next=16;break}throw new Error("Could not update friend requests");case 16:return e.next=18,u.json();case 18:e.sent&&f(),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(1),console.log(e.t0);case 25:case"end":return e.stop()}}),e,null,[[1,22]])})));return function(t){return e.apply(this,arguments)}}(),m=function(e){j(e.target.id)},b=function(){var e=Object(u.a)(i.a.mark((function e(r){var a,o,u,l,d,h,p,f,j,m,b,g,x,v,O,k,y;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("friend added"),document.querySelector(".addFriendInput").value="",a="",o=[],u="",l="",e.prev=6,e.next=9,fetch("https://calm-ridge-60009.herokuapp.com/findFriend?username=".concat(r));case 9:if((d=e.sent).ok){e.next=12;break}throw new Error("User does not exist");case 12:return e.next=14,d.json();case 14:if((h=e.sent).username!==s){e.next=19;break}throw new Error("Cannot add self as friend");case 19:if(!h.username){e.next=89;break}if(p=[],l=h.socketid,null===h.friends||""===h.friends){e.next=26;break}if(!(p=h.friends.split(",")).includes(s)){e.next=26;break}throw new Error("You are already a friend of the user");case 26:return p.push(s),u=p.length>1?p.join(","):p[0],e.next=30,fetch("https://calm-ridge-60009.herokuapp.com/getFriends?username=".concat(s));case 30:if((f=e.sent).ok){e.next=33;break}throw new Error("Problem accessing friends list");case 33:return e.next=35,f.json();case 35:return(j=e.sent).length&&j.forEach((function(e){if(e.username===r)throw new Error("User already your friend")})),o.push(r),a=o.join(","),e.next=41,fetch("https://calm-ridge-60009.herokuapp.com/addFriend",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s,friendlist:a})});case 41:if((m=e.sent).ok){e.next=44;break}throw new Error("Problem adding friend");case 44:return e.next=46,m.json();case 46:if(!e.sent){e.next=80;break}b=[],g=Object(c.a)(o),e.prev=50,g.s();case 52:if((x=g.n()).done){e.next=71;break}return v=x.value,e.prev=54,e.next=57,fetch("https://calm-ridge-60009.herokuapp.com/findFriend?username=".concat(v));case 57:if((O=e.sent).ok){e.next=60;break}throw new Error("User does not exist");case 60:return e.next=62,O.json();case 62:(k=e.sent).socketid?b.push({name:k.username,status:"online"}):b.push({name:k.username,status:"offline"}),e.next=69;break;case 66:e.prev=66,e.t0=e.catch(54),console.log(e.t0);case 69:e.next=52;break;case 71:e.next=76;break;case 73:e.prev=73,e.t1=e.catch(50),g.e(e.t1);case 76:return e.prev=76,g.f(),e.finish(76);case 79:t(b);case 80:return e.next=82,fetch("https://calm-ridge-60009.herokuapp.com/addSelfToFriend",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({friendlist:u,friendname:r})});case 82:if((y=e.sent).ok){e.next=85;break}throw new Error("Problem adding self to friendlist of friend");case 85:return e.next=87,y.json();case 87:e.sent&&null!==l&&n.emit("update user status",l);case 89:e.next=94;break;case 91:e.prev=91,e.t2=e.catch(6),console.log(e.t2);case 94:case"end":return e.stop()}}),e,null,[[6,91],[50,73,76,79],[54,66]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/findFriend?username=".concat(t.target.id));case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("User does not exist");case 6:return e.next=8,n.json();case 8:e.sent.username&&(j(t.target.id),b(t.target.id)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(x.a,{className:"dropdown",children:[Object(d.jsx)(x.a.Toggle,{variant:"success",className:"messageToggle",id:"dropdown-basic",children:Object(d.jsx)("img",{src:g,alt:"Message Icon"})}),Object(d.jsx)(x.a.Menu,{id:"dropdowns",children:null!==h?h.map((function(e){return Object(d.jsxs)("div",{className:"dropdownItem",children:[Object(d.jsxs)("div",{className:"text",children:["Friend request from ",Object(d.jsx)("h3",{className:"requesterName",children:e})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{onClick:v,id:e,className:"acceptInvite",children:"Accept"}),Object(d.jsx)("button",{onClick:m,id:e,className:"rejectInvite",children:"Reject"})]})]},e)})):null})]})})},O=function(e){var t=e.setSearch,n=e.friendSocket,r=e.setUnsortedFriends,s=e.socket,a=e.username,c=e.onRouteChange,o=e.route,i=function(e){t(!1),c(e),s.emit("send exit game",n)};return Object(d.jsx)("nav",{className:"nav",children:"login"===o||"register"===o?Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("button",{value:"goToLeaderboard",onClick:c,children:"Leaderboard"})}):"loggedIn"===o?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(v,{setUnsortedFriends:r,socket:s,username:a}),Object(d.jsx)("button",{value:"goToLeaderboard",onClick:c,children:"Leaderboard"}),Object(d.jsx)("button",{value:"logOut",onClick:c,children:"Log Out"})]}):Object(d.jsx)(d.Fragment,{children:"leaderboard"===o?a?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(v,{setUnsortedFriends:r,socket:s,username:a}),Object(d.jsx)("button",{value:"goHome",onClick:c,children:"Back"}),Object(d.jsx)("button",{value:"logOut",onClick:c,children:"Log Out"})]}):Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("button",{value:"goToLogin",onClick:c,children:"Back"})}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(v,{setUnsortedFriends:r,socket:s,username:a}),Object(d.jsx)("button",{value:"goHome",onClick:i,children:"Exit"}),Object(d.jsx)("button",{value:"logOut",onClick:i,children:"Log Out"})]})})})},k=function(e){var t=e.opponentName,n=e.friendSocket,s=e.socket,a=Object(r.useState)(""),c=Object(l.a)(a,2),o=c[0],i=c[1],u=document.querySelector(".chatBox");Object(r.useEffect)((function(){return document.addEventListener("keyup",p),s.on("receive msg",(function(e){h(e)})),function(){s.off("receive msg"),document.removeEventListener("keyup",p)}}),[o]);var h=function(e){var n=document.querySelector(".chatBox");if(null!==n){var r=document.createElement("DIV");r.classList.add("message");var s=document.createElement("H4");s.classList.add("opponentText");var a=document.createElement("H5");a.classList.add("oppName");var c=document.createTextNode(e),o=document.createTextNode(t);a.appendChild(o),s.appendChild(c),r.appendChild(a),r.appendChild(s),n.appendChild(r),n.scrollTop=n.scrollHeight}},p=function(e){if(13===e.keyCode&&null!==u&&""!==o){e.preventDefault();var t=document.createElement("DIV");t.classList.add("message");var r=document.createElement("H4");r.classList.add("userText");var a=document.createElement("H5");a.classList.add("userName");var c=document.createTextNode(o),l=document.createTextNode("You");a.appendChild(l),r.appendChild(c),t.appendChild(a),t.appendChild(r),u.appendChild(t),i(""),s.emit("send msg",{socketid:n,message:o}),document.querySelector(".chatInput").value="",u.scrollTop=u.scrollHeight}};return Object(d.jsxs)("div",{className:"chatContainer",children:[Object(d.jsx)("div",{className:"chatBox"}),Object(d.jsx)("input",{onChange:function(e){return i(e.target.value)},type:"text",className:"chatInput",placeholder:"Type Here..."})]})},y=(n(467),function(){return Object(d.jsx)("footer",{children:Object(d.jsx)("div",{className:"footer"})})}),w=function(e){var t=e.setSearch,n=e.checkOppStatusInterval,s=e.setCheckOppStatusInterval,a=e.opponentName,o=e.setRoute,h=e.setUnsortedFriends,p=e.socket,f=e.username,j=e.onRouteChange,g=e.route,x=e.friendSocket,v=Object(r.useState)("placeShips"),w=Object(l.a)(v,2),S=w[0],N=w[1],C=Object(r.useState)(!1),E=Object(l.a)(C,2),I=E[0],F=E[1],q=Object(r.useState)(!1),L=Object(l.a)(q,2),T=L[0],R=L[1],P=Object(r.useState)(!1),U=Object(l.a)(P,2),B=U[0],H=U[1];Object(r.useEffect)((function(){return p.on("receive game over",(function(){A(),setTimeout((function(){window.alert("You Won!!!"),o("loggedIn")}),300)})),p.on("receive exit game",(function(){t(!1),window.alert("Opponent has left the game"),o("loggedIn")})),s(setInterval(J,3e3)),function(){clearInterval(n),p.off("receive ready status"),p.off("receive game over"),p.off("receive exit game")}}),[]),Object(r.useEffect)((function(){var e=document.querySelector(".gamePage");"placeShips"===S?e.style.setProperty("--player-turn-text",'"'.concat("Place your ships!",'"')):B?e.style.setProperty("--player-turn-text",'"Your Turn!"'):e.style.setProperty("--player-turn-text",'"'.concat(a,"'s Turn!\""))}),[B,S]),Object(r.useEffect)((function(){var e=document.querySelectorAll(".userBoard .singleSquare"),t=0;if(B){var n,r=Object(c.a)(e);try{for(r.s();!(n=r.n()).done;){n.value.classList.contains("hit")&&(t+=1)}}catch(s){r.e(s)}finally{r.f()}t>=17&&(p.emit("game over",x),setTimeout((function(){window.alert("You Lose"),o("loggedIn")}),300))}}),[B]);var J=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=!1,e.next=4,fetch("https://calm-ridge-60009.herokuapp.com/getFriendsOnline?username=".concat(f));case 4:if((n=e.sent).ok){e.next=7;break}throw new Error("Error");case 7:return e.next=9,n.json();case 9:return r=e.sent,e.next=12,r.forEach((function(e){if(e.username===a)return t=!0}));case 12:t||(window.alert("Opponent has left the game"),o("loggedIn")),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/updateWins",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:f})});case 3:return t=e.sent,e.next=6,t.json();case 6:if(e.sent){e.next=9;break}throw new Error("Could not increment wins");case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();p.on("receive ready status",(function(){I&&N("gameInProgress"),R(!0)}));return Object(d.jsxs)("div",{className:"gamePage",children:[Object(d.jsx)(O,{setSearch:t,friendSocket:x,setUnsortedFriends:h,socket:p,username:f,onRouteChange:j,route:g}),Object(d.jsx)(m,{yourTurn:B,setYourTurn:H,gameRoute:S,socket:p,friendSocket:x,route:g}),"placeShips"===S?Object(d.jsx)("div",{className:"readyBtn",children:Object(d.jsx)("button",{onClick:function(){var e,t=document.querySelectorAll(".ship"),n=document.querySelector(".readyBtn"),r=Object(c.a)(t);try{for(r.s();!(e=r.n()).done;){e.value.style.cursor="default"}}catch(s){r.e(s)}finally{r.f()}T?(N("gameInProgress"),H(!0)):n.style.opacity="0.4",F(!0),p.emit("send ready status",x)},className:"btn",children:"Ready"})}):null,Object(d.jsx)(b,{yourTurn:B,setYourTurn:H,gameRoute:S,socket:p,friendSocket:x,route:g}),Object(d.jsx)(k,{opponentName:a,friendSocket:x,socket:p}),Object(d.jsx)(y,{})]})},S=(n(468),function(e){var t=e.route;return Object(d.jsx)("div",{className:"board homeBoard",children:Object(d.jsx)("div",{className:"grid",children:Object(d.jsx)("div",{className:"allSqaures",children:Object(d.jsx)(h,{route:t})})})})}),N=(n(469),function(e){var t=e.currentSocket,n=e.setSearch,s=e.search,a=e.findMatchInterval,c=e.setFindMatchInterval,o=e.socket,l=e.setOpponentName,h=e.username,p=e.setFriendSocket,f=e.setRoute;Object(r.useEffect)((function(){return o.on("receive go to game",(function(e){l(e.senderName),p(e.senderSocket),f("game")})),function(){o.off("receive go to game")}}),[]),Object(r.useEffect)((function(){s&&c(setInterval(b,1e3))}),[s]);var j=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,clearInterval(a),e.next=4,fetch("https://calm-ridge-60009.herokuapp.com/updateSearching",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:h,search:!1})});case 4:if(e.sent.ok){e.next=7;break}throw new Error("Problem updating searching status");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/updateSearching",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:h,search:!s})});case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Problem updating searching status");case 6:return e.next=8,t.json();case 8:e.sent&&n(!s),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(u.a)(i.a.mark((function e(){var r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/findMatch?username=".concat(h));case 3:if((r=e.sent).ok){e.next=6;break}throw new Error("Could not find match");case 6:return e.next=8,r.json();case 8:if(!(s=e.sent)){e.next=21;break}return e.next=12,p(s.socketid);case 12:return e.next=14,l(s.username);case 14:return e.next=16,j();case 16:return e.next=18,o.emit("send go to game",{receiverSocket:s.socketid,senderSocket:t,senderName:h});case 18:return e.next=20,n(!1);case 20:f("game");case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),console.log(e.t0);case 26:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(){return e.apply(this,arguments)}}();return Object(d.jsx)("div",{className:"findMatchContainer",children:Object(d.jsx)("button",{onClick:m,className:"findMatch",children:!1===s?"Find Match":"Searching..."})})}),C=(n(470),function(e){var t=e.friendSocket,n=e.setOpponentName,s=e.socket,a=e.route,c=e.setFriendSocket,o=e.currentSocket,l=e.username,h=e.name,p=e.status,f=e.setRoute;Object(r.useEffect)((function(){return s.on("receive go to game",(function(e){n(e.senderName),c(e.senderSocket),f("game")})),s.on("receive invite",(function(e){return j(e)})),function(){s.off("receive go to game"),s.off("receive invite")}}),[]);var j=function(e){var t=document.querySelector(".btn".concat(e.username));"loggedIn"===a&&null!==t&&(!0===t.disabled&&(t.style.opacity="0.8",t.disabled=!1),t.childNodes[0].nodeValue="Accept",c(e.socketid))},m=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.id,e.prev=1,e.next=4,fetch("https://calm-ridge-60009.herokuapp.com/findFriend?username=".concat(n));case 4:return r=e.sent,e.next=7,r.json();case 7:(a=e.sent).socketid&&(s.emit("send invite",{currentSocket:o,username:l,socketid:a.socketid}),t.target.childNodes[0].nodeValue="Invite sent",t.target.style.opacity="0.4",t.target.style.cursor="default",t.target.disabled=!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{id:h,value:h,className:"friendBlock",children:[Object(d.jsxs)("div",{className:"friendText",children:[Object(d.jsx)("h3",{children:h}),Object(d.jsx)("button",{className:"btn"+h,onClick:function(e){"Invite"===e.target.innerHTML?m(e):"Accept"===e.target.innerHTML&&function(e){s.emit("send go to game",{receiverSocket:t,senderSocket:o,senderName:l}),n(e.target.id),f("game")}(e)},id:h,children:"Invite"})]}),Object(d.jsx)("div",{id:p,className:p})]})}),E=(n(208),function(e){var t=e.friendSocket,n=e.opponentName,s=e.setOpponentName,a=e.unsortedFriends,c=e.setUnsortedFriends,o=e.socket,h=e.route,p=e.setFriendSocket,f=e.currentSocket,j=e.username,m=e.showOnlineStatusToFriends,b=e.setRoute,g=Object(r.useState)([]),x=Object(l.a)(g,2),v=x[0],O=x[1],k=Object(r.useState)(""),y=Object(l.a)(k,2),w=y[0],S=y[1],N=Object(r.useState)(""),E=Object(l.a)(N,2),I=E[0],F=E[1],q=Object(r.useState)([]),L=Object(l.a)(q,2),T=L[0],R=L[1];Object(r.useEffect)((function(){B(),m(),o.on("update friend status",(function(){U()}));var e=setInterval(U,3e3);return function(){o.off("update friend status"),clearInterval(e)}}),[]),Object(r.useEffect)((function(){P()}),[a,T]);var P=function(){var e=[],t=[];a.forEach((function(n){if(n.username===I)t.push(n);else{var r=!0;T.forEach((function(e){if(e.username===n.username)return r=!1})),r&&e.push(n)}})),t.length?O(t.concat(T).concat(e)):O(T.concat(e))},U=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/getFriendsOnline?username=".concat(j));case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,R(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/getFriends?username=".concat(j));case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Problem accessing friends list");case 6:return e.next=8,t.json();case 8:(n=e.sent).length?(c(n),U()):O([]),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,r,s,a,c,u,l,d,h,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.querySelector(".addFriendInput").value="",t=document.querySelector(".friendsContainer"),n="",r="",s="",a=[],e.prev=6,e.next=9,fetch("https://calm-ridge-60009.herokuapp.com/getFriendRequests?username=".concat(j));case 9:if((c=e.sent).ok){e.next=12;break}throw new Error("Could not get friend requests");case 12:return e.next=14,c.json();case 14:if(null===(u=e.sent)||""===u){e.next=20;break}if(!u.split(",").includes(I)){e.next=20;break}throw t.style.setProperty("--add-friend-alert",'"User already sent you a request"'),new Error("User already sent you a request");case 20:return e.next=22,fetch("https://calm-ridge-60009.herokuapp.com/findFriend?username=".concat(I));case 22:if((l=e.sent).ok){e.next=26;break}throw t.style.setProperty("--add-friend-alert",'"User does not exist"'),new Error("User does not exist");case 26:return e.next=28,l.json();case 28:if((d=e.sent).username!==j){e.next=34;break}throw t.style.setProperty("--add-friend-alert",'"Cannot add yourself as a friend"'),new Error("Cannot add self as friend");case 34:if(!d.username){e.next=60;break}if(n=d.username,r=d.socketid,h=[],null!==d.friends&&""!==d.friends&&(h=d.friends.split(",")),null===d.friendrequests||""===d.friendrequests){e.next=55;break}if(!(a=d.friendrequests.split(",")).includes(j)){e.next=46;break}throw t.style.setProperty("--add-friend-alert",'"You have already sent them a request"'),new Error("You have already sent them a request");case 46:if(!h.includes(j)){e.next=51;break}throw t.style.setProperty("--add-friend-alert",'"User is already your friend"'),new Error("User is already your friend");case 51:a.push(j),s=d.friendrequests.concat(",".concat(j));case 53:e.next=60;break;case 55:if(!h.includes(j)){e.next=58;break}throw t.style.setProperty("--add-friend-alert",'"User is already your friend"'),new Error("User is already your friend");case 58:s=j,a=[j];case 60:return t.style.setProperty("--add-friend-alert",'""'),e.next=63,fetch("https://calm-ridge-60009.herokuapp.com/updateFriendRequests",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({requestlist:s,username:n})});case 63:if((p=e.sent).ok){e.next=66;break}throw new Error("Could not add self to friendrequests of friend");case 66:return e.next=68,p.json();case 68:e.sent&&o.emit("send friend request",r),e.next=75;break;case 72:e.prev=72,e.t0=e.catch(6),console.log(e.t0);case 75:case"end":return e.stop()}}),e,null,[[6,72]])})));return function(){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"friendsContainer",children:[Object(d.jsxs)("div",{className:"friendsContainerHeader",children:[Object(d.jsx)("h2",{children:"Friends"}),Object(d.jsx)("input",{className:"friendSearch",onChange:function(e){return S(e.target.value)},type:"text",placeholder:"Enter a username"})]}),Object(d.jsxs)("div",{className:"friendsSection",children:[Object(d.jsx)("div",{className:"friendsListContainer",children:v.length?Object(d.jsx)("div",{className:"friendsList",children:v.map((function(e){return e.username&&e.username.toLowerCase().includes(w.toLowerCase())?Object(d.jsx)(C,{friendSocket:t,opponentName:n,setOpponentName:s,socket:o,route:h,setFriendSocket:p,currentSocket:f,username:j,name:e.username,status:T.includes(e)?"online":"offline",setRoute:b},e.username):null}))}):Object(d.jsx)("h4",{className:"noFriends",children:"No friends have been added"})}),Object(d.jsxs)("div",{className:"addFriend",children:[Object(d.jsx)("h3",{className:"addFriendText",children:"Add a friend"}),Object(d.jsx)("input",{className:"addFriendInput",onChange:function(e){return F(e.target.value)},type:"text",placeholder:"Enter a username"}),Object(d.jsx)("button",{className:"friendRequestBtn",onClick:H,children:"Send Request"})]})]})]})}),I=function(e){e.onRouteChange;return Object(d.jsxs)("div",{className:"friendsContainer",children:[Object(d.jsx)("div",{className:"friendsContainerHeader",children:Object(d.jsx)("h2",{children:"Friends"})}),Object(d.jsx)("div",{className:"logToSeeFriendsText",children:Object(d.jsx)("h3",{children:"Log in to add and view friends here"})})]})},F=function(e){var t=e.onRouteChange,n=e.loadUser,s=e.currentSocket,a=Object(r.useState)(""),c=Object(l.a)(a,2),o=c[0],h=c[1],p=Object(r.useState)(""),f=Object(l.a)(p,2),j=f[0],m=f[1],b=document.querySelector(".login"),g=function(){var e=Object(u.a)(i.a.mark((function e(r){var a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/login",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o,password:j,socketid:s})});case 3:return a=e.sent,e.next=6,a.json();case 6:(c=e.sent).username?(n(c),t(r)):"no socketid"===c?b.style.setProperty("--reg-log-alert",'"Server error. Please try again"'):null!==b&&b.style.setProperty("--reg-log-alert",'"The username or password you entered is incorrect"'),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"login",children:[Object(d.jsx)("h1",{children:"Log In"}),Object(d.jsxs)("div",{className:"username",children:[Object(d.jsx)("h4",{children:"Username"}),Object(d.jsx)("input",{onChange:function(e){return h(e.target.value)},type:"text"})]}),Object(d.jsxs)("div",{className:"password",children:[Object(d.jsx)("h4",{children:"Password"}),Object(d.jsx)("input",{onChange:function(e){return m(e.target.value)},type:"password"})]}),Object(d.jsx)("button",{className:"loginBtn",value:"login",onClick:g,children:"Login"}),Object(d.jsx)("button",{value:"goToRegister",onClick:t,className:"changeLogReg",children:"Register"})]})},q=function(e){var t=e.onRouteChange,n=e.loadUser,s=e.currentSocket,a=Object(r.useState)(""),c=Object(l.a)(a,2),o=c[0],i=c[1],u=Object(r.useState)(""),h=Object(l.a)(u,2),p=h[0],f=h[1],j=document.querySelector(".register");return Object(d.jsxs)("div",{className:"register",children:[Object(d.jsx)("h1",{children:"Register"}),Object(d.jsxs)("div",{className:"username",children:[Object(d.jsx)("h4",{children:"Username"}),Object(d.jsx)("input",{onChange:function(e){return i(e.target.value)},type:"text"})]}),Object(d.jsxs)("div",{className:"password",children:[Object(d.jsx)("h4",{children:"Password"}),Object(d.jsx)("input",{onChange:function(e){return f(e.target.value)},type:"password"})]}),Object(d.jsx)("button",{className:"registerBtn",value:"register",onClick:function(e){o.length<5?j.style.setProperty("--reg-log-alert",'"Username must be at least 5 characters"'):o.length>10?j.style.setProperty("--reg-log-alert",'"Username cannot be more than 10 characters"'):p.length<5?j.style.setProperty("--reg-log-alert",'"Password must be at least 5 characters"'):fetch("https://calm-ridge-60009.herokuapp.com/register",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o,password:p,socketid:s})}).then((function(e){return e.json()})).then((function(r){r.username?(n(r),t(e)):"no socketid"===r?j.style.setProperty("--reg-log-alert",'"Server error. Please try again"'):r.ok||(j.style.setProperty("--reg-log-alert",'"Username has already been taken"'),console.log(r))}))},children:"Register"}),Object(d.jsx)("button",{value:"goToLogin",onClick:t,className:"changeLogReg",children:"Login"})]})},L=function(e){var t=e.route,n=e.onRouteChange,s=e.setUnsortedFriends,a=e.socket,c=e.username,o=Object(r.useState)([]),h=Object(l.a)(o,2),p=h[0],f=h[1];Object(r.useEffect)((function(){j()}),[]);var j=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=0;case 2:if(!(n<5)){e.next=15;break}return e.next=5,fetch("https://calm-ridge-60009.herokuapp.com/getTopFive?userNum=".concat(n));case 5:if((r=e.sent).ok){e.next=8;break}throw new Error("Error");case 8:return e.next=10,r.json();case 10:s=e.sent,t.push({name:s.username,wins:s.wins});case 12:n++,e.next=2;break;case 15:f(t);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(O,{route:t,onRouteChange:n,setUnsortedFriends:s,socket:a,username:c}),p.length?Object(d.jsx)("div",{className:"topFiveContainer",children:Object(d.jsx)("div",{className:"topFive",children:p.map((function(e){return Object(d.jsxs)("h3",{className:"LBplayer",children:[" ",e.name," : ",Object(d.jsx)("span",{className:"wins",children:e.wins})," wins "]},e.name)}))})}):null]})},T=n(227),R=n.n(T)()("https://safe-mesa-81492.herokuapp.com/");n(500),n(501),n(502),n(503);var P=function(){var e=Object(r.useState)("login"),t=Object(l.a)(e,2),n=t[0],s=t[1],a=Object(r.useState)({username:"",wins:0}),o=Object(l.a)(a,2),h=o[0],p=o[1],f=Object(r.useState)(null),j=Object(l.a)(f,2),m=j[0],b=j[1],g=Object(r.useState)(null),x=Object(l.a)(g,2),v=x[0],k=x[1],C=Object(r.useState)(""),T=Object(l.a)(C,2),P=T[0],U=T[1],B=Object(r.useState)([]),H=Object(l.a)(B,2),J=H[0],A=H[1],M=Object(r.useState)(0),Y=Object(l.a)(M,2),D=Y[0],W=Y[1],V=Object(r.useState)(0),z=Object(l.a)(V,2),G=z[0],_=z[1],K=Object(r.useState)(!1),Q=Object(l.a)(K,2),X=Q[0],Z=Q[1],$=function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.target.value,e.next="logOut"===e.t0?3:"goToRegister"===e.t0?11:"goToLogin"===e.t0?17:"goHome"===e.t0?23:"goToLeaderboard"===e.t0?25:"login"===e.t0?27:"register"===e.t0?29:"game"===e.t0?31:34;break;case 3:if(!h.username){e.next=8;break}return e.next=6,Z(!1);case 6:return e.next=8,se(!0);case 8:return p({username:"",wins:0}),s("login"),e.abrupt("break",36);case 11:if(!h.username){e.next=14;break}return e.next=14,se(!0);case 14:return p({username:"",wins:0}),s("register"),e.abrupt("break",36);case 17:if(!h.username){e.next=20;break}return e.next=20,se(!0);case 20:return p({username:"",wins:0}),s("login"),e.abrupt("break",36);case 23:return s("loggedIn"),e.abrupt("break",36);case 25:return s("leaderboard"),e.abrupt("break",36);case 27:case 29:return s("loggedIn"),e.abrupt("break",36);case 31:return h.username&&Z(!1),s("game"),e.abrupt("break",36);case 34:h.username&&(Z(!1),se(!0)),s("login");case 36:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/updateSearching",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:h.username,search:!1})});case 3:if(e.sent.ok){e.next=6;break}throw new Error("Problem updating searching status");case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/updateOnlineStatus",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:h.username})});case 3:if(e.sent.ok){e.next=6;break}throw new Error("Error");case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){return R.on("connect",(function(){b(R.id)})),function(){R.off("connect")}}),[]),Object(r.useEffect)((function(){var e;return h.username.length?e=setInterval(te,1e3):clearInterval(e),function(){clearInterval(e)}}),[h]),Object(r.useEffect)((function(){!X&&D>0&&(clearInterval(D),ee())}),[X]),Object(r.useEffect)((function(){"game"!==n?clearInterval(G):clearInterval(D)}),[n]);var ne=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,r,s,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://calm-ridge-60009.herokuapp.com/getFriends?username=".concat(h.username));case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Error");case 6:return e.next=8,t.json();case 8:if((n=e.sent).length){r=Object(c.a)(n);try{for(r.s();!(s=r.n()).done;)(a=s.value).socketid&&R.emit("update user status",a.socketid)}catch(o){r.e(o)}finally{r.f()}}e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),re=function(e){p({username:e.username,wins:e.wins})},se=function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://calm-ridge-60009.herokuapp.com/removeUserSocket",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:h.username})});case 2:return n=e.sent,e.next=5,n.json();case 5:e.sent&&t&&ne();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return window.addEventListener("beforeunload",(function(e){e.preventDefault(),ee(),"game"===n&&R.emit("send exit game",v),se(!1),e.returnValue=""})),document.onkeydown=function(e){var t,r,s,a,c=document.querySelector(".loginBtn"),o=document.querySelector(".registerBtn"),i=document.querySelector(".login > .username > input"),u=document.querySelector(".register > .username > input"),l=document.querySelector(".login > .password > input"),d=document.querySelector(".register > .password > input"),h=document.querySelector(".friendRequestBtn");"Enter"!==e.code||"login"!==n&&"register"!==n?"Enter"===e.code&&"loggedIn"===n&&(e.preventDefault(),h.click()):(e.preventDefault(),((null===i||void 0===i||null===(t=i.value)||void 0===t?void 0:t.length)&&(null===l||void 0===l||null===(r=l.value)||void 0===r?void 0:r.length)||(null===u||void 0===u||null===(s=u.value)||void 0===s?void 0:s.length)&&(null===d||void 0===d||null===(a=d.value)||void 0===a?void 0:a.length))&&("login"===n?c.click():o.click()))},"login"===n||"register"===n?Object(d.jsxs)("div",{className:"logRegPage",children:[Object(d.jsx)(O,{setUnsortedFriends:A,socket:R,username:h.username,onRouteChange:$,route:n}),Object(d.jsx)(I,{onRouteChange:$}),Object(d.jsx)("div",{className:"homeText",children:Object(d.jsx)("h1",{children:"Battleship"})}),Object(d.jsx)("div",{className:"logReg",children:"login"===n?Object(d.jsx)(F,{currentSocket:m,loadUser:re,onRouteChange:$}):Object(d.jsx)(q,{currentSocket:m,loadUser:re,onRouteChange:$})}),Object(d.jsx)(y,{})]}):Object(d.jsx)(d.Fragment,{children:"loggedIn"===n?Object(d.jsxs)("div",{className:"homePageLogged",children:[Object(d.jsx)(O,{setUnsortedFriends:A,socket:R,username:h.username,onRouteChange:$,route:n}),Object(d.jsx)(E,{friendSocket:v,opponentName:P,setOpponentName:U,unsortedFriends:J,setUnsortedFriends:A,socket:R,route:n,setFriendSocket:k,currentSocket:m,showOnlineStatusToFriends:ne,username:h.username,setRoute:s}),Object(d.jsxs)("div",{className:"matchAndBoard",children:[Object(d.jsx)(N,{currentSocket:m,setSearch:Z,search:X,findMatchInterval:D,setFindMatchInterval:W,socket:R,setOpponentName:U,username:h.username,setFriendSocket:k,setRoute:s}),Object(d.jsx)(S,{route:n})]}),Object(d.jsx)(y,{})]}):Object(d.jsx)(d.Fragment,{children:"leaderboard"===n?Object(d.jsxs)("div",{className:"leaderboard",children:[Object(d.jsx)(L,{route:n,onRouteChange:$,setUnsortedFriends:A,socket:R,username:h.username}),Object(d.jsx)(y,{})]}):Object(d.jsx)(w,{setSearch:Z,checkOppStatusInterval:G,setCheckOppStatusInterval:_,opponentName:P,setRoute:s,setUnsortedFriends:A,socket:R,username:h.username,onRouteChange:$,route:n,friendSocket:v})})})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,510)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),s(e),a(e),c(e)}))};a.a.render(Object(d.jsx)("div",{children:Object(d.jsx)(P,{})}),document.getElementById("root")),U()}},[[504,1,2]]]);
//# sourceMappingURL=main.b56ce48b.chunk.js.map