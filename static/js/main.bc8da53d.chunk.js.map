{"version":3,"sources":["components/ships/Ships.js","model.js","components/boards/Board.js","audioclips/ambient-waves.mp3","audioclips/lobby-theme.mp3","audioclips/ship-placement-theme.mp3","audioclips/game-theme.mp3","audioclips/button-click.mp3","audioclips/hover-sound.mp3","audioclips/hit-sound.mp3","audioclips/miss-sound.mp3","audioclips/ship-sunk.mp3","audioclips/notification.mp3","audioclips/pick-up-ship.mp3","audioclips/drop-ship.mp3","audioclips/rotate-ship.mp3","audioclips/missile-lock.mp3","audioclips/missile-launch.mp3","audioclips/incoming-missile.mp3","audio.js","components/boards/hit.gif","components/boards/UserBoard.js","components/boards/OpponentBoard.js","components/navigation/FriendRequests.js","components/navigation/notification.png","components/navigation/leaderboard.png","components/navigation/log-out.png","components/navigation/home-icon.png","components/navigation/chat-icon.png","components/navigation/Navigation.js","components/navigation/sound-icon.png","components/navigation/music-icon.png","components/navigation/friends-icon.png","components/navigation/back-arrow.png","components/boards/ChatBox.js","components/footer/Footer.js","components/boards/Game.js","components/homeBoard/HomeBoard.js","components/findMatch/FindMatch.js","components/friends/SingleFriend.js","components/friends/Friends.js","components/friends/FriendsHome.js","components/logReg/Login.js","components/logReg/Register.js","components/leaderboard/Leaderboard.js","App.js","reportWebVitals.js","index.js"],"names":["mouseX","mouseY","model","stored","persist","soundOn","musicOn","isMobile","test","navigator","userAgent","isIOS","showGameInstructions","storage","route","user","opponentName","unsortedFriends","findMatchInterval","checkOppStatusInterval","updatLastOnlineInterval","getOnlineFriendsInterval","search","friendRequests","userName","password","topFive","allFriends","friendFilter","friendSearch","friendsOnline","gameRoute","playerIsReady","yourTurn","chatText","inviteSent","inviteReceived","playerTurnText","showFriendsMobile","showChatMobile","audioStarted","shipIsSelected","deviceInPortrait","opponentIsReady","firstGameInstructionLoad","gameTimer","gameCountdownInterval","skippedTurns","playingWithAI","aiShipLayout","allSquareIDs","aiTurn","aiShotMatchedToUserShot","channel","pusher","setRoute","action","state","input","setUser","setOpponentName","setUnsortedFriends","setFindMatchInterval","setCheckOppStatusInterval","setUpdatLastOnlineInterval","setGetOnlineFriendsInterval","setSearch","setFriendRequests","setUserName","setPassword","setTopFive","setAllFriends","setFriendFilter","setFriendSearch","setFriendsOnline","setGameRoute","setPlayerIsReady","setYourTurn","setChatText","setInviteSent","setInviteReceived","setPlayerTurnText","setSoundOn","setMusicOn","setIsMobile","setShowFriendsMobile","setShowChatMobile","setAudioStarted","setShipIsSelected","setShowGameInstructions","setDeviceInPortrait","setOpponentIsReady","setFirstGameInstructionLoad","setGameTimer","setGameCountdownInterval","setSkippedTurns","setPlayigWithAI","setAiShipLayout","setAllSquareIDs","setAIturn","setAIShotMatchedToUserShot","setChannel","setPusher","AssembleBoard","onSquareClicked","useStoreState","allSquares","i","j","push","row","String","fromCharCode","col","colStart","rowStart","handleSquareClick","e","parentBoard","target","parentElement","classList","contains","map","square","onClick","style","gridArea","className","id","audio","ambientWaves","Howl","src","loop","volume","lobbyTheme","shipPlacementTheme","gameTheme","buttonClick","hoverSound","mute","hitSound","missSound","shipSunkSound","notificationSound","pickUpShip","dropShip","rotateShip","missileLock","missileLaunch","incomingMissile","moving","rotating","orientation","selectedShip","selectedShipName","setManualGridLocation","Ships","useEffect","removeShipIfSelected","onShipSelect","play","userBoard","document","querySelector","cursor","pointerEvents","border","parseInt","offsetWidth","offsetHeight","remove","collisionDetection","item1","item2","d1Offset","$","offset","d1Height","outerHeight","d1Width","outerWidth","d1Top","top","d1Left","left","d2Offset","d2Height","d2Width","d2Top","d2Left","window","onclick","areaIsClear","ontouchend","x","y","shipLeft","getBoundingClientRect","shipRight","right","shipTop","shipBottom","bottom","wasShipTouched","changedTouches","clientX","clientY","positionShipOnGrid","ships","querySelectorAll","ship","oncontextmenu","onkeydown","code","preventDefault","undefined","matchTouchToSquares","squares","selectedSquare","forEach","squareLeft","squareRight","squareTop","squareBottom","type","touches","transform","userGrid","childShip","targetId","substring","indexOf","length","gridColumn","gridRow","add","onmouseover","ontouchmove","hitSquares","firstHit","lastHit","aiShipOrientationGuess","UserBoard","useStoreActions","actions","shipHit","allSqaures","allSquareIDsTemp","bind","data","shot","oppShot","getElementById","incomingMissileDuration","duration","setTimeout","applyHitOrMiss","unbind","shuffleArray","arr","randomIndex","currentIndex","Math","floor","random","colString","str","split","rowString","getChoicesForNearby","hit","pickNearbySquare","aiMoveText","numOfValidSquares","possibleChoices","choice","foundOption","selected","splice","console","log","Error","unfinishedShipSpot","childNodes","shotOnUserBoard","randIndex","round","randSquare","pickRandomSquare","countHitsOnShip","count","a","matchOppShotToBoard","hitMarkerBackgroundFlash","createElement","hitElem","hitGif","shrapN","shrapNE","shrapE","shrapSE","shrapS","shrapSW","shrapW","shrapNW","append","sunkShipIcon","fetch","process","Board","score","OpponentBoard","aiShipLocations","destroyer","submarine","cruiser","battleship","carrier","setAIships","clickedSquare","shotSquare","result","aiSpotClear","newSpot","pickRandomBoardLocation","counter","lowestAndHighest","colRowIndex","shipName","firstSpot","secondSpot","min","lowest","highest","setSingleAIship","shipLength","every","updateScore","scoreIncrement","method","headers","body","JSON","stringify","username","res","json","scoreUpdated","applyAIhitOrMiss","clickedSquareID","hash","alert","preResultDiv","appendChild","missileLaunchDuration","FriendRequests","updateRequests","navBar","ok","requests","setProperty","removeRequest","friend","newRequestList","newRequestListArray","index","join","requestlist","res2","onRemoveRequest","addFriend","value","friendList","friendArray","friendlistOfFriends","user1","friendlistOfFriendsArray","friends","includes","f","friendlist","res3","allF","response","friendname","res4","addFriendStart","Dropdown","Toggle","variant","alt","Menu","request","Navigation","onRouteChange","handleExitClick","onTouchStart","leaderboardIcon","logOutIcon","homeIcon","chatIcon","ChatBox","chatBox","root","display","handleReceivedMessage","message","addEventListener","handleEnterBtn","removeEventListener","msgNode","textNode","nameNode","text","createTextNode","name","scrollTop","scrollHeight","key","onChange","placeholder","Footer","Game","pickUpShipInstructions","rotateShipInstructions","dropShipInstructions","shipPlacementTimer","clearInterval","setInterval","handlePlayerWon","checkIfOpponentIsOnlineAndInGame","playerTurnTimer","shipContainers","shipContainer","handlePlayerLost","readyBtn","instructionsBtn","timerElement","opacity","msg","allShipsPlaced","innerText","HomeBoard","FindMatch","removeGuest","searchForMatch","senderName","stopSearching","updateSearching","match","addGuest","SingleFriend","friendInGame","status","handleInvite","btn","disabled","nodeValue","sendInvite","acceptInvite","innerHTML","Friends","userFromLastFriendRequest","fetchFriends","getOnlineFriends","sortFriends","offlineSorted","offlineFriends","justAdded","onlineSorted","addFriendToOffline","olF","sort","b","toLowerCase","concat","onlineFriends","sendFriendRequest","friendAlert","friendName","friendsRequests","friendsRequestsArray","friendrequests","last","lastonline","Date","now","ingame","FriendsHome","Login","login","onSubmitLogin","Register","register","then","Leaderboard","getTopPlayers","player","App","getAttribute","isDevicePortrait","screen","width","height","guestCleanup","handleMouseOver","handleBeforeUnload","subscribe","Pusher","cluster","authEndpoint","auth","params","updateInGameStatus","updateLastOnline","playing","stop","handleMouseDown","tagName","playHoverSound","inGame","isInGame","loginBtn","registerBtn","logUsername","registerUsername","logPassword","registerPassword","friendRequestBtn","click","handlePlayAIbutton","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","store","createStore","ReactDOM","render"],"mappings":"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","file":"static/js/main.bc8da53d.chunk.js","sourcesContent":["import { useEffect } from 'react';\r\nimport { useStoreState } from 'easy-peasy';\r\nimport { audio } from '../../audio';\r\nimport $ from 'jquery';\r\nimport './ships.css';\r\nimport '../boards/board.css';\r\n\r\nlet moving = false;\r\nlet rotating = false;\r\nlet orientation = 'hor';\r\nlet selectedShip = '';\r\nlet selectedShipName = '';\r\nlet shipIsSelected = false;\r\nlet setManualGridLocation = false;\r\nlet mouseX;\r\nlet mouseY;\r\n\r\nconst Ships = () => {\r\n    const { gameRoute, isMobile, showGameInstructions, gameTimer } = useStoreState(state => ({\r\n        gameRoute: state.gameRoute,\r\n        isMobile: state.stored.isMobile,\r\n        showGameInstructions: state.stored.showGameInstructions,\r\n        gameTimer: state.gameTimer,\r\n    }));\r\n\r\n    useEffect(() => {\r\n        if (gameTimer <= 0) removeShipIfSelected()\r\n    }, [gameTimer])\r\n\r\n    // Decide what happens when a ship is selected to move\r\n\r\n    const onShipSelect = (e) => {\r\n        if (!shipIsSelected && (gameRoute === 'placeShips')) {\r\n            audio.pickUpShip.play();\r\n            const userBoard = document.querySelector('.userBoard');\r\n            shipIsSelected = true;\r\n            selectedShip = e.target.parentElement;\r\n            userBoard.style.cursor = 'pointer';\r\n            selectedShip.style.pointerEvents = 'none';\r\n            selectedShip.style.border = '2px solid rgba(0, 250, 0, 0.5)';\r\n\r\n            if (parseInt(e.target.parentElement.offsetWidth) > parseInt(e.target.parentElement.offsetHeight)) {\r\n                orientation = 'hor';\r\n            } else if (parseInt(e.target.parentElement.offsetHeight) > parseInt(e.target.parentElement.offsetWidth)) {\r\n                orientation = 'vert';\r\n            }\r\n\r\n            if (selectedShip.classList.contains('carrier')) {\r\n                selectedShipName = 'carrier';\r\n            } else if (selectedShip.classList.contains('battleship')) {\r\n                selectedShipName = 'battleship';\r\n            } else if (selectedShip.classList.contains('cruiser')) {\r\n                selectedShipName = 'cruiser';\r\n            } else if (selectedShip.classList.contains('submarine')) {\r\n                selectedShipName = 'submarine';\r\n            } else if (selectedShip.classList.contains('destroyer')) {\r\n                selectedShipName = 'destroyer';\r\n            }\r\n        }\r\n    }\r\n\r\n    // Delete ship if still picked up after timer\r\n\r\n    const removeShipIfSelected = () => {\r\n        if (shipIsSelected) {\r\n            selectedShip.remove()\r\n            shipIsSelected = false;\r\n        }\r\n    }\r\n\r\n    // collision detection\r\n\r\n    const collisionDetection = (item1, item2) => {\r\n        let d1Offset = $(item1).offset();\r\n        let d1Height = $(item1).outerHeight(true);\r\n        let d1Width = $(item1).outerWidth(true);\r\n        let d1Top = d1Offset.top + d1Height;\r\n        let d1Left = d1Offset.left + d1Width;\r\n        let d2Offset = $(item2).offset();\r\n        let d2Height = $(item2).outerHeight(true);\r\n        let d2Width = $(item2).outerWidth(true);\r\n        let d2Top = d2Offset.top + d2Height;\r\n        let d2Left = d2Offset.left + d2Width;\r\n\r\n        const colliding = !(d1Top <= d2Offset.top + 2 || d1Offset.top >= d2Top - 2 || d1Left <= d2Offset.left + 2 || d1Offset.left >= d2Left - 2);\r\n        \r\n        return colliding;\r\n    }\r\n\r\n    // Place a ship down that is currently selected\r\n\r\n    window.onclick = (e) => {\r\n        if (!shipIsSelected && !isMobile && e.target?.parentElement?.classList?.contains('ship')) {\r\n            onShipSelect(e);\r\n        } else if (!isMobile && shipIsSelected && e.target.classList.contains('singleSquare') && rotating === false && areaIsClear()) {\r\n            audio.dropShip.play();\r\n            selectedShip.style.pointerEvents = 'auto';\r\n            document.querySelector('.userBoard').style.cursor = 'default';\r\n            selectedShip.style.border = null;\r\n            shipIsSelected = false;\r\n        }\r\n    }\r\n\r\n    const wasShipTouched = (x, y) => {\r\n        const shipLeft = selectedShip.getBoundingClientRect().left;\r\n        const shipRight = selectedShip.getBoundingClientRect().right;\r\n        const shipTop = selectedShip.getBoundingClientRect().top;\r\n        const shipBottom = selectedShip.getBoundingClientRect().bottom;\r\n\r\n        if ((x > shipLeft) && (x < shipRight) && (y > shipTop) && (y < shipBottom)) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    window.ontouchend = (e) => {\r\n        if (!showGameInstructions) {\r\n            if (shipIsSelected && !moving && areaIsClear() && !wasShipTouched(e.changedTouches[0].clientX, e.changedTouches[0].clientY)) {\r\n                audio.dropShip.play();\r\n                selectedShip.style.pointerEvents = 'auto';\r\n                document.querySelector('.userBoard').style.cursor = 'default';\r\n                selectedShip.style.border = null;\r\n                shipIsSelected = false;\r\n            } else if (shipIsSelected && !moving) {\r\n                if (orientation === 'hor') {\r\n                    orientation = 'vert';\r\n                    positionShipOnGrid(e);\r\n                } else if (orientation === 'vert') {\r\n                    orientation = 'hor';\r\n                    positionShipOnGrid(e);\r\n                }\r\n                audio.rotateShip.play();\r\n                setManualGridLocation = true;\r\n                rotating = true;\r\n            } else if (shipIsSelected && moving) {\r\n                if (isMobile && shipIsSelected && rotating === false && areaIsClear()) {\r\n                    audio.dropShip.play();\r\n                    selectedShip.style.pointerEvents = 'auto';\r\n                    document.querySelector('.userBoard').style.cursor = 'default';\r\n                    selectedShip.style.border = null;\r\n                    shipIsSelected = false;\r\n                }\r\n            } else if (!shipIsSelected && e.target.parentElement.classList.contains('ship')) {\r\n                onShipSelect(e);\r\n            }\r\n            moving = false;\r\n        }\r\n    }\r\n    \r\n    // Check to see if player is placing the ship in an open space\r\n\r\n    const areaIsClear = () => {\r\n        const ships = document.querySelectorAll('.ship');\r\n         for (let ship of ships) {\r\n            if (!ship.classList.contains(selectedShipName) && collisionDetection(selectedShip, ship)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    // Rotate the selected ship by right-clicking\r\n\r\n    window.oncontextmenu = (e) => {\r\n         if (!isMobile && shipIsSelected) {\r\n            audio.rotateShip.play();\r\n            if (orientation === 'hor') {\r\n                // selectedShip.style.transform = 'rotate(-90deg)';\r\n                orientation = 'vert';\r\n            } else if (orientation === 'vert') {\r\n                // selectedShip.style.transform = 'rotate(0deg)';\r\n                orientation = 'hor';\r\n            }\r\n            positionShipOnGrid(e);\r\n            setManualGridLocation = true;\r\n            rotating = true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    // Decide what happens on various key-press events\r\n\r\n    window.onkeydown = (e) => {\r\n        if (e.code === 'Enter') {\r\n            e.preventDefault();\r\n        }\r\n        // Rotate the selected ship by pressing the 'space' key\r\n\r\n        if (e.code === 'Space' && selectedShip.style !== undefined && shipIsSelected) {\r\n            audio.rotateShip.play();\r\n            if (orientation === 'hor') {\r\n                // selectedShip.style.transform = 'rotate(-90deg)';\r\n                orientation = 'vert';\r\n            } else if (orientation === 'vert') {\r\n                // selectedShip.style.transform = 'rotate(0deg)';\r\n                orientation = 'hor';\r\n            }\r\n            positionShipOnGrid(e);\r\n            setManualGridLocation = true;\r\n            rotating = true;\r\n        }\r\n    }\r\n\r\n    const matchTouchToSquares = (x, y) => {\r\n        const squares = document.querySelectorAll('.userBoard .singleSquare');\r\n        let selectedSquare = null;\r\n        squares.forEach(square => {\r\n            const squareLeft = square.getBoundingClientRect().left;\r\n            const squareRight = square.getBoundingClientRect().right;\r\n            const squareTop = square.getBoundingClientRect().top;\r\n            const squareBottom = square.getBoundingClientRect().bottom;\r\n\r\n            if ((x > squareLeft) && (x < squareRight) && (y > squareTop) && (y < squareBottom)) {\r\n                selectedSquare = square;\r\n                return;\r\n            }\r\n        })\r\n        return selectedSquare;\r\n    }\r\n\r\n    const positionShipOnGrid = (e) => {\r\n        let square;\r\n        if (e.type === 'touchmove') {\r\n            square = matchTouchToSquares(e.touches[0].clientX, e.touches[0].clientY);\r\n        } else if (e.type === 'touchend') {\r\n            square = matchTouchToSquares(e.changedTouches[0].clientX, e.changedTouches[0].clientY);\r\n        } else if (e.code === 'Space' || e.type === 'contextmenu') {\r\n            square = matchTouchToSquares(mouseX, mouseY);\r\n        } else {\r\n            square = e.target;\r\n        }\r\n\r\n        rotating = false;\r\n        selectedShip.style.transform = null;\r\n        const userGrid = document.querySelector('.userBoard');\r\n        const childShip = document.querySelector(`.${selectedShipName}Icon`);\r\n        const targetId = square?.id;\r\n        const colStart = targetId?.substring(0, targetId.indexOf('-'));\r\n        const rowStart = targetId?.substring((targetId.indexOf('-') + 1), targetId?.length);\r\n\r\n        if ((userGrid.contains(e.target) || userGrid.contains(square))\r\n        && (square?.classList?.contains('singleSquare'))\r\n        && shipIsSelected === true) {\r\n            if (orientation === 'hor') {\r\n                childShip.classList.remove(`rotate-${selectedShipName}`);\r\n                if (colStart < (11 - parseInt(selectedShip.id) + 1)) {\r\n                    selectedShip.style.gridColumn = `${colStart} / ${parseInt(colStart) + parseInt(selectedShip.id)}`;\r\n                } else if (colStart >= (11 - parseInt(selectedShip.id) + 1) && setManualGridLocation === true) {\r\n                    selectedShip.style.gridColumn = `11 / ${11 - parseInt(selectedShip.id)}`;\r\n                } else setManualGridLocation = false;\r\n                selectedShip.style.gridRow = `${rowStart} / ${parseInt(rowStart) + 1}`;\r\n            } else if (orientation === 'vert') {\r\n                childShip.classList.add(`rotate-${selectedShipName}`);\r\n                if (rowStart > (parseInt(selectedShip.id) - 1)) {\r\n                    selectedShip.style.gridRow = `${parseInt(rowStart) + 1} / ${parseInt(rowStart) - parseInt(selectedShip.id) + 1}`;\r\n                } else if (rowStart <= (parseInt(selectedShip.id) - 1) && setManualGridLocation === true) {\r\n                    selectedShip.style.gridRow = `${parseInt(selectedShip.id) + 1} / 1`;\r\n                } else setManualGridLocation = false;\r\n                selectedShip.style.gridColumn = `${colStart} / ${parseInt(colStart) + 1}`;\r\n            }\r\n        }\r\n    }\r\n\r\n    // Change the grid-row and grid-column of the selected ship mouse is over the user's board\r\n\r\n    window.onmouseover = (e) => {\r\n        mouseX = e.clientX;\r\n        mouseY = e.clientY;\r\n        if (shipIsSelected && !isMobile) {\r\n            positionShipOnGrid(e);\r\n        }\r\n    };\r\n\r\n    window.ontouchmove = (e) => {\r\n        moving = true;\r\n        if (shipIsSelected && isMobile) {\r\n            positionShipOnGrid(e);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div id='5' className='ship carrier'><div className='carrierIcon'></div></div>\r\n\r\n            <div id='4' className='ship battleship'><div className='battleshipIcon'></div></div>\r\n\r\n            <div id='3' className='ship cruiser'><div className='cruiserIcon'></div></div>\r\n\r\n            <div id='3' className='ship submarine'><div className='submarineIcon'></div></div>\r\n\r\n            <div id='2' className='ship destroyer'><div className='destroyerIcon'></div></div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Ships;\r\n","import { action, persist } from 'easy-peasy';\r\n\r\nconst isMobileDevice = () => {\r\n    if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\r\n        return true\r\n    }\r\n    return false\r\n}\r\n\r\nconst isIOSDevice = () => {\r\n    if (/iPhone|iPad|iPod/i.test(navigator.userAgent)) {\r\n        return true\r\n    }\r\n    return false\r\n}\r\n\r\nconst model = {\r\n\r\n    //State\r\n\r\n    stored: persist(\r\n        {\r\n            soundOn: true,\r\n            musicOn: true,\r\n            isMobile: isMobileDevice(),\r\n            isIOS: isIOSDevice(),\r\n            showGameInstructions: true,\r\n        },\r\n        {\r\n            storage: 'localStorage',\r\n        }\r\n\r\n    ),\r\n\r\n    route: 'login',\r\n    user: null,\r\n    opponentName: '',\r\n    unsortedFriends: [],\r\n    findMatchInterval: 0,\r\n    checkOppStatusInterval: 0,\r\n    updatLastOnlineInterval: 0,\r\n    getOnlineFriendsInterval: 0,\r\n    search: false,\r\n    friendRequests: [],\r\n    userName: '',\r\n    password: '',\r\n    topFive: [],\r\n    allFriends: [],\r\n    friendFilter: '',\r\n    friendSearch: '',\r\n    friendsOnline: [],\r\n    gameRoute: 'placeShips',\r\n    playerIsReady: false,\r\n    yourTurn: false,\r\n    chatText: '',\r\n    inviteSent: false,\r\n    inviteReceived: false,\r\n    playerTurnText: '',\r\n    showFriendsMobile: false,\r\n    showChatMobile: false,\r\n    audioStarted: false,\r\n    shipIsSelected: false,\r\n    deviceInPortrait: true,\r\n    opponentIsReady: false,\r\n    firstGameInstructionLoad: true,\r\n    gameTimer: 90,\r\n    gameCountdownInterval: 0,\r\n    skippedTurns: 0,\r\n    playingWithAI: false,\r\n    aiShipLayout: {},\r\n    allSquareIDs: [],\r\n    aiTurn: false,\r\n    aiShotMatchedToUserShot: '',\r\n    channel: '',\r\n    pusher: null,\r\n\r\n\r\n    //Actions\r\n\r\n    setRoute: action((state, input) => {\r\n        state.route = input;\r\n    }),\r\n\r\n    setUser: action((state, input) => {\r\n        state.user = input;\r\n    }),\r\n\r\n    setOpponentName: action((state, input) => {\r\n        state.opponentName = input;\r\n    }),\r\n\r\n    setUnsortedFriends: action((state, input) => {\r\n        state.unsortedFriends = input;\r\n    }),\r\n\r\n    setFindMatchInterval: action((state, input) => {\r\n        state.findMatchInterval = input;\r\n    }),\r\n\r\n    setCheckOppStatusInterval: action((state, input) => {\r\n        state.checkOppStatusInterval = input;\r\n    }),\r\n\r\n    setUpdatLastOnlineInterval: action((state, input) => {\r\n        state.updatLastOnlineInterval = input;\r\n    }),\r\n\r\n    setGetOnlineFriendsInterval: action((state, input) => {\r\n        state.getOnlineFriendsInterval = input;\r\n    }),\r\n\r\n    setSearch: action((state, input) => {\r\n        state.search = input;\r\n    }),\r\n\r\n    setFriendRequests: action((state, input) => {\r\n        state.friendRequests = input;\r\n    }),\r\n\r\n    setUserName: action((state, input) => {\r\n        state.userName = input;\r\n    }),\r\n\r\n    setPassword: action((state, input) => {\r\n        state.password = input;\r\n    }),\r\n\r\n    setTopFive: action((state, input) => {\r\n        state.topFive = input;\r\n    }),\r\n\r\n    setAllFriends: action((state, input) => {\r\n        state.allFriends = input;\r\n    }),\r\n\r\n    setFriendFilter: action((state, input) => {\r\n        state.friendFilter = input;\r\n    }),\r\n\r\n    setFriendSearch: action((state, input) => {\r\n        state.friendSearch = input;\r\n    }),\r\n\r\n    setFriendsOnline: action((state, input) => {\r\n        state.friendsOnline = input;\r\n    }),\r\n\r\n    setGameRoute: action((state, input) => {\r\n        state.gameRoute = input;\r\n    }),\r\n    \r\n    setPlayerIsReady: action((state, input) => {\r\n        state.playerIsReady = input;\r\n    }),\r\n\r\n    setYourTurn: action((state, input) => {\r\n        state.yourTurn = input;\r\n    }),\r\n\r\n    setChatText: action((state, input) => {\r\n        state.chatText = input;\r\n    }),\r\n\r\n    setInviteSent: action((state, input) => {\r\n        state.inviteSent = input;\r\n    }),\r\n\r\n    setInviteReceived: action((state, input) => {\r\n        state.inviteReceived = input;\r\n    }),\r\n    \r\n    setPlayerTurnText: action((state, input) => {\r\n        state.playerTurnText = input;\r\n    }),\r\n\r\n    setSoundOn: action((state) => {\r\n        state.stored.soundOn = !state.stored.soundOn;\r\n    }),\r\n\r\n    setMusicOn: action((state) => {\r\n        state.stored.musicOn = !state.stored.musicOn;\r\n    }),\r\n\r\n    setIsMobile: action((state, input) => {\r\n        state.stored.isMobile = input;\r\n    }),\r\n\r\n    setShowFriendsMobile: action((state, input) => {\r\n        state.showFriendsMobile = input;\r\n    }),\r\n\r\n    setShowChatMobile: action((state, input) => {\r\n        state.showChatMobile = input;\r\n    }),\r\n\r\n    setAudioStarted: action((state) => {\r\n        state.audioStarted = true;\r\n    }),\r\n\r\n    setShipIsSelected: action((state, input) => {\r\n        state.shipIsSelected = input;\r\n    }),\r\n\r\n    setShowGameInstructions: action((state, input) => {\r\n        state.stored.showGameInstructions = input;\r\n    }),\r\n\r\n    setDeviceInPortrait: action((state, input) => {\r\n        state.deviceInPortrait = input;\r\n    }),\r\n\r\n    setOpponentIsReady: action((state, input) => {\r\n        state.opponentIsReady = input;\r\n    }),\r\n\r\n    setFirstGameInstructionLoad: action((state, input) => {\r\n        state.firstGameInstructionLoad = input;\r\n    }),\r\n\r\n    setGameTimer: action((state, input) => {\r\n        state.gameTimer = input;\r\n    }),\r\n\r\n    setGameCountdownInterval: action((state, input) => {\r\n        state.gameCountdownInterval = input;\r\n    }),\r\n\r\n    setSkippedTurns: action((state, input) => {\r\n        state.skippedTurns = input;\r\n    }),\r\n\r\n    setPlayigWithAI: action((state, input) => {\r\n        state.playingWithAI = input;\r\n    }),\r\n    \r\n    setAiShipLayout: action((state, input) => {\r\n        state.aiShipLayout = input;\r\n    }),\r\n\r\n    setAllSquareIDs: action((state, input) => {\r\n        state.allSquareIDs = input;\r\n    }),\r\n\r\n    setAIturn: action((state, input) => {\r\n        state.aiTurn = input;\r\n    }),\r\n\r\n    setAIShotMatchedToUserShot: action((state, input) => {\r\n        state.aiShotMatchedToUserShot = input;\r\n    }),\r\n\r\n    setChannel: action((state, input) => {\r\n        state.channel = input;\r\n    }),\r\n\r\n    setPusher: action((state, input) => {\r\n        state.pusher = input;\r\n    }),\r\n}\r\n\r\nexport default model;","import React from 'react';\r\nimport { useStoreState } from 'easy-peasy';\r\n\r\nimport './board.css';\r\n\r\nconst AssembleBoard = ({ onSquareClicked }) => {\r\n\r\n    const { gameRoute } = useStoreState(state => ({\r\n        gameRoute: state.gameRoute,\r\n        route: state.route\r\n    }));\r\n\r\n    const allSquares = [];\r\n    for (let i = 1; i < 11; i++) {\r\n        for (let j = 0; j < 10; j++) {\r\n            allSquares.push({row: String.fromCharCode(97 + j), col: i, colStart: i, rowStart: j + 1})\r\n        }\r\n    }\r\n\r\n    const handleSquareClick = (e) => {\r\n        const parentBoard = e.target.parentElement.parentElement.parentElement;\r\n        if (gameRoute === 'gameInProgress' && parentBoard.classList.contains('opponentBoard')) {\r\n            onSquareClicked(e);\r\n        }\r\n    }\r\n\r\n    return (\r\n        allSquares.map(square => {\r\n            return (\r\n                <div\r\n                    onClick={handleSquareClick}\r\n                    style={{gridArea: square.row + square.col}}\r\n                    className={'singleSquare ' + square.row + ' ' + square.row + square.col}\r\n                    key={square.row + square.col}\r\n                    id={square.colStart + '-' + square.rowStart}\r\n                >\r\n                </div>\r\n            )\r\n        })\r\n    )\r\n}\r\n\r\nexport default AssembleBoard;\r\n","export default __webpack_public_path__ + \"static/media/ambient-waves.b96c967b.mp3\";","export default __webpack_public_path__ + \"static/media/lobby-theme.a9efad87.mp3\";","export default __webpack_public_path__ + \"static/media/ship-placement-theme.58d77477.mp3\";","export default __webpack_public_path__ + \"static/media/game-theme.07202b2d.mp3\";","export default __webpack_public_path__ + \"static/media/button-click.90b21783.mp3\";","export default __webpack_public_path__ + \"static/media/hover-sound.d0a3b451.mp3\";","export default __webpack_public_path__ + \"static/media/hit-sound.f966784e.mp3\";","export default __webpack_public_path__ + \"static/media/miss-sound.1dd4ce99.mp3\";","export default __webpack_public_path__ + \"static/media/ship-sunk.48a88457.mp3\";","export default __webpack_public_path__ + \"static/media/notification.00f0a2bd.mp3\";","export default __webpack_public_path__ + \"static/media/pick-up-ship.86313e09.mp3\";","export default __webpack_public_path__ + \"static/media/drop-ship.adae2f7b.mp3\";","export default __webpack_public_path__ + \"static/media/rotate-ship.410a2faf.mp3\";","export default __webpack_public_path__ + \"static/media/missile-lock.271bad3e.mp3\";","export default __webpack_public_path__ + \"static/media/missile-launch.1ef34a89.mp3\";","export default __webpack_public_path__ + \"static/media/incoming-missile.df9be7a9.mp3\";","import { Howl } from 'howler';\r\nimport ambientWaves from './audioclips/ambient-waves.mp3';\r\nimport lobbyTheme from './audioclips/lobby-theme.mp3';\r\nimport shipPlacementTheme from './audioclips/ship-placement-theme.mp3';\r\nimport gameTheme from './audioclips/game-theme.mp3';\r\nimport buttonClick from './audioclips/button-click.mp3';\r\nimport hoverSound from './audioclips/hover-sound.mp3';\r\nimport hitSound from './audioclips/hit-sound.mp3';\r\nimport missSound from './audioclips/miss-sound.mp3';\r\nimport shipSunkSound from './audioclips/ship-sunk.mp3';\r\nimport notificationSound from './audioclips/notification.mp3';\r\nimport pickUpShip from './audioclips/pick-up-ship.mp3';\r\nimport dropShip from './audioclips/drop-ship.mp3';\r\nimport rotateShip from './audioclips/rotate-ship.mp3';\r\nimport missileLock from './audioclips/missile-lock.mp3';\r\nimport missileLaunch from './audioclips/missile-launch.mp3';\r\nimport incomingMissile from './audioclips/incoming-missile.mp3';\r\n\r\nconst handleWaveFade = () => {\r\n    if (audio.ambientWaves.volume() === 0) {\r\n        audio.ambientWaves.stop();\r\n    }  \r\n}\r\n\r\nconst handleLobbyFade = () => {\r\n    if (audio.lobbyTheme.volume() === 0) {\r\n        audio.lobbyTheme.stop();\r\n    } \r\n}\r\n\r\nconst handleGameFade = () => {\r\n    if (audio.gameTheme.volume() === 0) {\r\n        audio.gameTheme.stop();\r\n    } \r\n}\r\n\r\nconst isMobileDevice = () => {\r\n    if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\r\n        return true\r\n    }\r\n    return false\r\n}\r\n\r\nexport const audio = {\r\n    ambientWaves: new Howl({\r\n        src: ambientWaves,\r\n        loop: true,\r\n        volume: 0.2,\r\n        // onfade: handleWaveFade\r\n    }),\r\n\r\n    lobbyTheme: new Howl({\r\n        src: lobbyTheme,\r\n        loop: true,\r\n        volume: 0.5,\r\n        // onfade: handleLobbyFade\r\n    }),\r\n\r\n    shipPlacementTheme: new Howl({\r\n        src: shipPlacementTheme,\r\n        loop: true,\r\n        volume: 0.5,\r\n    }),\r\n\r\n    gameTheme: new Howl({\r\n        src: gameTheme,\r\n        loop: true,\r\n        volume: 0.3,\r\n        // onfade: handleGameFade\r\n    }),\r\n\r\n    buttonClick: new Howl({\r\n        src: buttonClick,\r\n        volume: 0.6\r\n    }),\r\n\r\n    hoverSound: new Howl({\r\n        src: hoverSound,\r\n        volume: 0.6,\r\n        mute: isMobileDevice\r\n    }),\r\n\r\n    hitSound: new Howl({\r\n        src: hitSound,\r\n        volume: 0.7\r\n    }),\r\n\r\n    missSound: new Howl({\r\n        src: missSound,\r\n        volume: 0.4\r\n    }),\r\n\r\n    shipSunkSound: new Howl({\r\n        src: shipSunkSound,\r\n        volume: 0.9\r\n    }),\r\n\r\n    notificationSound: new Howl({\r\n        src: notificationSound,\r\n        volume: 0.9\r\n    }),\r\n\r\n    pickUpShip: new Howl({\r\n        src: pickUpShip,\r\n        volume: 0.9\r\n    }),\r\n\r\n    dropShip: new Howl({\r\n        src: dropShip,\r\n        volume: 0.9\r\n    }),\r\n    \r\n    rotateShip: new Howl({\r\n        src: rotateShip,\r\n        volume: 0.9\r\n    }),\r\n\r\n    missileLock: new Howl({\r\n        src: missileLock,\r\n        volume: 0.9\r\n    }),\r\n\r\n    missileLaunch: new Howl({\r\n        src: missileLaunch,\r\n        volume: 1\r\n    }),\r\n\r\n    incomingMissile: new Howl({\r\n        src: incomingMissile,\r\n        volume: 1\r\n    })\r\n}","export default __webpack_public_path__ + \"static/media/hit.3c86e79f.gif\";","import React, { useEffect } from 'react';\r\nimport { useStoreState, useStoreActions } from 'easy-peasy';\r\nimport Board from './Board';\r\nimport Ships from '../ships/Ships';\r\nimport $ from 'jquery';\r\nimport { audio } from '../../audio';\r\nimport hitGif from './hit.gif';\r\nimport './board.css';\r\n\r\nlet hitSquares = [];\r\nlet firstHit = '';\r\nlet lastHit = '';\r\nlet aiShipOrientationGuess = null;\r\n\r\nconst UserBoard = () => {\r\n    const {  playingWithAI, allSquareIDs, aiTurn, channel, opponentName } = useStoreState(state => ({\r\n        playingWithAI: state.playingWithAI,\r\n        allSquareIDs: state.allSquareIDs,\r\n        aiTurn: state.aiTurn,\r\n        channel: state.channel,\r\n        opponentName: state.opponentName\r\n    }));\r\n\r\n    const { setYourTurn, setAllSquareIDs, setAIturn } = useStoreActions(actions => ({\r\n        setYourTurn: actions.setYourTurn,\r\n        setAllSquareIDs: actions.setAllSquareIDs,\r\n        setAIturn: actions.setAIturn\r\n    }));\r\n\r\n    let shipHit = '';\r\n    useEffect(() => {\r\n        const allSqaures = document.querySelectorAll('.opponentBoard .singleSquare');\r\n        const allSquareIDsTemp = [];\r\n        for (let square of allSqaures) {\r\n            allSquareIDsTemp.push(square.id);\r\n        }\r\n        setAllSquareIDs(allSquareIDsTemp);\r\n\r\n        channel.bind('receive-shot', data => {\r\n            if (data.shot === 'oppOutOfTime') {\r\n                setYourTurn(true);\r\n            } else {\r\n                const oppShot = document.getElementById(data.shot);\r\n    \r\n                const incomingMissileDuration = audio.incomingMissile.duration() * 1000 - 100;\r\n                audio.incomingMissile.play();\r\n                setTimeout(() => {\r\n                    applyHitOrMiss(oppShot);\r\n                    setYourTurn(true);\r\n                }, incomingMissileDuration)\r\n            }\r\n            return data\r\n        })\r\n\r\n        return () => {\r\n            channel.unbind('receive-shot')\r\n            setAIturn(false);\r\n            setAllSquareIDs([]);\r\n            hitSquares = [];\r\n            firstHit = '';\r\n            lastHit = '';\r\n            aiShipOrientationGuess = null;\r\n        }\r\n    },[])\r\n\r\n    const shuffleArray = (arr) => {\r\n        let currentIndex = arr.length, randomIndex;\r\n\r\n        while (currentIndex !== 0) {\r\n            randomIndex = Math.floor(Math.random() * currentIndex);\r\n            currentIndex--;\r\n\r\n            [arr[currentIndex], arr[randomIndex]] = [arr[randomIndex], arr[currentIndex]];\r\n        }\r\n        \r\n        return arr;\r\n    }\r\n\r\n    const colString = (str) => {\r\n        return str.split('-')[0];\r\n    }\r\n\r\n    const rowString = (str) => {\r\n        return str.split('-')[1];\r\n    }\r\n\r\n    const pickRandomSquare = () => {\r\n        const randIndex = Math.round(Math.random() * ((allSquareIDs.length - 1) - 0) + 0);\r\n        const randSquare = allSquareIDs[randIndex];\r\n        allSquareIDs.splice(randIndex, 1);\r\n\r\n        setTimeout(() => {\r\n            console.log(\"AI: Choosing random available square --> \", randSquare)\r\n            console.log(\"__________________________________________________________________________________\")\r\n        }, 1000);\r\n\r\n        return randSquare;\r\n    }\r\n\r\n    const getChoicesForNearby = (hit) => {\r\n        const possibleChoices = [\r\n            !aiShipOrientationGuess || aiShipOrientationGuess === 'hor' ? `${parseInt(colString(hit)) - 1}-${parseInt(rowString(hit))}` : null,\r\n            !aiShipOrientationGuess || aiShipOrientationGuess === 'hor' ? `${parseInt(colString(hit)) + 1}-${parseInt(rowString(hit))}` : null,\r\n            !aiShipOrientationGuess || aiShipOrientationGuess === 'vert' ? `${parseInt(colString(hit))}-${parseInt(rowString(hit)) - 1}` : null,\r\n            !aiShipOrientationGuess || aiShipOrientationGuess === 'vert' ? `${parseInt(colString(hit))}-${parseInt(rowString(hit)) + 1}` : null\r\n        ]\r\n\r\n        return possibleChoices;\r\n    }\r\n\r\n    const pickNearbySquare = () => {\r\n        let aiMoveText = '';\r\n        if (lastHit !== firstHit) {\r\n            if (colString(lastHit) !== colString(firstHit)) {\r\n                aiShipOrientationGuess = 'hor';\r\n            } else {\r\n                aiShipOrientationGuess = 'vert';\r\n            }\r\n        } else {\r\n            aiShipOrientationGuess = null;\r\n        }\r\n\r\n        let numOfValidSquares = 0;\r\n        let possibleChoices = getChoicesForNearby(lastHit);\r\n        shuffleArray(possibleChoices);\r\n\r\n        for (let choice of possibleChoices) {\r\n            for (let square of allSquareIDs) {\r\n                if (square === choice) {\r\n                    numOfValidSquares += 1;\r\n                    aiShipOrientationGuess \r\n                    ? aiMoveText = `AI: Choosing ${aiShipOrientationGuess === 'hor' ? 'horizontal' : 'vertical'} neighbor to last hit --> `\r\n                    : aiMoveText = \"AI: Choosing random available neighbor to last hit --> \"\r\n                }\r\n            }\r\n        }\r\n\r\n        if (numOfValidSquares <= 0) {\r\n            lastHit = firstHit;\r\n            possibleChoices = getChoicesForNearby(firstHit);\r\n            let foundOption = false;\r\n\r\n            for (let choice of possibleChoices) {\r\n                for (let square of allSquareIDs) {\r\n                    if (square === choice) {\r\n                        foundOption = true;\r\n                        aiMoveText = `AI: Going back to first hit with another ${aiShipOrientationGuess === 'hor' ? 'horizontal' : 'vertical'} guess --> `;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (!foundOption) {\r\n                aiShipOrientationGuess = null;\r\n                aiMoveText = `AI: Going back to first hit and choosing random available neighbor --> `;\r\n                possibleChoices = getChoicesForNearby(firstHit);\r\n            }\r\n\r\n            shuffleArray(possibleChoices);\r\n        }\r\n\r\n\r\n        if (possibleChoices) {\r\n            for (let choice of possibleChoices) {\r\n                for (let square of allSquareIDs) {\r\n                    if (square === choice) {\r\n                        const selected = choice;\r\n                        allSquareIDs.splice(allSquareIDs.indexOf(selected), 1);\r\n                        setTimeout(() => {\r\n                            console.log(aiMoveText, selected)\r\n                            console.log(\"__________________________________________________________________________________\")\r\n                        }, 1000);\r\n                        return selected;\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            console.log(Error, 'Could not find possible square');\r\n        }\r\n    }\r\n\r\n    const unfinishedShipSpot = () => {\r\n        const allSqaures = document.querySelectorAll('.userBoard .singleSquare');\r\n        for (let square of allSqaures) {\r\n            if (square?.childNodes[0]?.classList.contains('hitMarkerGif')) {\r\n                setTimeout(() => {\r\n                    console.log(\"AI: Going back to unfinished ship -- > \", square.id)\r\n                }, 500);\r\n                return square.id;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (aiTurn) {\r\n            let shotOnUserBoard;\r\n            if (lastHit) {\r\n                shotOnUserBoard = document.getElementById(pickNearbySquare());\r\n            } else if (unfinishedShipSpot()) {\r\n                firstHit = unfinishedShipSpot();\r\n                lastHit = unfinishedShipSpot();\r\n                shotOnUserBoard = document.getElementById(pickNearbySquare());\r\n            } else {\r\n                shotOnUserBoard = document.getElementById(pickRandomSquare());\r\n            }\r\n\r\n            setTimeout(() => {\r\n                const incomingMissileDuration = audio.incomingMissile.duration() * 1000;\r\n                audio.incomingMissile.play();\r\n                setTimeout(() => {\r\n                    applyHitOrMiss(shotOnUserBoard);\r\n                    setYourTurn(true);\r\n                }, incomingMissileDuration)\r\n            }, 1300);\r\n            setAIturn(false);\r\n        }\r\n    },[aiTurn])\r\n\r\n    const hit = (item1, item2) => {\r\n        let d1Offset = $(item1).offset();\r\n        let d1Height = $(item1).outerHeight(true);\r\n        let d1Width = $(item1).outerWidth(true);\r\n        let d1Top = d1Offset.top + d1Height;\r\n        let d1Left = d1Offset.left + d1Width;\r\n        let d2Offset = $(item2).offset();\r\n        let d2Height = $(item2).outerHeight(true);\r\n        let d2Width = $(item2).outerWidth(true);\r\n        let d2Top = d2Offset.top + d2Height;\r\n        let d2Left = d2Offset.left + d2Width;\r\n\r\n        const colliding = !(d1Top <= d2Offset.top + 2 || d1Offset.top >= d2Top - 2 || d1Left <= d2Offset.left + 2 || d1Offset.left >= d2Left - 2);\r\n\r\n        return colliding;\r\n    }\r\n\r\n    const countHitsOnShip = (ship) => {\r\n        let count = 0;\r\n        for (let hit of hitSquares) {\r\n            if (hit === ship) {\r\n                count += 1;\r\n            }\r\n        }\r\n        return count;\r\n    }\r\n\r\n    const applyHitOrMiss = async (oppShot) => {\r\n        if (matchOppShotToBoard(oppShot)) {\r\n            const hitMarkerBackgroundFlash = document.createElement('div');\r\n            hitMarkerBackgroundFlash.classList.add('hitMarkerBackgroundFlash');\r\n\r\n            const hitElem = document.createElement('img');\r\n            hitElem.src = hitGif;\r\n            hitElem.classList.add('hitMarkerGif');\r\n\r\n            const shrapN = document.createElement('div');\r\n            shrapN.classList.add('shrapN');\r\n\r\n            const shrapNE = document.createElement('div');\r\n            shrapNE.classList.add('shrapNE');\r\n\r\n            const shrapE = document.createElement('div');\r\n            shrapE.classList.add('shrapE');\r\n\r\n            const shrapSE = document.createElement('div');\r\n            shrapSE.classList.add('shrapSE');\r\n\r\n            const shrapS = document.createElement('div');\r\n            shrapS.classList.add('shrapS');\r\n\r\n            const shrapSW = document.createElement('div');\r\n            shrapSW.classList.add('shrapSW');\r\n\r\n            const shrapW = document.createElement('div');\r\n            shrapW.classList.add('shrapW');\r\n\r\n            const shrapNW = document.createElement('div');\r\n            shrapNW.classList.add('shrapNW');\r\n\r\n            oppShot.append(hitElem, hitMarkerBackgroundFlash, shrapN, shrapNE, shrapE, shrapSE, shrapS, shrapSW, shrapW, shrapNW);\r\n\r\n            setTimeout(() => {\r\n                hitMarkerBackgroundFlash.remove();\r\n                shrapN.remove();\r\n                shrapNE.remove();\r\n                shrapE.remove();\r\n                shrapSE.remove();\r\n                shrapS.remove();\r\n                shrapSW.remove();\r\n                shrapW.remove();\r\n                shrapNW.remove();\r\n            }, 1100);\r\n\r\n            hitSquares.push(shipHit);\r\n            lastHit = oppShot.id;\r\n            if (!firstHit) {\r\n                firstHit = oppShot.id;\r\n            }\r\n\r\n            oppShot.classList.add(`_${shipHit}_userboard`)\r\n            if (countHitsOnShip(shipHit) === parseInt(document.querySelector(`.${shipHit}`).id)) {\r\n                const sunkShipIcon = document.querySelector(`.${shipHit}Icon`);\r\n                const squares = document.querySelectorAll('.singleSquare');\r\n                audio.shipSunkSound.play();\r\n                firstHit = '';\r\n                lastHit = '';\r\n                for (let square of squares) {\r\n                    if (square.classList.contains(`_${shipHit}_userboard`)) {\r\n                        // square.classList.remove('hitMarker');\r\n                        square.querySelector('.hitMarkerGif').remove();\r\n                    }\r\n                }\r\n                sunkShipIcon.classList.add('shipSunkUser');\r\n            } else {\r\n                audio.hitSound.play();\r\n            }\r\n            if (!playingWithAI) await fetch(`${process.env.REACT_APP_PUSHER_URL}/sendResultToOpponentBoard?channelName=${opponentName}&shotSquare=${oppShot.id}&shot=hit&shipHit=${shipHit}`)\r\n        } else {\r\n            oppShot.classList.add('missMarker');\r\n            audio.missSound.play();\r\n            if (!playingWithAI) await fetch(`${process.env.REACT_APP_PUSHER_URL}/sendResultToOpponentBoard?channelName=${opponentName}&shotSquare=${oppShot.id}&shot=miss&shipHit=${shipHit}`)\r\n        }\r\n    }\r\n\r\n    const matchOppShotToBoard = (shot) => {\r\n        const ships = document.querySelectorAll('.ship');\r\n        for (let ship of ships) {\r\n            if (hit(shot, ship)) {\r\n                shipHit = ship.classList[1];\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    return (\r\n        <div className='board userBoard'>\r\n            <div className='rows'>\r\n                <h3>A</h3>\r\n                <h3>B</h3>\r\n                <h3>C</h3>\r\n                <h3>D</h3>\r\n                <h3>E</h3>\r\n                <h3>F</h3>\r\n                <h3>G</h3>\r\n                <h3>H</h3>\r\n                <h3>I</h3>\r\n                <h3>J</h3>\r\n            </div>\r\n\r\n            <div className='cols'>\r\n                <h3>1</h3>\r\n                <h3>2</h3>\r\n                <h3>3</h3>\r\n                <h3>4</h3>\r\n                <h3>5</h3>\r\n                <h3>6</h3>\r\n                <h3>7</h3>\r\n                <h3>8</h3>\r\n                <h3>9</h3>\r\n                <h3>10</h3>\r\n            </div>\r\n\r\n            <div className='grid'>\r\n                <div className='allSqaures'>\r\n                    <Board />\r\n                    <Ships />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UserBoard;\r\n\r\n","import React, { useEffect } from 'react';\r\nimport { useStoreState, useStoreActions } from 'easy-peasy';\r\nimport Board from './Board';\r\nimport { audio } from '../../audio';\r\nimport './board.css';\r\n\r\nlet hitSquares = [];\r\nlet score = 0;\r\n\r\nconst OpponentBoard = () => {\r\n    const { yourTurn, playingWithAI, aiShipLayout, user, channel, opponentName } = useStoreState(state => ({\r\n        yourTurn: state.yourTurn,\r\n        playingWithAI: state.playingWithAI,\r\n        aiShipLayout: state.aiShipLayout,\r\n        user: state.user,\r\n        channel: state.channel,\r\n        opponentName: state.opponentName\r\n    }));\r\n\r\n    const { setYourTurn, setSkippedTurns, setAiShipLayout, setAIturn, setRoute, setUser } = useStoreActions(actions => ({\r\n        setYourTurn: actions.setYourTurn,\r\n        setSkippedTurns: actions.setSkippedTurns,\r\n        setAiShipLayout: actions.setAiShipLayout,\r\n        setAIturn: actions.setAIturn,\r\n        setRoute: actions.setRoute,\r\n        setUser: actions.setUser\r\n    }));\r\n\r\n    let aiShipLocations = {\r\n        destroyer: [],\r\n        submarine: [],\r\n        cruiser: [],\r\n        battleship: [],\r\n        carrier: []\r\n    };\r\n    \r\n    const countHitsOnShip = (ship) => {\r\n        let count = 0;\r\n        for (let hit of hitSquares) {\r\n            if (hit === ship) {\r\n                count += 1;\r\n            }\r\n        }\r\n        return count;\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (playingWithAI) setAIships();\r\n\r\n        channel.bind('show-result-on-opponent-board', data => {\r\n            const clickedSquare = document.querySelector(`.opponentBoard [id='${data.shotSquare}']`);\r\n            document.querySelector('.preResultDiv').remove();\r\n            if (data.result === 'hit' && clickedSquare.classList !== undefined) {\r\n                clickedSquare.classList.add('hitMarker');\r\n                hitSquares.push(data.shipHit);\r\n                clickedSquare.classList.add(`_${data.shipHit}`)\r\n                if (countHitsOnShip(data.shipHit) === parseInt(document.querySelector(`.${data.shipHit}`).id)) {\r\n                    const squares = document.querySelectorAll('.singleSquare');\r\n                    audio.shipSunkSound.play();\r\n                    for (let square of squares) {\r\n                        if (square.classList.contains(`_${data.shipHit}`)) {\r\n                            square.classList.add('shipSunk');\r\n                        }\r\n                    }\r\n                } else {\r\n                    audio.hitSound.play();\r\n                }\r\n            } else if (data.result === 'miss' && clickedSquare.classList !== undefined) {\r\n                clickedSquare.classList.add('missMarker');\r\n                audio.missSound.play();\r\n            }\r\n            return data\r\n        })\r\n\r\n        return () => {\r\n            channel.unbind('show-result-on-opponent-board')\r\n            setAiShipLayout({});\r\n            setAIturn(false);\r\n            setSkippedTurns(0);\r\n            score = 0;\r\n            hitSquares = [];\r\n        }\r\n    },[])\r\n\r\n    const aiSpotClear = (newSpot) => {\r\n        for (let ship in aiShipLocations) {\r\n            for (let spot of aiShipLocations[ship]) {\r\n                if (spot === newSpot) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    const pickRandomBoardLocation = () => {\r\n        let newSpot;\r\n        let counter = 0;\r\n        while (counter < 100) {\r\n            counter++;\r\n            newSpot = `${Math.round(Math.random() * (10 - 1) + 1)}-${Math.round(Math.random() * (10 - 1) + 1)}`\r\n            if (aiSpotClear(newSpot)) {\r\n                return newSpot;\r\n            }\r\n        }\r\n    }\r\n\r\n    const shuffleArray = (arr) => {\r\n        let currentIndex = arr.length, randomIndex;\r\n\r\n        while (currentIndex !== 0) {\r\n            randomIndex = Math.floor(Math.random() * currentIndex);\r\n            currentIndex--;\r\n\r\n            [arr[currentIndex], arr[randomIndex]] = [arr[randomIndex], arr[currentIndex]];\r\n        }\r\n        \r\n        return arr;\r\n    }\r\n\r\n    const colString = (str) => {\r\n        return str.split('-')[0];\r\n    }\r\n\r\n    const rowString = (str) => {\r\n        return str.split('-')[1];\r\n    }\r\n\r\n    const lowestAndHighest = (i, colRowIndex, shipName) => {\r\n        const firstSpot = aiShipLocations[shipName][0];\r\n        const secondSpot = aiShipLocations[shipName][i-1];\r\n\r\n        if (!firstSpot || !secondSpot) return\r\n        \r\n        if (Math.min(parseInt(firstSpot.split('-')[colRowIndex]), parseInt(secondSpot.split('-')[colRowIndex])) === parseInt(firstSpot.split('-')[colRowIndex])) {\r\n            return {\r\n                lowest: firstSpot,\r\n                highest: secondSpot\r\n            }\r\n        } else {\r\n            return {\r\n                lowest: secondSpot,\r\n                highest: firstSpot\r\n            }\r\n        }\r\n    }\r\n\r\n    const setSingleAIship = (shipLength, shipName) => {\r\n        while (aiShipLocations[shipName].length !== shipLength) {\r\n            aiShipLocations[shipName] = [];\r\n\r\n            for (let i = 0; i < shipLength; i++) {\r\n                if (i === 0) {\r\n                    aiShipLocations[shipName][0] = pickRandomBoardLocation();\r\n                } else if (i === 1) {\r\n                    const firstSpot = aiShipLocations[shipName][0];\r\n                    const possibleChoices = [\r\n                        colString(firstSpot) > 1 ? `${parseInt(colString(firstSpot)) - 1}-${parseInt(rowString(firstSpot))}` : null,\r\n                        colString(firstSpot) < 10 ? `${parseInt(colString(firstSpot)) + 1}-${parseInt(rowString(firstSpot))}` : null,\r\n                        rowString(firstSpot) > 1 ? `${parseInt(colString(firstSpot))}-${parseInt(rowString(firstSpot)) - 1}` : null,\r\n                        rowString(firstSpot) < 10 ? `${parseInt(colString(firstSpot))}-${parseInt(rowString(firstSpot)) + 1}` : null\r\n                    ]\r\n                    shuffleArray(possibleChoices);\r\n                    possibleChoices.every(choice => {\r\n                        if (choice && aiSpotClear(choice)) {\r\n                            aiShipLocations[shipName][1] = choice;\r\n                            return false;\r\n                        }\r\n                        return true;\r\n                    })\r\n                } else {\r\n                    const firstSpot = aiShipLocations[shipName][0];\r\n                    if (colString(firstSpot) !== colString(aiShipLocations[shipName][1])) {\r\n                        const lowest = lowestAndHighest(i, 0, shipName)?.lowest;\r\n                        const highest = lowestAndHighest(i, 0, shipName)?.highest;\r\n                        const possibleChoices = [\r\n                            lowest && parseInt(colString(lowest)) > 1 ? `${parseInt(colString(lowest)) - 1}-${rowString(lowest)}` : null,\r\n                            highest && parseInt(colString(highest)) < 10 ? `${parseInt(colString(highest)) + 1}-${rowString(highest)}` : null\r\n                        ]\r\n                        shuffleArray(possibleChoices);\r\n                        possibleChoices.every(choice => {\r\n                            if (choice && colString(choice) > 0 && colString(choice) < 11 && rowString(choice) > 0 && rowString(choice) < 11 && aiSpotClear(choice)) {\r\n                                aiShipLocations[shipName][i] = choice;\r\n                                return false;\r\n                            }\r\n                            return true;\r\n                        })\r\n                    } else {\r\n                        const lowest = lowestAndHighest(i, 1, shipName)?.lowest;\r\n                        const highest = lowestAndHighest(i, 1, shipName)?.highest;\r\n                        const possibleChoices = [\r\n                            lowest && parseInt(rowString(lowest)) > 1 ? `${colString(lowest)}-${parseInt(rowString(lowest)) - 1}` : null,\r\n                            highest && parseInt(rowString(lowest)) < 10 ? `${colString(highest)}-${parseInt(rowString(highest)) + 1}` : null\r\n                        ]\r\n                        shuffleArray(possibleChoices);\r\n                        possibleChoices.every(choice => {\r\n                            if (choice && colString(choice) > 0 && colString(choice) < 11 && rowString(choice) > 0 && rowString(choice) < 11 && aiSpotClear(choice)) {\r\n                                aiShipLocations[shipName][i] = choice;\r\n                                return false;\r\n                            }\r\n                            return true;\r\n                        })\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    const setAIships = () => {\r\n        //Destroyer\r\n        setSingleAIship(2, 'destroyer');\r\n        //submarine\r\n        setSingleAIship(3, 'submarine');\r\n        //cruiser\r\n        setSingleAIship(3, 'cruiser');\r\n        //battleship\r\n        setSingleAIship(4, 'battleship');\r\n        //carrier\r\n        setSingleAIship(5, 'carrier');\r\n        \r\n        // let colVal = 0;\r\n        // const tempArr = [];\r\n        // const sameSpots = [];\r\n        // for (let ship in aiShipLocations) {\r\n        //     for (let spot of aiShipLocations[ship]) {\r\n        //         const spotBlock = document.querySelector(`.opponentBoard [id=\"${spot}\"]`);\r\n        //         const aiShipSpot = document.createElement('div');\r\n        //         aiShipSpot.classList.add('aiShipSpotTest');\r\n        //         aiShipSpot.style.backgroundColor = `rgba(${colVal}, ${colVal}, ${colVal}, 0.5)`;\r\n        //         spotBlock?.appendChild(aiShipSpot);\r\n        //         if (tempArr.includes(spot)) {\r\n        //             sameSpots.push(spot);\r\n        //         } else tempArr.push(spot);\r\n        //     }\r\n        //     colVal += 50;\r\n        // }\r\n\r\n        setAiShipLayout(aiShipLocations);\r\n    }\r\n\r\n    const updateScore = async (scoreIncrement) => {\r\n        try {\r\n            const res = await fetch(`${process.env.REACT_APP_API_URL}/updateScore`, {\r\n                method: 'put',\r\n                headers: {'Content-Type': 'application/json'},\r\n                body: JSON.stringify({\r\n                    username: user.username,\r\n                    scoreIncrement: scoreIncrement\r\n                })\r\n            })\r\n            const scoreUpdated = await res.json();\r\n            if (!scoreUpdated) {\r\n                throw new Error('Could not increment score')\r\n            } else {\r\n                setUser({...user, score: scoreUpdated});\r\n            }\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    const handlePlayerWonAgainstAI = (scoreIncrement) => {\r\n        if (user?.username && user?.hash !== 'guest') {\r\n            updateScore(scoreIncrement);\r\n        }\r\n        setTimeout(() => {\r\n            window.alert('You Won!!!');\r\n            user?.hash === 'guest' || !user?.username ? setRoute('login') : setRoute('loggedIn');\r\n        }, 300);\r\n    }\r\n\r\n    const applyAIhitOrMiss = (clickedSquare) => {\r\n        document.querySelector('.preResultDiv').remove();\r\n        const clickedSquareID = clickedSquare.id;\r\n        let hit = false;\r\n        let shipHit = '';\r\n\r\n        for (let ship in aiShipLayout) {\r\n            for (let spot of aiShipLayout[ship]) {\r\n                if (spot === clickedSquareID) {\r\n                    hit = true;\r\n                    shipHit = ship;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (hit && clickedSquare.classList !== undefined) {\r\n            hitSquares.push(shipHit);\r\n            clickedSquare.classList.add('hitMarker');\r\n            clickedSquare.classList.add(`_${shipHit}`)\r\n            if (countHitsOnShip(shipHit) === parseInt(document.querySelector(`.${shipHit}`).id)) {\r\n                const squares = document.querySelectorAll('.singleSquare');\r\n                audio.shipSunkSound.play();\r\n                score += 1;\r\n                for (let square of squares) {\r\n                    if (square.classList.contains(`_${shipHit}`)) {\r\n                        square.classList.add('shipSunk');\r\n                    }\r\n                }\r\n            } else {\r\n                audio.hitSound.play();\r\n            }\r\n\r\n            if (score >= 5) {\r\n                handlePlayerWonAgainstAI(5);\r\n                return;\r\n            }\r\n        } else if (!hit && clickedSquare.classList !== undefined) {\r\n            clickedSquare.classList.add('missMarker');\r\n            audio.missSound.play();\r\n        }\r\n\r\n        setAIturn(true);\r\n    }\r\n\r\n    const onSquareClicked = async (e) => {\r\n        if (yourTurn && !e.target.classList.contains('hitMarker') && !e.target.classList.contains('missMarker')) {\r\n            // setSquareClicked(e.target);\r\n            setSkippedTurns(0);\r\n            setYourTurn(false);\r\n            const preResultDiv = document.createElement('div');\r\n            preResultDiv.classList.add('preResultDiv');\r\n            e.target.appendChild(preResultDiv);\r\n\r\n            audio.missileLaunch.play();\r\n            if (playingWithAI) {\r\n                const shot = e.target;\r\n                const missileLaunchDuration = audio.missileLaunch.duration() * 1000 - 100;\r\n                setTimeout(() => {\r\n                    applyAIhitOrMiss(shot);\r\n                }, missileLaunchDuration)\r\n            } else {\r\n                await fetch(`${process.env.REACT_APP_PUSHER_URL}/sendShotToOpponent?channelName=${opponentName}&target=${e.target.id}`)\r\n            }\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className='board opponentBoard'>\r\n            <div className='rows'>\r\n                <h3>A</h3>\r\n                <h3>B</h3>\r\n                <h3>C</h3>\r\n                <h3>D</h3>\r\n                <h3>E</h3>\r\n                <h3>F</h3>\r\n                <h3>G</h3>\r\n                <h3>H</h3>\r\n                <h3>I</h3>\r\n                <h3>J</h3>\r\n            </div>\r\n\r\n            <div className='cols'>\r\n                <h3>1</h3>\r\n                <h3>2</h3>\r\n                <h3>3</h3>\r\n                <h3>4</h3>\r\n                <h3>5</h3>\r\n                <h3>6</h3>\r\n                <h3>7</h3>\r\n                <h3>8</h3>\r\n                <h3>9</h3>\r\n                <h3>10</h3>\r\n            </div>\r\n\r\n            <div className='grid'>\r\n                <div className='allSqaures'>\r\n                    <Board onSquareClicked={onSquareClicked} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default OpponentBoard;\r\n\r\n","import React, { useEffect } from 'react';\r\nimport { useStoreState, useStoreActions } from 'easy-peasy';\r\nimport './navigation.css';\r\nimport notificationIcon from './notification.png';\r\nimport { Dropdown } from 'react-bootstrap';\r\nimport { audio } from '../../audio';\r\nconst FriendRequests = () => {\r\n\r\n    const { user, friendRequests, channel } = useStoreState(state => ({\r\n        user: state.user,\r\n        friendRequests: state.friendRequests,\r\n        channel: state.channel\r\n    }));\r\n\r\n    const { setUnsortedFriends, setFriendRequests } = useStoreActions(actions => ({\r\n        setUnsortedFriends: actions.setUnsortedFriends,\r\n        setFriendRequests: actions.setFriendRequests\r\n    }));\r\n\r\n    useEffect(() => {\r\n        updateRequests();\r\n\r\n        return () => {\r\n        }\r\n    },[])\r\n\r\n    useEffect(() => {\r\n        if (!channel) return\r\n        channel.bind('receive-friend-request', data => {\r\n            updateRequests();\r\n            return data\r\n        })\r\n\r\n        return () => {\r\n            if (channel) channel.unbind('receive-friend-request')\r\n        }\r\n    }, [channel])\r\n\r\n    const updateRequests = async () => {\r\n        const navBar = document.querySelector('nav');\r\n        try {\r\n            const res = await fetch(`${process.env.REACT_APP_API_URL}/getFriendRequests?username=${user.username}`);\r\n            if (!res.ok) {\r\n                throw new Error('Could not get friend requests')\r\n            }\r\n            const requests = await res.json();\r\n            if (requests !== null && requests !== '') {\r\n                navBar.style.setProperty('--notification-color', 'rgba(255,0,0,0.8)');\r\n                setFriendRequests(requests.split(','));\r\n                audio.notificationSound.play();\r\n            } else {\r\n                navBar.style.setProperty('--notification-color', 'transparent');\r\n                setFriendRequests(null);\r\n            }\r\n        } catch(err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n\r\n    const removeRequest = async (friend) => {\r\n        let newRequestList = '';\r\n        try {\r\n            const res = await fetch(`${process.env.REACT_APP_API_URL}/getFriendRequests?username=${user.username}`);\r\n            if (!res.ok) {\r\n                throw new Error('Could not get friend requests')\r\n            }\r\n            const requests = await res.json();\r\n            if (requests !== null && requests !== '') {\r\n                const newRequestListArray = requests.split(',');\r\n                if (newRequestListArray.length <= 1) {\r\n                    newRequestList = null;\r\n                } else {\r\n                    const index = newRequestListArray.indexOf(friend);\r\n                    if (index > -1) {\r\n                        newRequestListArray.splice(index, 1);\r\n                        newRequestList = newRequestListArray.join(',');\r\n                    }\r\n                }\r\n            }\r\n\r\n            const res2 = await fetch(`${process.env.REACT_APP_API_URL}/updateFriendRequests`, {\r\n                method: 'put',\r\n                    headers: {'Content-Type': 'application/json'},\r\n                    body: JSON.stringify({\r\n                        requestlist: newRequestList,\r\n                        username: user.username\r\n                    })\r\n            });\r\n            if (!res2.ok) {\r\n                throw new Error('Could not update friend requests');\r\n            }\r\n            const userRemoved = await res2.json();\r\n            if (userRemoved) {\r\n                updateRequests();\r\n            }\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    const onRemoveRequest = (e) => {\r\n        removeRequest(e.target.id);\r\n    }\r\n\r\n     const addFriend = async (friend) => {\r\n        document.querySelector('.addFriendInput').value = '';\r\n        let friendList = '';\r\n        let friendArray = [];\r\n        let friendlistOfFriends = '';\r\n//-----------------------------------------------------------------------------------\r\n        // Search the database to check if the name matches any users in the databse\r\n//-----------------------------------------------------------------------------------\r\n        try {\r\n            const res = await fetch(`${process.env.REACT_APP_API_URL}/findFriend?username=${friend}`);\r\n            if (!res.ok) {\r\n                throw new Error('User does not exist')\r\n            }\r\n            const user1 = await res.json();\r\n            if (user1.username === user.username) {\r\n                throw new Error('Cannot add self as friend')\r\n            } else if (user1.username) {\r\n                let friendlistOfFriendsArray = [];\r\n                if (user1?.friends?.length) {\r\n                    friendlistOfFriendsArray = user1.friends.split(',');\r\n                    if (friendlistOfFriendsArray.includes(user.username)) {\r\n                        throw new Error('You are already a friend of the user');\r\n                    }\r\n                }\r\n                friendlistOfFriendsArray.push(user.username);\r\n                if (friendlistOfFriendsArray.length > 1) {\r\n                    friendlistOfFriends = friendlistOfFriendsArray.join(',');\r\n                } else {\r\n                    friendlistOfFriends = friendlistOfFriendsArray[0];\r\n                }\r\n    //-----------------------------------------------------------------------------------\r\n                // If friend exists, grab the user's friend list string\r\n                // Make a temporary string and array with the new friend\r\n    //-----------------------------------------------------------------------------------\r\n                const res2 = await fetch(`${process.env.REACT_APP_API_URL}/getFriends?username=${user.username}`)\r\n                if (!res2.ok) {throw new Error('Problem accessing friends list')}\r\n                const friends = await res2.json();\r\n                if (friends?.length) {\r\n                    friends.forEach(f => {\r\n                        friendArray.push(f.username);\r\n                        if (f.username === friend) {\r\n                            throw new Error('User already your friend');\r\n                        }\r\n                    })\r\n                }\r\n                friendArray.push(friend);\r\n                friendList = friendArray.join(',');\r\n\r\n    //-----------------------------------------------------------------------------------\r\n                // Update the user's friend list with the new friends string\r\n                // Pass the updated friends array to 'fetchFriendData'\r\n    //-----------------------------------------------------------------------------------\r\n                const res3 = await fetch(`${process.env.REACT_APP_API_URL}/addFriend`, {\r\n                    method: 'put',\r\n                    headers: {'Content-Type': 'application/json'},\r\n                    body: JSON.stringify({\r\n                        username: user.username,\r\n                        friendlist: friendList\r\n                    })\r\n                })\r\n                if (!res3.ok) {throw new Error('Problem adding friend')}\r\n                const userAdded = await res3.json();\r\n                if (userAdded) {\r\n                    const allF = [];\r\n                    for (let f of friendArray) {\r\n                        try {\r\n                            const response = await fetch(`${process.env.REACT_APP_API_URL}/findFriend?username=${f}`);\r\n                            if (!response.ok) {throw new Error('User does not exist')}\r\n                            const user1 = await response.json();\r\n                            // if (opponentIsOnline(user1)) {\r\n                            //     allF.push({name: user1.username, status: 'online'})\r\n                            // } else {\r\n                            //     allF.push({name: user1.username, status: 'offline'})\r\n                            // }\r\n                            allF.push(user1);\r\n                        } catch(err) {\r\n                            console.log(err);\r\n                        }\r\n                    }\r\n                    setUnsortedFriends(allF);\r\n                }\r\n                const res4 = await fetch(`${process.env.REACT_APP_API_URL}/addSelfToFriend`, {\r\n                    method: 'put',\r\n                    headers: {'Content-Type': 'application/json'},\r\n                    body: JSON.stringify({\r\n                        friendlist: friendlistOfFriends,\r\n                        friendname: friend\r\n                    })\r\n                })\r\n                if (!res4.ok) {throw new Error('Problem adding self to friendlist of friend')}\r\n                const selfAdded = await res4.json();\r\n                if (selfAdded) {\r\n                    await fetch(`${process.env.REACT_APP_PUSHER_URL}/updateUserStatus?channelName=${friend}`)\r\n                }\r\n            }\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    const addFriendStart = async (e) => {\r\n        try {\r\n            const res = await fetch(`${process.env.REACT_APP_API_URL}/findFriend?username=${e.target.id}`);\r\n            if (!res.ok) {\r\n                throw new Error('User does not exist')\r\n            }\r\n            const user1 = await res.json();\r\n            if (user1.username) {\r\n                removeRequest(e.target.id);\r\n                addFriend(e.target.id);\r\n            }\r\n        } catch(err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Dropdown className='dropdown'>\r\n              <Dropdown.Toggle variant=\"success\" className='messageToggle' id=\"dropdown-basic\"><img src={notificationIcon} alt='Message Icon' className='hasSound' /></Dropdown.Toggle>\r\n              <Dropdown.Menu id='dropdowns'>\r\n              {\r\n                friendRequests !== null\r\n                ?\r\n                  friendRequests.map(request => {\r\n                    return (\r\n                        <div key={request} className='dropdownItem'>\r\n                            <div className='text'>Friend request from <h3 className=\"requesterName\">{request}</h3></div>\r\n                            <div className='acceptReject'>\r\n                                <button onClick={addFriendStart} id={request} className='acceptInvite'>Accept</button>\r\n                                <button onClick={onRemoveRequest} id={request} className='rejectInvite'>Reject</button>\r\n                            </div>\r\n                        </div>\r\n                    )\r\n                  })\r\n                  : (null)\r\n              }\r\n              </Dropdown.Menu>\r\n            </Dropdown>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default FriendRequests;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAcRJREFUSEvN1TuvTVEUxfHf9YwQRCEeBQlCp1AQpRBfwSMkQqFCTyUhOgmNQoEgfAESiUKp1N3rTYLOM96EDFlHju3svc8+xeU0uzhzrv+ac8w15phJ+I1NAsMwkMRsxD5sxSK8wE2cwy18b7psG2QhrmEdXuEZPmIWlmABxrGpgAeymiBzS+IUHMUJ/Og7JbmHcIxfHVmKl4ModZBpeIOZWI0HDe1YjKfl/9n4Uo2tg+zGeWzA7SGGYxXu4kip7I+UQZDp+IBPmN8majkt5zxHNJxTdPsNGgTpTc8BnB6iil7ITlws2gTYCFmOR8j3SQdItMnhK/CwDbIS94rof4nYAE2bEx997g8LmYGvHSr5/yB5F3nFo1ayBhNN7cq0XcC2Yh3fOrQrDziWcxW7+t2hOsLL8LiY3+YOgF7oDWypTmYVcgZ7EN/6PAIkLX5b3Hl/L78KeYfXWD8CoJcSG8ol59VBDuJkcdVROXHquPOpOkgqi5NOrRAiZhZWdkh8LTHZLdexvRKbBfa+Sfi62+egyziLwziOvQVwpa3kts3YX3HMb0ffgZeqo1oHGxaS/MSuRYwwO/5OZVPWFtQF0taVfwv5CWkmWRrIFhWsAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAANVJREFUSEvtldsNwjAMRU8lGIUxmAa2AqZhC8QoSEVGBEXByXVaQP0gUj9aP05ix7cD/WsEhp4w5RxN2PRTEG/DUfArVkEsoa3kl969b9VcUUh+IovJYck2G7IFzkXDDbQCbs9nXbsM6iQWp3qg7KGrqJIo+7IgavaaZY/0RAGkfTEQbybK3c8uVzn1OaBlC8tKmpNcRiZDDsBedDCXk1LLQuU6ArvKf8ITSU8wvT0+/JLztyAnq9CnIF65rAKTIdHG/yFvF0gN6u97sgEuUk77HSzv9Q6B6kcaQhzgbAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAMBJREFUSEvV1T0OQVEQxfEfiUSj0UioLISWaEXsxCIkOolKoxG1SkdiTXTIlfcSofDx3iVuP/97MufMTAFLDFHw2Tuih+1teYCdUPyMea0qYY3uPficQW3K2qDzV+ARxjEUP1gUzMva4zmq6CdBuH6SBzhwpqglsQ0pyw0cBM7QTNORl+K0xys00HoGHqD85vBMsP8Z+E2xQivqaD9T/Co4mnlR4rZAJdaARBnpAI22hL67j6OdpqzH9JAc092tgxdcNzF1tGRORAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAZFJREFUSEvt1T1I1lEUx/GPWUIYgTVEQ4saDYWDgjQJYXsEGSiCSDSWQhA4O2tDUFsQCAUZtLQVQZMYDaE4lCKCSEvREBSJFUfuo3/+/J8XX3hC6I73nnO+9/7Oy21Qh9VQB4adQq7iPkYxXesFa4U0YRx38R3HMIkx/KoGqwVyHK/RhRe4jsfoxwdcwrdKoGqQU/iIZtzGg0ywm3iIHziHtXKgSpA+PGUzbx2YLwgSwRfS/hCmikBFkEY8QyR5BZ34WkGOFrxDG17iCjay9nnIUcziQqqiO1ivllgcwQRuYQ7d+Fnyy0NC93sYxJMagudNBpJkI+mSm+d5yDIO48wuACWX1VTWreVe8htLOLsHyKeUn0PlIH+wuA+Q9qxKebn+KeQEnqMHIUPI+hbX8CUnbci1q5c8wjDeJECAYpzE/o39grxCb64aQ9qYaZf/Q/J9cvDkinF+vky3x78So720SqVaZB5DMr6Hwtl1EhdTL2Sdoy/e43Nm83T6BrbGRzoL25ls/1T7GfcwwrZd6wL5C/y5ZhoUNFmSAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAVtJREFUSEvt1T8sJmEQx/HPK0cEDaFBNArRoHSVwhVqjUJCVBriGkTnrlZIXH3FUbjqoiJBJ3qVSCiuUVwiJP4kXHB5kn2TzWbfdRveVyI22eTZ7Mx8Z347M1tQgatQAYa3B5nCyjOka8NpKf+iXEXIAh5ywHowilyQGvzNARnBeiUhzThIJDiNb0m5nlNJFb5GkHAex4tD4h++GnfvkGTjlequ15erJTYnV7hH6LhaUvfcML6nzElmJXE5enGJOYyhLmNIkxOfCulGfxQknGcxg5BpF1ZxmAH5iZvY+1RI3H8QO7jGIz5jDbc51s1/QbZwhEmcYB5hiX5IgEIiy9Hd+tRaift+jAJ+wTHC81DUAHG7sJI6ECrfxiZ+IEj3OzLcwH7an7EB9fgTyZWlUhMmsIgLtOMTdpPZ5JC6pOkAfqGxnJBA78NSVNVeOSoJMYP0nTjHWbkgJbX8BxLhaRrnQs3GAAAAAElFTkSuQmCC\"","import React from 'react';\r\nimport { useStoreState, useStoreActions } from 'easy-peasy';\r\nimport FriendRequests from './FriendRequests';\r\nimport soundIcon from './sound-icon.png';\r\nimport musicIcon from './music-icon.png';\r\nimport leaderboardIcon from './leaderboard.png';\r\nimport logOutIcon from './log-out.png';\r\nimport homeIcon from './home-icon.png';\r\nimport backArrow from './back-arrow.png';\r\nimport friendsIcon from './friends-icon.png';\r\nimport chatIcon from './chat-icon.png';\r\nimport './navigation.css';\r\n\r\nconst Navigation = ({ onRouteChange }) => {\r\n\r\n    const { user, route, soundOn, musicOn, isMobile, showChatMobile, showFriendsMobile, playingWithAI, opponentName } = useStoreState(state => ({\r\n        user: state.user,\r\n        route: state.route,\r\n        soundOn: state.stored.soundOn,\r\n        musicOn: state.stored.musicOn,\r\n        isMobile: state.stored.isMobile,\r\n        showChatMobile: state.showChatMobile,\r\n        showFriendsMobile: state.showFriendsMobile,\r\n        playingWithAI: state.playingWithAI,\r\n        opponentName: state.opponentName\r\n    }));\r\n\r\n    const { setSearch, setSoundOn, setMusicOn, setShowFriendsMobile, setShowChatMobile } = useStoreActions(actions => ({\r\n        setSearch: actions.setSearch,\r\n        setSoundOn: actions.setSoundOn,\r\n        setMusicOn: actions.setMusicOn,\r\n        setShowFriendsMobile: actions.setShowFriendsMobile,\r\n        setShowChatMobile: actions.setShowChatMobile\r\n    }));\r\n\r\n    const handleExitClick = async (e) => {\r\n        setSearch(false);\r\n        onRouteChange(e);\r\n        await fetch(`${process.env.REACT_APP_PUSHER_URL}/sendExitGame?channelName=${opponentName}`)\r\n    }\r\n\r\n    const setSoundClick = () => {\r\n        if (!isMobile) {\r\n            setSoundOn();\r\n        }\r\n    }\r\n\r\n    const setSoundTouch = () => {\r\n        if (isMobile) {\r\n            setSoundOn();\r\n        }\r\n    }\r\n\r\n    const setMusicClick = () => {\r\n        if (!isMobile) {\r\n            setMusicOn();\r\n        }\r\n    }\r\n\r\n    const setMusicTouch = () => {\r\n        if (isMobile) {\r\n            setMusicOn();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <nav className='nav'>\r\n            <div className='leftNav'>\r\n                <img alt='sound icon' src={soundIcon} onClick={setSoundClick} onTouchStart={setSoundTouch} className={`hasSound audioToggle soundToggle ${soundOn ? 'soundOn' : 'soundOff'}`} />\r\n                <img alt='music icon' src={musicIcon} onClick={setMusicClick} onTouchStart={setMusicTouch} className={`hasSound audioToggle musicToggle ${musicOn ? 'musicOn' : 'musicOff'}`} />\r\n            </div>\r\n            <div className='rightNav'>\r\n                {\r\n                route === 'login' || route === 'register'\r\n                ?\r\n                <>\r\n                    <img className='hasSound leaderboardIcon' src={leaderboardIcon} alt='leaderboard' value='goToLeaderboard' onClick={onRouteChange} />\r\n                </>\r\n                :\r\n                route === 'loggedIn'\r\n                ?\r\n                    !isMobile\r\n                    ?\r\n                    <>\r\n                        {/* <FriendRequests />\r\n                        <button value='goToLeaderboard' onClick={onRouteChange}>Leaderboard</button>\r\n                        <button value='logOut' onClick={onRouteChange}>Log Out</button> */}\r\n                        <FriendRequests />\r\n                        <img className='hasSound leaderboardIcon' src={leaderboardIcon} alt='leaderboard' value='goToLeaderboard' onClick={onRouteChange} />\r\n                        <img className='hasSound logOutIcon' src={logOutIcon} alt='log out' value='logOut' onClick={onRouteChange} />\r\n                    </>\r\n                    :\r\n                    <>\r\n                        <img className='hasSound friendsIcon' src={friendsIcon} alt='friends' onClick={() => setShowFriendsMobile(!showFriendsMobile)} />\r\n                        <FriendRequests />\r\n                        <img className='hasSound leaderboardIcon' src={leaderboardIcon} alt='leaderboard' value='goToLeaderboard' onClick={onRouteChange} />\r\n                        <img className='hasSound logOutIcon' src={logOutIcon} alt='log out' value='logOut' onClick={onRouteChange} />\r\n                    </>\r\n                :\r\n                <>\r\n                    {\r\n                    route === 'leaderboard'\r\n                    ?\r\n                        user?.username\r\n                        ?\r\n                        <>\r\n                            {/* <FriendRequests /> */}\r\n                            <img className='hasSound goHomeIcon' src={homeIcon} alt='go home' value='goHome' onClick={onRouteChange} />\r\n                            <img className='hasSound logOutIcon' src={logOutIcon} alt='log out' value='logOut' onClick={onRouteChange} />\r\n                        </>\r\n                        :\r\n                        <>\r\n                            <img className='hasSound goBackIcon' src={backArrow} alt='go back' value='goToLogin' onClick={onRouteChange} />\r\n                        </>\r\n                    : //route === 'game'\r\n                        user?.hash === 'guest' || !user?.hash\r\n                        ?\r\n                        <>\r\n                            {\r\n                                isMobile && !playingWithAI\r\n                                ? \r\n                                <div className='chatIconContainer'>\r\n                                    <img className='hasSound chatIcon' src={chatIcon} alt='chat' onClick={() => setShowChatMobile(!showChatMobile)} />\r\n                                </div>\r\n                                : null\r\n                            }\r\n                            <img className='hasSound logOutIcon' src={logOutIcon} alt='log out' value='logOut' onClick={handleExitClick} />\r\n                        </>\r\n                        :\r\n                        <>\r\n                        {\r\n                                isMobile && !playingWithAI\r\n                                ? \r\n                                <div className='chatIconContainer'>\r\n                                    <img className='hasSound chatIcon' src={chatIcon} alt='chat' onClick={() => setShowChatMobile(!showChatMobile)} />\r\n                                </div>\r\n                                : null\r\n                            }\r\n                            <img className='hasSound goHomeIcon' src={homeIcon} alt='go home' value='goHome' onClick={handleExitClick} />\r\n                            <img className='hasSound logOutIcon' src={logOutIcon} alt='log out' value='logOut' onClick={handleExitClick} />\r\n                        </>\r\n                    }\r\n                </>\r\n                }\r\n            </div>\r\n        </nav>\r\n    )\r\n}\r\n\r\nexport default Navigation;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAZNJREFUSEu11b9L1lEUx/GXPwIN0prN1bUhgposEspMssmWQjCqJWxyaAoSrSXBympqda0pGkoQ+gO0f6AEHWwJojTS4sj5gj34PI/49bnL98L33vc599zP59wmex+H0I4N/MbfWlub9sg9jKu4jTd4hR9lwW24jPP4hi08zXlVdr2M4/8lDGEOEeQUnpUFn8MtvMYH9OF0BfgIerCC1eIItTI+g0eYwEf8wcVdwB24jm68wJeAVwOfyEX3sYDNzKQS3IKjaMZd/MIsvgc4JPQcw2hNQEgr6vq24nYqwb14gHtYwzRm8CnAx/AOsWg9QXH0G1iuAo5EYm9I7grOZoABHI8SFuD3edsFpx44jhtZzmMRd/A551MY2S84Mj6JcVzAaJb0JSLJwYMC30yNlwbvLMVSWj2+UY7JnaUoc3mhnkId/11eyC0seq2E3MbS4k+yj2zLbbexX4P8TGNtG6TaCEs/xsM6lu5MS3cl9GstSxfBGtKEisD92eQPtG0GvCGNvihJQ56mAh4dL7KPh7TuY/oPvlCEY7YLExIAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAbxJREFUSEvt1EuIzmEUx/HPyF0kG2nSYCiyICxccil2lpgpSaxElGg0DaFsaLKgXBZDdsrCUtnJRqTYmAg7uWRGRLlfOnXeet83+v/feWtqylOnp+dfz/k+5/c/59diGFbLMDCMOMhkrMZ6HKxWqNFKJmJaVbRjGZZjAUZhDLUKlYHMwCrMwxy0YRZm4j2e4lnuS7FpKJBOnEfI8Q53cQf38AKf8DETH8OBoUB24jIWoR/jMiZgCdZkLMbolKxGoTJyVSCxT8fCjPn4ipd4lVWFjOuaqeRzJn2MR3iA53iNN3ibUp1qBrIWD/GjKn7VDfMhNAWZig8FDjFyIdFpm7ENX7LNY+JLddfYbNNQZysuol6umO5dOI2fKWM4QnwvhMxGN7bkxUHM/QtkEu7jCfYh5uYcNpSBXMBGXMmWjdeGhdRXMiXb9wjOZAXH0xzHFxlk+FEfjqYMXTjxj0pu4xt2ICq7hJinlUWQAVzF4ZyHHuxOUwyPqqzQvgMn0YrfOfV7caMIcjad9Hq+MhLdxJ48V98PW1+RVhI//1Ya5/ciSOi/H9vT8K6hNy0kXtvwKmOQDSetv/Af0pCEfwCqzmMah/JHMAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAxdJREFUSEvd1lnIV1UUBfCfjSRlpASN2EiWjRRNKNGEUQ+mNNFLZPVSVFJBgTQRQeVLSgMRFGUUQSUpZjRRkhQ0h9FI5tRAk4UN0iTrY1+5HS74IPTQgQ8+7r3nrL3XWnud/yj/wRq1mRh74hZsiz/wFua0Z7YgW2MRDsJf2AKzcR/WN5v3xgM4B79hSxyCm/AhrsA/2dMHGY37cSfe6B04FbfjiDqsezULr+DVATauwTeY14L8iGPx8cCmANyK03vvvsJ4vIwTq9Nt8BH2xRrs1geZgS/xbAMQCk7CC/V+1977xXgSv+AM7FcHf4pncBcO7YO8U3T0McLvAjxYNKWLVNyt0PEdjmpo3A7zMRExxkZNPseEqjZixwBP4HKMwY3I5gs6MfFQfXf+AL0p+k1c0oKktadxcrMpvMYx4fvCHsju5aBrB0DSSQDS6b86iW2fx+Rm0x64Dts3IFuVVQ/Dr709+S6uO7J71lk4dO2DT3BgzUj3zbSiKtxf1RSQwl7CFLxX7nsMeyFuHVktSISdi1OwrsQL9wEeix8akOuLymh2TM3MzZheDhsECWh8H4/Hrqn0YHyLe6qT3wsoE58DU0A6SQFn4nCchePxc9tJRD+vhirtZr2O7ysuJmFlPU8KZJpvqJRYUcXEUdHwUZyK/bG2oytVzMTDuLSAMmjRKjTF1smjVPg3HsHRWF78H4clNZCZnwxvnoXycQG5CDtUZnWUJ6tCVTh/t6fD19VNNAsVZ+PqmuwUsLBiKYP7RcXKbQH5oFodScxNrBx0MU7rfZd5WYadagCTymGgW2sCkkA8oCY+g3j3ANBr1X4CMTa+skQOHaEmdu1AYvXLsLRYWBaQtJVNETuXzx0DIHFbtBqHiJ57JO55Ec8hjss1EZ1i5dwlCdd0NCcg+ScREEtG5CGQ1ZVbO5f49+KEmouAhLIkwFr8VCC55D4LeEDeL+GSXeF6CCTxHTvGnqErf+E+hwakXekkl9nbOf//BZKceQo7VkjmLmjXuXi8gjLiJmV3wZ9dnDcbQv2qct30zf1JtKm5Gnm/AZ5HzANG5KjiAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAdFJREFUSEu91curTmEUx/HPkVskSbklMnAbmchAnInkD5CBmLhkykBiwkBRhkbUkVIyMTinQ1EGzEmR+z0Dl9ySkruW1iu99n733s7OmuzBXmt9n7We31pPn/9gff/AWIIvuFk3tglkGc5jDCZiFp7VAdWBbMAR3MdmXMUPTMWbkUACvgnH8AiL8SkTzsUtTKgDCJ+iStbgDE5iJ151JduP5Vg1Eki0Yh4elySZhGuYhjl4XQUrquQ0ruBgRfAKXMJaDPbyLYKMwlfEt8pCZU+xAyfKnMvUNZz3crSKgvH4gIV4UORfBpmJO5iccq1iLcBtjMb3budec/IEW3Ahgw5gAA9LiGdxA7uaQGbjOqZkUKySeznxK/G8APYx5ycU+tuqJj5asD4VFLKO6Q/ARWzEqS5QSHspPjeBxL46l6ebgXcZPC7vbAjb/0i4B99wqAkkfGMRvk8FdXfoBfblbot/67ANq5tCeikr5BvVhRrfJmQrYjXVvpMq6cb/OHncTz/2JvRw25DIFxtibMo7hrKzsX+xqtRVp5LwCclOTzF0JN9quzqQl9iN402GsW4V83E3q1hUFNRGuy7n+xPvS8zIX9YGJJKHfGPtFFobkMq2/gQE4FUaGykeQwAAAABJRU5ErkJggg==\"","import React, { useEffect } from 'react';\r\nimport { useStoreState, useStoreActions } from 'easy-peasy';\r\nimport { audio } from '../../audio';\r\n\r\nconst ChatBox = () => {\r\n    const { opponentName, chatText, showChatMobile, isMobile, playingWithAI, channel } = useStoreState(state => ({\r\n        opponentName: state.opponentName,\r\n        chatText: state.chatText,\r\n        showChatMobile: state.showChatMobile,\r\n        isMobile: state.stored.isMobile,\r\n        playingWithAI: state.playingWithAI,\r\n        channel: state.channel\r\n    }));\r\n\r\n    const { setChatText } = useStoreActions(actions => ({\r\n        setChatText: actions.setChatText\r\n    }));\r\n\r\n    const chatBox = document.querySelector('.chatBox');\r\n    const root = document.querySelector(':root');\r\n\r\n    useEffect(() => {\r\n        if (playingWithAI && !isMobile) document.querySelector('.chatContainer').style.display = 'none';\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (!chatBox) return\r\n        channel.bind('receive-msg', data => {\r\n            handleReceivedMessage(data.message);\r\n            return data\r\n        })\r\n\r\n        return () => {\r\n            channel.unbind('receive-msg')\r\n        }\r\n    }, [chatBox])\r\n\r\n    useEffect(() => {\r\n        if (showChatMobile) root.style.setProperty(\"--chatNotificationDisplay\", 'none')\r\n\r\n        document.addEventListener('keyup', handleEnterBtn);\r\n\r\n        return () => {\r\n            document.removeEventListener('keyup', handleEnterBtn);\r\n        }\r\n    },[chatBox, showChatMobile, chatText])\r\n\r\n    const handleReceivedMessage = (message) => {\r\n        const msgNode = document.createElement(\"DIV\");\r\n        msgNode.classList.add('message');\r\n        const textNode = document.createElement(\"H4\");\r\n        textNode.classList.add('opponentText');\r\n        const nameNode = document.createElement(\"H5\");\r\n        nameNode.classList.add('oppName');\r\n        const text = document.createTextNode(message);\r\n        const name = document.createTextNode(opponentName);\r\n        nameNode.appendChild(name);\r\n        textNode.appendChild(text);\r\n        msgNode.appendChild(nameNode);\r\n        msgNode.appendChild(textNode);\r\n        chatBox.appendChild(msgNode);\r\n        chatBox.scrollTop = chatBox.scrollHeight;\r\n\r\n        if (!showChatMobile) {\r\n            root.style.setProperty(\"--chatNotificationDisplay\", 'block');\r\n            audio.notificationSound.play();\r\n        }\r\n    }\r\n\r\n    const handleEnterBtn = async (e) => {\r\n            if (e.key === 'Enter' && chatText !== '') {\r\n                e.preventDefault();\r\n                audio.buttonClick.play();\r\n                const msgNode = document.createElement(\"DIV\");\r\n                msgNode.classList.add('message');\r\n                const textNode = document.createElement(\"H4\");\r\n                textNode.classList.add('userText');\r\n                const nameNode = document.createElement(\"H5\");\r\n                nameNode.classList.add('userName');\r\n                const text = document.createTextNode(chatText);\r\n                const name = document.createTextNode(\"You\");\r\n                nameNode.appendChild(name);\r\n                textNode.appendChild(text);\r\n                msgNode.appendChild(nameNode);\r\n                msgNode.appendChild(textNode);\r\n                chatBox.appendChild(msgNode);\r\n                setChatText('');\r\n                await fetch(`${process.env.REACT_APP_PUSHER_URL}/sendMessage?channelName=${opponentName}&message=${chatText}`)\r\n                document.querySelector('.chatInput').value = '';\r\n                chatBox.scrollTop = chatBox.scrollHeight;\r\n            }\r\n    }\r\n\r\n    return (\r\n        <div className={`${!showChatMobile && isMobile ? 'hide' : null} ${isMobile ? 'chatContainerMobile' : 'chatContainer'}`}>\r\n            <div className='chatBox'></div>\r\n            <input onChange={(e) => setChatText(e.target.value)} type='text' className='chatInput' placeholder='Type Here...' />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChatBox;\r\n","import React from 'react';\r\nimport './footer.css';\r\n\r\nconst Footer = () => {\r\n    return (\r\n        <footer><div className='footer'></div></footer>\r\n    )\r\n}\r\n\r\nexport default Footer;\r\n","import React, { useEffect } from 'react';\r\nimport { useStoreState, useStoreActions } from 'easy-peasy';\r\nimport UserBoard from './UserBoard';\r\nimport OpponentBoard from './OpponentBoard';\r\nimport Navigation from '../navigation/Navigation';\r\nimport ChatBox from './ChatBox';\r\nimport Footer from '../footer/Footer';\r\n\r\nconst Game = ({ onRouteChange }) => {\r\n    const { opponentName, user, checkOppStatusInterval, gameRoute, playerIsReady, yourTurn, playerTurnText, isMobile, showGameInstructions, opponentIsReady, firstGameInstructionLoad, gameTimer, gameCountdownInterval, skippedTurns, playingWithAI, channel } = useStoreState(state => ({\r\n        opponentName: state.opponentName,\r\n        user: state.user,\r\n        checkOppStatusInterval: state.checkOppStatusInterval,\r\n        gameRoute: state.gameRoute,\r\n        playerIsReady: state.playerIsReady,\r\n        yourTurn: state.yourTurn,\r\n        playerTurnText: state.playerTurnText,\r\n        isMobile: state.stored.isMobile,\r\n        showGameInstructions: state.stored.showGameInstructions,\r\n        opponentIsReady: state.opponentIsReady,\r\n        firstGameInstructionLoad: state.firstGameInstructionLoad,\r\n        gameTimer: state.gameTimer,\r\n        gameCountdownInterval: state.gameCountdownInterval,\r\n        skippedTurns: state.skippedTurns,\r\n        playingWithAI: state.playingWithAI,\r\n        channel: state.channel\r\n    }));\r\n\r\n    const { setCheckOppStatusInterval, setRoute, setGameRoute, setPlayerIsReady, setYourTurn, setPlayerTurnText, setOpponentIsReady, setShowGameInstructions, setFirstGameInstructionLoad, setGameTimer, setGameCountdownInterval, setSkippedTurns, setPlayigWithAI, setUser } = useStoreActions(actions => ({\r\n        setCheckOppStatusInterval: actions.setCheckOppStatusInterval,\r\n        setRoute: actions.setRoute,\r\n        setGameRoute: actions.setGameRoute,\r\n        setPlayerIsReady: actions.setPlayerIsReady,\r\n        setYourTurn: actions.setYourTurn,\r\n        setPlayerTurnText: actions.setPlayerTurnText,\r\n        setOpponentIsReady: actions.setOpponentIsReady,\r\n        setShowGameInstructions: actions.setShowGameInstructions,\r\n        setFirstGameInstructionLoad: actions.setFirstGameInstructionLoad,\r\n        setGameTimer: actions.setGameTimer,\r\n        setGameCountdownInterval: actions.setGameCountdownInterval,\r\n        setSkippedTurns: actions.setSkippedTurns,\r\n        setPlayigWithAI: actions.setPlayigWithAI,\r\n        setUser: actions.setUser\r\n    }));\r\n    \r\n    const pickUpShipInstructions = \r\n    !isMobile \r\n    ? \"Click once on the ship you want to move\"\r\n    : \"Tap once on the ship you want to move\"\r\n\r\n    const rotateShipInstructions = \r\n    !isMobile\r\n    ? 'Right click or press \"Spacebar\" while a ship is selected'\r\n    : \"When selected, tap the ship again\"\r\n\r\n    const dropShipInstructions = \r\n    !isMobile\r\n    ? \"Move the ship into position and left click again when ready to release\"\r\n    : \"Drag the selected ship and let go when the ship is in position\"\r\n\r\n    useEffect(() => {\r\n        let shipPlacementTimer = 90;\r\n        clearInterval(gameCountdownInterval);\r\n        setGameTimer(90);\r\n        setFirstGameInstructionLoad(true);\r\n        setPlayerIsReady(false);\r\n        setOpponentIsReady(playingWithAI ? true : false);\r\n        setGameRoute('placeShips');\r\n\r\n        if (!playingWithAI) {\r\n            setGameCountdownInterval(setInterval(() => {\r\n                setGameTimer(shipPlacementTimer - 1);\r\n                shipPlacementTimer -= 1;\r\n            }, 1000))\r\n        }\r\n\r\n        // const gamePage = document.querySelector('.gamePage');\r\n\r\n        channel.bind('receive-game-over', data => {\r\n            handlePlayerWon(20);\r\n            return data\r\n        })\r\n\r\n        channel.bind('receive-exit-game', data => {\r\n            window.alert('Opponent has left the game');\r\n            user.hash === 'guest' ? setRoute('login') : setRoute('loggedIn');\r\n            return data\r\n        })\r\n\r\n        if (!playingWithAI) setCheckOppStatusInterval(setInterval(checkIfOpponentIsOnlineAndInGame, 2000));\r\n\r\n        return () => {\r\n            channel.unbind('receive-game-over')\r\n            channel.unbind('receive-exit-game')\r\n            clearInterval(checkOppStatusInterval);\r\n            clearInterval(gameCountdownInterval);\r\n            setFirstGameInstructionLoad(true);\r\n            setGameTimer(90);\r\n            setYourTurn(false);\r\n            setSkippedTurns(0);\r\n            setPlayigWithAI(false);\r\n        }\r\n    },[])\r\n\r\n    useEffect(() => {\r\n        channel.bind('receive-ready-status', data => {\r\n            if (playerIsReady) {\r\n                setGameRoute('gameInProgress');\r\n            }\r\n            setOpponentIsReady(true);\r\n            return data\r\n        })\r\n\r\n        return () => {\r\n            channel.unbind('receive-ready-status')\r\n        }\r\n    }, [playerIsReady])\r\n\r\n    useEffect(() => {\r\n        let playerTurnTimer = 15;\r\n        clearInterval(gameCountdownInterval);\r\n        const shipContainers = document.querySelectorAll('.userBoard .ship');\r\n        let score = 0;\r\n        if (yourTurn) {\r\n            setPlayerTurnText('Your Turn')\r\n            shipContainers.forEach(shipContainer => {\r\n                if (shipContainer.childNodes[0].classList.contains('shipSunkUser')) {\r\n                    score += 1;\r\n                }\r\n            })\r\n            if (score >= shipContainers.length) {\r\n                handlePlayerLost(\"You Lost ):\");\r\n            } else {\r\n                if (gameRoute === 'gameInProgress' && !playingWithAI) {\r\n                    setGameCountdownInterval(setInterval(() => {\r\n                        setGameTimer(playerTurnTimer - 1);\r\n                        playerTurnTimer -= 1;\r\n                    }, 1000))\r\n                }\r\n            }\r\n        } else {\r\n            if (gameRoute === 'gameInProgress') {\r\n                setTimeout(() => setPlayerTurnText(playingWithAI ? \"Computer's turn\" : `${opponentName}'s Turn!`), 900)\r\n                setGameTimer(15);\r\n            } else setPlayerTurnText(playingWithAI ? \"Computer's turn\" : `${opponentName}'s Turn!`);\r\n        }\r\n    },[yourTurn])\r\n\r\n    useEffect(() => {\r\n        const readyBtn = document.querySelector('.readyBtn');\r\n        const instructionsBtn = document.querySelector('.instructionsBtn');\r\n        const timerElement = document.querySelector('.shipPlacementTimer');\r\n\r\n        if (gameTimer <= 0 && !playingWithAI) {\r\n            clearInterval(gameCountdownInterval);\r\n            if (gameRoute === 'gameInProgress') {\r\n                setYourTurn(false);\r\n                // if (playingWithAI) setAIturn(true);\r\n                (async () => {await fetch(`${process.env.REACT_APP_PUSHER_URL}/sendShotToOpponent?channelName=${opponentName}&target=oppOutOfTime`)})()\r\n                setSkippedTurns(skippedTurns + 1);\r\n            } else {\r\n                // handlePlayerLost(\"You were kicked from the game because you took too long to ready up\");\r\n                clearInterval(gameCountdownInterval);\r\n                if (!playingWithAI) timerElement.style.display = 'none';\r\n                setGameTimer(15);\r\n                setPlayerIsReady(true);\r\n                instructionsBtn?.classList.add('hide');\r\n                if (opponentIsReady) {\r\n                    setGameRoute('gameInProgress');\r\n                    setYourTurn(true);\r\n                } else {\r\n                    readyBtn.style.opacity = '0.3';\r\n                    setGameRoute('waiting');\r\n                }\r\n                if (!playingWithAI) (async () => {await fetch(`${process.env.REACT_APP_PUSHER_URL}/sendReadyStatus?channelName=${opponentName}`)})()\r\n            }\r\n        }\r\n    }, [gameTimer])\r\n\r\n    useEffect(() => {\r\n        if (skippedTurns >= 3 && !playingWithAI) {\r\n            handlePlayerLost(\"You've been kicked due to innactivity\");\r\n        }\r\n    }, [skippedTurns])\r\n\r\n    const handlePlayerWon = (scoreIncrement) => {\r\n        clearInterval(checkOppStatusInterval);\r\n        if (user?.hash !== 'guest') {\r\n            updateScore(scoreIncrement);\r\n        }\r\n        setTimeout(() => {\r\n            window.alert('You Won!!!');\r\n            user.hash === 'guest' ? setRoute('login') : setRoute('loggedIn');\r\n        }, 300);\r\n    }\r\n\r\n    const handlePlayerLost = async (msg) => {\r\n        if (!playingWithAI) await fetch(`${process.env.REACT_APP_PUSHER_URL}/gameOver?channelName=${opponentName}`)\r\n        setTimeout(() => {\r\n            window.alert(msg);\r\n            user?.hash === 'guest' || !user?.hash ? setRoute('login') : setRoute('loggedIn');\r\n        }, 300);\r\n    }\r\n\r\n    const checkIfOpponentIsOnlineAndInGame = async () => {\r\n        try {\r\n            const response = await fetch(`${process.env.REACT_APP_API_URL}/checkIfOppInGame?username=${opponentName}`)\r\n            if (!response.ok) {\r\n                throw new Error('Error')\r\n            }\r\n            const isOnline = await response.json();\r\n            if (!isOnline) {\r\n                window.alert('Opponent has left the game');\r\n                user.hash === 'guest' ? setRoute('login') : setRoute('loggedIn');\r\n            }\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n   }\r\n\r\n    const updateScore = async (scoreIncrement) => {\r\n        try {\r\n            const res = await fetch(`${process.env.REACT_APP_API_URL}/updateScore`, {\r\n                method: 'put',\r\n                headers: {'Content-Type': 'application/json'},\r\n                body: JSON.stringify({\r\n                    username: user.username,\r\n                    scoreIncrement: scoreIncrement\r\n                })\r\n            })\r\n            const scoreUpdated = await res.json();\r\n            if (!scoreUpdated) {\r\n                throw new Error('Could not increment score')\r\n            } else {\r\n                setUser({...user, score: scoreUpdated});\r\n            }\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    const handleReadyButton = () => {\r\n        const ships = document.querySelectorAll('.ship');\r\n        const readyBtn = document.querySelector('.readyBtn');\r\n        const instructionsBtn = document.querySelector('.instructionsBtn');\r\n        const timerElement = document.querySelector('.shipPlacementTimer');\r\n        let allShipsPlaced = true;\r\n\r\n        for (let ship of ships) {\r\n            if (ship.style.pointerEvents === 'none') {\r\n                ship.style.border = '3px solid rgba(255, 0, 0, 0.8)';\r\n                allShipsPlaced = false;\r\n                return;\r\n            }\r\n        }\r\n\r\n        if (allShipsPlaced) {\r\n            clearInterval(gameCountdownInterval);\r\n            if (!playingWithAI) timerElement.style.display = 'none';\r\n            setGameTimer(15);\r\n            setPlayerIsReady(true);\r\n            instructionsBtn?.classList.add('hide');\r\n            readyBtn.querySelector('button').innerText = `${!isMobile ? 'Waiting...' : '•••'}`;\r\n            for (let ship of ships) {\r\n                ship.style.cursor = 'default';\r\n                ship.style.border = null;\r\n                ship.style.pointerEvents = 'auto';\r\n            }\r\n            if (opponentIsReady) {\r\n                setGameRoute('gameInProgress');\r\n                setYourTurn(true);\r\n            } else {\r\n                readyBtn.style.opacity = '0.3';\r\n                setGameRoute('waiting');\r\n            }\r\n            if (!playingWithAI) (async () => {await fetch(`${process.env.REACT_APP_PUSHER_URL}/sendReadyStatus?channelName=${opponentName}`)})()\r\n        }\r\n    }\r\n\r\n    const handleInstructionsBtnClick = () => {\r\n        setShowGameInstructions(true);\r\n        if (firstGameInstructionLoad) {\r\n            setFirstGameInstructionLoad(false);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Navigation onRouteChange={onRouteChange} />\r\n            <UserBoard />\r\n            {\r\n            showGameInstructions\r\n            ?\r\n            <div className={`instructions`}>\r\n                <div>\r\n                    <h3>Picking up a ship</h3>\r\n                    <h5>{pickUpShipInstructions}</h5>\r\n                </div>\r\n\r\n                <div>\r\n                    <h3>Rotation</h3>\r\n                    <h5>{rotateShipInstructions}</h5>\r\n                </div>\r\n\r\n                <div>\r\n                    <h3>Dropping a ship</h3>\r\n                    <h5>{dropShipInstructions}</h5>\r\n                </div>\r\n            </div>\r\n            :\r\n            <button className={`instructionsBtn ${firstGameInstructionLoad ? 'firstGameInstructionLoad' : null}`} onClick={handleInstructionsBtnClick}><h2>i</h2></button>\r\n            }\r\n            {\r\n            gameRoute === 'gameInProgress'\r\n            ?\r\n            <div className='playerTurnTextContainer'>\r\n                <h3 className='playerTurnText'>{playerTurnText}</h3>\r\n                { yourTurn && !playingWithAI ? <h3 className='playerTurnTimer'>{gameTimer}</h3> : null }\r\n            </div>\r\n            : null\r\n            }            \r\n            {\r\n            gameRoute !== 'gameInProgress'\r\n            ? \r\n            <div className='readyBtn'>\r\n                { !playingWithAI ? <h3 className='shipPlacementTimer'>{gameTimer}</h3> : null }\r\n                <button onClick={handleReadyButton} className='btn'>{isMobile ? '✔️' : 'Ready'}</button>\r\n            </div>\r\n            : (null)\r\n            }\r\n            <OpponentBoard />\r\n            <ChatBox />\r\n            <Footer />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Game;\r\n","import React from 'react';\r\nimport Board from '../boards/Board';\r\nimport './homeBoard.css';\r\n\r\nconst HomeBoard = () => {\r\n    return (\r\n        <div className='board homeBoard'>\r\n{/*            <div className='rows'>\r\n                <h3>A</h3>\r\n                <h3>B</h3>\r\n                <h3>C</h3>\r\n                <h3>D</h3>\r\n                <h3>E</h3>\r\n                <h3>F</h3>\r\n                <h3>G</h3>\r\n                <h3>H</h3>\r\n                <h3>I</h3>\r\n                <h3>J</h3>\r\n            </div>\r\n\r\n            <div className='cols'>\r\n                <h3>1</h3>\r\n                <h3>2</h3>\r\n                <h3>3</h3>\r\n                <h3>4</h3>\r\n                <h3>5</h3>\r\n                <h3>6</h3>\r\n                <h3>7</h3>\r\n                <h3>8</h3>\r\n                <h3>9</h3>\r\n                <h3>10</h3>\r\n            </div>*/}\r\n\r\n            <div className='grid'>\r\n                <div className='allSqaures'>\r\n                    <Board />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default HomeBoard;\r\n\r\n","import React, { useEffect } from 'react';\r\nimport { useStoreState, useStoreActions } from 'easy-peasy';\r\nimport './findMatch.css';\r\n\r\nconst FindMatch = () => {\r\n    \r\n    const { search, user, route, channel } = useStoreState(state => ({\r\n        search: state.search,\r\n        user: state.user,\r\n        route: state.route,\r\n        channel: state.channel\r\n    }));\r\n\r\n    const { setSearch, setFindMatchInterval, setOpponentName, setRoute, setUser } = useStoreActions(actions => ({\r\n        setSearch: actions.setSearch,\r\n        setFindMatchInterval: actions.setFindMatchInterval,\r\n        setOpponentName: actions.setOpponentName,\r\n        setRoute: actions.setRoute,\r\n        setUser: actions.setUser\r\n    }));\r\n\r\n    useEffect(() => {\r\n        if ((route === 'login' || route === 'register')) {\r\n            if (user?.hash === 'guest') {\r\n                removeGuest();\r\n            }\r\n        }\r\n\r\n        return () => {\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (search) {\r\n            // setFindMatchInterval(setInterval(searchForMatch, 5000));\r\n            searchForMatch()\r\n        }\r\n    }, [search, user])\r\n\r\n    useEffect(() => {\r\n        if (channel) {\r\n            channel.bind('receive-go-to-game', data => {\r\n                setOpponentName(data.senderName)\r\n                setRoute('game')\r\n                return data\r\n            })\r\n        }\r\n\r\n        return () => {\r\n            if (channel) channel.unbind('receive-go-to-game')\r\n        }\r\n    }, [channel])\r\n\r\n    // useEffect(() => {\r\n    //     if (user?.username?.length && (route === 'login' || route === 'register')) {\r\n    //         console.log(user);\r\n    //         updateSearching();\r\n    //     }\r\n    // }, [user?.username])\r\n\r\n    const stopSearching = async () => {\r\n         try {\r\n            const response = await fetch(`${process.env.REACT_APP_API_URL}/updateSearching`, {\r\n                method: 'put',\r\n                headers: {'Content-Type': 'application/json'},\r\n                body: JSON.stringify({\r\n                    username: user.username,\r\n                    search: false\r\n                })\r\n            })\r\n            if (!response.ok) {throw new Error('Problem updating searching status')}\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    const updateSearching = async () => {\r\n        try {\r\n            const response = await fetch(`${process.env.REACT_APP_API_URL}/updateSearching`, {\r\n                method: 'put',\r\n                headers: {'Content-Type': 'application/json'},\r\n                body: JSON.stringify({\r\n                    username: user.username,\r\n                    search: !search\r\n                })\r\n            })\r\n            if (!response.ok) {throw new Error('Problem updating searching status')}\r\n            const searchChanged = await response.json();\r\n            if (searchChanged) {\r\n                setSearch(!search);\r\n            }\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    const searchForMatch = async () => {\r\n        try {\r\n            const response = await fetch(`${process.env.REACT_APP_API_URL}/findMatch`, {\r\n                method: 'put',\r\n                headers: {'Content-Type': 'application/json'},\r\n                body: JSON.stringify({\r\n                    username: user.username\r\n                })\r\n            })\r\n            if (!response.ok) {\r\n                throw new Error('Could not find match')\r\n            }\r\n            const match = await response.json();\r\n            if (match?.username) {\r\n                setOpponentName(match.username);\r\n                stopSearching();\r\n                setSearch(false);\r\n                const res2 = await fetch(`${process.env.REACT_APP_PUSHER_URL}/sendGoToGame?friendName=${match?.username}&username=${user?.username}`)\r\n                const opponentJoined = await res2.json()\r\n                if (opponentJoined) {\r\n                    setOpponentName(match.username)\r\n                    setRoute('game')\r\n                }\r\n            }\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    const removeGuest = async () => {\r\n        try {\r\n            const response = await fetch(`${process.env.REACT_APP_API_URL}/removeGuestUser`, {\r\n                method: 'delete',\r\n                headers: {'Content-Type': 'application/json'},\r\n                body: JSON.stringify({\r\n                    username: user?.username\r\n                })\r\n            })\r\n            if (!response.ok) {throw new Error('Problem removing guest')}\r\n            setSearch(false);\r\n            setUser(null);\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    const addGuest = async () => {\r\n        try {\r\n            const response = await fetch(`${process.env.REACT_APP_API_URL}/addGuestUser`, {\r\n                method: 'post',\r\n                headers: {'Content-Type': 'application/json'}\r\n            })\r\n            if (!response.ok) {throw new Error('Problem adding guest')}\r\n            const data = await response.json();\r\n            await setUser(data);\r\n            setSearch(true);\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={`findMatchContainer ${(route === 'login' || route === 'register') ? 'playAsGuest' : null}`}>\r\n            {\r\n                route === 'login' || route === 'register'\r\n                ? <button onClick={!search ? addGuest : removeGuest} className='findMatch'>{!search ? 'Play as Guest' : 'Searching...'}</button>\r\n                : <button onClick={updateSearching} className='findMatch'>{!search ? 'Find Match' : 'Searching...'}</button>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FindMatch;\r\n","import React, { useEffect } from 'react';\r\nimport { useStoreState, useStoreActions } from 'easy-peasy';\r\nimport './singleFriend.css';\r\n\r\nconst SingleFriend = ({ friendInGame, name, status }) => {\r\n\r\n    const { route, user, channel } = useStoreState(state => ({\r\n        route: state.route,\r\n        user: state.user,\r\n        channel: state.channel\r\n    }));\r\n\r\n    const { setOpponentName, setRoute } = useStoreActions(actions => ({\r\n        setOpponentName: actions.setOpponentName,\r\n        setRoute: actions.setRoute\r\n    }));    \r\n\r\n    useEffect(() => {\r\n\r\n        channel.bind('receive-go-to-game', data => {\r\n            setOpponentName(data.senderName);\r\n            setRoute('game');\r\n            return data\r\n        })\r\n\r\n        channel.bind('receive-invite', data => {\r\n            handleInvite(data)\r\n            return data\r\n        })\r\n\r\n\r\n        return () => {\r\n            channel.unbind('receive-go-to-game')\r\n            channel.unbind('receive-go-to-game')\r\n        }\r\n    },[])\r\n\r\n    useEffect(() => {\r\n        const btn = document.querySelector(`.btn${name}`);\r\n        if (status !== 'offline' && !friendInGame) {\r\n            btn.style.opacity = '0.8';\r\n            btn.disabled = false;\r\n            btn.childNodes[0].nodeValue = \"Invite\";\r\n        }\r\n    },[status, friendInGame])\r\n\r\n    const handleInvite = (data) => {\r\n        const btn = document.querySelector(`.btn${data.username}`);\r\n        if (route === 'loggedIn' && btn !== null) {\r\n            if (btn.disabled === true) {\r\n                btn.style.opacity = '0.8';\r\n                btn.disabled = false;\r\n            }\r\n            btn.childNodes[0].nodeValue = \"Accept\";\r\n        }\r\n    }\r\n\r\n    const sendInvite = async (e) => {\r\n        const friend = e.target.id;\r\n        try {\r\n            const response = await fetch(`${process.env.REACT_APP_API_URL}/findFriend?username=${friend}`)\r\n            const user1 = await response.json();\r\n            if (user1.username) {\r\n                await fetch(`${process.env.REACT_APP_PUSHER_URL}/sendInvite?username=${user.username}&friendName=${user1.username}`)\r\n                e.target.childNodes[0].nodeValue = \"Invite sent\";\r\n                e.target.style.opacity = '0.4';\r\n                e.target.style.cursor = 'default';\r\n                e.target.disabled = true;\r\n            }\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    const acceptInvite = async (e) => {\r\n        await fetch(`${process.env.REACT_APP_PUSHER_URL}/sendGoToGame?username=${user.username}&friendName=${name}`)\r\n        setOpponentName(e.target.id);\r\n        setRoute('game');\r\n    }\r\n\r\n    const handleOnClick = (e) => {\r\n        if (e.target.innerHTML === 'Invite') {\r\n            sendInvite(e)\r\n        } else if (e.target.innerHTML === 'Accept') {\r\n            acceptInvite(e)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div id={name} value={name} className='friendBlock'>\r\n            <div className='friendText'>\r\n                <h3>{name}</h3>\r\n                {\r\n                    friendInGame && status === 'online'\r\n                    ? <button disabled className={`btn${name} friendInGameBtn`}>In Game</button>\r\n                    : \r\n                        status === 'online'\r\n                        ? <button className={`btn${name} friendOnlineBtn`} onClick={handleOnClick} id={name}>Invite</button>\r\n                        : <button disabled className={`btn${name} friendOfflineBtn`}>Offline</button>\r\n                }\r\n            </div>\r\n            <div id={status} className={status}></div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SingleFriend;\r\n","import React, { useEffect } from 'react';\r\nimport { useStoreState, useStoreActions } from 'easy-peasy';\r\nimport SingleFriend from './SingleFriend';\r\nimport './friends.css';\r\n\r\nconst Friends = () => {\r\n    \r\n    const { unsortedFriends, user, allFriends, friendFilter, friendSearch, friendsOnline, getOnlineFriendsInterval, isMobile, showFriendsMobile, channel } = useStoreState(state => ({\r\n        unsortedFriends: state.unsortedFriends,\r\n        user: state.user,\r\n        allFriends: state.allFriends,\r\n        friendFilter: state.friendFilter,\r\n        friendSearch: state.friendSearch,\r\n        friendsOnline: state.friendsOnline,\r\n        getOnlineFriendsInterval: state.getOnlineFriendsInterval,\r\n        isMobile: state.stored.isMobile,\r\n        showFriendsMobile: state.showFriendsMobile,\r\n        channel: state.channel\r\n    }));\r\n\r\n    const { setUnsortedFriends, setAllFriends, setFriendFilter, setFriendSearch, setFriendsOnline, setGetOnlineFriendsInterval } = useStoreActions(actions => ({\r\n        setUnsortedFriends: actions.setUnsortedFriends,\r\n        setAllFriends: actions.setAllFriends,\r\n        setFriendFilter: actions.setFriendFilter,\r\n        setFriendSearch: actions.setFriendSearch,\r\n        setFriendsOnline: actions.setFriendsOnline,\r\n        setGetOnlineFriendsInterval: actions.setGetOnlineFriendsInterval\r\n    }));\r\n\r\n    let userFromLastFriendRequest;\r\n    \r\n    // Start fetching friends on component mount\r\n// -----------------------------------------------------------------------------------\r\n    useEffect(() => {\r\n        fetchFriends();\r\n\r\n        setGetOnlineFriendsInterval(setInterval(getOnlineFriends, 1000));\r\n\r\n        return () => {\r\n            clearInterval(getOnlineFriendsInterval);\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (channel !== user.username) return\r\n        channel.bind('update-friend-status', data => {\r\n            getOnlineFriends();\r\n            return data\r\n        })\r\n\r\n        return () => {\r\n            if (channel) channel.unbind('update-friend-status')\r\n        }\r\n    }, [channel])\r\n//-----------------------------------------------------------------------------------\r\n    // Sort the friends when fetching has finished/unsortedFriends has updated\r\n//-----------------------------------------------------------------------------------\r\n    useEffect(() => {\r\n        sortFriends();\r\n    },[friendsOnline, unsortedFriends])\r\n    \r\n//-----------------------------------------------------------------------------------\r\n    // Sort friends. Online at top\r\n//-----------------------------------------------------------------------------------\r\n    const sortFriends = () => {\r\n        const offlineFriends = [];\r\n        const justAdded = [];\r\n        let onlineSorted = [];\r\n        let offlineSorted = [];\r\n\r\n        unsortedFriends.forEach(f => {\r\n            if (f.username === userFromLastFriendRequest?.username) {\r\n                justAdded.push(f);\r\n            } else {\r\n                let addFriendToOffline = true;\r\n                friendsOnline.forEach(olF => {\r\n                    if (olF.username === f.username) {\r\n                        return addFriendToOffline = false;\r\n                    }\r\n                })\r\n\r\n                if (addFriendToOffline) {\r\n                    offlineFriends.push(f);\r\n                }\r\n            }\r\n        })\r\n\r\n        onlineSorted = friendsOnline.sort((a, b) => {\r\n            return a.username.toLowerCase() > b.username.toLowerCase() ? 1 : -1;\r\n        })\r\n\r\n        offlineSorted = offlineFriends.sort((a, b) => {\r\n            return a.username.toLowerCase() > b.username.toLowerCase() ? 1 : -1;\r\n        })\r\n        \r\n        if (justAdded.length) {\r\n            setAllFriends(justAdded.concat(onlineSorted).concat(offlineSorted));\r\n        } else {\r\n            setAllFriends(onlineSorted.concat(offlineSorted));\r\n        }\r\n    }\r\n\r\n    const getOnlineFriends = async () => {\r\n         try {\r\n            const response = await fetch(`${process.env.REACT_APP_API_URL}/getFriendsOnline?username=${user.username}`)\r\n            if (!response.ok) {throw new Error('Could not get online friends')}\r\n            const onlineFriends = await response.json();\r\n            setFriendsOnline(onlineFriends);\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n//-----------------------------------------------------------------------------------\r\n    // Get array of friends\r\n// -----------------------------------------------------------------------------------\r\n    const fetchFriends = async () => {\r\n        try {\r\n            const response = await fetch(`${process.env.REACT_APP_API_URL}/getFriends?username=${user.username}`)\r\n            if (!response.ok) {throw new Error('Problem accessing friends list')}\r\n            const friends = await response.json();\r\n            if (user?.friends?.length && friends?.length) {\r\n                setUnsortedFriends(friends);\r\n                getOnlineFriends();\r\n            } else {\r\n                setAllFriends([]);\r\n                setUnsortedFriends([]);\r\n                setFriendsOnline([]);\r\n            }\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n//-----------------------------------------------------------------------------------\r\n    // Send friend request\r\n//-----------------------------------------------------------------------------------\r\n    const sendFriendRequest = async () => {\r\n        document.querySelector('.addFriendInput').value = '';\r\n        const friendAlert = document.querySelector('.friendsContainer');\r\n        let friendName = '';\r\n        let friendsRequests = '';\r\n        let friendsRequestsArray = [];\r\n//-----------------------------------------------------------------------------------\r\n        // Check to see if friend already sent user request\r\n//-----------------------------------------------------------------------------------\r\n        try {\r\n            const res = await fetch(`${process.env.REACT_APP_API_URL}/getFriendRequests?username=${user.username}`);\r\n            if (!res.ok) {\r\n                throw new Error('Could not get friend requests')\r\n            }\r\n            const requests = await res.json();\r\n            if (requests !== null && requests !== '') {\r\n                const requestsArray = requests.split(',');\r\n                if (requestsArray.includes(friendSearch)) {\r\n                    friendAlert.style.setProperty('--add-friend-alert', '\"User already sent you a request\"');\r\n                    throw new Error('User already sent you a request')\r\n                }\r\n            }\r\n//-----------------------------------------------------------------------------------\r\n            // Check to see if friend exists\r\n//-----------------------------------------------------------------------------------\r\n            const res2 = await fetch(`${process.env.REACT_APP_API_URL}/findFriend?username=${friendSearch}`);\r\n            if (!res2.ok) {\r\n                friendAlert.style.setProperty('--add-friend-alert', '\"User does not exist\"');\r\n                throw new Error('User does not exist')\r\n            }\r\n            const user1 = await res2.json();\r\n            if (user1.username === user.username) {\r\n                friendAlert.style.setProperty('--add-friend-alert', '\"Cannot add yourself as a friend\"');\r\n                throw new Error('Cannot add self as friend')\r\n            } else if (user1.username) {\r\n                friendName = user1.username;\r\n//-----------------------------------------------------------------------------------\r\n                // Add user to friend's friendrequests\r\n//-----------------------------------------------------------------------------------\r\n                let friendList = [];\r\n                if (user1.friends !== null && user1.friends !== '') {\r\n                    friendList = user1.friends.split(',');\r\n                }\r\n                if (user1.friendrequests !== null && user1.friendrequests !== '') {\r\n                    friendsRequestsArray = user1.friendrequests.split(',');\r\n                    if (friendsRequestsArray.includes(user.username)) {\r\n                        friendAlert.style.setProperty('--add-friend-alert', '\"You have already sent them a request\"');\r\n                        throw new Error('You have already sent them a request');\r\n                    } else if (friendList.includes(user.username)) {\r\n                        friendAlert.style.setProperty('--add-friend-alert', '\"User is already your friend\"');\r\n                        throw new Error('User is already your friend');\r\n                    } else {\r\n                        friendsRequestsArray.push(user.username);\r\n                        friendsRequests = user1.friendrequests.concat(`,${user.username}`);\r\n                    }\r\n                } else {\r\n                    if (friendList.includes(user.username)) {\r\n                        friendAlert.style.setProperty('--add-friend-alert', '\"User is already your friend\"');\r\n                        throw new Error('User is already your friend');\r\n                    }\r\n                    friendsRequests = user.username;\r\n                    friendsRequestsArray = [user.username];\r\n                }\r\n            }\r\n            friendAlert.style.setProperty('--add-friend-alert', '\"\"');\r\n            const res3 = await fetch(`${process.env.REACT_APP_API_URL}/updateFriendRequests`, {\r\n                method: 'put',\r\n                    headers: {'Content-Type': 'application/json'},\r\n                    body: JSON.stringify({\r\n                        requestlist: friendsRequests,\r\n                        username: friendName\r\n                    })\r\n            });\r\n            if (!res3.ok) {\r\n                throw new Error('Could not add self to friendrequests of friend');\r\n            }\r\n            const selfAdded = await res3.json();\r\n            if (selfAdded) {\r\n                await fetch(`${process.env.REACT_APP_PUSHER_URL}/sendFriendRequest?channelName=${friendSearch}`)\r\n                userFromLastFriendRequest = user1;\r\n            }\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    const friendIsOnline = (last) => {\r\n        const curTime = Date.now();\r\n        if ((last > (curTime - 5000)) && last) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={`friendsContainer ${isMobile ? 'mobile' : null} ${(!showFriendsMobile && isMobile) ? 'hide' : null}`}>\r\n            <div className='friendsContainerHeader'>\r\n                    <h2>Friends</h2>\r\n                    <input className='friendSearch' onChange={(e) => setFriendFilter(e.target.value)} type='text' placeholder='Filter friends'/>\r\n            </div>\r\n            <div className='friendsSection'>\r\n                <div className='friendsListContainer'>\r\n                {\r\n                    allFriends.length\r\n                    ?\r\n                    <div className='friendsList'>\r\n                    {\r\n//-----------------------------------------------------------------------------------\r\n                        // Map through the user's friends\r\n                        // Return a single friend div w/ their username and status\r\n//-----------------------------------------------------------------------------------\r\n                        allFriends.map(f => {\r\n                            if (f.username && f.username.toLowerCase().includes(friendFilter.toLowerCase())) {\r\n                                if (friendIsOnline(f.lastonline)) {\r\n                                    return <SingleFriend friendInGame={f.ingame} key={f.username} name={f.username} \r\n                                    status='online' />\r\n                                } else {\r\n                                    return <SingleFriend friendInGame={f.ingame} key={f.username} name={f.username} \r\n                                    status='offline' />\r\n                                }\r\n                            } else return null\r\n                        })\r\n                    }\r\n                    </div>\r\n                    : <h4 className='noFriends'>No friends have been added</h4>\r\n                }\r\n                </div>\r\n            </div>\r\n            <div className='addFriend'>\r\n                <h3 className='addFriendText' >Add a friend</h3>\r\n                <input className='addFriendInput' onChange={(e) => setFriendSearch(e.target.value)} type='text' placeholder='Enter a username'/>\r\n                <button className='friendRequestBtn' onClick={sendFriendRequest}>Send</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Friends;\r\n","import React from 'react';\r\nimport './friends.css';\r\n\r\nconst FriendsHome = ({onRouteChange}) => {\r\n    return (\r\n    <div className='friendsContainer'>\r\n        <div className='friendsContainerHeader'>\r\n            <h2>Friends</h2>\r\n        </div>\r\n        <div className='logToSeeFriendsText'>\r\n            <h3>Log in to add and view friends here</h3>\r\n        </div>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default FriendsHome;\r\n","import { useStoreState, useStoreActions } from 'easy-peasy';\r\n\r\nconst Login = ({ onRouteChange}) => {\r\n    \r\n    const { userName, password, search } = useStoreState(state => ({\r\n        userName: state.userName,\r\n        password: state.password,\r\n        search: state.search\r\n    }));\r\n\r\n    const { setUserName, setPassword, setUser, setSearch } = useStoreActions(actions => ({\r\n        setUserName: actions.setUserName,\r\n        setPassword: actions.setPassword,\r\n        setUser: actions.setUser,\r\n        setSearch: actions.setSearch\r\n    }));\r\n    \r\n    const login = document.querySelector('.login');\r\n\r\n    const onSubmitLogin = async (e) => {\r\n        try {\r\n            const res = await fetch(`${process.env.REACT_APP_API_URL}/login`, {\r\n              method: 'put',\r\n              headers: {'Content-Type': 'application/json'},\r\n              body: JSON.stringify({\r\n                username: userName,\r\n                password: password\r\n              })\r\n            })\r\n            const user1 = await res.json();\r\n            if (user1.username) {\r\n                if (search) {\r\n                    setSearch(false);\r\n                }\r\n                setUser(user1);\r\n                onRouteChange(e);\r\n            } else if (user1 === 'no socketid') {\r\n                login.style.setProperty(\"--reg-log-alert\", '\"Server error. Please try again\"');\r\n            } else if (login !== null) {\r\n                login.style.setProperty(\"--reg-log-alert\", '\"The username or password you entered is incorrect\"');\r\n            }\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n\r\n    }\r\n\r\n    return (\r\n        <div className='login'>\r\n            <h1>Log In</h1>\r\n            <div className='username'>\r\n                <h4>Username</h4>\r\n                <input placeholder='Username...' onChange={(e) => setUserName(e.target.value)} type='text' />\r\n            </div>\r\n            <div className='password'>\r\n                <h4>Password</h4>\r\n                <input placeholder='Password...' onChange={(e) => setPassword(e.target.value)} type='password' />\r\n            </div>\r\n            <button className='loginBtn' value='login' onClick={onSubmitLogin}>Login</button>\r\n            <button value='goToRegister' onClick={onRouteChange} className='changeLogReg'>Register</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login;\r\n","import { useStoreState, useStoreActions } from 'easy-peasy';\r\n\r\nconst Register = ({ onRouteChange }) => {\r\n\r\n    const { userName, password, search } = useStoreState(state => ({\r\n        userName: state.userName,\r\n        password: state.password,\r\n        search: state.search\r\n    }));\r\n\r\n    const { setUserName, setPassword, setUser, setSearch } = useStoreActions(actions => ({\r\n        setUserName: actions.setUserName,\r\n        setPassword: actions.setPassword,\r\n        setUser: actions.setUser,\r\n        setSearch: actions.setSearch\r\n    }));\r\n\r\n    const register = document.querySelector('.register');\r\n\r\n    const onSubmitRegister = (e) => {\r\n        if (userName.length < 5) {\r\n            register.style.setProperty(\"--reg-log-alert\", '\"Username must be at least 5 characters\"');\r\n        } else if (userName.length > 10) {\r\n            register.style.setProperty(\"--reg-log-alert\", '\"Username cannot be more than 10 characters\"');\r\n        } else if (password.length < 5) {\r\n            register.style.setProperty(\"--reg-log-alert\", '\"Password must be at least 5 characters\"');\r\n        } else {\r\n            fetch(`${process.env.REACT_APP_API_URL}/register`, {\r\n              method: 'post',\r\n              headers: {'Content-Type': 'application/json'},\r\n              body: JSON.stringify({\r\n                username: userName,\r\n                password: password,\r\n              })\r\n            })\r\n            .then(response => response.json())\r\n            .then(user1 => {\r\n              if (user1.username) {\r\n                  if (search) {\r\n                      setSearch(false);\r\n                  }\r\n                setUser(user1);\r\n                onRouteChange(e);\r\n              } else if (user1 === 'no socketid') {\r\n                register.style.setProperty(\"--reg-log-alert\", '\"Server error. Please try again\"');\r\n                }\r\n                else if (!user1.ok) {\r\n                    register.style.setProperty(\"--reg-log-alert\", '\"Username has already been taken\"');\r\n              }\r\n            })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className='register'>\r\n            <h1>Register</h1>\r\n            <div className='username'>\r\n                <h4>Username</h4>\r\n                <input placeholder='Username...' onChange={(e) => setUserName(e.target.value)} type='text' />\r\n            </div>\r\n            <div className='password'>\r\n                <h4>Password</h4>\r\n                <input placeholder='Password...' onChange={(e) => setPassword(e.target.value)}type='password' />\r\n            </div>\r\n            <button className='registerBtn' value='register' onClick={onSubmitRegister}>Register</button>\r\n            <button value='goToLogin' onClick={onRouteChange} className='changeLogReg'>Login</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Register;\r\n\r\n","import React, { useEffect } from 'react';\r\nimport { useStoreState, useStoreActions } from 'easy-peasy';\r\n\r\nimport Navigation from '../navigation/Navigation';\r\n\r\nconst Leaderboard = ({ onRouteChange }) => {\r\n\r\n    const { topFive, route } = useStoreState(state => ({\r\n        topFive: state.topFive,\r\n        route: state.route\r\n    }));\r\n\r\n    const { setTopFive } = useStoreActions(actions => ({\r\n        setTopFive: actions.setTopFive\r\n    }));\r\n\r\n    useEffect(() => {\r\n        if (route === 'leaderboard') {\r\n            getTopPlayers();\r\n        }\r\n    },[route])\r\n\r\n    const getTopPlayers = async () => {\r\n        for (let i = 0; i < 5; i++) {\r\n            const response = await fetch(`${process.env.REACT_APP_API_URL}/getTopFive?userNum=${i}`)\r\n            if (!response.ok) {\r\n                throw new Error('Error')\r\n            }\r\n            const data = await response.json();\r\n            setTopFive(data);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Navigation onRouteChange={onRouteChange} />\r\n            {\r\n            topFive.length\r\n            ?\r\n            <div className='topFiveContainer'>\r\n                <div className='topFive'>\r\n                    {\r\n                    topFive.map(player => {\r\n                        return <h3 key={player.username} className='LBplayer'> {player.username} : <span className='score'>{player.score}</span></h3>\r\n                    })\r\n                    }\r\n                </div>\r\n            </div>\r\n            : null\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Leaderboard;\r\n","import React, { useEffect } from 'react';\r\nimport { useStoreState, useStoreActions } from 'easy-peasy';\r\nimport Game from './components/boards/Game';\r\nimport HomeBoard from './components/homeBoard/HomeBoard';\r\nimport FindMatch from './components/findMatch/FindMatch';\r\nimport Friends from './components/friends/Friends';\r\nimport FriendsHome from './components/friends/FriendsHome';\r\nimport Login from './components/logReg/Login';\r\nimport Register from './components/logReg/Register';\r\nimport Leaderboard from './components/leaderboard/Leaderboard';\r\nimport Navigation from './components/navigation/Navigation';\r\nimport Footer from './components/footer/Footer';\r\nimport { audio } from './audio';\r\nimport Pusher from 'pusher-js';\r\nimport './logReg.css';\r\nimport './homePageLogged.css';\r\nimport './gamePage.css';\r\nimport './leaderboard.css';\r\n\r\n// let showInstructions = true;\r\nconst App = () => {\r\n    const { getOnlineFriendsInterval, route, user, findMatchInterval, checkOppStatusInterval, search, updatLastOnlineInterval, soundOn, musicOn, isMobile, showFriendsMobile, audioStarted, deviceInPortrait, gameRoute, showGameInstructions, playingWithAI, pusher, opponentName, playerIsReady, opponentIsReady } = useStoreState(state => ({\r\n        getOnlineFriendsInterval: state.getOnlineFriendsInterval,\r\n        route: state.route,\r\n        user: state.user,\r\n        findMatchInterval: state.findMatchInterval,\r\n        checkOppStatusInterval: state.checkOppStatusInterval,\r\n        search: state.search,\r\n        updatLastOnlineInterval: state.updatLastOnlineInterval,\r\n        soundOn: state.stored.soundOn,\r\n        musicOn: state.stored.musicOn,\r\n        isMobile: state.stored.isMobile,\r\n        showFriendsMobile: state.showFriendsMobile,\r\n        audioStarted: state.audioStarted,\r\n        deviceInPortrait: state.deviceInPortrait,\r\n        gameRoute: state.gameRoute,\r\n        showGameInstructions: state.stored.showGameInstructions,\r\n        playingWithAI: state.playingWithAI,\r\n        pusher: state.pusher,\r\n        opponentName: state.opponentName,\r\n        playerIsReady: state.playerIsReady,\r\n        opponentIsReady: state.opponentIsReady\r\n    }));\r\n\r\n    const { setRoute, setUser, setSearch, setUpdatLastOnlineInterval, setAllFriends, setUnsortedFriends, setFriendsOnline, setFriendSearch, setPlayerIsReady, setUserName, setPassword, setAudioStarted, setShowFriendsMobile, setShowChatMobile, setShowGameInstructions, setDeviceInPortrait, setGameRoute, setPlayigWithAI, setPusher, setChannel, setOpponentIsReady } = useStoreActions(actions => ({\r\n        setRoute: actions.setRoute,\r\n        setUser: actions.setUser,\r\n        setSearch: actions.setSearch,\r\n        setUpdatLastOnlineInterval: actions.setUpdatLastOnlineInterval,\r\n        setAllFriends: actions.setAllFriends,\r\n        setUnsortedFriends: actions.setUnsortedFriends,\r\n        setFriendsOnline: actions.setFriendsOnline,\r\n        setFriendSearch: actions.setFriendSearch,\r\n        setPlayerIsReady: actions.setPlayerIsReady,\r\n        setUserName: actions.setUserName,\r\n        setPassword: actions.setPassword,\r\n        setAudioStarted: actions.setAudioStarted,\r\n        setShowFriendsMobile: actions.setShowFriendsMobile,\r\n        setShowChatMobile: actions.setShowChatMobile,\r\n        setShowGameInstructions: actions.setShowGameInstructions,\r\n        setDeviceInPortrait: actions.setDeviceInPortrait,\r\n        setGameRoute: actions.setGameRoute,\r\n        setPlayigWithAI: actions.setPlayigWithAI,\r\n        setPusher: actions.setPusher,\r\n        setChannel: actions.setChannel,\r\n        setOpponentIsReady: actions.setOpponentIsReady\r\n    }));\r\n\r\n    const onRouteChange = async (e) => {\r\n        const value = e.target.getAttribute('value');\r\n        switch(value) {\r\n            case 'logOut':\r\n                if (user?.username) {\r\n                    setSearch(false);\r\n                }\r\n                setRoute('login');\r\n                break;\r\n            case 'goToRegister':\r\n                setRoute('register');\r\n                break;\r\n            case 'goToLogin':\r\n                setRoute('login');\r\n                break;\r\n            case 'goHome':\r\n                setRoute('loggedIn');\r\n                break;\r\n            case 'goToLeaderboard':\r\n                setRoute('leaderboard');\r\n                break;\r\n            case 'login':\r\n                setRoute('loggedIn');\r\n                break;\r\n            case 'register':\r\n                setRoute('loggedIn');\r\n                break;\r\n            case 'game':\r\n                if (user?.username) {\r\n                    setSearch(false);\r\n                }\r\n                setRoute('game');\r\n                break;\r\n            default:\r\n                if (user?.username) {\r\n                    setSearch(false);\r\n                }\r\n                setRoute('login');\r\n        }\r\n    }\r\n\r\n    const isDevicePortrait = () => {\r\n        setDeviceInPortrait(window.screen.width < window.screen.height);\r\n    }\r\n\r\n    useEffect(() => {\r\n        setTimeout(() => {\r\n            isDevicePortrait();\r\n            guestCleanup();\r\n        }, 10);\r\n\r\n        window.addEventListener('resize', isDevicePortrait);\r\n        document.addEventListener('mouseover', handleMouseOver);\r\n        window.addEventListener('beforeunload', handleBeforeUnload)\r\n\r\n        return () => {\r\n            window.removeEventListener('resize', isDevicePortrait);\r\n            document.removeEventListener('mouseover', handleMouseOver);\r\n            window.removeEventListener('beforeunload', handleBeforeUnload)\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (soundOn) {\r\n            if (!isMobile) {\r\n                audio.hoverSound.mute(false);\r\n            }\r\n            audio.ambientWaves.mute(false);\r\n            audio.buttonClick.mute(false);\r\n            audio.hitSound.mute(false);\r\n            audio.missSound.mute(false);\r\n            audio.shipSunkSound.mute(false);\r\n            audio.notificationSound.mute(false);\r\n            audio.pickUpShip.mute(false);\r\n            audio.dropShip.mute(false);\r\n            audio.rotateShip.mute(false);\r\n            audio.missileLock.mute(false);\r\n            audio.missileLaunch.mute(false);\r\n            audio.incomingMissile.mute(false);\r\n            \r\n        } else {\r\n            if (!isMobile) {\r\n                audio.hoverSound.mute(true);\r\n            }\r\n            audio.ambientWaves.mute(true);\r\n            audio.buttonClick.mute(true);\r\n            audio.hitSound.mute(true);\r\n            audio.missSound.mute(true);\r\n            audio.shipSunkSound.mute(true);\r\n            audio.notificationSound.mute(true);\r\n            audio.pickUpShip.mute(true);\r\n            audio.dropShip.mute(true);\r\n            audio.rotateShip.mute(true);\r\n            audio.missileLock.mute(true);\r\n            audio.missileLaunch.mute(true);\r\n            audio.incomingMissile.mute(true);\r\n        }\r\n    }, [soundOn, isMobile])\r\n\r\n    useEffect(() => {\r\n        if (musicOn) {\r\n            audio.lobbyTheme.mute(false);\r\n            audio.gameTheme.mute(false);\r\n            audio.shipPlacementTheme.mute(false);\r\n        } else {\r\n            audio.lobbyTheme.mute(true);\r\n            audio.gameTheme.mute(true);\r\n            audio.shipPlacementTheme.mute(true);\r\n        }\r\n    }, [musicOn])\r\n\r\n    useEffect(() => {\r\n        if (user?.username) setChannel(pusher.subscribe(user.username))\r\n    }, [pusher])\r\n\r\n    useEffect(() => {\r\n        if (user?.username?.length) {\r\n            setPusher(new Pusher(process.env.REACT_APP_KEY, {\r\n                cluster: process.env.REACT_APP_CLUSTER,\r\n                authEndpoint: `${process.env.REACT_APP_PUSHER_URL}/auth`,\r\n                auth: {params: {username: user.username}}\r\n            }))\r\n            \r\n            if (route !== 'login' && route !== 'register') {\r\n                stopSearching();\r\n                updateInGameStatus(false);\r\n            }\r\n            setUpdatLastOnlineInterval(setInterval(updateLastOnline, 1000));\r\n        } else {\r\n            setUserName(null);\r\n            setPassword(null);\r\n            clearInterval(updatLastOnlineInterval);\r\n            clearInterval(findMatchInterval);\r\n        }\r\n\r\n        return () => {\r\n            clearInterval(updatLastOnlineInterval);\r\n        }\r\n    }, [user?.username])\r\n\r\n    useEffect(() => {\r\n        if (!search) {\r\n            clearInterval(findMatchInterval);\r\n            if (user?.username) {\r\n                stopSearching();\r\n            }\r\n        }\r\n    }, [search])\r\n    \r\n    useEffect(() => {\r\n        if (route === 'game') {\r\n            setSearch(false);\r\n            if (user?.username) updateInGameStatus(true);\r\n            clearInterval(getOnlineFriendsInterval);\r\n            if (user?.username) stopSearching();\r\n            setShowChatMobile(false);\r\n            if (gameRoute !== 'gameInProgress') {\r\n                if (audio.lobbyTheme.playing()) {\r\n                    // audio.lobbyTheme.fade(0.5, 0, 2000);\r\n                    audio.lobbyTheme.stop();\r\n                } \r\n                if (!audio.shipPlacementTheme.playing()) {\r\n                    // audio.lobbyTheme.fade(0.5, 0, 2000);\r\n                    audio.shipPlacementTheme.play();\r\n                } \r\n                if (!audio.ambientWaves.playing()) {\r\n                    // audio.ambientWaves.fade(0, 0.2, 1000);\r\n                    audio.ambientWaves.play();\r\n                }\r\n            } else {\r\n                if (!audio.gameTheme.playing()) {\r\n                    // audio.gameTheme.fade(0, 0.3, 500);\r\n                    audio.gameTheme.play();\r\n                }\r\n                if (audio.shipPlacementTheme.playing()) {\r\n                    // audio.lobbyTheme.fade(0.5, 0, 2000);\r\n                    audio.shipPlacementTheme.stop();\r\n                } \r\n            }\r\n        } else {\r\n            setGameRoute('placeShips');\r\n            setPlayerIsReady(false);\r\n            setOpponentIsReady(false);\r\n            if (user?.username?.length) {\r\n                updateInGameStatus(false);\r\n            }\r\n            clearInterval(checkOppStatusInterval);\r\n            if (audioStarted && !audio.lobbyTheme.playing()) {\r\n                // audio.lobbyTheme.fade(0, 0.5, 10);\r\n                audio.lobbyTheme.play();\r\n            } \r\n            if (audio.gameTheme.playing()) {\r\n                // audio.gameTheme.fade(0.3, 0, 2000);\r\n                audio.gameTheme.stop();\r\n            }\r\n            if (audio.shipPlacementTheme.playing()) {\r\n                // audio.gameTheme.fade(0.3, 0, 2000);\r\n                audio.shipPlacementTheme.stop();\r\n            }\r\n            if (audio.ambientWaves.playing()) {\r\n                // audio.ambientWaves.fade(0.2, 0, 2000);\r\n                audio.ambientWaves.stop();\r\n            }\r\n        }\r\n\r\n        \r\n        document.addEventListener('click', handleMouseDown);\r\n        \r\n        return () => {\r\n            document.removeEventListener('click', handleMouseDown);\r\n        }\r\n    }, [route, gameRoute, showGameInstructions, audioStarted])\r\n\r\n    useEffect(() => {\r\n        if ((route === 'login') || (route === 'register')) {\r\n            if (user?.hash !== 'guest') {\r\n                setUser(null);\r\n            }\r\n            clearInterval(getOnlineFriendsInterval);\r\n            setAllFriends([]);\r\n            setUnsortedFriends([]);\r\n            setFriendsOnline([]);\r\n            setFriendSearch('');\r\n        }\r\n\r\n        if (route === 'loggedIn') {\r\n            setShowFriendsMobile(false);\r\n        }\r\n    }, [route])\r\n\r\n    const stopSearching = async () => {\r\n        try {\r\n           const response = await fetch(`${process.env.REACT_APP_API_URL}/updateSearching`, {\r\n               method: 'put',\r\n               headers: {'Content-Type': 'application/json'},\r\n               body: JSON.stringify({\r\n                   username: user?.username,\r\n                   search: false\r\n               })\r\n           })\r\n           if (!response.ok) {throw new Error('Problem updating searching status')}\r\n       } catch(err) {\r\n           console.log(err);\r\n       }\r\n   }\r\n\r\n    const updateLastOnline = async () => {\r\n        try {\r\n            const response = await fetch(`${process.env.REACT_APP_API_URL}/updateOnlineStatus`, {\r\n                method: 'put',\r\n                headers: {'Content-Type': 'application/json'},\r\n                body: JSON.stringify({\r\n                    username: user?.username\r\n                })\r\n            })\r\n            if (!response.ok) {\r\n                throw new Error('Error');\r\n            }\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    const guestCleanup = async () => {\r\n        try {\r\n            const response = await fetch(`${process.env.REACT_APP_API_URL}/guestCleanup`, {\r\n                method: 'delete',\r\n                headers: {'Content-Type': 'application/json'}\r\n            })\r\n            if (!response.ok) {throw new Error('Problem adding guest')}\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    const handleMouseDown = (e) => {\r\n        if (!audioStarted && !audio.lobbyTheme.playing() && route !== 'game') {\r\n            audio.lobbyTheme.play();\r\n            setAudioStarted();\r\n        }\r\n\r\n        if (\r\n            ((e.target.tagName === 'BUTTON') && (!e.target.classList.contains('messageToggle')))\r\n            ||\r\n            (e.target.classList.contains('hasSound'))\r\n        ) {\r\n            audio.buttonClick.play();\r\n        }\r\n\r\n        if (showGameInstructions) {\r\n            setShowGameInstructions(false);\r\n        }\r\n    }\r\n\r\n    let playHoverSound = true;\r\n    const handleMouseOver = (e) => {\r\n        if (\r\n            (((e.target.tagName === 'BUTTON') && (!e.target.classList.contains('messageToggle')))\r\n            ||\r\n            (e.target.classList.contains('hasSound')))\r\n        ) {\r\n            if (playHoverSound) {\r\n                audio.hoverSound.play();\r\n                playHoverSound = false;\r\n            }\r\n        } else {\r\n            playHoverSound = true;\r\n        }\r\n    }\r\n\r\n    const updateInGameStatus = async (inGame) => {\r\n        try {\r\n            const response = await fetch(`${process.env.REACT_APP_API_URL}/setInGame`, {\r\n                method: 'put',\r\n                headers: {'Content-Type': 'application/json'},\r\n                body: JSON.stringify({\r\n                    username: user?.username,\r\n                    isInGame: inGame\r\n                })\r\n            })\r\n            if (!response.ok) {\r\n                throw new Error('Error');\r\n            }\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    const handleBeforeUnload = async (e) => {\r\n        e.preventDefault();\r\n        if (user?.username) {\r\n            stopSearching();\r\n            updateInGameStatus(false);\r\n        }\r\n        if (route === 'game') {\r\n            if (!playingWithAI && opponentName) await fetch(`${process.env.REACT_APP_PUSHER_URL}/sendExitGame?channelName=${opponentName}`)\r\n        }\r\n        // e.returnValue = '';\r\n    }\r\n\r\n    document.onkeydown = (e) => {\r\n        const loginBtn = document.querySelector('.loginBtn');\r\n        const registerBtn = document.querySelector('.registerBtn');\r\n        const logUsername = document.querySelector('.login > .username > input');\r\n        const registerUsername = document.querySelector('.register > .username > input');\r\n        const logPassword = document.querySelector('.login > .password > input');\r\n        const registerPassword = document.querySelector('.register > .password > input');\r\n        const friendRequestBtn = document.querySelector('.friendRequestBtn');\r\n\r\n        if ((e.key === 'Enter') && (route === 'login' || route === 'register')) {\r\n            e.preventDefault();\r\n            if ((logUsername?.value?.length && logPassword?.value?.length) || (registerUsername?.value?.length && registerPassword?.value?.length)) {\r\n                audio.buttonClick.play();\r\n                route === 'login'\r\n                ? loginBtn.click()\r\n                : registerBtn.click()\r\n            }\r\n        } else if ((e.key === 'Enter') && (route === 'loggedIn')) {\r\n            e.preventDefault();\r\n            audio.buttonClick.play();\r\n            friendRequestBtn.click();\r\n        }\r\n    };\r\n\r\n    const handlePlayAIbutton = () => {\r\n        // if (search) return;\r\n        setPlayigWithAI(true);\r\n        setRoute('game');\r\n    }\r\n\r\n    return (\r\n    <>\r\n        {\r\n        !deviceInPortrait && isMobile\r\n        ? <div className='pleaseRotate'><h1>Please rotate your device</h1></div>\r\n        : null\r\n        }\r\n        {\r\n        route === 'login' || route === 'register'\r\n        ?\r\n        <div className={`logRegPage ${isMobile ? 'mobile' : null}`}>\r\n            <Navigation onRouteChange={onRouteChange} />\r\n            {\r\n                !isMobile \r\n                ? <FriendsHome onRouteChange={onRouteChange}/>\r\n                : null\r\n            }\r\n            <div className='homeText'>\r\n                <h1>Battleship</h1>\r\n            </div>\r\n            <div className='playGameBtnContainer'>\r\n                <FindMatch />\r\n                <div className={'playAIbtnContainer'}>\r\n                    <button onClick={handlePlayAIbutton} className='playAIbtn'>Play with Computer</button>\r\n                </div>\r\n            </div>\r\n            <div className='logReg'>\r\n                {\r\n                    route === 'login'\r\n                    ? <Login onRouteChange={onRouteChange}/>\r\n                    : <Register onRouteChange={onRouteChange}/>\r\n                }\r\n            </div>\r\n            <Footer />\r\n        </div>\r\n        :\r\n        <>\r\n            {\r\n            route === 'loggedIn' || route === 'leaderboard' \r\n            ?\r\n                user?.username?.length\r\n                ?\r\n                <>\r\n                    <div className={`homePageLogged ${route === 'leaderboard' ? 'hide' : null} ${isMobile ? 'mobile' : null}`}>\r\n                        <Navigation onRouteChange={onRouteChange} />\r\n                        <Friends />\r\n                        <div className={`matchAndBoard ${showFriendsMobile ? 'hide' : null}`}>\r\n                        <div className='playGameBtnContainer'>\r\n                            <FindMatch />\r\n                            <div className={'playAIbtnContainer'}>\r\n                                <button onClick={handlePlayAIbutton} className='playAIbtn'>Play with Computer</button>\r\n                            </div>\r\n                        </div>\r\n                            <HomeBoard />\r\n                        </div>\r\n                        <div className='userScore'>\r\n                            <h3><span className='scoreText'>Score:</span> <span className='scoreValue'>{user.score}</span></h3>\r\n                        </div>\r\n                        <Footer />\r\n                    </div>\r\n                    <div className={`leaderboard ${route === 'loggedIn' ? 'hide' : null}`}>\r\n                        <Leaderboard onRouteChange={onRouteChange} />\r\n                        <Footer />\r\n                    </div>\r\n                </>\r\n                :\r\n                <div className={`leaderboard ${isMobile ? 'mobile' : null}`}>\r\n                    <Leaderboard onRouteChange={onRouteChange} />\r\n                    <Footer />\r\n                </div>\r\n            : \r\n            <div className={`gamePage ${isMobile ? 'mobile' : 'desktop'}`}>\r\n                <Game onRouteChange={onRouteChange} />\r\n            </div>\r\n            }\r\n        </>\r\n        }       \r\n    </>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import 'react-app-polyfill/ie11';\nimport 'react-app-polyfill/ie9';\nimport 'react-app-polyfill/stable';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { StoreProvider, createStore } from 'easy-peasy';\nimport model from './model';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nconst store = createStore(model);\n\nReactDOM.render(\n  <StoreProvider store={store}>\n        <App />\n    </StoreProvider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}